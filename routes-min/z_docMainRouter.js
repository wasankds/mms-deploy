const _0x496fa5=_0x40e4;(function(_0x35f772,_0x2c8a26){const _0x5caa46=_0x40e4,_0x36c48d=_0x35f772();while(!![]){try{const _0x3b4cac=-parseInt(_0x5caa46(0xe5))/0x1+-parseInt(_0x5caa46(0x16d))/0x2*(parseInt(_0x5caa46(0xab))/0x3)+-parseInt(_0x5caa46(0x19b))/0x4*(-parseInt(_0x5caa46(0x143))/0x5)+parseInt(_0x5caa46(0x17f))/0x6+parseInt(_0x5caa46(0x163))/0x7*(parseInt(_0x5caa46(0x170))/0x8)+parseInt(_0x5caa46(0xa4))/0x9+-parseInt(_0x5caa46(0x121))/0xa;if(_0x3b4cac===_0x2c8a26)break;else _0x36c48d['push'](_0x36c48d['shift']());}catch(_0xa3481f){_0x36c48d['push'](_0x36c48d['shift']());}}}(_0x231d,0xb7cd3));const _0x5c6afd=(function(){const _0xa9118=_0x40e4,_0x1aebe1={'PNyKN':function(_0x1f4c1e,_0x51dd13){return _0x1f4c1e===_0x51dd13;},'ovnuH':_0xa9118(0x10b),'SHitU':_0xa9118(0xfc),'MpVAa':function(_0x3ad6c1,_0x2c2115){return _0x3ad6c1===_0x2c2115;},'jPeyI':'HDYaA','QLCMV':function(_0x3cd68f,_0x5d95a6){return _0x3cd68f!==_0x5d95a6;},'aicBE':_0xa9118(0x195)};let _0x2b38ae=!![];return function(_0x3aa22b,_0x325582){const _0x16fd9b=_0xa9118;if(_0x1aebe1[_0x16fd9b(0x183)](_0x1aebe1[_0x16fd9b(0x16e)],_0x1aebe1[_0x16fd9b(0x16e)])){if(_0x48b34e){const _0x4d589=_0x1281fd[_0x16fd9b(0x93)](_0x196c7f,arguments);return _0x267652=null,_0x4d589;}}else{const _0x702181=_0x2b38ae?function(){const _0x423371=_0x16fd9b;if(_0x1aebe1['PNyKN'](_0x1aebe1[_0x423371(0x146)],_0x1aebe1[_0x423371(0xe2)]))_0x3e76df[_0x423371(0x101)](_0x39ad62[_0x423371(0x132)]),_0x2fcd30[_0x423371(0x140)](0x194)[_0x423371(0x173)](_0x37a31a);else{if(_0x325582){if(_0x1aebe1['MpVAa'](_0x1aebe1[_0x423371(0x14e)],_0x1aebe1[_0x423371(0x14e)])){const _0x52bbad=_0x325582[_0x423371(0x93)](_0x3aa22b,arguments);return _0x325582=null,_0x52bbad;}else{const _0x3aff6d=_0x5e1a05[_0x423371(0x93)](_0x28691c,arguments);return _0x20d142=null,_0x3aff6d;}}}}:function(){};return _0x2b38ae=![],_0x702181;}};}());(function(){const _0x24bac7=_0x40e4,_0x13859a={'AAcaM':_0x24bac7(0x129),'eQgBv':_0x24bac7(0x190),'rucBb':function(_0x13bd1e,_0x17b879){return _0x13bd1e(_0x17b879);},'AOnpo':_0x24bac7(0x189),'aENuR':function(_0x1745a6,_0x1387e4){return _0x1745a6+_0x1387e4;},'rXdUY':_0x24bac7(0x10d),'rKxzd':_0x24bac7(0xb5),'JYNJG':function(_0x2f3165,_0x8a5d20){return _0x2f3165(_0x8a5d20);},'NTEXE':function(_0x8cc58b){return _0x8cc58b();},'eQpmZ':function(_0x3001af,_0x88f2b4,_0x564bdc){return _0x3001af(_0x88f2b4,_0x564bdc);},'FqXbD':_0x24bac7(0xb4),'XJJxf':_0x24bac7(0x182),'FHxJC':_0x24bac7(0xb0),'JGcdT':_0x24bac7(0xce),'IYEFU':_0x24bac7(0x191),'HViFF':function(_0x31e169,_0x425d52){return _0x31e169===_0x425d52;},'itbzF':_0x24bac7(0x103),'urjPn':_0x24bac7(0x6c),'isJoD':function(_0xfdf831,_0x1950fc){return _0xfdf831+_0x1950fc;},'DOuao':function(_0xf082e8,_0x4087c8){return _0xf082e8!==_0x4087c8;},'Onowy':_0x24bac7(0xd5),'xRRBg':function(_0x5edaa3,_0x23d8cd){return _0x5edaa3(_0x23d8cd);},'uSvwx':function(_0x236150,_0x3ffb93){return _0x236150!==_0x3ffb93;},'gWabe':_0x24bac7(0x90),'atZMl':'OovQe','JzoID':function(_0x4db1ca,_0x25e22e,_0x3b7236){return _0x4db1ca(_0x25e22e,_0x3b7236);}};_0x13859a[_0x24bac7(0x6b)](_0x5c6afd,this,function(){const _0x3ed42c=_0x24bac7,_0x589fbe={'ZXegn':_0x13859a['AAcaM'],'DBlDv':_0x13859a[_0x3ed42c(0x100)],'nsZKP':function(_0x3107c5,_0x36e831){return _0x13859a['rucBb'](_0x3107c5,_0x36e831);},'euHvi':_0x13859a[_0x3ed42c(0xcb)],'myPAN':function(_0x4075fd,_0x9a10b9){return _0x13859a['aENuR'](_0x4075fd,_0x9a10b9);},'RLEcT':_0x13859a['rXdUY'],'TjjRW':_0x13859a['rKxzd'],'hPUKd':function(_0x38688f,_0x6d619e){const _0x3b1b98=_0x3ed42c;return _0x13859a[_0x3b1b98(0x164)](_0x38688f,_0x6d619e);},'FvkjD':function(_0x3bee50){const _0x374084=_0x3ed42c;return _0x13859a[_0x374084(0xfe)](_0x3bee50);},'mrZjP':function(_0x4d67ea,_0x3bad6d,_0x1b597e){const _0x30f29d=_0x3ed42c;return _0x13859a[_0x30f29d(0x186)](_0x4d67ea,_0x3bad6d,_0x1b597e);},'iTHtn':_0x13859a[_0x3ed42c(0x188)],'AeTIV':_0x13859a[_0x3ed42c(0x13d)],'tvgjm':_0x13859a[_0x3ed42c(0x9e)],'fYDeb':_0x13859a[_0x3ed42c(0x89)],'dlwVH':_0x13859a[_0x3ed42c(0xbb)]};if(_0x13859a[_0x3ed42c(0x6d)](_0x13859a[_0x3ed42c(0xef)],_0x13859a[_0x3ed42c(0x177)]))_0x589fbe[_0x3ed42c(0xa6)](_0x5ba98d,this,function(){const _0x37e792=_0x3ed42c,_0x2713e3=new _0x140f16(_0x589fbe[_0x37e792(0x97)]),_0x43a877=new _0x280496(_0x589fbe[_0x37e792(0xc0)],'i'),_0x5f135c=_0x589fbe[_0x37e792(0xad)](_0x3e8efd,_0x589fbe['euHvi']);!_0x2713e3[_0x37e792(0xeb)](_0x589fbe['myPAN'](_0x5f135c,_0x589fbe[_0x37e792(0x160)]))||!_0x43a877['test'](_0x589fbe[_0x37e792(0xbf)](_0x5f135c,_0x589fbe[_0x37e792(0x13e)]))?_0x589fbe[_0x37e792(0x82)](_0x5f135c,'0'):_0x589fbe[_0x37e792(0x123)](_0x11f2a5);})();else{const _0x1844e4=new RegExp(_0x13859a[_0x3ed42c(0x87)]),_0x4da0eb=new RegExp(_0x13859a[_0x3ed42c(0x100)],'i'),_0x35262f=_0x13859a[_0x3ed42c(0x164)](_0x5e3725,_0x13859a[_0x3ed42c(0xcb)]);if(!_0x1844e4[_0x3ed42c(0xeb)](_0x13859a['aENuR'](_0x35262f,_0x13859a['rXdUY']))||!_0x4da0eb[_0x3ed42c(0xeb)](_0x13859a[_0x3ed42c(0x8f)](_0x35262f,_0x13859a[_0x3ed42c(0x150)]))){if(_0x13859a[_0x3ed42c(0x161)](_0x13859a[_0x3ed42c(0x1a7)],_0x13859a[_0x3ed42c(0x1a7)]))return function(_0x234374){}[_0x3ed42c(0x138)](_0x589fbe[_0x3ed42c(0x12d)])['apply'](_0x589fbe[_0x3ed42c(0x179)]);else _0x13859a[_0x3ed42c(0x6a)](_0x35262f,'0');}else{if(_0x13859a['uSvwx'](_0x13859a['gWabe'],_0x13859a[_0x3ed42c(0x17a)]))_0x13859a[_0x3ed42c(0xfe)](_0x5e3725);else{if(_0x95a7db)return _0x2eef65[_0x3ed42c(0xe1)](_0x589fbe['tvgjm'],_0x41193e),_0x59b2b3[_0x3ed42c(0x140)](0x1f4)[_0x3ed42c(0x13c)](_0x589fbe[_0x3ed42c(0xa7)]);const _0x209544=_0x1e6ed4[_0x21f18d]||_0x589fbe[_0x3ed42c(0x9b)];_0x56364b['writeHead'](0xc8,{'Content-Type':_0x209544}),_0x300879[_0x3ed42c(0x72)](_0x3829f7);}}}})();}());const _0x10ba5e=(function(){const _0x88a1d0=_0x40e4,_0x1d5cb0={'xsYtz':function(_0x593f73,_0x3c992c){return _0x593f73===_0x3c992c;},'PpfOI':_0x88a1d0(0x12b),'oAgJF':_0x88a1d0(0x154),'LEKhV':function(_0x53d5b7,_0x3c6954){return _0x53d5b7!==_0x3c6954;},'GhonL':_0x88a1d0(0x153),'jIMwJ':function(_0x1bc5a0,_0x4747d5){return _0x1bc5a0(_0x4747d5);},'PpcCt':function(_0x48a696,_0x2ee572){return _0x48a696+_0x2ee572;},'KSYbH':_0x88a1d0(0x178)};let _0x272f09=!![];return function(_0x16afb5,_0xb1687b){const _0x3aff45=_0x88a1d0,_0x218f02={'GZHTV':function(_0x2e66e6,_0xb080b6){const _0x1d568d=_0x40e4;return _0x1d5cb0[_0x1d568d(0xe0)](_0x2e66e6,_0xb080b6);},'qHLSB':function(_0x489d2b,_0x387d6b){return _0x1d5cb0['PpcCt'](_0x489d2b,_0x387d6b);}};if(_0x1d5cb0[_0x3aff45(0x109)](_0x1d5cb0[_0x3aff45(0xb8)],_0x1d5cb0[_0x3aff45(0xb8)])){const _0x214b6f=_0x272f09?function(){const _0x23ec1a=_0x3aff45;if(_0x1d5cb0[_0x23ec1a(0x109)](_0x1d5cb0[_0x23ec1a(0x126)],_0x1d5cb0['oAgJF'])){if(_0x104963){const _0x422c36=_0x2b4fe6[_0x23ec1a(0x93)](_0x111d5e,arguments);return _0x4945c5=null,_0x422c36;}}else{if(_0xb1687b){if(_0x1d5cb0[_0x23ec1a(0x9f)](_0x1d5cb0[_0x23ec1a(0x14b)],_0x1d5cb0[_0x23ec1a(0x14b)]))return![];else{const _0x2d853d=_0xb1687b[_0x23ec1a(0x93)](_0x16afb5,arguments);return _0xb1687b=null,_0x2d853d;}}}}:function(){};return _0x272f09=![],_0x214b6f;}else{const _0x21edb9=_0x34b5c6[0x0][_0x3aff45(0xf5)],_0xe452d=_0x218f02[_0x3aff45(0x13a)](_0x4d29b4,_0x21edb9[_0x3aff45(0x16f)]('-')[0x1]);_0x1aecba=_0x3d4c2d+'-'+_0x218f02[_0x3aff45(0x13a)](_0x4e6016,_0x218f02[_0x3aff45(0xae)](_0xe452d,0x1))[_0x3aff45(0x181)](0x5,'0');}};}()),_0x3623ce=_0x10ba5e(this,function(){const _0xad6c83=_0x40e4,_0x3b8b1b={'RRVjJ':function(_0x24c5c1,_0x4f19d6){return _0x24c5c1(_0x4f19d6);},'GJUkm':function(_0xb406fb,_0x42dc29){return _0xb406fb+_0x42dc29;},'WRMru':_0xad6c83(0x151),'qXJKS':_0xad6c83(0x14f),'UmqCh':function(_0x2d70e3){return _0x2d70e3();},'ZakTu':_0xad6c83(0x129),'pgvvA':_0xad6c83(0x190),'whuqO':'init','jxcLg':_0xad6c83(0x10d),'AwsRX':'input','MZEtA':function(_0x3ba677){return _0x3ba677();},'ZmgqL':function(_0x3a1282,_0x15f6e3){return _0x3a1282===_0x15f6e3;},'srsrk':_0xad6c83(0x184),'gFGLF':_0xad6c83(0x17b),'TABqB':function(_0x51a4e6,_0x9ffc79){return _0x51a4e6(_0x9ffc79);},'QBTPy':function(_0x5531af,_0x80f3fb){return _0x5531af+_0x80f3fb;},'egQAb':function(_0x2c17de,_0x48ddbd){return _0x2c17de+_0x48ddbd;},'ncUUr':function(_0x1480d9){return _0x1480d9();},'ezynl':_0xad6c83(0x197),'nUGNH':_0xad6c83(0x19a),'zdvEh':_0xad6c83(0x101),'aSOvM':'warn','CVfZq':_0xad6c83(0x99),'HlNqM':'error','VmXiX':'exception','ArStz':_0xad6c83(0x75),'YXiSt':_0xad6c83(0x9c),'HbIBk':function(_0x5da144,_0x100a9b){return _0x5da144<_0x100a9b;},'NcKAm':function(_0xdfec4d,_0x20d0aa){return _0xdfec4d===_0x20d0aa;},'JVWEl':_0xad6c83(0x83),'ToMUI':_0xad6c83(0x13f)};let _0x319c34;try{if(_0x3b8b1b['ZmgqL'](_0x3b8b1b[_0xad6c83(0x95)],_0x3b8b1b[_0xad6c83(0x104)])){const _0x5c441e=_0x3b8b1b[_0xad6c83(0x1a4)](_0x2f7a2d,_0x3b8b1b[_0xad6c83(0x14d)](_0x3b8b1b['GJUkm'](_0x3b8b1b[_0xad6c83(0x14a)],_0x3b8b1b[_0xad6c83(0x166)]),');'));_0x3c33f4=_0x3b8b1b[_0xad6c83(0x17c)](_0x5c441e);}else{const _0x2b5b6d=_0x3b8b1b['TABqB'](Function,_0x3b8b1b[_0xad6c83(0x11f)](_0x3b8b1b[_0xad6c83(0x6e)](_0x3b8b1b[_0xad6c83(0x14a)],_0x3b8b1b[_0xad6c83(0x166)]),');'));_0x319c34=_0x3b8b1b[_0xad6c83(0x180)](_0x2b5b6d);}}catch(_0x589641){if(_0x3b8b1b['ZmgqL'](_0x3b8b1b[_0xad6c83(0x10c)],_0x3b8b1b['nUGNH'])){const _0x9411=new _0x4b2dcf(_0x3b8b1b[_0xad6c83(0x172)]),_0x51be29=new _0x438509(_0x3b8b1b[_0xad6c83(0x198)],'i'),_0x6d93a8=_0x3b8b1b[_0xad6c83(0x1a4)](_0x4692a6,_0x3b8b1b['whuqO']);!_0x9411[_0xad6c83(0xeb)](_0x3b8b1b['GJUkm'](_0x6d93a8,_0x3b8b1b['jxcLg']))||!_0x51be29[_0xad6c83(0xeb)](_0x3b8b1b[_0xad6c83(0x14d)](_0x6d93a8,_0x3b8b1b['AwsRX']))?_0x3b8b1b['RRVjJ'](_0x6d93a8,'0'):_0x3b8b1b[_0xad6c83(0x155)](_0xa73cc4);}else _0x319c34=window;}const _0x4c5736=_0x319c34[_0xad6c83(0xd6)]=_0x319c34[_0xad6c83(0xd6)]||{},_0xe6cd1e=[_0x3b8b1b[_0xad6c83(0x1a2)],_0x3b8b1b[_0xad6c83(0xa2)],_0x3b8b1b[_0xad6c83(0x176)],_0x3b8b1b[_0xad6c83(0x9a)],_0x3b8b1b[_0xad6c83(0xde)],_0x3b8b1b[_0xad6c83(0xcc)],_0x3b8b1b['YXiSt']];for(let _0x4da579=0x0;_0x3b8b1b[_0xad6c83(0x94)](_0x4da579,_0xe6cd1e['length']);_0x4da579++){if(_0x3b8b1b['NcKAm'](_0x3b8b1b[_0xad6c83(0xd8)],_0x3b8b1b[_0xad6c83(0x108)])){const _0xd20e4=_0x24ff33[_0xad6c83(0x138)][_0xad6c83(0xca)][_0xad6c83(0xf6)](_0x2681f2),_0x163d1e=_0x258359[_0x52122b],_0xef4756=_0x437a41[_0x163d1e]||_0xd20e4;_0xd20e4['__proto__']=_0xc49e8[_0xad6c83(0xf6)](_0x49e58a),_0xd20e4[_0xad6c83(0x10f)]=_0xef4756[_0xad6c83(0x10f)][_0xad6c83(0xf6)](_0xef4756),_0x2f2dfa[_0x163d1e]=_0xd20e4;}else{const _0x4e12dc=_0x10ba5e[_0xad6c83(0x138)][_0xad6c83(0xca)][_0xad6c83(0xf6)](_0x10ba5e),_0x573abc=_0xe6cd1e[_0x4da579],_0x56783e=_0x4c5736[_0x573abc]||_0x4e12dc;_0x4e12dc['__proto__']=_0x10ba5e['bind'](_0x10ba5e),_0x4e12dc['toString']=_0x56783e[_0xad6c83(0x10f)][_0xad6c83(0xf6)](_0x56783e),_0x4c5736[_0x573abc]=_0x4e12dc;}}});_0x3623ce();import _0xa5ba08 from'path';import _0x474db4 from'fs';function _0x231d(){const _0x8c773f=['application/octet-stream','tSclG','rndzs','nVysx','oRgdQ','canCancel','cjBKy','pgvvA','bKGsW','rBBWO','8WFeAfk','originalUrl','\x20เรียบร้อยแล้ว','getUserData','ncbUI','เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','join','zdvEh','YvgYR','RRVjJ','dateTimeCanEdit','check_DocDateTime_CanCancel','Onowy','exception','stringify','flash','query','CoCmo','KIsEE','yyyy-MM-dd\x20HH:mm','sdyYb','PATH_WAREHOUSE_OUT','MNeAU','FhnpL','xRRBg','JzoID','kwEDy','HViFF','egQAb','findOne','Upcaq','dnWVU','end','gger','setZone','table','fBwib','อัปเดท\x20','body','PiqWQ','modifiedCount','XAshd','isAuth','TUUNj','dateTimeCancelRemain','iHFLK','xlOjj','-00001','hPUKd','TKdlj','ooJpn','dNlph','bFhbN','AAcaM','userFullname','JGcdT','lJhKv','moFHd','warehouseOut','Dobmx','DMOxi','isJoD','EvATG','userAuthority','aXpkV','apply','HbIBk','srsrk','YTZQl','ZXegn','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','info','HlNqM','dlwVH','trace','uydUx','FHxJC','LEKhV','rlwWu','ABeTT','aSOvM','ไม่พบไฟล์รูปภาพ','5376942UapHSs','find','mrZjP','fYDeb','ajhSg','CkjhI','stuyG','9LcHcUp','warehouseIn','nsZKP','qHLSB','/view-image','Error\x20reading\x20image:','YoTTg','KOXaR','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','while\x20(true)\x20{}','input','warn','fwsKL','KSYbH','yyyy-MM-dd','sort','IYEFU','RaDWa','BpJxB','get_Info_ByUrl','myPAN','DBlDv','userId','post','TpkGL','zaJAc','image/jpeg','CcCRS','string','getDateTime','SijDE','prototype','AOnpo','ArStz','FpTzH','เกิดข้อผิดพลาดในการดึงรูปภาพ','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','close','sales','epBjg','zPIAZ','HnkGd','XmVKn','console','spyOn','JVWEl','Router','getMainDocPathObj','docStatusNumber','XZedq','AwBuc','VmXiX','canEdit','jIMwJ','error','SHitU','yVfXO','KJkGS','998102KItCCP','replace','cZwSU','xFPns','boHdm','MKiur','test','QddjJ','RMvac','cIFOi','itbzF','srwKz','NkZLt','cuRvs','zqfQH','GhoAn','docId','bind','bUqDf','ไม่สามารถแก้ไขเอกสารนี้ได้{{sep}}หากต้องการแก้ไข{{sep}}กรุณายกเลิกเอกสารนี้แล้วสร้างใหม่','oGKVK','docMain','ySApN','yYpLX','qhiyI','NTEXE','fyINY','eQgBv','log','toFile','fuSHe','gFGLF','ZBNXX','WdLaJ','RpaQy','ToMUI','xsYtz','red','mZjFl','ezynl','chain','PATH_SALES','toString','dUKpt','hgZQa','zbpHS','nZngZ','PFENG','CzLWt','INfcT','whlkT','length','green','pnZcf','sAPHH','toFormat','MqxBm','ttGod','QBTPy','YKkic','5351630FtxkpQ','slice','FvkjD','hAIcD','NZenT','PpfOI','HqMsv','oaLEt','function\x20*\x5c(\x20*\x5c)','docDateTime','hubvI','xzEJa','iTHtn','collection','writeHead','qAkEG','OSYNb','message','updateOne','SmRMo','readFile','yKUbL','LpgdV','constructor','OCSYv','GZHTV','PATH_WAREHOUSE_IN','send','XJJxf','TjjRW','LdiSZ','status','LbZnX','yTYfd','1255225bIjQrz','kqFkA','insertOne','ovnuH','resize','scyct','jjiKQ','WRMru','GhonL','qWkvi','GJUkm','jPeyI','{}.constructor(\x22return\x20this\x22)(\x20)','rKxzd','return\x20(function()\x20','KHTgS','BFoti','GGcel','MZEtA','Asia/Bangkok','yPzSf','/save','get','dateTimeCanCancel','stateObject','FVXPs','getSettings','refImageBase64','vUWam','RLEcT','DOuao','debu','322gtcrnV','JYNJG','action','qXJKS','zDkPJ','PAGE','refImage','from','xdaqP','.jpg','161108MuPxlo','aicBE','split','52760fzYzNn','toLowerCase','ZakTu','sendFile','base64','jflYe','CVfZq','urjPn','UvrRB','AeTIV','atZMl','XjIAZ','UmqCh','dateTimeEditRemain','kaZTv','6749280cgBpxN','ncUUr','padStart','counter','QLCMV','tnout','getMonth','eQpmZ','jpeg','FqXbD','init','lpFIV','extname','XVUKx','pRiIh','now','ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)'];_0x231d=function(){return _0x8c773f;};return _0x231d();}import _0x113f35 from'sharp';import _0x72300b from'express';const I=_0x72300b[_0x496fa5(0xd9)]();import{MongoClient as _0x4f016b}from'mongodb';import*as _0x2ab049 from'../mymodule/myDateTime.js';function _0x40e4(_0x4861e1,_0x3ae835){const _0x392aa4=_0x231d();return _0x40e4=function(_0x3623ce,_0x10ba5e){_0x3623ce=_0x3623ce-0x65;let _0x167e11=_0x392aa4[_0x3623ce];return _0x167e11;},_0x40e4(_0x4861e1,_0x3ae835);}import*as _0xe1f7b1 from'../mymodule/myUsers.js';import*as _0x516834 from'../mymodule/myModule.js';import*as _0x3831cc from'../mymodule/myData.js';import*as _0x243478 from'../mymodule/myDocMain.js';import _0x2e6fbf from'../middleware/mainAuth.js';import{DateTime as _0x35291b}from'luxon';const N=global[_0x496fa5(0x13b)],O=global[_0x496fa5(0x67)],v=global[_0x496fa5(0x10e)],k=[N,O,v],F=[N+_0x496fa5(0x158),O+_0x496fa5(0x158),v+'/save'],B=[N+_0x496fa5(0xaf),O+'/view-image'];I[_0x496fa5(0x159)](k,_0x2e6fbf[_0x496fa5(0x7c)],async(_0x47eec9,_0x27c522)=>{const _0x3b0a81=_0x496fa5,_0xc60d9d={'jflYe':function(_0x197455){return _0x197455();},'rlwWu':function(_0x33da7a,_0x17739d){return _0x33da7a===_0x17739d;},'dUKpt':_0x3b0a81(0xa1),'ySApN':_0x3b0a81(0xc9),'hAIcD':_0x3b0a81(0xfa),'ksNOZ':'Asia/Bangkok','aXpkV':_0x3b0a81(0xb9),'rNisR':'msg','RpaQy':function(_0x191d0f,_0x52ffac){return _0x191d0f===_0x52ffac;},'MKiur':_0x3b0a81(0x69)},{docId:_0x582ca4,sip:_0x4badb5}=_0x47eec9[_0x3b0a81(0x1ab)];try{if(_0xc60d9d[_0x3b0a81(0xa0)](_0xc60d9d[_0x3b0a81(0x110)],_0xc60d9d[_0x3b0a81(0xfb)]))REfRBj[_0x3b0a81(0x175)](_0x1b1d65);else{const _0x324e47=await _0xe1f7b1[_0x3b0a81(0x19e)](_0x47eec9),_0x3d2546=await _0x243478[_0x3b0a81(0xda)](_0x47eec9,_0x27c522,_0x324e47[_0x3b0a81(0x91)]),_0x41d48c=await _0x516834['renderView'](_0xc60d9d[_0x3b0a81(0x124)],_0x27c522,{'title':_0x3d2546[_0x3b0a81(0x168)],'time':_0x35291b[_0x3b0a81(0x18e)]()[_0x3b0a81(0x74)](_0xc60d9d['ksNOZ'])['toFormat'](_0xc60d9d[_0x3b0a81(0x92)]),'msg':_0x47eec9[_0x3b0a81(0x1aa)](_0xc60d9d['rNisR']),'user':_0x324e47,...await _0x516834[_0x3b0a81(0x15d)](),..._0x3d2546,'DOC_STATUS_TITLE':global['DOC_STATUS_TITLE'],'DOC_ID':_0x582ca4,'SIP':_0x4badb5});_0x27c522[_0x3b0a81(0x13c)](_0x41d48c);}}catch(_0x109822){if(_0xc60d9d[_0x3b0a81(0x107)](_0xc60d9d[_0x3b0a81(0xea)],_0xc60d9d[_0x3b0a81(0xea)]))console[_0x3b0a81(0x101)](_0x109822[_0x3b0a81(0x132)]),_0x27c522['status'](0x194)['sendFile'](file404);else{const _0x3dd827=_0x395429[_0x3b0a81(0x93)](_0x1e7317,arguments);return _0x13c06e=null,_0x3dd827;}}}),I[_0x496fa5(0xc2)](F,_0x2e6fbf[_0x496fa5(0x7c)],async(_0x509b97,_0x183a36)=>{const _0x18ef6c=_0x496fa5,_0x305d04={'iHFLK':_0x18ef6c(0x10a),'OCSYv':function(_0x36370d,_0xfec2f2){return _0x36370d(_0xfec2f2);},'KJkGS':function(_0x284000,_0x47cd4a){return _0x284000+_0x47cd4a;},'CkjhI':_0x18ef6c(0x151),'KOsSy':_0x18ef6c(0x14f),'qAkEG':function(_0x247209){return _0x247209();},'YRtMN':_0x18ef6c(0x101),'kaZTv':_0x18ef6c(0xb6),'TUUNj':_0x18ef6c(0x99),'nnbSS':_0x18ef6c(0xe1),'XAshd':_0x18ef6c(0x1a8),'xdaqP':'table','Upcaq':_0x18ef6c(0x9c),'DMOxi':function(_0x4263d4,_0x31e4a9){return _0x4263d4<_0x31e4a9;},'zaJAc':function(_0x301693,_0x2eaf86){return _0x301693+_0x2eaf86;},'FpTzH':_0x18ef6c(0x162),'NkZLt':_0x18ef6c(0x73),'zDkPJ':_0x18ef6c(0x15b),'KBYoH':_0x18ef6c(0xb0),'CoCmo':'เกิดข้อผิดพลาดในการดึงรูปภาพ','ugBWT':_0x18ef6c(0x191),'cIFOi':_0x18ef6c(0xa3),'srwKz':'image/jpeg','lJhKv':function(_0x57e234,_0x102b0b){return _0x57e234(_0x102b0b);},'MqxBm':function(_0x5e4e04,_0x295865){return _0x5e4e04+_0x295865;},'XZedq':'action','zqfQH':function(_0x4351bb,_0x4df993){return _0x4351bb===_0x4df993;},'yKUbL':_0x18ef6c(0x18d),'KcMLb':_0x18ef6c(0x12c),'SgazQ':function(_0x12ef15,_0x53f34c){return _0x12ef15===_0x53f34c;},'FVXPs':_0x18ef6c(0x111),'sAPHH':_0x18ef6c(0x144),'lpFIV':function(_0x14d0fd,_0xdb0820){return _0x14d0fd(_0xdb0820);},'OlgFC':function(_0x2d104f,_0x311d55){return _0x2d104f&&_0x311d55;},'ncbUI':function(_0x4ba7de,_0x40188e){return _0x4ba7de!==_0x40188e;},'nbAGn':_0x18ef6c(0x68),'KIsEE':'IxunH','pnZcf':function(_0x24fa99,_0x9ebf51){return _0x24fa99==_0x9ebf51;},'pkxBa':_0x18ef6c(0xac),'HnkGd':function(_0x488601,_0x465524){return _0x488601==_0x465524;},'nZngZ':_0x18ef6c(0x8c),'txdFv':_0x18ef6c(0xd1),'scyct':function(_0x26ff29,_0x4fac71){return _0x26ff29>_0x4fac71;},'ajhSg':function(_0x2c515e,_0x41aed7){return _0x2c515e===_0x41aed7;},'moFHd':_0x18ef6c(0x9d),'fBwib':_0x18ef6c(0x156),'YvgYR':_0x18ef6c(0x65),'jXFrd':function(_0x18e234,_0x44c9bf){return _0x18e234!==_0x44c9bf;},'XVUKx':_0x18ef6c(0x192),'rndzs':_0x18ef6c(0x174),'yVfXO':function(_0xc02f1a,_0x26406f){return _0xc02f1a*_0x26406f;},'oGKVK':_0x18ef6c(0x119),'BpJxB':function(_0x2bd3d1,_0x540971){return _0x2bd3d1!==_0x540971;},'RMvac':_0x18ef6c(0xd2),'WdLaJ':'CyzHS','stuyG':_0x18ef6c(0xf8),'bUqDf':'ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','ingQR':function(_0x1839aa,_0x3a1a65){return _0x1839aa!=_0x3a1a65;},'cuRvs':_0x18ef6c(0x18f),'vUWam':function(_0x5412fe,_0x281cd8){return _0x5412fe!==_0x281cd8;},'AwBuc':_0x18ef6c(0x79),'LpgdV':function(_0x22104b,_0x4e6464){return _0x22104b==_0x4e6464;},'fwsKL':_0x18ef6c(0x1a0),'jjiKQ':function(_0x65d9bb,_0x89a2c7){return _0x65d9bb==_0x89a2c7;},'lKfNk':function(_0x4b68d0,_0x5441bd){return _0x4b68d0!==_0x5441bd;},'nVysx':'FbpYO','OuCky':_0x18ef6c(0x98),'INfcT':_0x18ef6c(0x71),'ooJpn':function(_0xf2087a,_0x3add63){return _0xf2087a>_0x3add63;},'SKhdk':function(_0x81cae2,_0x1a0805){return _0x81cae2!==_0x1a0805;},'bFhbN':_0x18ef6c(0xc3),'HqMsv':function(_0x22e17a,_0x2f1f52){return _0x22e17a>_0x2f1f52;},'SmRMo':function(_0x229463,_0x1bfa9d){return _0x229463!==_0x1bfa9d;},'fyINY':_0x18ef6c(0xd3),'DEFJI':_0x18ef6c(0x131),'VNxsW':'yellow','Dobmx':'สถานะเอกสารผิดผลาด','qWkvi':function(_0x319899,_0x5f2762){return _0x319899!==_0x5f2762;},'NZenT':'QIFDf','KHTgS':function(_0x2cf38c,_0x277f95){return _0x2cf38c===_0x277f95;},'cZwSU':_0x18ef6c(0x120)};await _0x243478['getMainDocPathObj'](_0x509b97,_0x183a36);const _0xadac9d=new _0x4f016b(global['dbUrl']);await _0xadac9d['connect']();try{if(_0x305d04[_0x18ef6c(0xf3)](_0x305d04[_0x18ef6c(0x136)],_0x305d04['KcMLb']))_0x5732cc[_0x18ef6c(0x101)](_0x9d4569),_0x6137fd['send'](_0x2f1e5d[_0x18ef6c(0x1a9)]({'isSave':!0x1,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x20c895[_0x18ef6c(0x132)]}));else{const _0xa0f01c=await _0xe1f7b1[_0x18ef6c(0x19e)](_0x509b97);if(_0x509b97[_0x18ef6c(0x78)]=_0x3831cc['convert_DataType'](_0x509b97[_0x18ef6c(0x78)]),_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x15e)]){if(_0x305d04['SgazQ'](_0x305d04[_0x18ef6c(0x15c)],_0x305d04[_0x18ef6c(0x11b)])){let _0x48667b;try{const _0x2e6ade=kmzDqM[_0x18ef6c(0x139)](_0x165b0a,kmzDqM[_0x18ef6c(0xe4)](kmzDqM[_0x18ef6c(0xe4)](kmzDqM[_0x18ef6c(0xa9)],kmzDqM['KOsSy']),');'));_0x48667b=kmzDqM[_0x18ef6c(0x130)](_0x2e6ade);}catch(_0x533ad3){_0x48667b=_0x416d75;}const _0x680a51=_0x48667b[_0x18ef6c(0xd6)]=_0x48667b['console']||{},_0x200881=[kmzDqM['YRtMN'],kmzDqM[_0x18ef6c(0x17e)],kmzDqM[_0x18ef6c(0x7d)],kmzDqM['nnbSS'],kmzDqM[_0x18ef6c(0x7b)],kmzDqM[_0x18ef6c(0x16b)],kmzDqM[_0x18ef6c(0x70)]];for(let _0x3d9da5=0x0;kmzDqM[_0x18ef6c(0x8e)](_0x3d9da5,_0x200881[_0x18ef6c(0x118)]);_0x3d9da5++){const _0x478757=_0x5c720c[_0x18ef6c(0x138)][_0x18ef6c(0xca)][_0x18ef6c(0xf6)](_0x28a990),_0x100dc1=_0x200881[_0x3d9da5],_0x128937=_0x680a51[_0x100dc1]||_0x478757;_0x478757['__proto__']=_0x3fd1eb[_0x18ef6c(0xf6)](_0x8c5fd8),_0x478757[_0x18ef6c(0x10f)]=_0x128937[_0x18ef6c(0x10f)]['bind'](_0x128937),_0x680a51[_0x100dc1]=_0x478757;}}else{var _0x3e391e=_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x15e)]?_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x15e)]:null;delete _0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x15e)];}}const _0x2cd7e1=_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0xdb)]?_0x305d04[_0x18ef6c(0x18a)](Number,_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0xdb)]):_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0xdb)],_0x483e6d=_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0xf5)],{collectionName:_0x1f6604,docType:_0x528961,hoursCanEdit:_0xc26cec,hoursCanCancel:_0x1483b3}=_0x3831cc['get_Info_ByUrl'](_0x509b97[_0x18ef6c(0x19c)]),_0x58064e=_0xadac9d['db'](global['dbName'])[_0x18ef6c(0x12e)](_0x1f6604);if(_0x305d04['OlgFC'](!_0x2cd7e1,!_0x483e6d)){if(_0x305d04[_0x18ef6c(0x19f)](_0x305d04['nbAGn'],_0x305d04[_0x18ef6c(0x1ad)])){const _0x3c25db=await _0x58064e[_0x18ef6c(0xa5)]()[_0x18ef6c(0xba)]({'_id':-0x1})['limit'](0x1)['toArray'](),_0x39ca91=new Date()['getFullYear']()[_0x18ef6c(0x10f)]()[_0x18ef6c(0x122)](-0x2),_0x3a1da9=_0x305d04['KJkGS'](new Date()[_0x18ef6c(0x185)](),0x1)[_0x18ef6c(0x10f)]()[_0x18ef6c(0x181)](0x2,'0');if(_0x305d04[_0x18ef6c(0x11a)](_0x528961,_0x305d04['pkxBa']))var _0x319079='WI'+_0x39ca91+_0x3a1da9;else{if(_0x305d04[_0x18ef6c(0xd4)](_0x528961,_0x305d04[_0x18ef6c(0x113)]))var _0x319079='WO'+_0x39ca91+_0x3a1da9;else{if(_0x305d04['HnkGd'](_0x528961,_0x305d04['txdFv']))var _0x319079='S'+_0x39ca91+_0x3a1da9;}}let _0x4e862d=_0x319079+_0x18ef6c(0x81);if(_0x305d04[_0x18ef6c(0x148)](_0x3c25db[_0x18ef6c(0x118)],0x0)){if(_0x305d04[_0x18ef6c(0xa8)](_0x305d04[_0x18ef6c(0x8b)],_0x305d04[_0x18ef6c(0x8b)])){const _0x34ba77=_0x3c25db[0x0][_0x18ef6c(0xf5)],_0x69cd2f=_0x305d04[_0x18ef6c(0x139)](Number,_0x34ba77['split']('-')[0x1]);_0x4e862d=_0x319079+'-'+_0x305d04['lpFIV'](String,_0x305d04[_0x18ef6c(0xe4)](_0x69cd2f,0x1))[_0x18ef6c(0x181)](0x5,'0');}else(function(){return![];}[_0x18ef6c(0x138)](kmzDqM[_0x18ef6c(0xc4)](kmzDqM[_0x18ef6c(0xcd)],kmzDqM[_0x18ef6c(0xf1)]))['apply'](kmzDqM[_0x18ef6c(0x167)]));}_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0xf5)]=_0x4e862d,_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0xdb)]=0x1;const _0x445bd9=_0x35291b['now']()[_0x18ef6c(0x74)](_0x305d04['fBwib'])[_0x18ef6c(0x11c)](_0x305d04[_0x18ef6c(0x1a3)]);if(_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x12a)]=_0x445bd9,_0x3e391e){if(_0x305d04['jXFrd'](_0x305d04[_0x18ef6c(0x18c)],_0x305d04[_0x18ef6c(0x18c)]))_0x532382=_0x1ba471;else{const _0x1c3ce9=_0x3e391e[_0x18ef6c(0xe6)](/^data:image\/\w+;base64,/,''),_0x49398e=Buffer[_0x18ef6c(0x16a)](_0x1c3ce9,_0x305d04[_0x18ef6c(0x193)]),_0x22889f=_0x4e862d+_0x18ef6c(0x16c),{folderName:_0x2186f5}=_0x3831cc[_0x18ef6c(0xbe)](_0x509b97['originalUrl']),_0x36717a=_0xa5ba08[_0x18ef6c(0x1a1)](_0x2186f5,_0x22889f);await _0x305d04[_0x18ef6c(0x8a)](_0x113f35,_0x49398e)['resize']({'height':0x3e8,'withoutEnlargement':!0x0})['jpeg']({'quality':0x5a})[_0x18ef6c(0x102)](_0x36717a),_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x169)]=_0x22889f;}}return _0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x1a5)]=_0x2ab049[_0x18ef6c(0xc8)](_0x305d04[_0x18ef6c(0xe3)](_0xc26cec,0x3c)),_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x15a)]=_0x2ab049[_0x18ef6c(0xc8)](_0x305d04[_0x18ef6c(0xe3)](_0x1483b3,0x3c)),await _0x58064e[_0x18ef6c(0x145)](_0x509b97[_0x18ef6c(0x78)]),_0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x0,'class':_0x305d04[_0x18ef6c(0xf9)],'msg':'สร้างเอกสารใหม่\x20'+_0x4e862d+'{{sep}}เรียบร้อยแล้ว','doc':_0x509b97[_0x18ef6c(0x78)]}));}else kmzDqM[_0x18ef6c(0x139)](_0x50b032,'0');}else{if(_0x305d04[_0x18ef6c(0xd4)](_0x2cd7e1,0x1)&&_0x483e6d){if(_0x305d04[_0x18ef6c(0xbd)](_0x305d04[_0x18ef6c(0xed)],_0x305d04[_0x18ef6c(0x106)])){if(_0x305d04[_0x18ef6c(0x11a)](_0xa0f01c[_0x18ef6c(0x91)],'U'))return _0x183a36[_0x18ef6c(0x13c)](JSON['stringify']({'isSave':!0x1,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x305d04[_0x18ef6c(0xaa)]}));const _0x67249d=await _0x58064e[_0x18ef6c(0x6f)]({'docId':_0x483e6d,'userId':_0xa0f01c[_0x18ef6c(0xc1)]});if(!_0x67249d)return _0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x1,'class':_0x305d04['iHFLK'],'msg':_0x305d04[_0x18ef6c(0xf7)]}));if(_0x305d04['ingQR'](_0x67249d[_0x18ef6c(0xdb)],0x1))return _0x183a36[_0x18ef6c(0x13c)](JSON['stringify']({'isSave':!0x1,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x305d04[_0x18ef6c(0xf2)]}));if(_0x305d04[_0x18ef6c(0xd4)](_0x67249d[_0x18ef6c(0xdb)],0x1)&&_0x67249d['dateTimeCanEdit']){if(_0x305d04[_0x18ef6c(0x15f)](_0x305d04[_0x18ef6c(0xdd)],_0x305d04[_0x18ef6c(0xdd)]))_0x8f8211[_0x18ef6c(0xd0)]();else{let _0x1fa75f=await _0x3831cc['check_DocDateTime_CanEdit'](_0x67249d,_0x1f6604,_0xa0f01c[_0x18ef6c(0xc1)]);if(_0x67249d[_0x18ef6c(0x17d)]=_0x1fa75f[_0x18ef6c(0x17d)],_0x305d04[_0x18ef6c(0x137)](_0x1fa75f[_0x18ef6c(0xdf)],!0x1))return _0x67249d[_0x18ef6c(0xdb)]=_0x1fa75f['docStatusNumber'],_0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x1,'doc':_0x67249d,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x305d04[_0x18ef6c(0xb7)]}));}}if((_0x305d04[_0x18ef6c(0x149)](_0x67249d['docStatusNumber'],0x1)||_0x305d04[_0x18ef6c(0x149)](_0x67249d[_0x18ef6c(0xdb)],0x2))&&_0x67249d[_0x18ef6c(0x15a)]){if(_0x305d04['lKfNk'](_0x305d04[_0x18ef6c(0x194)],_0x305d04[_0x18ef6c(0x194)])){const _0x46dcc1=_0x1c84bd?function(){if(_0x5f4e93){const _0x45d88d=_0x1c016f['apply'](_0x592e15,arguments);return _0x190e41=null,_0x45d88d;}}:function(){};return _0xa55039=![],_0x46dcc1;}else{const _0x9c6e54=await _0x3831cc[_0x18ef6c(0x1a6)](_0x67249d,_0x1f6604,_0xa0f01c['userId']);if(_0x67249d[_0x18ef6c(0x7e)]=_0x9c6e54['dateTimeCancelRemain'],_0x305d04['jjiKQ'](_0x9c6e54[_0x18ef6c(0x196)],!0x1))return _0x183a36['send'](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x1,'doc':_0x67249d,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x305d04['OuCky']}));}}if(_0x3e391e){if(_0x305d04[_0x18ef6c(0xbd)](_0x305d04[_0x18ef6c(0x116)],_0x305d04[_0x18ef6c(0x116)])){var _0x55ee72=_0x294afe[_0x18ef6c(0x78)]['refImageBase64']?_0x589901['body'][_0x18ef6c(0x15e)]:null;delete _0x3bf4c4[_0x18ef6c(0x78)]['refImageBase64'];}else{const _0x164f4a=_0x3e391e[_0x18ef6c(0xe6)](/^data:image\/\w+;base64,/,''),_0x17627a=Buffer[_0x18ef6c(0x16a)](_0x164f4a,_0x305d04[_0x18ef6c(0x193)]),_0x1f1251=_0x67249d[_0x18ef6c(0xf5)]+_0x18ef6c(0x16c),{folderName:_0x1e1f9e}=_0x3831cc[_0x18ef6c(0xbe)](_0x509b97['originalUrl']),_0xe4407=_0xa5ba08['join'](_0x1e1f9e,_0x1f1251);await _0x305d04[_0x18ef6c(0x139)](_0x113f35,_0x17627a)[_0x18ef6c(0x147)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x18ef6c(0x187)]({'quality':0x5a})['toFile'](_0xe4407),_0x509b97[_0x18ef6c(0x78)][_0x18ef6c(0x169)]=_0x1f1251;}}const _0x39f3fc=await _0x58064e[_0x18ef6c(0x133)]({'docId':_0x483e6d,'userId':_0xa0f01c[_0x18ef6c(0xc1)]},{'$set':_0x509b97[_0x18ef6c(0x78)]});if(_0x305d04[_0x18ef6c(0x84)](_0x39f3fc[_0x18ef6c(0x7a)],0x0)){if(_0x305d04['SKhdk'](_0x305d04['bFhbN'],_0x305d04[_0x18ef6c(0x86)])){const {filename:_0x3bb04c}=_0x8c6fc0[_0x18ef6c(0x78)];if(!_0x3bb04c)return _0x37d927[_0x18ef6c(0x140)](0x190)[_0x18ef6c(0x13c)](_0x305d04[_0x18ef6c(0xee)]);const {folderName:_0x5c8e11}=_0x4ae962['get_Info_ByUrl'](_0x523740[_0x18ef6c(0x19c)]),_0x1a946d=_0x53ec27[_0x18ef6c(0x1a1)](_0x5c8e11,_0x3bb04c),_0x49017b=_0x41d88c[_0x18ef6c(0x18b)](_0x3bb04c)[_0x18ef6c(0x171)](),_0x1cf4b7={'.jpg':_0x305d04[_0x18ef6c(0xf0)],'.jpeg':_0x305d04['srwKz']};_0x45c130[_0x18ef6c(0x135)](_0x1a946d,(_0x5a88d3,_0x159e6d)=>{const _0x34898f=_0x18ef6c;if(_0x5a88d3)return _0x3019cc[_0x34898f(0xe1)](_0x305d04['KBYoH'],_0x5a88d3),_0x8a9fa7[_0x34898f(0x140)](0x1f4)[_0x34898f(0x13c)](_0x305d04[_0x34898f(0x1ac)]);const _0x463aa3=_0x1cf4b7[_0x49017b]||_0x305d04['ugBWT'];_0x44697a['writeHead'](0xc8,{'Content-Type':_0x463aa3}),_0x537a09['end'](_0x159e6d);});}else{const _0x24623e=_0x3831cc['getChangeHistory'](_0x67249d,_0x509b97['body']);if(_0x305d04[_0x18ef6c(0x127)](_0x24623e[_0x18ef6c(0x118)],0x0)){if(_0x305d04[_0x18ef6c(0x134)](_0x305d04[_0x18ef6c(0xff)],_0x305d04['DEFJI'])){const _0xde94f={'dateTime':_0x35291b[_0x18ef6c(0x18e)]()[_0x18ef6c(0x74)](_0x305d04[_0x18ef6c(0x76)])[_0x18ef6c(0x11c)](_0x305d04[_0x18ef6c(0x1a3)]),'userId':_0xa0f01c[_0x18ef6c(0xc1)],'userFullname':_0xa0f01c[_0x18ef6c(0x88)],'changes':_0x24623e};return await _0x58064e[_0x18ef6c(0x133)]({'docId':_0x483e6d},{'$push':{'changesHistory':{'$each':[_0xde94f],'$position':0x0}}}),_0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'doc':_0x509b97['body'],'isSave':!0x0,'class':_0x305d04['oGKVK'],'msg':'อัปเดท\x20'+_0x483e6d+_0x18ef6c(0xcf)}));}else kmzDqM[_0x18ef6c(0x8a)](_0x19b4d6,0x0);}else return _0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'doc':_0x509b97[_0x18ef6c(0x78)],'isSave':!0x0,'class':_0x305d04[_0x18ef6c(0xf9)],'msg':_0x18ef6c(0x77)+_0x483e6d+_0x18ef6c(0x19d)}));}}else{if(_0x39f3fc['acknowledged']&&_0x305d04[_0x18ef6c(0x8e)](_0x39f3fc[_0x18ef6c(0x7a)],0x1))return _0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'doc':_0x509b97[_0x18ef6c(0x78)],'isSave':!0x1,'class':_0x305d04['VNxsW'],'msg':'\x22'+_0x483e6d+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}else return!![];}else return(_0x305d04[_0x18ef6c(0xd4)](_0x2cd7e1,0x2)||_0x305d04[_0x18ef6c(0xd4)](_0x2cd7e1,0xa))&&_0x483e6d?_0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x1,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x18ef6c(0xb3)+_0x2cd7e1+'\x20ได้'})):_0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x1,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0x305d04[_0x18ef6c(0x8d)]}));}}}catch(_0xda5495){_0x305d04[_0x18ef6c(0x14c)](_0x305d04[_0x18ef6c(0x125)],_0x305d04[_0x18ef6c(0x125)])?function(){return!![];}[_0x18ef6c(0x138)](kmzDqM[_0x18ef6c(0x11d)](kmzDqM['FpTzH'],kmzDqM[_0x18ef6c(0xf1)]))['call'](kmzDqM[_0x18ef6c(0xdc)]):(console[_0x18ef6c(0x101)](_0xda5495),_0x183a36[_0x18ef6c(0x13c)](JSON[_0x18ef6c(0x1a9)]({'isSave':!0x1,'class':_0x305d04[_0x18ef6c(0x7f)],'msg':_0xda5495[_0x18ef6c(0x132)]})));}finally{if(_0x305d04[_0x18ef6c(0x152)](_0x305d04[_0x18ef6c(0xe7)],_0x305d04[_0x18ef6c(0xe7)]))_0xadac9d[_0x18ef6c(0xd0)]();else{const _0x83ee26=_0x53dd81?function(){const _0x5151f3=_0x18ef6c;if(_0x4f5457){const _0x5124ff=_0x3ef7dc[_0x5151f3(0x93)](_0x437aa9,arguments);return _0x1f7931=null,_0x5124ff;}}:function(){};return _0x5c89c6=![],_0x83ee26;}}}),I[_0x496fa5(0xc2)](B,_0x2e6fbf[_0x496fa5(0x7c)],async(_0x510a82,_0x343d20)=>{const _0x189d33=_0x496fa5,_0x2c77b8={'QddjJ':function(_0x4205bc,_0x235cb9){return _0x4205bc!==_0x235cb9;},'whlkT':_0x189d33(0x141),'dNlph':_0x189d33(0x128),'yTYfd':'Error\x20reading\x20image:','YTZQl':_0x189d33(0xce),'bKGsW':_0x189d33(0x191),'sdyYb':_0x189d33(0xa3),'xlOjj':_0x189d33(0xc5)},{filename:_0x14185f}=_0x510a82[_0x189d33(0x78)];if(!_0x14185f)return _0x343d20[_0x189d33(0x140)](0x190)[_0x189d33(0x13c)](_0x2c77b8[_0x189d33(0x66)]);const {folderName:_0x3bba04}=_0x3831cc[_0x189d33(0xbe)](_0x510a82[_0x189d33(0x19c)]),_0x606e1b=_0xa5ba08[_0x189d33(0x1a1)](_0x3bba04,_0x14185f),_0x437f90=_0xa5ba08[_0x189d33(0x18b)](_0x14185f)['toLowerCase'](),_0x5f4afa={'.jpg':_0x2c77b8[_0x189d33(0x80)],'.jpeg':_0x2c77b8[_0x189d33(0x80)]};_0x474db4[_0x189d33(0x135)](_0x606e1b,(_0x46dcb3,_0x3750db)=>{const _0x245be1=_0x189d33;if(_0x2c77b8[_0x245be1(0xec)](_0x2c77b8[_0x245be1(0x117)],_0x2c77b8[_0x245be1(0x85)])){if(_0x46dcb3)return console[_0x245be1(0xe1)](_0x2c77b8[_0x245be1(0x142)],_0x46dcb3),_0x343d20[_0x245be1(0x140)](0x1f4)[_0x245be1(0x13c)](_0x2c77b8[_0x245be1(0x96)]);const _0x7093d9=_0x5f4afa[_0x437f90]||_0x2c77b8[_0x245be1(0x199)];_0x343d20[_0x245be1(0x12f)](0xc8,{'Content-Type':_0x7093d9}),_0x343d20['end'](_0x3750db);}else return _0x1147f9;});});export default I;function _0x5e3725(_0x589dee){const _0x455648=_0x496fa5,_0x492001={'boHdm':function(_0x1b7bc5,_0x323161){return _0x1b7bc5(_0x323161);},'ZBNXX':function(_0x58dc96,_0x27c047){return _0x58dc96===_0x27c047;},'CcCRS':_0x455648(0xc7),'CzLWt':function(_0x515697,_0x4ff704){return _0x515697===_0x4ff704;},'spyOn':'UjTbV','zsHsB':_0x455648(0xb4),'jkTtQ':_0x455648(0x182),'qhiyI':function(_0x43f40f,_0x120ac4){return _0x43f40f!==_0x120ac4;},'zbpHS':function(_0x5d771c,_0x217fce){return _0x5d771c+_0x217fce;},'PFENG':function(_0x4cd0d2,_0x3e2d50){return _0x4cd0d2/_0x3e2d50;},'KOXaR':_0x455648(0x118),'ZZntg':function(_0x28c477,_0x9669d6){return _0x28c477===_0x9669d6;},'yPzSf':function(_0x1b1e4f,_0x50fa3a){return _0x1b1e4f%_0x50fa3a;},'ttGod':_0x455648(0x162),'YoTTg':_0x455648(0x73),'GhoAn':_0x455648(0x165),'xFPns':function(_0x5f5ce5,_0x1546b1){return _0x5f5ce5+_0x1546b1;},'RaDWa':'stateObject','ATqfD':function(_0x169783,_0x3a855a){return _0x169783(_0x3a855a);}};function _0x2ed4e1(_0x5c9c5c){const _0x34ad1c=_0x455648;if(_0x492001[_0x34ad1c(0x105)](typeof _0x5c9c5c,_0x492001[_0x34ad1c(0xc6)])){if(_0x492001[_0x34ad1c(0x115)](_0x492001[_0x34ad1c(0xd7)],_0x492001['spyOn']))return function(_0x2016e1){}[_0x34ad1c(0x138)](_0x492001['zsHsB'])[_0x34ad1c(0x93)](_0x492001['jkTtQ']);else{if(_0x40b48b)return _0x935a54;else _0x492001[_0x34ad1c(0xe9)](_0x5a06f4,0x0);}}else _0x492001[_0x34ad1c(0xfd)](_0x492001[_0x34ad1c(0x112)]('',_0x492001[_0x34ad1c(0x114)](_0x5c9c5c,_0x5c9c5c))[_0x492001[_0x34ad1c(0xb2)]],0x1)||_0x492001['ZZntg'](_0x492001[_0x34ad1c(0x157)](_0x5c9c5c,0x14),0x0)?function(){return!![];}[_0x34ad1c(0x138)](_0x492001[_0x34ad1c(0x112)](_0x492001['ttGod'],_0x492001['YoTTg']))['call'](_0x492001[_0x34ad1c(0xf4)]):function(){return![];}[_0x34ad1c(0x138)](_0x492001[_0x34ad1c(0xe8)](_0x492001[_0x34ad1c(0x11e)],_0x492001[_0x34ad1c(0xb1)]))[_0x34ad1c(0x93)](_0x492001[_0x34ad1c(0xbc)]);_0x492001[_0x34ad1c(0xe9)](_0x2ed4e1,++_0x5c9c5c);}try{if(_0x589dee)return _0x2ed4e1;else _0x492001['ATqfD'](_0x2ed4e1,0x0);}catch(_0x3582ad){}}