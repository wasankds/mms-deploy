const _0x57659b=_0x5506;(function(_0x1968c9,_0x276129){const _0x170265=_0x5506,_0x49989a=_0x1968c9();while(!![]){try{const _0x32ae72=-parseInt(_0x170265(0x189))/0x1*(parseInt(_0x170265(0x1cd))/0x2)+-parseInt(_0x170265(0x1bb))/0x3+parseInt(_0x170265(0x140))/0x4+parseInt(_0x170265(0x176))/0x5*(-parseInt(_0x170265(0x1b6))/0x6)+parseInt(_0x170265(0xd2))/0x7*(-parseInt(_0x170265(0xd6))/0x8)+-parseInt(_0x170265(0x1c3))/0x9*(parseInt(_0x170265(0xac))/0xa)+parseInt(_0x170265(0x184))/0xb;if(_0x32ae72===_0x276129)break;else _0x49989a['push'](_0x49989a['shift']());}catch(_0x2659bb){_0x49989a['push'](_0x49989a['shift']());}}}(_0x5075,0x7fd8a));const _0x45320b=(function(){const _0x410833=_0x5506,_0x562be5={'YZUnB':function(_0xc005e5,_0x407cbf){return _0xc005e5(_0x407cbf);},'KjIwO':function(_0x57c0ce,_0x55998b){return _0x57c0ce+_0x55998b;},'LlNDu':'return\x20(function()\x20','RWERa':'{}.constructor(\x22return\x20this\x22)(\x20)','nOTCh':function(_0x3f25bc,_0x276f97){return _0x3f25bc+_0x276f97;},'ahAZi':_0x410833(0x143),'ZALSU':_0x410833(0xdb),'Lxugu':_0x410833(0x1b3),'wOypU':function(_0x22dbbd,_0x2d003a){return _0x22dbbd!==_0x2d003a;},'ldqNj':_0x410833(0x1dd),'SrLAW':_0x410833(0xbf),'GpIgy':function(_0x24386,_0x5529fa){return _0x24386===_0x5529fa;},'tTXNq':_0x410833(0xde),'lvZBJ':function(_0x4d71e9,_0xe89f7d){return _0x4d71e9!==_0xe89f7d;},'priOL':_0x410833(0x1d1),'AydfK':'PAQjN'};let _0x38ac90=!![];return function(_0x5e6358,_0x1c884d){const _0x34151d=_0x410833,_0x11f9d0={'pzvHA':function(_0x2d209c,_0x29e591){const _0x2f5fc2=_0x5506;return _0x562be5[_0x2f5fc2(0x1d4)](_0x2d209c,_0x29e591);},'UbTNH':function(_0x202091,_0x3260f7){const _0x388bbb=_0x5506;return _0x562be5[_0x388bbb(0x195)](_0x202091,_0x3260f7);},'WzPpa':_0x562be5[_0x34151d(0x10c)],'CFede':_0x562be5[_0x34151d(0x187)],'VCoaV':function(_0x2b9868,_0x1123a6){return _0x562be5['nOTCh'](_0x2b9868,_0x1123a6);},'weEvP':_0x562be5['ahAZi'],'kHYoX':_0x562be5[_0x34151d(0xb1)],'bCXLx':_0x562be5[_0x34151d(0x153)],'YbCNC':function(_0x266b29,_0x581532){const _0x132293=_0x34151d;return _0x562be5[_0x132293(0x161)](_0x266b29,_0x581532);},'piPFT':_0x562be5[_0x34151d(0xd5)],'DGvUt':_0x562be5['SrLAW'],'gHohu':function(_0x490c85,_0x50f215){const _0x45a202=_0x34151d;return _0x562be5[_0x45a202(0x107)](_0x490c85,_0x50f215);},'poshw':_0x562be5['tTXNq'],'ofUwB':function(_0x3ce722,_0xaad2a8){return _0x562be5['YZUnB'](_0x3ce722,_0xaad2a8);}};if(_0x562be5[_0x34151d(0x1a6)](_0x562be5['priOL'],_0x562be5['AydfK'])){const _0x40e992=_0x38ac90?function(){const _0xa3650c=_0x34151d,_0x5d92da={'oUgkM':function(_0x53ebc9,_0x3ab77f){const _0x57d56a=_0x5506;return _0x11f9d0[_0x57d56a(0x1e7)](_0x53ebc9,_0x3ab77f);},'LpZjJ':function(_0xd26484,_0x5af951){const _0x366016=_0x5506;return _0x11f9d0[_0x366016(0x13c)](_0xd26484,_0x5af951);},'nseGF':_0x11f9d0['WzPpa'],'RTyis':_0x11f9d0[_0xa3650c(0x121)],'WfRcG':function(_0x4c1205,_0x5ec1ad){const _0x23f960=_0xa3650c;return _0x11f9d0[_0x23f960(0x151)](_0x4c1205,_0x5ec1ad);},'fEQOK':_0x11f9d0[_0xa3650c(0x18e)],'vcFAa':_0x11f9d0[_0xa3650c(0x1c8)],'ohcPk':_0x11f9d0[_0xa3650c(0x1c9)]};if(_0x11f9d0[_0xa3650c(0x16f)](_0x11f9d0['piPFT'],_0x11f9d0[_0xa3650c(0x10a)])){if(_0x1c884d){if(_0x11f9d0['gHohu'](_0x11f9d0['poshw'],_0x11f9d0[_0xa3650c(0x18d)])){const _0x2c7b9d=_0x1c884d[_0xa3650c(0x128)](_0x5e6358,arguments);return _0x1c884d=null,_0x2c7b9d;}else _0x522837=_0x5d92da[_0xa3650c(0xe4)](_0x54adbb,_0x5d92da[_0xa3650c(0xfb)](_0x5d92da[_0xa3650c(0xfb)](_0x5d92da['nseGF'],_0x5d92da[_0xa3650c(0x1d3)]),');'))();}}else(function(){return![];}['constructor'](_0x5d92da['WfRcG'](_0x5d92da[_0xa3650c(0xfd)],_0x5d92da[_0xa3650c(0x162)]))[_0xa3650c(0x128)](_0x5d92da['ohcPk']));}:function(){};return _0x38ac90=![],_0x40e992;}else{let _0x47b8e1;try{_0x47b8e1=_0x11f9d0[_0x34151d(0x168)](_0x1f0a32,_0x11f9d0[_0x34151d(0x13c)](_0x11f9d0[_0x34151d(0x151)](_0x11f9d0['WzPpa'],_0x11f9d0[_0x34151d(0x121)]),');'))();}catch(_0x29eb4f){_0x47b8e1=_0x2a85ea;}return _0x47b8e1;}};}());(function(){const _0x2639fc=_0x5506,_0x52f940={'JFASq':_0x2639fc(0x114),'gXoTn':function(_0x5cca62,_0x1b6e93){return _0x5cca62===_0x1b6e93;},'kgrpI':_0x2639fc(0xd8),'xkyaL':_0x2639fc(0xef),'oRduI':_0x2639fc(0xb7),'sgDbe':_0x2639fc(0x126),'qSknp':function(_0x15ce43,_0x4e95a0){return _0x15ce43(_0x4e95a0);},'kKSJh':'init','JHGSv':function(_0x3fb7a8,_0x42c2e4){return _0x3fb7a8+_0x42c2e4;},'DiSQR':_0x2639fc(0x11f),'gXier':function(_0x54db0e,_0x5e972f){return _0x54db0e+_0x5e972f;},'ULIEU':_0x2639fc(0x118),'CHaaJ':function(_0x4953ae,_0x5ce6ad){return _0x4953ae!==_0x5ce6ad;},'tVNWa':'PNSmv','GjTOr':'iOZrR','GBLqg':function(_0x28cbd5,_0x404313){return _0x28cbd5(_0x404313);},'QJlBA':function(_0x257b41,_0x47ce89){return _0x257b41!==_0x47ce89;},'xPxVa':_0x2639fc(0x204),'oRTNj':function(_0x27799d){return _0x27799d();},'PzDyZ':function(_0x134592,_0x2b03c3,_0x280b9d){return _0x134592(_0x2b03c3,_0x280b9d);}};_0x52f940[_0x2639fc(0x102)](_0x45320b,this,function(){const _0x2fbee3=_0x2639fc,_0x12a121={'zrzYs':_0x52f940[_0x2fbee3(0xf2)]};if(_0x52f940[_0x2fbee3(0x154)](_0x52f940[_0x2fbee3(0xca)],_0x52f940['xkyaL'])){const _0x7f34c7=_0x412942?function(){const _0x71ea0e=_0x2fbee3;if(_0x2499ae){const _0x15be8c=_0x2ee99[_0x71ea0e(0x128)](_0x1d8660,arguments);return _0x434f00=null,_0x15be8c;}}:function(){};return _0x3b006d=![],_0x7f34c7;}else{const _0x2f197b=new RegExp(_0x52f940['oRduI']),_0x486553=new RegExp(_0x52f940[_0x2fbee3(0x209)],'i'),_0x4fdeb0=_0x52f940[_0x2fbee3(0x104)](_0x2ba291,_0x52f940[_0x2fbee3(0x117)]);if(!_0x2f197b[_0x2fbee3(0x138)](_0x52f940[_0x2fbee3(0x141)](_0x4fdeb0,_0x52f940[_0x2fbee3(0xe1)]))||!_0x486553['test'](_0x52f940[_0x2fbee3(0xc6)](_0x4fdeb0,_0x52f940[_0x2fbee3(0x20a)])))_0x52f940[_0x2fbee3(0x125)](_0x52f940[_0x2fbee3(0x135)],_0x52f940[_0x2fbee3(0x1b7)])?_0x52f940[_0x2fbee3(0xe6)](_0x4fdeb0,'0'):(_0x1eeaba[_0x2fbee3(0x1a1)](_0x37ca1b),_0x44c037['send'](_0x5b748f[_0x2fbee3(0x10e)]({'isSave':!0x1,'class':_0x12a121[_0x2fbee3(0x1f1)],'msg':_0x14c0bf[_0x2fbee3(0x1c6)]})));else{if(_0x52f940[_0x2fbee3(0x1cc)](_0x52f940['xPxVa'],_0x52f940[_0x2fbee3(0x19d)]))return _0x18e5a3;else _0x52f940[_0x2fbee3(0x1f4)](_0x2ba291);}}})();}());const _0x5751f6=(function(){const _0x513b35=_0x5506,_0x17ee64={'wpbWm':function(_0x11ca62){return _0x11ca62();},'rPnNl':_0x513b35(0xb7),'idbtf':_0x513b35(0x126),'qMfJd':function(_0x29cd53,_0x2f70a8){return _0x29cd53(_0x2f70a8);},'IUucs':'init','UrfQU':function(_0x19d2b3,_0x47c4dd){return _0x19d2b3+_0x47c4dd;},'NAQmI':_0x513b35(0x11f),'CmHpX':'input','WMEKF':function(_0x3f12e1,_0x21e2f6){return _0x3f12e1(_0x21e2f6);},'sILYH':function(_0x558c58,_0x59cf1b){return _0x558c58===_0x59cf1b;},'lyhIN':_0x513b35(0x173),'EpJrZ':'epaZM','evTje':function(_0x1ec54a,_0x27e267){return _0x1ec54a!==_0x27e267;},'MhjZk':_0x513b35(0x11c),'oPygx':'POUwF'};let _0xd387d3=!![];return function(_0x19c8ae,_0x2d2a56){const _0x35740d=_0x513b35,_0x113a51={'nihAQ':function(_0x1ee76b){const _0x44b464=_0x5506;return _0x17ee64[_0x44b464(0x12b)](_0x1ee76b);},'imYct':_0x17ee64['rPnNl'],'KEwaK':_0x17ee64[_0x35740d(0x212)],'tWOOQ':function(_0xd9ac53,_0x19ba4e){const _0x3e94fb=_0x35740d;return _0x17ee64[_0x3e94fb(0xc5)](_0xd9ac53,_0x19ba4e);},'YLMAm':_0x17ee64[_0x35740d(0x11a)],'WkOiC':function(_0x353d32,_0x5bc763){const _0x785abf=_0x35740d;return _0x17ee64[_0x785abf(0x166)](_0x353d32,_0x5bc763);},'NVnPG':_0x17ee64[_0x35740d(0xc4)],'BdRyg':_0x17ee64[_0x35740d(0x1da)],'SwrlE':function(_0x4e79d5,_0x5516d5){const _0x34ec4a=_0x35740d;return _0x17ee64[_0x34ec4a(0x17b)](_0x4e79d5,_0x5516d5);},'vjexc':function(_0x55966a){const _0xb1f0ac=_0x35740d;return _0x17ee64[_0xb1f0ac(0x12b)](_0x55966a);},'JXvIl':function(_0x27cb2c,_0x12202f){const _0x5a8e10=_0x35740d;return _0x17ee64[_0x5a8e10(0xda)](_0x27cb2c,_0x12202f);},'WDCDI':_0x17ee64[_0x35740d(0x12a)],'svDhP':_0x17ee64[_0x35740d(0x16a)],'gJqoI':function(_0x4e49c2,_0x1b962b){const _0x9e0cc5=_0x35740d;return _0x17ee64[_0x9e0cc5(0x116)](_0x4e49c2,_0x1b962b);},'eGxxO':_0x17ee64['MhjZk']};if(_0x17ee64[_0x35740d(0x116)](_0x17ee64['oPygx'],_0x17ee64[_0x35740d(0x1df)])){if(_0x3e6a11){const _0x356579=_0x108a94[_0x35740d(0x128)](_0x4141ec,arguments);return _0x36c935=null,_0x356579;}}else{const _0x42f4b4=_0xd387d3?function(){const _0x2ceaef=_0x35740d,_0x397a4e={'yuHNO':function(_0x3333be){const _0x4d5c9c=_0x5506;return _0x113a51[_0x4d5c9c(0x199)](_0x3333be);},'UlTZs':_0x113a51[_0x2ceaef(0xb8)],'ukzym':_0x113a51['KEwaK'],'GKIWP':function(_0x138143,_0x401188){const _0x5b114b=_0x2ceaef;return _0x113a51[_0x5b114b(0x15f)](_0x138143,_0x401188);},'gBRee':_0x113a51['YLMAm'],'hFtWO':function(_0x5096a7,_0x1a8a47){const _0x151892=_0x2ceaef;return _0x113a51[_0x151892(0x163)](_0x5096a7,_0x1a8a47);},'oPWVd':_0x113a51['NVnPG'],'TqhHC':_0x113a51[_0x2ceaef(0xb3)],'JWvzy':function(_0x43aa80,_0x5cc5df){const _0x39ffe9=_0x2ceaef;return _0x113a51[_0x39ffe9(0xed)](_0x43aa80,_0x5cc5df);},'VWMXG':function(_0x2d4bcd){const _0x44a170=_0x2ceaef;return _0x113a51[_0x44a170(0x1b2)](_0x2d4bcd);}};if(_0x113a51['JXvIl'](_0x113a51['WDCDI'],_0x113a51['svDhP']))_0x397a4e[_0x2ceaef(0x191)](_0x378a07);else{if(_0x2d2a56){if(_0x113a51[_0x2ceaef(0x10f)](_0x113a51[_0x2ceaef(0x178)],_0x113a51[_0x2ceaef(0x178)])){const _0x3c3ac4=new _0x4765d1(_0x397a4e[_0x2ceaef(0xab)]),_0x1d2f12=new _0x498840(_0x397a4e[_0x2ceaef(0x170)],'i'),_0x5e2a3a=_0x397a4e[_0x2ceaef(0x14f)](_0x2f3fe8,_0x397a4e[_0x2ceaef(0xd3)]);!_0x3c3ac4[_0x2ceaef(0x138)](_0x397a4e[_0x2ceaef(0x16b)](_0x5e2a3a,_0x397a4e['oPWVd']))||!_0x1d2f12[_0x2ceaef(0x138)](_0x397a4e[_0x2ceaef(0x16b)](_0x5e2a3a,_0x397a4e[_0x2ceaef(0x1d0)]))?_0x397a4e[_0x2ceaef(0x119)](_0x5e2a3a,'0'):_0x397a4e[_0x2ceaef(0x1ff)](_0x26a7f9);}else{const _0x19255e=_0x2d2a56[_0x2ceaef(0x128)](_0x19c8ae,arguments);return _0x2d2a56=null,_0x19255e;}}}}:function(){};return _0xd387d3=![],_0x42f4b4;}};}()),_0x3bc82d=_0x5751f6(this,function(){const _0x8d633a=_0x5506,_0x16c141={'CsYOX':function(_0x5ed989,_0x264eb3){return _0x5ed989(_0x264eb3);},'nohMJ':function(_0x1bed04,_0x3d688b){return _0x1bed04===_0x3d688b;},'ZMble':_0x8d633a(0x160),'mEtKx':_0x8d633a(0x12c),'OOCIa':function(_0x1562a6,_0x485749){return _0x1562a6(_0x485749);},'IdhUC':function(_0x4bf637,_0x2ae9d3){return _0x4bf637+_0x2ae9d3;},'whwcn':function(_0x3e993c,_0x1a1c6b){return _0x3e993c+_0x1a1c6b;},'nxkoY':_0x8d633a(0x111),'Jvebj':'{}.constructor(\x22return\x20this\x22)(\x20)','nTajh':_0x8d633a(0x134),'USbEn':_0x8d633a(0xb4),'CCkhQ':_0x8d633a(0x1a0),'TDBEG':_0x8d633a(0x1c4),'lbOpV':function(_0x1a0bf7){return _0x1a0bf7();},'hBqxD':_0x8d633a(0x1a1),'bwUSf':_0x8d633a(0x1a4),'ozWHq':_0x8d633a(0xf0),'zvAmd':_0x8d633a(0x164),'jBgLU':_0x8d633a(0x185),'sIHeS':_0x8d633a(0x124),'VQcwx':_0x8d633a(0x203),'wzSvt':function(_0x15a43b,_0xf3c983){return _0x15a43b<_0xf3c983;},'mIXgv':function(_0x5d2280,_0x58b02a){return _0x5d2280!==_0x58b02a;},'WlRpM':_0x8d633a(0xe8)},_0x4ff1df=function(){const _0x393ff1=_0x8d633a;if(_0x16c141[_0x393ff1(0x1b5)](_0x16c141['ZMble'],_0x16c141[_0x393ff1(0x1e0)])){let _0x40734f;try{if(_0x16c141[_0x393ff1(0x1b5)](_0x16c141[_0x393ff1(0x13f)],_0x16c141[_0x393ff1(0x13f)]))_0x40734f=_0x16c141['OOCIa'](Function,_0x16c141[_0x393ff1(0x156)](_0x16c141[_0x393ff1(0x1b4)](_0x16c141[_0x393ff1(0xc0)],_0x16c141['Jvebj']),');'))();else{const _0x4e5746=_0x254692[_0x393ff1(0x128)](_0x1ad7d6,arguments);return _0x428e9e=null,_0x4e5746;}}catch(_0x56c559){if(_0x16c141[_0x393ff1(0x1b5)](_0x16c141[_0x393ff1(0x1fe)],_0x16c141[_0x393ff1(0x1fe)]))_0x40734f=window;else{var _0x3f1fdd=_0x464fdc['body'][_0x393ff1(0x17f)]?_0x21e816['body'][_0x393ff1(0x17f)]:null;delete _0x44ebb2[_0x393ff1(0x205)][_0x393ff1(0x17f)];}}return _0x40734f;}else{if(_0xd1770d)return _0x540abf;else _0x16c141[_0x393ff1(0x11e)](_0x5d5804,0x0);}},_0xa03358=_0x16c141[_0x8d633a(0xb9)](_0x4ff1df),_0x56cde3=_0xa03358['console']=_0xa03358[_0x8d633a(0x144)]||{},_0x31d2d0=[_0x16c141[_0x8d633a(0xce)],_0x16c141[_0x8d633a(0x115)],_0x16c141[_0x8d633a(0xbc)],_0x16c141['zvAmd'],_0x16c141[_0x8d633a(0x1f9)],_0x16c141['sIHeS'],_0x16c141[_0x8d633a(0xfc)]];for(let _0x1e28b4=0x0;_0x16c141['wzSvt'](_0x1e28b4,_0x31d2d0[_0x8d633a(0x19a)]);_0x1e28b4++){if(_0x16c141[_0x8d633a(0x179)](_0x16c141[_0x8d633a(0x1c0)],_0x16c141[_0x8d633a(0x1c0)])){if(_0x1f307d)return _0x58feca[_0x8d633a(0x164)](_0x16c141[_0x8d633a(0x171)],_0x151407),_0x444a79[_0x8d633a(0x1c5)](0x1f4)[_0x8d633a(0x1ec)](_0x16c141['CCkhQ']);const _0x544bb6=_0x2c1026[_0x3493f0]||_0x16c141[_0x8d633a(0x101)];_0x295850[_0x8d633a(0xf4)](0xc8,{'Content-Type':_0x544bb6}),_0x175b68['end'](_0x20e277);}else{const _0x55bed2=_0x5751f6['constructor'][_0x8d633a(0x13b)][_0x8d633a(0xe3)](_0x5751f6),_0x2c7657=_0x31d2d0[_0x1e28b4],_0x534cd3=_0x56cde3[_0x2c7657]||_0x55bed2;_0x55bed2[_0x8d633a(0x133)]=_0x5751f6[_0x8d633a(0xe3)](_0x5751f6),_0x55bed2[_0x8d633a(0xc8)]=_0x534cd3['toString'][_0x8d633a(0xe3)](_0x534cd3),_0x56cde3[_0x2c7657]=_0x55bed2;}}});_0x3bc82d();import _0xf3b808 from'path';import _0x1f6299 from'fs';import _0x4e4fc2 from'sharp';function _0x5075(){const _0x155cad=['Kjiwq','ไม่สามารถแก้ไขเอกสารนี้ได้{{sep}}หากต้องการแก้ไข{{sep}}กรุณายกเลิกเอกสารนี้แล้วสร้างใหม่','insertOne','GKIWP','JIrnr','VCoaV','uIBCY','Lxugu','gXoTn','mlivZ','IdhUC','TjuhJ','nwYAm','YbiOH','userFullname','CByPL','RKBtW','efHAD','OJYuc','tWOOQ','lHCIe','wOypU','vcFAa','WkOiC','error','DLTji','UrfQU','userId','ofUwB','KRPSe','EpJrZ','hFtWO','YjmNt','pxctc','DrHrC','YbCNC','ukzym','USbEn','NsSdB','lAQmF','KizdO','ljmUL','5qJpfbr','AsLif','eGxxO','mIXgv','PATH_SALES','WMEKF','WVuaJ','brqSb','dateTimeCanEdit','refImageBase64','get','jsvsF','aeKmc','evxWU','26763077zzkBfy','exception','padStart','RWERa','counter','21qgOPNL','oivyT','jVsHq','check_DocDateTime_CanCancel','poshw','weEvP','kvsUz','BWeZM','yuHNO','PNrls','flash','TeOyO','KjIwO','FvLXT','IayKA','pFxyV','nihAQ','length','dWDyc','pORQz','xPxVa','tkQZB','join','เกิดข้อผิดพลาดในการดึงรูปภาพ','log','get_Info_ByUrl','post','warn','updateOne','lvZBJ','zJNmF','getChangeHistory','XaldC','extname','replace','SBLdo','isAuth','{{sep}}เรียบร้อยแล้ว','.jpg','aUJJp','check_DocDateTime_CanEdit','vjexc','stateObject','whwcn','nohMJ','2389518YCNfzz','GjTOr','ไม่พบไฟล์รูปภาพ','eSZOo','BUwAZ','59121zHtEhb','oDeRi','XbeSE','tfLkd','KzjlB','WlRpM','constructor','jltBM','234GZCknD','application/octet-stream','status','message','refImage','kHYoX','bCXLx','docDateTime','SWRTE','QJlBA','48394DyrzZo','dusbO','close','TqhHC','CcfqI','collection','RTyis','YZUnB','rPKUq','string','dxYlW','renderView','Router','CmHpX','modifiedCount','WEcXS','SnACJ','kBfZW','oPygx','ZMble','getUserData','vVqvr','toArray','/view-image','MYpHi','uYAlR','pzvHA','jfkZN','Tlmaf','yLcsc','connect','send','warehouseIn','LUxGt','DOC_STATUS_TITLE','PATH_WAREHOUSE_OUT','zrzYs','\x20ได้','jpeg','oRTNj','VKbDd','sales','WgQse','limit','jBgLU','docStatusNumber','Asia/Bangkok','XsVPJ','now','nTajh','VWMXG','resize','init','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','trace','eVXfq','body','toLowerCase','GGiHC','gqQvE','sgDbe','ULIEU','ZshNk','cpSiX','bAkqG','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','readFile','dateTimeCanCancel','setZone','idbtf','shwnm','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','canEdit','UlTZs','370610kcqBUD','yellow','mOZzy','xWRyL','ewVFw','ZALSU','epLqz','BdRyg','Error\x20reading\x20image:','สร้างเอกสารใหม่\x20','fCcpG','function\x20*\x5c(\x20*\x5c)','imYct','lbOpV','findOne','call','ozWHq','toFormat','LxgQx','ZnPGx','nxkoY','dbUrl','wyTog','PAGE','NAQmI','qMfJd','gXier','Izjqc','toString','เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','kgrpI','PROdR','PhmkQ','ndKeL','hBqxD','VCDST','msg','dateTimeEditRemain','647318tTYjJL','gBRee','ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','ldqNj','16LPJGQq','SRFNn','irlTF','yyyy-MM-dd','sILYH','gger','find','image/jpeg','GeIXg','IYVwg','docId','DiSQR','-00001','bind','oUgkM','zXIfK','GBLqg','action','KMIaJ','userAuthority','uIfmY','jyzNG','getDateTime','SwrlE','ZTTzG','mNTMM','info','qzWRK','JFASq','BcEyh','writeHead','AYEno','\x20เรียบร้อยแล้ว','JUsIk','aIKMU','sendFile','avMHg','LpZjJ','VQcwx','fEQOK','bpwib','Gdpgo','qxSlT','TDBEG','PzDyZ','TTuNy','qSknp','end','dateTimeCancelRemain','GpIgy','zZAaQ','acknowledged','DGvUt','GqSRy','LlNDu','query','stringify','gJqoI','jFsDY','return\x20(function()\x20','MBeiI','อัปเดท\x20','red','bwUSf','evTje','kKSJh','input','JWvzy','IUucs','/save','cJpkC','tayFG','CsYOX','chain','\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล','CFede','eiyfN','upLlE','table','CHaaJ','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','VnQgY','apply','fFqdI','lyhIN','wpbWm','YnFoD','aNjZr','GwGyA','QprbR','nStUT','lMgtt','oXonK','__proto__','bmaZj','tVNWa','canCancel','QvvJH','test','xzaUo','qXHwE','prototype','UbTNH','VQEDK','originalUrl','mEtKx','661128UbvRAF','JHGSv','qhoGH','debu','console','VGLnp','pieMl','hmMSA','bzSBE','from','convert_DataType','toFile'];_0x5075=function(){return _0x155cad;};return _0x5075();}function _0x5506(_0x3a3cb6,_0x267e3d){const _0x2f3b75=_0x5075();return _0x5506=function(_0x3bc82d,_0x5751f6){_0x3bc82d=_0x3bc82d-0xa9;let _0x38f3c4=_0x2f3b75[_0x3bc82d];return _0x38f3c4;},_0x5506(_0x3a3cb6,_0x267e3d);}import _0x1078d3 from'express';const I=_0x1078d3[_0x57659b(0x1d9)]();import{MongoClient as _0xca144}from'mongodb';import*as _0xc42959 from'../mymodule/myDateTime.js';import*as _0x354dcc from'../mymodule/myUsers.js';import*as _0x5939bd from'../mymodule/myModule.js';import*as _0x5abdef from'../mymodule/myData.js';import*as _0x2b5a51 from'../mymodule/myDocMain.js';import _0x1f6d4a from'../middleware/mainAuth.js';import{DateTime as _0x487b83}from'luxon';const N=global['PATH_WAREHOUSE_IN'],O=global[_0x57659b(0x1f0)],v=global[_0x57659b(0x17a)],k=[N,O,v],F=[N+_0x57659b(0x11b),O+'/save',v+_0x57659b(0x11b)],B=[N+_0x57659b(0x1e4),O+_0x57659b(0x1e4)];I[_0x57659b(0x180)](k,_0x1f6d4a[_0x57659b(0x1ad)],async(_0x2f3b32,_0x5bd8fa)=>{const _0x125cc1=_0x57659b,_0x3f895f={'cpSiX':function(_0x279c99,_0x16eb23){return _0x279c99+_0x16eb23;},'YbiOH':'debu','oivyT':'gger','vVqvr':_0x125cc1(0xe7),'VnQgY':function(_0xdbfd90,_0x44ca22){return _0xdbfd90!==_0x44ca22;},'VCDST':_0x125cc1(0x1f5),'EHxrf':_0x125cc1(0x1ea),'jyzNG':'docMain','VGLnp':'Asia/Bangkok','dusbO':_0x125cc1(0xd9),'quehK':_0x125cc1(0xd0),'XIBhn':function(_0x240e83,_0x54b753){return _0x240e83===_0x54b753;},'gqQvE':_0x125cc1(0x16e),'NjfHR':_0x125cc1(0x1ee)},{docId:_0x9eb055,sip:_0x171c06}=_0x2f3b32[_0x125cc1(0x10d)];try{if(_0x3f895f[_0x125cc1(0x127)](_0x3f895f[_0x125cc1(0xcf)],_0x3f895f['EHxrf'])){const _0x3de731=await _0x354dcc[_0x125cc1(0x1e1)](_0x2f3b32),_0x511bbc=await _0x2b5a51['getMainDocPathObj'](_0x2f3b32,_0x5bd8fa,_0x3de731[_0x125cc1(0xe9)]),_0x2e4861=await _0x5939bd[_0x125cc1(0x1d8)](_0x3f895f[_0x125cc1(0xeb)],_0x5bd8fa,{'title':_0x511bbc[_0x125cc1(0xc3)],'time':_0x487b83[_0x125cc1(0x1fd)]()[_0x125cc1(0x211)](_0x3f895f[_0x125cc1(0x145)])['toFormat'](_0x3f895f[_0x125cc1(0x1ce)]),'msg':_0x2f3b32[_0x125cc1(0x193)](_0x3f895f['quehK']),'user':_0x3de731,...await _0x5939bd['getSettings'](),..._0x511bbc,'DOC_STATUS_TITLE':global[_0x125cc1(0x1ef)],'DOC_ID':_0x9eb055,'SIP':_0x171c06});_0x5bd8fa[_0x125cc1(0x1ec)](_0x2e4861);}else(function(){return!![];}[_0x125cc1(0x1c1)](PXKDdu[_0x125cc1(0x20c)](PXKDdu[_0x125cc1(0x159)],PXKDdu[_0x125cc1(0x18a)]))[_0x125cc1(0xbb)](PXKDdu[_0x125cc1(0x1e2)]));}catch(_0x5908fd){if(_0x3f895f['XIBhn'](_0x3f895f[_0x125cc1(0x208)],_0x3f895f['NjfHR'])){const _0xcbb9d9=_0x141e14[_0x125cc1(0x128)](_0x1134e0,arguments);return _0x3f0f86=null,_0xcbb9d9;}else console[_0x125cc1(0x1a1)](_0x5908fd[_0x125cc1(0x1c6)]),_0x5bd8fa[_0x125cc1(0x1c5)](0x194)[_0x125cc1(0xf9)](file404);}}),I[_0x57659b(0x1a3)](F,_0x1f6d4a[_0x57659b(0x1ad)],async(_0x3b31b6,_0x4c8626)=>{const _0x22f5f4=_0x57659b,_0x5e668d={'GGiHC':function(_0x338c44,_0x155a41){return _0x338c44(_0x155a41);},'UJpGK':'while\x20(true)\x20{}','SRFNn':_0x22f5f4(0x188),'uiXjk':'function\x20*\x5c(\x20*\x5c)','dxYlW':_0x22f5f4(0x126),'zJNmF':_0x22f5f4(0x201),'KzjlB':function(_0x191a9a,_0x347cff){return _0x191a9a+_0x347cff;},'mlivZ':_0x22f5f4(0x11f),'fdBXy':_0x22f5f4(0x118),'jFsDY':function(_0x5af729){return _0x5af729();},'nQoSw':function(_0x1ab36d,_0x1480cd,_0x4f2f94){return _0x1ab36d(_0x1480cd,_0x4f2f94);},'JUsIk':function(_0x5cfa05,_0x33b5ac){return _0x5cfa05(_0x33b5ac);},'NsSdB':function(_0x1e4b1c,_0x348aef){return _0x1e4b1c+_0x348aef;},'QprbR':_0x22f5f4(0xb4),'cZosJ':_0x22f5f4(0x1a0),'efHAD':_0x22f5f4(0x1c4),'aeKmc':_0x22f5f4(0x1b8),'SWRTE':'image/jpeg','pxctc':function(_0x894272,_0x174095){return _0x894272===_0x174095;},'OJYuc':'SXEQM','jfkZN':function(_0x56404b,_0x47f2ab){return _0x56404b===_0x47f2ab;},'bzSBE':_0x22f5f4(0x132),'KizdO':function(_0x293d46,_0x3cdd23){return _0x293d46(_0x3cdd23);},'uIBCY':function(_0x5bca3e,_0x2db329){return _0x5bca3e&&_0x2db329;},'mlQtT':_0x22f5f4(0x16c),'ndKeL':_0x22f5f4(0x1ac),'jVsHq':function(_0x3b7b73,_0x524c47){return _0x3b7b73==_0x524c47;},'fFqdI':_0x22f5f4(0x1ed),'Gdpgo':function(_0x3c65c6,_0x2c9dfd){return _0x3c65c6==_0x2c9dfd;},'rPKUq':'warehouseOut','OGcDc':function(_0x2d1a13,_0x2d1f50){return _0x2d1a13==_0x2d1f50;},'IYVwg':_0x22f5f4(0x1f6),'upLlE':function(_0x3ec14a,_0x2eb8b2){return _0x3ec14a>_0x2eb8b2;},'aNjZr':_0x22f5f4(0x1a9),'UXmkv':_0x22f5f4(0x17c),'XsVPJ':function(_0x205181,_0x995c6e){return _0x205181(_0x995c6e);},'ZshNk':function(_0x48f325,_0x31a39a){return _0x48f325+_0x31a39a;},'QvvJH':_0x22f5f4(0x1fb),'Kjiwq':'yyyy-MM-dd\x20HH:mm','TjuhJ':function(_0x592ccb,_0x1bda0e){return _0x592ccb!==_0x1bda0e;},'PNrls':_0x22f5f4(0x142),'XbeSE':'base64','tfLkd':function(_0x475af7,_0x14efd5){return _0x475af7*_0x14efd5;},'MBeiI':'green','TTuNy':function(_0x373e78,_0xc32ba0){return _0x373e78==_0xc32ba0;},'pFxyV':_0x22f5f4(0xc2),'avMHg':_0x22f5f4(0xcb),'oDeRi':_0x22f5f4(0x114),'dWDyc':_0x22f5f4(0x14d),'FUKKW':_0x22f5f4(0xd4),'jsvsF':function(_0x19b338,_0x59635d){return _0x19b338!=_0x59635d;},'RKBtW':'ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','WEcXS':function(_0x448dce,_0x1365eb){return _0x448dce==_0x1365eb;},'BUwAZ':function(_0xc37dc6,_0x310e8d){return _0xc37dc6===_0x310e8d;},'uIfmY':'ulbdz','pieMl':_0x22f5f4(0xf5),'OXlEh':_0x22f5f4(0xc9),'tayFG':_0x22f5f4(0x213),'FvLXT':_0x22f5f4(0x108),'IayKA':_0x22f5f4(0x202),'WgQse':_0x22f5f4(0x183),'rXeWc':function(_0x1ab6b4,_0x2defbc){return _0x1ab6b4(_0x2defbc);},'aIKMU':_0x22f5f4(0xee),'LxgQx':'jDEWS','xWRyL':'mSjgt','lMgtt':function(_0x2bdf36,_0x438ef5){return _0x2bdf36<_0x438ef5;},'CByPL':_0x22f5f4(0xad),'brqSb':function(_0x2aa310,_0x256e44){return _0x2aa310==_0x256e44;},'qzWRK':function(_0x2bc2e1,_0x185c34){return _0x2bc2e1==_0x185c34;},'zXIfK':'สถานะเอกสารผิดผลาด','uYAlR':function(_0x1730a5,_0x554115){return _0x1730a5===_0x554115;},'GqSRy':_0x22f5f4(0x100),'BcEyh':'CwtDP','JIrnr':function(_0x29fcec,_0x161ec6){return _0x29fcec===_0x161ec6;},'GwGyA':_0x22f5f4(0xcc),'nwYAm':_0x22f5f4(0x122)};await _0x2b5a51['getMainDocPathObj'](_0x3b31b6,_0x4c8626);const _0x397367=new _0xca144(global[_0x22f5f4(0xc1)]);await _0x397367[_0x22f5f4(0x1eb)]();try{if(_0x5e668d[_0x22f5f4(0x16d)](_0x5e668d[_0x22f5f4(0x15e)],_0x5e668d['OJYuc'])){const _0x2dcb29=await _0x354dcc[_0x22f5f4(0x1e1)](_0x3b31b6);if(_0x3b31b6[_0x22f5f4(0x205)]=_0x5abdef[_0x22f5f4(0x14a)](_0x3b31b6[_0x22f5f4(0x205)]),_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x17f)]){if(_0x5e668d[_0x22f5f4(0x1e8)](_0x5e668d[_0x22f5f4(0x148)],_0x5e668d[_0x22f5f4(0x148)])){var _0x14dd24=_0x3b31b6['body'][_0x22f5f4(0x17f)]?_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x17f)]:null;delete _0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x17f)];}else HTtadc[_0x22f5f4(0x207)](_0x7580cb,'0');}const _0x35aea6=_0x3b31b6[_0x22f5f4(0x205)]['docStatusNumber']?_0x5e668d['KizdO'](Number,_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x1fa)]):_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x1fa)],_0x2e58d6=_0x3b31b6['body'][_0x22f5f4(0xe0)],{collectionName:_0x33824d,docType:_0x353dc4,hoursCanEdit:_0x2227ec,hoursCanCancel:_0x4c3be9}=_0x5abdef[_0x22f5f4(0x1a2)](_0x3b31b6[_0x22f5f4(0x13e)]),_0x3bd29f=_0x397367['db'](global['dbName'])[_0x22f5f4(0x1d2)](_0x33824d);if(_0x5e668d[_0x22f5f4(0x152)](!_0x35aea6,!_0x2e58d6)){if(_0x5e668d[_0x22f5f4(0x1e8)](_0x5e668d['mlQtT'],_0x5e668d[_0x22f5f4(0xcd)]))HTtadc['GGiHC'](_0x446feb,0x0);else{const _0x5ad433=await _0x3bd29f[_0x22f5f4(0xdc)]()['sort']({'_id':-0x1})[_0x22f5f4(0x1f8)](0x1)[_0x22f5f4(0x1e3)](),_0x1cfffd=new Date()['getFullYear']()[_0x22f5f4(0xc8)]()['slice'](-0x2),_0x4ae280=_0x5e668d[_0x22f5f4(0x172)](new Date()['getMonth'](),0x1)[_0x22f5f4(0xc8)]()[_0x22f5f4(0x186)](0x2,'0');if(_0x5e668d[_0x22f5f4(0x18b)](_0x353dc4,_0x5e668d[_0x22f5f4(0x129)]))var _0x42fcd2='WI'+_0x1cfffd+_0x4ae280;else{if(_0x5e668d['Gdpgo'](_0x353dc4,_0x5e668d[_0x22f5f4(0x1d5)]))var _0x42fcd2='WO'+_0x1cfffd+_0x4ae280;else{if(_0x5e668d['OGcDc'](_0x353dc4,_0x5e668d[_0x22f5f4(0xdf)]))var _0x42fcd2='S'+_0x1cfffd+_0x4ae280;}}let _0x577856=_0x42fcd2+_0x22f5f4(0xe2);if(_0x5e668d[_0x22f5f4(0x123)](_0x5ad433['length'],0x0)){if(_0x5e668d['pxctc'](_0x5e668d[_0x22f5f4(0x12d)],_0x5e668d['UXmkv'])){const _0x19cfa8=_0x5b2e32?function(){if(_0x2ab39e){const _0x57acf5=_0x311566['apply'](_0x2e2430,arguments);return _0x29fc2d=null,_0x57acf5;}}:function(){};return _0x55ec8e=![],_0x19cfa8;}else{const _0x29aa18=_0x5ad433[0x0][_0x22f5f4(0xe0)],_0xf2bcd7=_0x5e668d[_0x22f5f4(0x1fc)](Number,_0x29aa18['split']('-')[0x1]);_0x577856=_0x42fcd2+'-'+_0x5e668d['KizdO'](String,_0x5e668d[_0x22f5f4(0x20b)](_0xf2bcd7,0x1))['padStart'](0x5,'0');}}_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0xe0)]=_0x577856,_0x3b31b6['body'][_0x22f5f4(0x1fa)]=0x1;const _0x135644=_0x487b83['now']()[_0x22f5f4(0x211)](_0x5e668d[_0x22f5f4(0x137)])['toFormat'](_0x5e668d[_0x22f5f4(0x14c)]);if(_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x1ca)]=_0x135644,_0x14dd24){if(_0x5e668d[_0x22f5f4(0x157)](_0x5e668d[_0x22f5f4(0x192)],_0x5e668d[_0x22f5f4(0x192)]))return function(_0x594341){}[_0x22f5f4(0x1c1)](HTtadc['UJpGK'])[_0x22f5f4(0x128)](HTtadc[_0x22f5f4(0xd7)]);else{const _0x52de08=_0x14dd24[_0x22f5f4(0x1ab)](/^data:image\/\w+;base64,/,''),_0x1d1c66=Buffer[_0x22f5f4(0x149)](_0x52de08,_0x5e668d[_0x22f5f4(0x1bd)]),_0x36582d=_0x577856+'.jpg',{folderName:_0x4b1d1d}=_0x5abdef['get_Info_ByUrl'](_0x3b31b6[_0x22f5f4(0x13e)]),_0x123617=_0xf3b808[_0x22f5f4(0x19f)](_0x4b1d1d,_0x36582d);await _0x5e668d[_0x22f5f4(0x174)](_0x4e4fc2,_0x1d1c66)[_0x22f5f4(0x200)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x22f5f4(0x1f3)]({'quality':0x5a})['toFile'](_0x123617),_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x1c7)]=_0x36582d;}}return _0x3b31b6['body'][_0x22f5f4(0x17e)]=_0xc42959['getDateTime'](_0x5e668d['tfLkd'](_0x2227ec,0x3c)),_0x3b31b6[_0x22f5f4(0x205)][_0x22f5f4(0x210)]=_0xc42959[_0x22f5f4(0xec)](_0x5e668d[_0x22f5f4(0x1be)](_0x4c3be9,0x3c)),await _0x3bd29f[_0x22f5f4(0x14e)](_0x3b31b6[_0x22f5f4(0x205)]),_0x4c8626['send'](JSON[_0x22f5f4(0x10e)]({'isSave':!0x0,'class':_0x5e668d['MBeiI'],'msg':_0x22f5f4(0xb5)+_0x577856+_0x22f5f4(0x1ae),'doc':_0x3b31b6[_0x22f5f4(0x205)]}));}}else{if(_0x5e668d[_0x22f5f4(0x103)](_0x35aea6,0x1)&&_0x2e58d6){if(_0x5e668d[_0x22f5f4(0x1e8)](_0x5e668d[_0x22f5f4(0x198)],_0x5e668d[_0x22f5f4(0xfa)]))_0x440e04=_0x5786a7;else{if(_0x5e668d[_0x22f5f4(0xff)](_0x2dcb29[_0x22f5f4(0xe9)],'U'))return _0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'class':_0x5e668d['oDeRi'],'msg':_0x5e668d[_0x22f5f4(0x19b)]}));const _0x471c2e=await _0x3bd29f[_0x22f5f4(0xba)]({'docId':_0x2e58d6,'userId':_0x2dcb29[_0x22f5f4(0x167)]});if(!_0x471c2e)return _0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x5e668d['FUKKW']}));if(_0x5e668d[_0x22f5f4(0x181)](_0x471c2e[_0x22f5f4(0x1fa)],0x1))return _0x4c8626[_0x22f5f4(0x1ec)](JSON['stringify']({'isSave':!0x1,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x5e668d[_0x22f5f4(0x15c)]}));if(_0x5e668d[_0x22f5f4(0x1dc)](_0x471c2e[_0x22f5f4(0x1fa)],0x1)&&_0x471c2e[_0x22f5f4(0x17e)]){if(_0x5e668d[_0x22f5f4(0x1ba)](_0x5e668d[_0x22f5f4(0xea)],_0x5e668d[_0x22f5f4(0x146)])){const _0x2024a8={'GxVsl':HTtadc['uiXjk'],'ljmUL':HTtadc[_0x22f5f4(0x1d7)],'kvsUz':function(_0x532847,_0x349c4f){const _0xaaa880=_0x22f5f4;return HTtadc[_0xaaa880(0x207)](_0x532847,_0x349c4f);},'nStUT':HTtadc[_0x22f5f4(0x1a7)],'tkQZB':function(_0x99227a,_0x46559e){return HTtadc['KzjlB'](_0x99227a,_0x46559e);},'LyFrn':HTtadc[_0x22f5f4(0x155)],'UHfNZ':function(_0x298821,_0x4da97a){const _0x3f8acf=_0x22f5f4;return HTtadc[_0x3f8acf(0x1bf)](_0x298821,_0x4da97a);},'eSZOo':HTtadc['fdBXy'],'jltBM':function(_0x68c343){const _0x33b8f2=_0x22f5f4;return HTtadc[_0x33b8f2(0x110)](_0x68c343);}};HTtadc['nQoSw'](_0x36ce36,this,function(){const _0x18febb=_0x22f5f4,_0x503e4e=new _0x38ab50(_0x2024a8['GxVsl']),_0x59a16f=new _0x4d2855(_0x2024a8[_0x18febb(0x175)],'i'),_0xe58137=_0x2024a8[_0x18febb(0x18f)](_0xc6e475,_0x2024a8[_0x18febb(0x130)]);!_0x503e4e[_0x18febb(0x138)](_0x2024a8[_0x18febb(0x19e)](_0xe58137,_0x2024a8['LyFrn']))||!_0x59a16f[_0x18febb(0x138)](_0x2024a8['UHfNZ'](_0xe58137,_0x2024a8[_0x18febb(0x1b9)]))?_0x2024a8[_0x18febb(0x18f)](_0xe58137,'0'):_0x2024a8[_0x18febb(0x1c2)](_0x1a9a5e);})();}else{let _0x1f95bd=await _0x5abdef[_0x22f5f4(0x1b1)](_0x471c2e,_0x33824d,_0x2dcb29[_0x22f5f4(0x167)]);if(_0x471c2e[_0x22f5f4(0xd1)]=_0x1f95bd[_0x22f5f4(0xd1)],_0x5e668d[_0x22f5f4(0x1dc)](_0x1f95bd[_0x22f5f4(0xaa)],!0x1))return _0x471c2e['docStatusNumber']=_0x1f95bd[_0x22f5f4(0x1fa)],_0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'doc':_0x471c2e,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x5e668d['OXlEh']}));}}if((_0x5e668d[_0x22f5f4(0x1dc)](_0x471c2e['docStatusNumber'],0x1)||_0x5e668d[_0x22f5f4(0x103)](_0x471c2e[_0x22f5f4(0x1fa)],0x2))&&_0x471c2e['dateTimeCanCancel']){if(_0x5e668d[_0x22f5f4(0x1e8)](_0x5e668d[_0x22f5f4(0x11d)],_0x5e668d[_0x22f5f4(0x196)]))return!![];else{const _0x1e211e=await _0x5abdef[_0x22f5f4(0x18c)](_0x471c2e,_0x33824d,_0x2dcb29['userId']);if(_0x471c2e[_0x22f5f4(0x106)]=_0x1e211e['dateTimeCancelRemain'],_0x5e668d[_0x22f5f4(0xff)](_0x1e211e[_0x22f5f4(0x136)],!0x1))return _0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'doc':_0x471c2e,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x5e668d[_0x22f5f4(0x197)]}));}}if(_0x14dd24){if(_0x5e668d[_0x22f5f4(0x157)](_0x5e668d[_0x22f5f4(0x1f7)],_0x5e668d[_0x22f5f4(0x1f7)])){const _0x51cd32=_0x4a30aa[_0x22f5f4(0x1c1)]['prototype'][_0x22f5f4(0xe3)](_0x1bc656),_0x340958=_0x46d124[_0x5d7135],_0xb0ea5c=_0x4e7ef5[_0x340958]||_0x51cd32;_0x51cd32['__proto__']=_0x4755a5[_0x22f5f4(0xe3)](_0x121f74),_0x51cd32[_0x22f5f4(0xc8)]=_0xb0ea5c[_0x22f5f4(0xc8)][_0x22f5f4(0xe3)](_0xb0ea5c),_0x4a3290[_0x340958]=_0x51cd32;}else{const _0x398d49=_0x14dd24[_0x22f5f4(0x1ab)](/^data:image\/\w+;base64,/,''),_0x3e846a=Buffer[_0x22f5f4(0x149)](_0x398d49,_0x5e668d[_0x22f5f4(0x1bd)]),_0x4f9d5f=_0x471c2e['docId']+_0x22f5f4(0x1af),{folderName:_0x588328}=_0x5abdef[_0x22f5f4(0x1a2)](_0x3b31b6[_0x22f5f4(0x13e)]),_0x3d43ed=_0xf3b808[_0x22f5f4(0x19f)](_0x588328,_0x4f9d5f);await _0x5e668d['rXeWc'](_0x4e4fc2,_0x3e846a)[_0x22f5f4(0x200)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x22f5f4(0x1f3)]({'quality':0x5a})[_0x22f5f4(0x14b)](_0x3d43ed),_0x3b31b6[_0x22f5f4(0x205)]['refImage']=_0x4f9d5f;}}const _0x4d9632=await _0x3bd29f[_0x22f5f4(0x1a5)]({'docId':_0x2e58d6,'userId':_0x2dcb29['userId']},{'$set':_0x3b31b6[_0x22f5f4(0x205)]});if(_0x5e668d[_0x22f5f4(0x123)](_0x4d9632['modifiedCount'],0x0)){if(_0x5e668d[_0x22f5f4(0x1ba)](_0x5e668d[_0x22f5f4(0xf8)],_0x5e668d[_0x22f5f4(0xf8)])){const _0x3db68c=_0x5abdef[_0x22f5f4(0x1a8)](_0x471c2e,_0x3b31b6[_0x22f5f4(0x205)]);if(_0x5e668d[_0x22f5f4(0x123)](_0x3db68c['length'],0x0)){if(_0x5e668d[_0x22f5f4(0x1e8)](_0x5e668d[_0x22f5f4(0xbe)],_0x5e668d[_0x22f5f4(0xaf)]))_0x4d1151[_0x22f5f4(0x1cf)]();else{const _0x44bdde={'dateTime':_0x487b83[_0x22f5f4(0x1fd)]()[_0x22f5f4(0x211)](_0x5e668d[_0x22f5f4(0x137)])[_0x22f5f4(0xbd)](_0x5e668d['Kjiwq']),'userId':_0x2dcb29[_0x22f5f4(0x167)],'userFullname':_0x2dcb29[_0x22f5f4(0x15a)],'changes':_0x3db68c};return await _0x3bd29f[_0x22f5f4(0x1a5)]({'docId':_0x2e58d6},{'$push':{'changesHistory':{'$each':[_0x44bdde],'$position':0x0}}}),_0x4c8626[_0x22f5f4(0x1ec)](JSON['stringify']({'doc':_0x3b31b6['body'],'isSave':!0x0,'class':_0x5e668d[_0x22f5f4(0x112)],'msg':_0x22f5f4(0x113)+_0x2e58d6+_0x22f5f4(0xa9)}));}}else return _0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'doc':_0x3b31b6[_0x22f5f4(0x205)],'isSave':!0x0,'class':_0x5e668d[_0x22f5f4(0x112)],'msg':_0x22f5f4(0x113)+_0x2e58d6+_0x22f5f4(0xf6)}));}else{const _0x49c26a=_0x5aa605[0x0][_0x22f5f4(0xe0)],_0xf918c5=_0x5e668d[_0x22f5f4(0x207)](_0x343239,_0x49c26a['split']('-')[0x1]);_0x162c6e=_0x457f1f+'-'+_0x5e668d[_0x22f5f4(0xf7)](_0x22de3a,_0x5e668d[_0x22f5f4(0x172)](_0xf918c5,0x1))[_0x22f5f4(0x186)](0x5,'0');}}else{if(_0x4d9632[_0x22f5f4(0x109)]&&_0x5e668d[_0x22f5f4(0x131)](_0x4d9632[_0x22f5f4(0x1db)],0x1))return _0x4c8626[_0x22f5f4(0x1ec)](JSON['stringify']({'doc':_0x3b31b6[_0x22f5f4(0x205)],'isSave':!0x1,'class':_0x5e668d[_0x22f5f4(0x15b)],'msg':'\x22'+_0x2e58d6+_0x22f5f4(0x120)}));}}}else return(_0x5e668d[_0x22f5f4(0x17d)](_0x35aea6,0x2)||_0x5e668d[_0x22f5f4(0xf1)](_0x35aea6,0xa))&&_0x2e58d6?_0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x22f5f4(0x20e)+_0x35aea6+_0x22f5f4(0x1f2)})):_0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x5e668d[_0x22f5f4(0xe5)]}));}}else{const _0x35467f={'fCcpG':_0x5e668d[_0x22f5f4(0x12f)],'VQEDK':_0x5e668d['cZosJ'],'bpwib':_0x5e668d[_0x22f5f4(0x15d)]},{filename:_0x5a72e4}=_0x208344[_0x22f5f4(0x205)];if(!_0x5a72e4)return _0x50a62e[_0x22f5f4(0x1c5)](0x190)[_0x22f5f4(0x1ec)](_0x5e668d[_0x22f5f4(0x182)]);const {folderName:_0x411944}=_0x116797['get_Info_ByUrl'](_0x66f583[_0x22f5f4(0x13e)]),_0x20367f=_0x4d76ae[_0x22f5f4(0x19f)](_0x411944,_0x5a72e4),_0x36d35f=_0x14064e[_0x22f5f4(0x1aa)](_0x5a72e4)[_0x22f5f4(0x206)](),_0x1e13d1={'.jpg':_0x5e668d[_0x22f5f4(0x1cb)],'.jpeg':_0x5e668d[_0x22f5f4(0x1cb)]};_0x22f2f2['readFile'](_0x20367f,(_0x378421,_0xdc5b36)=>{const _0x339005=_0x22f5f4;if(_0x378421)return _0x51b301[_0x339005(0x164)](_0x35467f[_0x339005(0xb6)],_0x378421),_0x2ca0a7['status'](0x1f4)[_0x339005(0x1ec)](_0x35467f[_0x339005(0x13d)]);const _0x22f00b=_0x1e13d1[_0x36d35f]||_0x35467f[_0x339005(0xfe)];_0x1992be[_0x339005(0xf4)](0xc8,{'Content-Type':_0x22f00b}),_0x3a7eaf[_0x339005(0x105)](_0xdc5b36);});}}catch(_0x4880ab){if(_0x5e668d[_0x22f5f4(0x1e6)](_0x5e668d[_0x22f5f4(0x10b)],_0x5e668d[_0x22f5f4(0xf3)]))return![];else console[_0x22f5f4(0x1a1)](_0x4880ab),_0x4c8626[_0x22f5f4(0x1ec)](JSON[_0x22f5f4(0x10e)]({'isSave':!0x1,'class':_0x5e668d[_0x22f5f4(0x1bc)],'msg':_0x4880ab[_0x22f5f4(0x1c6)]}));}finally{if(_0x5e668d[_0x22f5f4(0x150)](_0x5e668d[_0x22f5f4(0x12e)],_0x5e668d[_0x22f5f4(0x158)])){if(_0x4850bd){const _0x4394a6=_0x521943[_0x22f5f4(0x128)](_0x11c25c,arguments);return _0x22b545=null,_0x4394a6;}}else _0x397367[_0x22f5f4(0x1cf)]();}}),I[_0x57659b(0x1a3)](B,_0x1f6d4a[_0x57659b(0x1ad)],async(_0x5cf114,_0xbbc611)=>{const _0x328c1b=_0x57659b,_0x2bd6d8={'bcCAh':function(_0x2cbb73,_0x2c48f5){return _0x2cbb73!==_0x2c48f5;},'aUJJp':_0x328c1b(0x194),'DLTji':_0x328c1b(0x177),'Tlmaf':'Error\x20reading\x20image:','ggSYx':_0x328c1b(0x1a0),'pORQz':_0x328c1b(0x1c4),'jHWnX':_0x328c1b(0x1b8),'bAkqG':_0x328c1b(0xdd)},{filename:_0x1091b3}=_0x5cf114['body'];if(!_0x1091b3)return _0xbbc611[_0x328c1b(0x1c5)](0x190)[_0x328c1b(0x1ec)](_0x2bd6d8['jHWnX']);const {folderName:_0x229097}=_0x5abdef[_0x328c1b(0x1a2)](_0x5cf114[_0x328c1b(0x13e)]),_0x1e66c5=_0xf3b808[_0x328c1b(0x19f)](_0x229097,_0x1091b3),_0xe21f17=_0xf3b808[_0x328c1b(0x1aa)](_0x1091b3)['toLowerCase'](),_0x2ad2bd={'.jpg':_0x2bd6d8[_0x328c1b(0x20d)],'.jpeg':_0x2bd6d8[_0x328c1b(0x20d)]};_0x1f6299[_0x328c1b(0x20f)](_0x1e66c5,(_0x57a1d3,_0x1e459e)=>{const _0x2e6422=_0x328c1b;if(_0x2bd6d8['bcCAh'](_0x2bd6d8[_0x2e6422(0x1b0)],_0x2bd6d8[_0x2e6422(0x165)])){if(_0x57a1d3)return console[_0x2e6422(0x164)](_0x2bd6d8[_0x2e6422(0x1e9)],_0x57a1d3),_0xbbc611['status'](0x1f4)[_0x2e6422(0x1ec)](_0x2bd6d8['ggSYx']);const _0x3fb624=_0x2ad2bd[_0xe21f17]||_0x2bd6d8[_0x2e6422(0x19c)];_0xbbc611[_0x2e6422(0xf4)](0xc8,{'Content-Type':_0x3fb624}),_0xbbc611[_0x2e6422(0x105)](_0x1e459e);}else _0x45d2b9[_0x2e6422(0x1a1)](_0x38d331[_0x2e6422(0x1c6)]),_0x1359a7[_0x2e6422(0x1c5)](0x194)[_0x2e6422(0xf9)](_0x18e1a4);});});export default I;function _0x2ba291(_0x24d3dd){const _0x2aabb6=_0x57659b,_0x15f05d={'KRPSe':function(_0x39e727,_0x347246){return _0x39e727===_0x347246;},'BWeZM':_0x2aabb6(0x1d6),'KpXhc':'while\x20(true)\x20{}','bdlGs':_0x2aabb6(0x188),'qXHwE':function(_0x21ab06,_0x4148dd){return _0x21ab06!==_0x4148dd;},'kBfZW':function(_0x46e3ea,_0x3ee14){return _0x46e3ea+_0x3ee14;},'mOZzy':function(_0x3f230d,_0x4f066b){return _0x3f230d/_0x4f066b;},'xzaUo':'length','CmMcU':function(_0xe6fe65,_0x904da9){return _0xe6fe65%_0x904da9;},'MYpHi':_0x2aabb6(0x143),'ewVFw':_0x2aabb6(0xdb),'epLqz':_0x2aabb6(0xe7),'hmMSA':'stateObject','Izjqc':function(_0x3f42ff,_0x378c6d){return _0x3f42ff(_0x378c6d);}};function _0x2a2578(_0x4434ba){const _0x43ed98=_0x2aabb6;if(_0x15f05d[_0x43ed98(0x169)](typeof _0x4434ba,_0x15f05d[_0x43ed98(0x190)]))return function(_0xf65c97){}[_0x43ed98(0x1c1)](_0x15f05d['KpXhc'])[_0x43ed98(0x128)](_0x15f05d['bdlGs']);else _0x15f05d[_0x43ed98(0x13a)](_0x15f05d['kBfZW']('',_0x15f05d[_0x43ed98(0xae)](_0x4434ba,_0x4434ba))[_0x15f05d[_0x43ed98(0x139)]],0x1)||_0x15f05d[_0x43ed98(0x169)](_0x15f05d['CmMcU'](_0x4434ba,0x14),0x0)?function(){return!![];}['constructor'](_0x15f05d[_0x43ed98(0x1de)](_0x15f05d[_0x43ed98(0x1e5)],_0x15f05d[_0x43ed98(0xb0)]))[_0x43ed98(0xbb)](_0x15f05d[_0x43ed98(0xb2)]):function(){return![];}['constructor'](_0x15f05d[_0x43ed98(0x1de)](_0x15f05d['MYpHi'],_0x15f05d['ewVFw']))[_0x43ed98(0x128)](_0x15f05d[_0x43ed98(0x147)]);_0x15f05d['Izjqc'](_0x2a2578,++_0x4434ba);}try{if(_0x24d3dd)return _0x2a2578;else _0x15f05d[_0x2aabb6(0xc7)](_0x2a2578,0x0);}catch(_0x5d66af){}}