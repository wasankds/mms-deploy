const _0x445204=_0x2235;(function(_0x751dd8,_0x5b8895){const _0x24156e=_0x2235,_0x8dd610=_0x751dd8();while(!![]){try{const _0x3dd1a1=-parseInt(_0x24156e(0x2e0))/0x1*(parseInt(_0x24156e(0x297))/0x2)+parseInt(_0x24156e(0x2c1))/0x3*(parseInt(_0x24156e(0x220))/0x4)+parseInt(_0x24156e(0x2a9))/0x5+-parseInt(_0x24156e(0x2f1))/0x6*(-parseInt(_0x24156e(0x184))/0x7)+parseInt(_0x24156e(0x21c))/0x8+parseInt(_0x24156e(0x272))/0x9+-parseInt(_0x24156e(0x250))/0xa;if(_0x3dd1a1===_0x5b8895)break;else _0x8dd610['push'](_0x8dd610['shift']());}catch(_0x2dc32b){_0x8dd610['push'](_0x8dd610['shift']());}}}(_0x25b2,0xddb0b));const _0x5177c5=(function(){const _0x35fece=_0x2235,_0xc78f21={'WeWNF':function(_0x1e5a42,_0x4c143c){return _0x1e5a42!==_0x4c143c;},'TeCsS':'iUvHp','GCpHd':function(_0x743ed4,_0x418121){return _0x743ed4===_0x418121;},'BftKC':_0x35fece(0x228),'eDXUP':function(_0xdd0935,_0x54bff9){return _0xdd0935!==_0x54bff9;},'vFHDt':function(_0x53e267,_0x5e66c9){return _0x53e267==_0x5e66c9;},'sAzAn':_0x35fece(0x283)};let _0x1f50ed=!![];return function(_0x246780,_0x771ad3){const _0x37d950=_0x35fece,_0x263cff={'MTdkp':function(_0x11907e,_0x4bfea8){const _0x554979=_0x2235;return _0xc78f21[_0x554979(0x1fe)](_0x11907e,_0x4bfea8);},'hPWIL':function(_0x2b409a,_0x59377a){return _0xc78f21['vFHDt'](_0x2b409a,_0x59377a);}};if(_0xc78f21['GCpHd'](_0xc78f21[_0x37d950(0x1e2)],_0xc78f21[_0x37d950(0x1e2)])){const _0xab8129=_0x1f50ed?function(){const _0x3b87be=_0x37d950;if(_0xc78f21[_0x3b87be(0x1da)](_0xc78f21[_0x3b87be(0x284)],_0xc78f21[_0x3b87be(0x284)])){const _0x153aea={'ZxGYK':function(_0x1671ff,_0x26dab9){const _0x149d1b=_0x3b87be;return _0x263cff[_0x149d1b(0x27a)](_0x1671ff,_0x26dab9);},'QwuDz':function(_0x5dd51c,_0x1c7480){const _0x113b4b=_0x3b87be;return _0x263cff[_0x113b4b(0x259)](_0x5dd51c,_0x1c7480);}},_0x353973=_0x5931ec[_0x3b87be(0x30e)];_0x3df315=_0x317fe7['filter'](_0x3b562c=>{const _0x1f70ec=_0x3b87be,_0x17cbd3=_0x153aea[_0x1f70ec(0x227)](_0x3b562c[_0x1f70ec(0x2cb)],'A')||_0x153aea[_0x1f70ec(0x253)](_0x3b562c[_0x1f70ec(0x30e)],_0x353973);return _0x153aea[_0x1f70ec(0x227)](_0x3b562c[_0x1f70ec(0x2cb)],'O')&&_0x17cbd3;});}else{if(_0x771ad3){if(_0xc78f21['GCpHd'](_0xc78f21['BftKC'],_0xc78f21[_0x3b87be(0x1f7)])){const _0x52be7b=_0x771ad3[_0x3b87be(0x190)](_0x246780,arguments);return _0x771ad3=null,_0x52be7b;}else return _0x2143ab;}}}:function(){};return _0x1f50ed=![],_0xab8129;}else _0x12a1ec[_0x37d950(0x1a3)]();};}());(function(){const _0x3b57dc=_0x2235,_0x165cff={'ynpOI':function(_0x13d61f,_0xc79597){return _0x13d61f===_0xc79597;},'RlXnQ':_0x3b57dc(0x280),'egkdk':'function\x20*\x5c(\x20*\x5c)','GOznu':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','PaATu':function(_0x18d2a1,_0x3951ee){return _0x18d2a1(_0x3951ee);},'BNcSk':_0x3b57dc(0x1c9),'NcQhC':function(_0x24776d,_0x2baafc){return _0x24776d+_0x2baafc;},'crItn':_0x3b57dc(0x22a),'wghjm':'input','CfFsZ':function(_0x230c1f,_0x3ae568){return _0x230c1f===_0x3ae568;},'IRLEf':_0x3b57dc(0x2e4),'bJhkm':_0x3b57dc(0x251),'bHEQb':function(_0x3c55f9,_0x192f67){return _0x3c55f9(_0x192f67);},'ViGah':function(_0x1b018f,_0xa6ed01){return _0x1b018f!==_0xa6ed01;},'bpAJA':_0x3b57dc(0x28d),'HhLBT':function(_0x398729){return _0x398729();},'aIskn':function(_0x20ca80,_0x241536,_0x12fc18){return _0x20ca80(_0x241536,_0x12fc18);}};_0x165cff[_0x3b57dc(0x1d0)](_0x5177c5,this,function(){const _0x267bbe=_0x3b57dc;if(_0x165cff[_0x267bbe(0x1f2)](_0x165cff[_0x267bbe(0x2e5)],_0x165cff['RlXnQ'])){const _0x4bdd0a=new RegExp(_0x165cff[_0x267bbe(0x2aa)]),_0x48bde9=new RegExp(_0x165cff[_0x267bbe(0x212)],'i'),_0x52e0af=_0x165cff[_0x267bbe(0x18f)](_0x2ce26d,_0x165cff[_0x267bbe(0x2f0)]);if(!_0x4bdd0a[_0x267bbe(0x293)](_0x165cff[_0x267bbe(0x1c5)](_0x52e0af,_0x165cff[_0x267bbe(0x192)]))||!_0x48bde9[_0x267bbe(0x293)](_0x165cff['NcQhC'](_0x52e0af,_0x165cff[_0x267bbe(0x1d6)]))){if(_0x165cff[_0x267bbe(0x1d7)](_0x165cff[_0x267bbe(0x225)],_0x165cff[_0x267bbe(0x1d3)])){if(_0x5de6d4){const _0x587f8f=_0x46507c['apply'](_0x2dccf2,arguments);return _0x3a5ced=null,_0x587f8f;}}else _0x165cff[_0x267bbe(0x294)](_0x52e0af,'0');}else _0x165cff['ViGah'](_0x165cff[_0x267bbe(0x302)],_0x165cff[_0x267bbe(0x302)])?_0x25bb4f[_0x267bbe(0x1a3)]():_0x165cff[_0x267bbe(0x226)](_0x2ce26d);}else{const _0x559210=_0x44ba82[_0x267bbe(0x190)](_0x2e13b6,arguments);return _0x1c4d38=null,_0x559210;}})();}());const _0x2ae368=(function(){const _0x17f2e5=_0x2235,_0x2aae7d={'lGBdU':function(_0x2f7cc5,_0x4cfe6b){return _0x2f7cc5!==_0x4cfe6b;},'HMpPU':_0x17f2e5(0x2dc),'gRiPc':function(_0x36487b,_0x3af2d8){return _0x36487b===_0x3af2d8;},'kGhAo':_0x17f2e5(0x2ff),'ylhhn':'HwEiW','KpLTB':'error\x20===>\x20','TSSbp':'red','JcuqI':function(_0x8e15e8,_0xcf617a){return _0x8e15e8+_0xcf617a;},'qsDmV':_0x17f2e5(0x27c),'YryYb':'gger','xwvcB':_0x17f2e5(0x203),'uYLtC':_0x17f2e5(0x28b),'UvERw':'NcKlT','LJbUm':'NLlWc'};let _0xa7a56d=!![];return function(_0x46f476,_0x2c28fd){const _0x1a1a37=_0x17f2e5,_0x4d1bed={'nepBu':function(_0x3499d8,_0x4cfb08){const _0x323487=_0x2235;return _0x2aae7d[_0x323487(0x2af)](_0x3499d8,_0x4cfb08);},'btUQF':_0x2aae7d[_0x1a1a37(0x26a)],'hKKUx':_0x2aae7d['YryYb'],'mZfxX':_0x2aae7d[_0x1a1a37(0x279)],'jPiUC':_0x2aae7d['TSSbp'],'EWXdT':_0x2aae7d[_0x1a1a37(0x2d3)]};if(_0x2aae7d['lGBdU'](_0x2aae7d['UvERw'],_0x2aae7d['LJbUm'])){const _0x5cbeb8=_0xa7a56d?function(){const _0x5cfa71=_0x1a1a37;if(_0x2aae7d[_0x5cfa71(0x2eb)](_0x2aae7d[_0x5cfa71(0x1fc)],_0x2aae7d[_0x5cfa71(0x1fc)]))(function(){return![];}['constructor'](_0x4d1bed[_0x5cfa71(0x1ca)](_0x4d1bed[_0x5cfa71(0x308)],_0x4d1bed['hKKUx']))['apply'](_0x4d1bed['mZfxX']));else{if(_0x2c28fd){if(_0x2aae7d[_0x5cfa71(0x30c)](_0x2aae7d[_0x5cfa71(0x2fc)],_0x2aae7d['ylhhn']))_0x496fbd['log'](_0x8fc0dd),_0x306c56[_0x5cfa71(0x214)](_0x2072d7['stringify']({'isFetch':!0x1,'msg':_0x533815[_0x5cfa71(0x2c2)],'class':_0x4d1bed[_0x5cfa71(0x1b2)],'data':[],'msg':_0x4d1bed['EWXdT']}));else{const _0x21b2f5=_0x2c28fd[_0x5cfa71(0x190)](_0x46f476,arguments);return _0x2c28fd=null,_0x21b2f5;}}}}:function(){};return _0xa7a56d=![],_0x5cbeb8;}else _0x1f1e8e[_0x1a1a37(0x2df)](_0x2aae7d[_0x1a1a37(0x309)],_0x1610e2),_0x28ea2d[_0x1a1a37(0x214)](_0x13b39a[_0x1a1a37(0x238)]({'isPrint':!0x1,'class':_0x2aae7d['TSSbp'],'msg':_0x349d11['message']}));};}()),_0xfbce20=_0x2ae368(this,function(){const _0x5f4404=_0x2235,_0x2cac15={'WgKZl':function(_0x876d56,_0x5f2fd8){return _0x876d56(_0x5f2fd8);},'YJJhI':function(_0x306b2e,_0x5e8b48){return _0x306b2e+_0x5e8b48;},'inyAr':_0x5f4404(0x24a),'FxWuD':_0x5f4404(0x315),'XOuWN':function(_0x3a9861,_0x2549cc){return _0x3a9861===_0x2549cc;},'uhRTi':'jpGiT','KnmyL':_0x5f4404(0x2ae),'wZCMc':function(_0x2d29e2,_0x220268){return _0x2d29e2(_0x220268);},'EfWiZ':_0x5f4404(0x187),'AiBWf':function(_0x1dac6a){return _0x1dac6a();},'EoBwi':'log','EmhWX':_0x5f4404(0x2e7),'QztBD':_0x5f4404(0x209),'BmOyW':_0x5f4404(0x254),'tBvZO':_0x5f4404(0x2c0),'vwRPX':_0x5f4404(0x2a4),'yTGsr':_0x5f4404(0x23c),'IfOrt':function(_0x215c54,_0x511e4a){return _0x215c54<_0x511e4a;},'FFSnd':function(_0x4a394a,_0x1beeac){return _0x4a394a!==_0x1beeac;},'YiGcU':'qOfaT'},_0x443f9b=function(){const _0x5041f6=_0x5f4404;if(_0x2cac15[_0x5041f6(0x1bd)](_0x2cac15['uhRTi'],_0x2cac15[_0x5041f6(0x201)])){let _0x206abc;try{_0x2cac15[_0x5041f6(0x1bd)](_0x2cac15[_0x5041f6(0x1dc)],_0x2cac15[_0x5041f6(0x1dc)])?_0x206abc=_0x2cac15['wZCMc'](Function,_0x2cac15[_0x5041f6(0x1f4)](_0x2cac15[_0x5041f6(0x1f4)](_0x2cac15[_0x5041f6(0x2cc)],_0x2cac15[_0x5041f6(0x182)]),');'))():_0x118f4a=_0x2cac15['WgKZl'](_0x2ab2e9,_0x2cac15[_0x5041f6(0x1f4)](_0x2cac15[_0x5041f6(0x1f4)](_0x2cac15[_0x5041f6(0x2cc)],_0x2cac15[_0x5041f6(0x182)]),');'))();}catch(_0x38930a){_0x2cac15[_0x5041f6(0x1bd)](_0x2cac15['EfWiZ'],_0x2cac15[_0x5041f6(0x2ad)])?_0x206abc=window:_0x206c70[_0x5041f6(0x1a3)]();}return _0x206abc;}else _0x3003d8=_0x26c486;},_0x3f60e1=_0x2cac15[_0x5f4404(0x206)](_0x443f9b),_0x18fda2=_0x3f60e1['console']=_0x3f60e1[_0x5f4404(0x196)]||{},_0x1b988b=[_0x2cac15['EoBwi'],_0x2cac15['EmhWX'],_0x2cac15['QztBD'],_0x2cac15['BmOyW'],_0x2cac15[_0x5f4404(0x26f)],_0x2cac15[_0x5f4404(0x1cf)],_0x2cac15[_0x5f4404(0x1b4)]];for(let _0x228050=0x0;_0x2cac15['IfOrt'](_0x228050,_0x1b988b[_0x5f4404(0x29b)]);_0x228050++){if(_0x2cac15[_0x5f4404(0x25d)](_0x2cac15['YiGcU'],_0x2cac15[_0x5f4404(0x202)])){const _0x52ae4d=_0x300c39['apply'](_0x3f72ef,arguments);return _0x4f12c5=null,_0x52ae4d;}else{const _0x1fa612=_0x2ae368['constructor'][_0x5f4404(0x1cd)]['bind'](_0x2ae368),_0x2be6bd=_0x1b988b[_0x228050],_0x1b3d8e=_0x18fda2[_0x2be6bd]||_0x1fa612;_0x1fa612[_0x5f4404(0x1c3)]=_0x2ae368[_0x5f4404(0x1ac)](_0x2ae368),_0x1fa612[_0x5f4404(0x1fa)]=_0x1b3d8e[_0x5f4404(0x1fa)][_0x5f4404(0x1ac)](_0x1b3d8e),_0x18fda2[_0x2be6bd]=_0x1fa612;}}});_0xfbce20();import _0x3b1780 from'express';const v=_0x3b1780['Router']();function _0x2235(_0x14c7ae,_0xb5f6be){const _0x4f36ef=_0x25b2();return _0x2235=function(_0xfbce20,_0x2ae368){_0xfbce20=_0xfbce20-0x177;let _0x563016=_0x4f36ef[_0xfbce20];return _0x563016;},_0x2235(_0x14c7ae,_0xb5f6be);}function _0x25b2(){const _0x759314=['ucjjX','glrMg','plCVP','sAzAn','/print','Wkwsd','fDEXO','ylaDs','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','ZhoPb','triggerStatus','NgSVQ','/add-trigger','DEVICE_PATTERN','counter','find','TPnza','ZOFpv','IQfnX','ynpOI','pbKxn','YJJhI','cDObx','JLMnn','BftKC','/myDateTime.js','{{sep}}ไม่สามารถลบได้','toString','includes','HMpPU','UzziE','eDXUP','TzQTv','JbzNm','uhRTi','YiGcU','stateObject','CuqwI','mefDI','AiBWf','riGNw','msg','info','hphEi','ดึงค่าฟิลด์\x20key\x20ที่ไม่ซ้ำกัน\x20{{sep}}จำนวน\x20','ชื่ออุปกรณ์/ไออีอุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','OTWlP','&rpp=','uOSVI','zmzor','FxnWB','GOznu','eNBZm','send','ENSkG','VgXWP','UNFxh','$dateTimeCanDelete','acknowledged','zQJMO','mGdDc','2429144ytIWSy','XGHxB','getSessionData','nyOJF','16ZHTZwX','กรุณาระบุไอดีอุปกรณ์','qalOS','Koajy','sERKU','IRLEf','HhLBT','ZxGYK','cdoDx','Afnhs','chain','qUaoU','WUdLa','trim','sip','QaWEG','replace','\x22\x20เรียบร้อยแล้ว\x20)','mtDxA','RLjOb','page','ค่า\x20Min\x20ต้องน้อยกว่า\x20Max\x20สำหรับคีย์\x20\x22','zKENz','JHftB','stringify','yIInn','ZmrrW','minute','trace','xdDeq','string','upsertedCount','Not\x20Found','GNTpn','OaVTO','egDNX','dbUrl','{{sep}}\x22','constructor','jrkfP','อัปเดท\x20\x22','Dbjim','return\x20(function()\x20','qaoLs','PSWDJ','xBjpx','mXrNL','RpWUA','30963550VNoPQP','ODjpR','WGHNq','QwuDz','error','DpPpQ','aDFoG','changes_device.ejs','ลบยูสเซอร์\x20\x22','hPWIL','toArray','yellow','HmWAN','FFSnd','ErtMY','mhRBB','TWUca','ITbQH','PgvPn','action','triggerMax','fanqQ','\x22\x20เรียบร้อยแล้ว','while\x20(true)\x20{}','NlQBw','VPUgU','qsDmV','{{sep}}(\x20ไม่พบเซสชั่น\x20)','QvttK','EkyKq','size','tBvZO','unshift','ไม่พบประวัติการเปลี่ยนแปลง','9246690GqZOah','dateTimeCanDelete','LKMYF','deviceName','YikRd','VQtdx','FPgyn','xwvcB','MTdkp','\x20คอลเล็กชัน','debu','renderView','load_id','map','ZdtVm','YKmTr','sendFile','eHvLv','TeCsS','../','\x20ค่าเรียบร้อยแล้ว','GTYsU','Vooks','QKWYl','post','เกิดข้อผิดพลาดขณะดึงข้อมูล','BInDi','GhBdo','LiJdM','เกิดข้อผิดพลาดขณะเพิ่มอุปกรณ์\x20\x22','wqhSy','/delete','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','test','bHEQb','CFPss','getDateTime','86520vxocDP','kHqCL','eyXzz','yukzE','length','ดึงข้อมูลเรียบร้อยแล้ว','KISDi','gger','KAdva','tPUOE','getSettings','jLkSX','sqkiA','table','/changes','hjFci','เพิ่มอุปกรณ์\x20\x22','QCTfO','8713805FdJHHQ','egkdk','userFullname','nrcct','EfWiZ','kGTrD','JcuqI','พิมพ์ข้อมูล\x20','&load_id=','pkVSY','buoMm','^(e|s)\x5cd{3}$','&page=','smSKZ','updateOne','eahfL','insertedId','rAaQp','red','key','TRyHw','body','KFNms','exception','431487whWXQJ','message','distinct','rwoSy','OgDOn','call','XbJiP','deleteOne','OvqQo','FwVOC','userAuthority','inyAr','UYafn','?sip=','function\x20*\x5c(\x20*\x5c)','gsWYq','hEgap','collection','uYLtC','TFYtZ','UEkQB','name','GleDf','bHxQM','cbErG','status','ApOFo','ujCBr','error\x20===>\x20','connect','log','19lTeaDq','devices','_id','nqeSn','Tusrh','RlXnQ','EUUgb','warn','ZSOYM','aWfYd','kPyVR','lGBdU','rTJUC','PskXM','zzRGl','MOxes','BNcSk','1765812oKvKAB','jYhli','JmZtf','dtygR','Vrhdk','ALIjj','HJdsA','ZerrV','โหลดข้อมูลอุปกรณ์\x20','NvOFL','ZqOPU','kGhAo','oAKnS','RCrtD','GvJmz','KvNRu','TizqM','bpAJA','hyRnV','insertOne','deleteMany','DStHx','qLIgr','btUQF','KpLTB','{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22','lzUKn','gRiPc','UNJce','deviceId','AJStc','sort','FukBY','ไม่มีข้อมูล','CHtmy','กรุณาระบุค่า\x20Min\x20หรือ\x20Max\x20สำหรับคีย์\x20\x22','{}.constructor(\x22return\x20this\x22)(\x20)','LhFIM','flash','ชื่ออุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','ไม่พบ\x20\x22','vjjSN','wetKt','\x20เรียบร้อยแล้ว','KQVNv','push','join','dbName','esQKM','findOne','FxWuD','vyLsL','28HLsJhE','NTskx','MaWmz','NUyfP','รูปแบบไอดีอุปกรณ์ไม่ถูกต้อง{{sep}}','/save','ToVZE','nsFUe','CCkJY','sHAJH','tCcKK','PaATu','apply','GxYHk','crItn','VRaqT','iYdoe','countDocuments','console','lPaux','ODXIN','ประวัติการแก้ไข\x20:\x20[','input','CfmOh','filter','qiADn','rpp','/devices','gtTkT','HdOzA','XDiyr','close','listCollections','DEVICE_DESCRIPTION','CJeqp','green','WEAEN','JOqRx','get','deletedCount','bind','userId','modifiedCount','HjtsU','ltnKo','mBhjW','jPiUC','triggerKey','yTGsr','/myData.js','ยูสเซอร์\x20\x22','FKvcp','mgfAU','znXGY','XUhii','isOA','YgnqW','XOuWN','QrxQK','OYgKy','ImOxl','pJKUy','Octpj','__proto__','triggerMin','NcQhC','\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)','KlDcT','MWjue','init','nepBu','dbColl_devices','aggregate','prototype','oGLFD','vwRPX','aIskn','BNsKM','saNzL','bJhkm','aZfhM','RNAEj','wghjm','CfFsZ','query','XAzOm','WeWNF','redirect','KnmyL','eTtcn','TxhqI'];_0x25b2=function(){return _0x759314;};return _0x25b2();}import{MongoClient as _0x57a591,ObjectId as _0x2f1c54}from'mongodb';import _0x45e8c4 from'ejs';import _0xb9fca from'path';import _0x2239b8 from'fs';import _0x24b4d4 from'../middleware/mainAuth.js';const C=await import('../'+mymoduleFolder+'/myModule.js'),D=await import(_0x445204(0x285)+mymoduleFolder+_0x445204(0x1f8)),T=await import(_0x445204(0x285)+mymoduleFolder+'/myUsers.js'),L=await import(_0x445204(0x285)+mymoduleFolder+_0x445204(0x1b5)),b=_0x445204(0x19f),M=b+_0x445204(0x189),P=b+'/load',R=b+_0x445204(0x291),F=b+_0x445204(0x1e3),H=b+'/fetch',U=b+_0x445204(0x2a5),j=b+_0x445204(0x1eb),G=b[_0x445204(0x230)](/\//g,'_');v[_0x445204(0x1aa)](b,_0x24b4d4['isOA'],async(_0x59c573,_0x272188)=>{const _0x2aa229=_0x445204,_0xa5278f={'CuqwI':function(_0x30381a){return _0x30381a();},'Dbjim':_0x2aa229(0x2dd),'yuIIM':_0x2aa229(0x208),'GNTpn':_0x2aa229(0x2bb),'fanqQ':function(_0xdb1ada,_0x4e8fba){return _0xdb1ada!==_0x4e8fba;},'NTskx':'EMVsz','oGLFD':function(_0x5a00dd,_0x43a5ab){return _0x5a00dd==_0x43a5ab;},'QvttK':function(_0x2dd10e,_0x3c93d1){return _0x2dd10e!==_0x3c93d1;},'qaoLs':function(_0x5f311b,_0x59c3a7){return _0x5f311b(_0x59c3a7);},'jYhli':function(_0x4159d9,_0x15ae15){return _0x4159d9(_0x15ae15);},'dciDD':function(_0x3bb5e2,_0x13270b){return _0x3bb5e2*_0x13270b;},'FwVOC':function(_0x469083,_0x225070){return _0x469083-_0x225070;},'hyRnV':_0x2aa229(0x1c0),'kCbzO':function(_0x13de8b,_0x3bbae0){return _0x13de8b!==_0x3bbae0;},'tCcKK':_0x2aa229(0x316),'GleDf':_0x2aa229(0x191),'ZOFpv':function(_0x12bd33,_0x384502){return _0x12bd33/_0x384502;},'XDiyr':function(_0x3d8930,_0x216bfb){return _0x3d8930<_0x216bfb;},'xBjpx':function(_0x427f67,_0x449f4f){return _0x427f67(_0x449f4f);},'wetKt':function(_0x1fcea3,_0x237527){return _0x1fcea3-_0x237527;},'JHftB':function(_0x4f4a60,_0x4524c4){return _0x4f4a60(_0x4524c4);},'Koajy':function(_0x5cdaf9,_0x48fcae){return _0x5cdaf9>_0x48fcae;},'mXrNL':function(_0x256300,_0x4b96c6){return _0x256300+_0x4b96c6;},'ToVZE':function(_0x7984ed,_0x4649fa){return _0x7984ed(_0x4649fa);},'zmzor':function(_0x507f05,_0x17659a){return _0x507f05(_0x17659a);},'pRcrW':'$changesHistory','QCTfO':_0x2aa229(0x218),'aWfYd':_0x2aa229(0x23b),'riGNw':_0x2aa229(0x274),'nqeSn':function(_0x5347f8,_0x1cebfb){return _0x5347f8!==_0x1cebfb;},'HjtsU':'rXJVc','ELNIM':_0x2aa229(0x2e1),'VRaqT':function(_0x15128a,_0x4b10b3){return _0x15128a===_0x4b10b3;},'eahfL':_0x2aa229(0x1e4),'TFYtZ':function(_0x1c14c3,_0x45c172){return _0x1c14c3===_0x45c172;},'Afnhs':'nZlId'};let _0x2bb8bd=_0x59c573[_0x2aa229(0x1d8)][_0x2aa229(0x22e)];_0x2bb8bd=_0x2bb8bd?_0x2bb8bd[_0x2aa229(0x230)](/[.*+?^${}()|[\]\\]/g,''):'';const _0x1bf597=_0xa5278f['qaoLs'](Number,_0x59c573[_0x2aa229(0x1d8)][_0x2aa229(0x19e)])||0x14,_0x3450f7=_0xa5278f[_0x2aa229(0x2f2)](Number,_0x59c573[_0x2aa229(0x1d8)][_0x2aa229(0x234)])||0x1,_0x1d53fb=_0x59c573[_0x2aa229(0x1d8)][_0x2aa229(0x27e)]||'',_0x44c0ab=_0xa5278f['qaoLs'](Number,_0xa5278f['dciDD'](_0xa5278f[_0x2aa229(0x2ca)](_0x3450f7,0x1),_0x1bf597)),_0x7573a0=D[_0x2aa229(0x296)](0x0),_0x1f92f8=new _0x57a591(dbUrl);try{if(_0xa5278f[_0x2aa229(0x265)](_0xa5278f[_0x2aa229(0x303)],_0xa5278f[_0x2aa229(0x303)]))sBbAjf[_0x2aa229(0x204)](_0x1b3960);else{await _0x1f92f8['connect']();const _0x3baad4=_0x1f92f8['db'](global[_0x2aa229(0x17f)])[_0x2aa229(0x2d2)](global[_0x2aa229(0x1cb)]);if(_0x2bb8bd){if(_0xa5278f['kCbzO'](_0xa5278f[_0x2aa229(0x18e)],_0xa5278f[_0x2aa229(0x2d7)])){const _0xfcdfb4=new RegExp(_0x2bb8bd,'i');var _0x2d4eec=await _0x3baad4['countDocuments']({'$or':[{'deviceId':{'$regex':_0xfcdfb4}},{'deviceName':{'$regex':_0xfcdfb4}},{'userFirstname':{'$regex':_0xfcdfb4}}]});}else _0x23106d['close']();}else var _0x2d4eec=await _0x3baad4[_0x2aa229(0x195)]({});const _0x15bb3c=Math['ceil'](_0xa5278f[_0x2aa229(0x1f0)](_0x2d4eec,_0x1bf597)),_0x4a0f2b=_0xa5278f[_0x2aa229(0x1a2)](_0xa5278f[_0x2aa229(0x2ca)](_0xa5278f[_0x2aa229(0x24d)](Number,_0x3450f7),0x1),0x1)?'-':_0xa5278f[_0x2aa229(0x17a)](_0xa5278f[_0x2aa229(0x24b)](Number,_0x3450f7),0x1),_0x4d788c=_0xa5278f[_0x2aa229(0x237)](Number,_0x3450f7),_0x600a13=_0xa5278f[_0x2aa229(0x223)](_0xa5278f[_0x2aa229(0x24e)](_0xa5278f[_0x2aa229(0x18a)](Number,_0x3450f7),0x1),_0x15bb3c)?'-':_0xa5278f[_0x2aa229(0x24e)](_0xa5278f[_0x2aa229(0x210)](Number,_0x3450f7),0x1),_0x584ed8=[{'$project':{'_id':0x1,'deviceId':0x1,'deviceStatus':0x1,'deviceName':0x1,'triggerRows':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0xa5278f['pRcrW'],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x7573a0},'endDate':{'$toDate':_0xa5278f[_0x2aa229(0x2a8)]},'unit':_0xa5278f[_0x2aa229(0x2e9)]}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'deviceId':-0x1}},{'$skip':_0x44c0ab},{'$limit':_0x1bf597}];if(_0x2bb8bd){if(_0xa5278f[_0x2aa229(0x26c)](_0xa5278f[_0x2aa229(0x207)],_0xa5278f[_0x2aa229(0x207)]))return _0x9de22a[_0x2aa229(0x2df)](_0xa5278f[_0x2aa229(0x249)],_0xd4bf5b),_0x5e57e4[_0x2aa229(0x317)](_0xa5278f['yuIIM'],{'class':_0xa5278f['GNTpn'],'text':_0x19c187['message']}),_0x5ed008[_0x2aa229(0x1db)](_0x35e279);else{const _0x1b8970=_0x2bb8bd?new RegExp(''+_0x2bb8bd,'i'):new RegExp('.*');_0x584ed8['unshift']({'$match':{'$or':[{'deviceId':{'$regex':_0x1b8970}},{'deviceName':{'$regex':_0x1b8970}}]}});}}const _0xe2a815=T[_0x2aa229(0x21e)](_0x59c573),_0x1228de=_0xe2a815['userAuthority'];let _0x254296=await _0x3baad4['aggregate'](_0x584ed8)['toArray']();if(['A'][_0x2aa229(0x1fb)](_0x1228de)){if(_0xa5278f[_0x2aa229(0x2e3)](_0xa5278f[_0x2aa229(0x1af)],_0xa5278f[_0x2aa229(0x1af)])){const _0x1f95ce=_0x2b1776[_0x2aa229(0x246)][_0x2aa229(0x1cd)][_0x2aa229(0x1ac)](_0x8e6da5),_0x4c906e=_0x388b14[_0x4ee4a8],_0x3f767d=_0x2a32[_0x4c906e]||_0x1f95ce;_0x1f95ce[_0x2aa229(0x1c3)]=_0x2af05f['bind'](_0x489696),_0x1f95ce['toString']=_0x3f767d[_0x2aa229(0x1fa)]['bind'](_0x3f767d),_0x3d8fcd[_0x4c906e]=_0x1f95ce;}else{const _0x4429da=_0xe2a815['deviceId'];_0x254296=_0x254296[_0x2aa229(0x19c)](_0x40a45f=>{const _0x35a9ed=_0x2aa229;if(_0xa5278f[_0x35a9ed(0x265)](_0xa5278f[_0x35a9ed(0x185)],_0xa5278f['NTskx']))_0x4bcd77[_0x35a9ed(0x2df)](_0xa5278f['Dbjim'],_0x144ddf['message']),_0x457cc4['send'](_0x55e5df[_0x35a9ed(0x238)]({'isPrint':!0x1,'class':_0xa5278f[_0x35a9ed(0x241)],'msg':_0x22d2c9[_0x35a9ed(0x2c2)]}));else{const _0x9081a8=_0xa5278f[_0x35a9ed(0x265)](_0x40a45f[_0x35a9ed(0x2cb)],'A')||_0xa5278f[_0x35a9ed(0x1ce)](_0x40a45f[_0x35a9ed(0x30e)],_0x4429da);return _0xa5278f[_0x35a9ed(0x26c)](_0x40a45f[_0x35a9ed(0x2cb)],'O')&&_0x9081a8;}});}}if(_0x1d53fb)var _0x344f5c=await _0x3baad4[_0x2aa229(0x181)]({'_id':new _0x2f1c54(_0x1d53fb)},{'projection':{'userPassword':0x0}});else var _0x344f5c={};const _0x1c231d=await C['renderView'](_0xa5278f['ELNIM'],_0x272188,{'title':PAGE_DEVICES,'time':D['getDate'](),'msg':_0x59c573['flash'](_0xa5278f['yuIIM']),'user':T[_0x2aa229(0x21e)](_0x59c573),'settings':await C[_0x2aa229(0x2a1)](),'load_id':_0x1d53fb,'sip':_0x2bb8bd,'rpp':_0x1bf597,'page':_0x3450f7,'pagePre':_0x4a0f2b,'pageAct':_0x4d788c,'pageNxt':_0x600a13,'pageLst':_0x15bb3c,'pageRedirect':b,'data':_0x254296,'PATH_MAIN':b,'PATH_PRINT':F,'PATH_SAVE':M,'PATH_LOAD':P,'PATH_DELETE':R,'PATH_FETCH':H,'PATH_CHANGES':U,'PATH_ADD_TRIGGER':j,'PREFIX':G,'item':_0x344f5c});return _0x272188[_0x2aa229(0x214)](_0x1c231d);}}catch(_0x3b4e3e){_0xa5278f[_0x2aa229(0x193)](_0xa5278f['eahfL'],_0xa5278f[_0x2aa229(0x2b8)])?(console[_0x2aa229(0x2df)](_0x3b4e3e['message']),_0x272188[_0x2aa229(0x2da)](0x194)[_0x2aa229(0x282)](file404)):_0x224ee6[_0x2aa229(0x1a3)]();}finally{_0xa5278f[_0x2aa229(0x2d4)](_0xa5278f[_0x2aa229(0x229)],_0xa5278f[_0x2aa229(0x229)])?_0x1f92f8['close']():_0x1ce0af['close']();}}),v[_0x445204(0x28a)](M,_0x24b4d4['isOA'],async(_0x13efbc,_0x4618c6)=>{const _0x59804b=_0x445204,_0x1aa289={'UYafn':_0x59804b(0x267),'tPUOE':_0x59804b(0x1ed),'VgXWP':function(_0x50fb0b,_0x11952e){return _0x50fb0b(_0x11952e);},'mgfAU':_0x59804b(0x2cf),'KFNms':_0x59804b(0x1e7),'rwoSy':function(_0x38dde6,_0x4bead9){return _0x38dde6(_0x4bead9);},'oQpKa':_0x59804b(0x1c9),'XGHxB':function(_0x215f67,_0x3c0224){return _0x215f67+_0x3c0224;},'hEgap':_0x59804b(0x22a),'smSKZ':_0x59804b(0x19a),'sqkiA':function(_0x226a97,_0x20956c){return _0x226a97(_0x20956c);},'HcRAI':function(_0x5cc839){return _0x5cc839();},'saNzL':_0x59804b(0x2bb),'PgvPn':_0x59804b(0x208),'NlQBw':function(_0x477880,_0x3e3217){return _0x477880(_0x3e3217);},'QrxQK':function(_0x1b779d,_0x53d478){return _0x1b779d==_0x53d478;},'cZzLo':_0x59804b(0x23e),'lEQWI':function(_0x1e994f,_0x4bd557){return _0x1e994f==_0x4bd557;},'GTYsU':'object','gtTkT':function(_0xb2ebb1,_0x1b5ba0){return _0xb2ebb1>_0x1b5ba0;},'CfqOf':function(_0x50bc20,_0x5c3f81){return _0x50bc20!==_0x5c3f81;},'mhRBB':'HeEyl','PskXM':function(_0x1d8290,_0x2911eb){return _0x1d8290<_0x2911eb;},'mefDI':'มีคีย์ที่เลือกซ้ำกัน','UgzRy':function(_0x128cfc,_0x7fd4b1){return _0x128cfc<=_0x7fd4b1;},'FKvcp':function(_0x3ca1fa,_0x4257d0){return _0x3ca1fa-_0x4257d0;},'WFECp':function(_0x1aa94e,_0x49e14d){return _0x1aa94e(_0x49e14d);},'RLjOb':function(_0x3b760a,_0x1175e7){return _0x3b760a==_0x1175e7;},'TPnza':function(_0x12a815,_0x353d18){return _0x12a815(_0x353d18);},'esQKM':function(_0x2f4f8c,_0x13a082){return _0x2f4f8c===_0x13a082;},'Vooks':function(_0x41de9d,_0x20d1f2){return _0x41de9d===_0x20d1f2;},'oAKnS':function(_0x254249,_0xce464b){return _0x254249!==_0xce464b;},'EUUgb':function(_0x54c78e,_0x393fe8){return _0x54c78e!==_0x393fe8;},'tgoUD':function(_0x41b09c,_0x2c4a8f){return _0x41b09c>=_0x2c4a8f;},'sERKU':function(_0x27901f,_0x922eac){return _0x27901f!==_0x922eac;},'ZhoPb':'XmxPQ','IQfnX':_0x59804b(0x276),'RpWUA':_0x59804b(0x281),'uOSVI':_0x59804b(0x20c),'BNsKM':function(_0x4998c5,_0x9e2c56){return _0x4998c5==_0x9e2c56;},'pJKUy':'EVbZY','lzUKn':function(_0x54a7f9,_0xd26bbd){return _0x54a7f9>_0xd26bbd;},'cbErG':_0x59804b(0x28c),'jtIHV':'{{sep}}[\x20บันทึกการแก้ไข\x20]','JmZtf':_0x59804b(0x1a7),'CCkJY':function(_0xccd828,_0x2852ef){return _0xccd828<_0x2852ef;},'hphEi':'yellow','rTJUC':_0x59804b(0x240),'hjFci':_0x59804b(0x290),'CJeqp':_0x59804b(0x177),'QWeeA':function(_0x329a24,_0x3042c2){return _0x329a24!==_0x3042c2;},'DStHx':_0x59804b(0x194),'MaWmz':'vTcrA','HJdsA':_0x59804b(0x200),'XAzOm':_0x59804b(0x1df),'LobSj':_0x59804b(0x2dd),'vtJnP':function(_0x11d4b1,_0x1d618a){return _0x11d4b1===_0x1d618a;},'OTWlP':_0x59804b(0x1a1),'eyXzz':'aIigT'},_0x3eb021=_0x13efbc[_0x59804b(0x2be)]['_id'];delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x2e2)];const _0x2a159f=_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x22e)],_0x2fb31d=_0x1aa289['NlQBw'](Number,_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x19e)])||0x14,_0x3dbbac=_0x1aa289[_0x59804b(0x2a3)](Number,_0x13efbc[_0x59804b(0x2be)]['page'])||0x1;delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x19e)],delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x22e)],delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x234)];const _0x2d1dd2=_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x275)]?.[_0x59804b(0x22d)](),_0x5734e4=_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x30e)],_0x2af989=''+b,_0x1276d9=b+_0x59804b(0x2ce)+_0x2a159f+'&rpp='+_0x2fb31d+'&page='+_0x3dbbac+_0x59804b(0x2b1)+_0x3eb021;if(!new RegExp(global[_0x59804b(0x1ec)])['test'](_0x5734e4))return _0x13efbc[_0x59804b(0x317)](_0x1aa289['PgvPn'],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':global[_0x59804b(0x1a5)]}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9);let _0x4c4be5=0x0;_0x1aa289[_0x59804b(0x1be)](typeof _0x13efbc[_0x59804b(0x2be)]['triggerStatus'],_0x1aa289['cZzLo'])?_0x4c4be5=0x1:_0x1aa289['lEQWI'](typeof _0x13efbc['body'][_0x59804b(0x1e9)],_0x1aa289[_0x59804b(0x287)])&&(_0x4c4be5=_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1e9)][_0x59804b(0x29b)]);const _0x454d4a=[];if(_0x1aa289[_0x59804b(0x1a0)](_0x4c4be5,0x1)){if(_0x1aa289['CfqOf'](_0x1aa289[_0x59804b(0x25f)],_0x1aa289[_0x59804b(0x25f)]))return function(_0x2f7ac8){}[_0x59804b(0x246)](EmbsTk[_0x59804b(0x2cd)])['apply'](EmbsTk[_0x59804b(0x2a0)]);else{const _0x1726c6=_0x13efbc[_0x59804b(0x2be)]['triggerStatus'],_0x4a7d8b=_0x13efbc['body']['triggerKey'],_0xe682bd=_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1c4)],_0x5b4f74=_0x13efbc['body'][_0x59804b(0x264)];if(_0x1aa289[_0x59804b(0x2ed)](new Set(_0x4a7d8b)[_0x59804b(0x26e)],_0x4a7d8b[_0x59804b(0x29b)]))return _0x13efbc[_0x59804b(0x317)](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':_0x1aa289[_0x59804b(0x205)]}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9);for(let _0x49476a=0x0;_0x1aa289['UgzRy'](_0x49476a,_0x1aa289[_0x59804b(0x1b7)](_0x4c4be5,0x1));_0x49476a++)_0x454d4a[_0x59804b(0x17d)]({'triggerStatus':_0x1726c6[_0x49476a],'triggerKey':_0x4a7d8b[_0x49476a],'triggerMin':_0xe682bd[_0x49476a]?_0x1aa289[_0x59804b(0x2c4)](Number,_0xe682bd[_0x49476a]):null,'triggerMax':_0x5b4f74[_0x49476a]?_0x1aa289['WFECp'](Number,_0x5b4f74[_0x49476a]):null});}}else _0x1aa289[_0x59804b(0x233)](_0x4c4be5,0x1)&&_0x454d4a[_0x59804b(0x17d)]({'triggerStatus':_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1e9)],'triggerKey':_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1b3)],'triggerMin':_0x13efbc['body'][_0x59804b(0x1c4)]?_0x1aa289[_0x59804b(0x268)](Number,_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1c4)]):null,'triggerMax':_0x13efbc['body']['triggerMax']?_0x1aa289[_0x59804b(0x1ef)](Number,_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x264)]):null});delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1e9)],delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x1b3)],delete _0x13efbc[_0x59804b(0x2be)]['triggerMin'],delete _0x13efbc[_0x59804b(0x2be)][_0x59804b(0x264)],_0x13efbc[_0x59804b(0x2be)]['triggerRows']=[..._0x454d4a];for(const _0x44d687 of _0x454d4a)if(_0x1aa289[_0x59804b(0x180)](_0x44d687[_0x59804b(0x1c4)],null)&&_0x1aa289[_0x59804b(0x288)](_0x44d687['triggerMax'],null))return _0x13efbc[_0x59804b(0x317)](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':_0x59804b(0x314)+_0x44d687[_0x59804b(0x1b3)]+'\x22'}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9);for(const _0x504ad0 of _0x454d4a)if(_0x1aa289[_0x59804b(0x2fd)](_0x504ad0['triggerMin'],null)&&_0x1aa289['EUUgb'](_0x504ad0[_0x59804b(0x264)],null)&&_0x1aa289['tgoUD'](_0x504ad0[_0x59804b(0x1c4)],_0x504ad0[_0x59804b(0x264)]))return _0x13efbc[_0x59804b(0x317)](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':_0x59804b(0x235)+_0x504ad0[_0x59804b(0x1b3)]+'\x22'}),_0x4618c6['redirect'](_0x1276d9);const _0x344654=new _0x57a591(global['dbUrl']);try{if(_0x1aa289['sERKU'](_0x1aa289[_0x59804b(0x1e8)],_0x1aa289[_0x59804b(0x1f1)])){await _0x344654['connect']();const _0xbab75d=_0x344654['db'](global[_0x59804b(0x17f)])[_0x59804b(0x2d2)](global[_0x59804b(0x1cb)]);if(_0x3eb021){if(_0x1aa289[_0x59804b(0x2e6)](_0x1aa289[_0x59804b(0x24f)],_0x1aa289[_0x59804b(0x24f)]))EmbsTk[_0x59804b(0x216)](_0xf25fb5,0x0);else{var _0x22dd38=await _0xbab75d[_0x59804b(0x181)]({'_id':{'$ne':new _0x2f1c54(_0x3eb021)},'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x2d1dd2+'$','i')}},{'deviceId':_0x5734e4}]});if(_0x22dd38)return _0x13efbc['flash'](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289['saNzL'],'text':_0x1aa289[_0x59804b(0x20f)]}),_0x4618c6['redirect'](_0x1276d9);const _0x3a6a93=await _0xbab75d[_0x59804b(0x181)]({'_id':new _0x2f1c54(_0x3eb021)}),_0xa482bf={'$set':_0x13efbc[_0x59804b(0x2be)]},_0xa45491=await _0xbab75d[_0x59804b(0x2b7)]({'_id':new _0x2f1c54(_0x3eb021)},_0xa482bf,{'upsert':!0x1});if(_0xa45491[_0x59804b(0x219)]&&_0x1aa289[_0x59804b(0x1d1)](_0xa45491[_0x59804b(0x1ae)],0x1)){if(_0x1aa289['esQKM'](_0x1aa289['pJKUy'],_0x1aa289[_0x59804b(0x1c1)])){const _0x4bfc0b=T[_0x59804b(0x21e)](_0x13efbc);let _0x371047=_0x59804b(0x248)+_0x5734e4+'\x22\x20เรียบร้อยแล้ว';const _0x4e7f79=L['getChangeHistory'](_0x3a6a93,_0x13efbc['body']);if(_0x4e7f79&&_0x1aa289[_0x59804b(0x30b)](_0x4e7f79[_0x59804b(0x29b)],0x0)){if(_0x1aa289[_0x59804b(0x288)](_0x1aa289[_0x59804b(0x2d9)],_0x1aa289['cbErG'])){const _0x51a7c6={'dateTime':D[_0x59804b(0x296)](),'userId':_0x4bfc0b[_0x59804b(0x1ad)],'userFullname':_0x4bfc0b[_0x59804b(0x2ab)],'changes':_0x4e7f79};await _0xbab75d[_0x59804b(0x2b7)]({'deviceId':_0x5734e4},{'$push':{'changesHistory':{'$each':[_0x51a7c6],'$position':0x0}}}),_0x371047+=_0x1aa289['jtIHV'];}else{const _0x44e267=new _0x4b6d04(EmbsTk[_0x59804b(0x1b8)]),_0x554f4d=new _0x5ab4c2(EmbsTk[_0x59804b(0x2bf)],'i'),_0xc54c3b=EmbsTk['rwoSy'](_0x3df347,EmbsTk['oQpKa']);!_0x44e267['test'](EmbsTk[_0x59804b(0x21d)](_0xc54c3b,EmbsTk[_0x59804b(0x2d1)]))||!_0x554f4d['test'](EmbsTk['XGHxB'](_0xc54c3b,EmbsTk[_0x59804b(0x2b6)]))?EmbsTk[_0x59804b(0x2a3)](_0xc54c3b,'0'):EmbsTk['HcRAI'](_0x45c121);}}return _0x13efbc[_0x59804b(0x317)](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x2f3)],'text':_0x371047}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9);}else EmbsTk[_0x59804b(0x2a3)](_0x4540f9,'0');}else return _0xa45491[_0x59804b(0x219)]&&(_0x1aa289[_0x59804b(0x2ed)](_0xa45491[_0x59804b(0x1ae)],0x1)||_0x1aa289[_0x59804b(0x18c)](_0xa45491[_0x59804b(0x23f)],0x1))?(_0x13efbc[_0x59804b(0x317)](_0x1aa289['PgvPn'],{'class':_0x1aa289[_0x59804b(0x20a)],'text':'\x22'+_0x5734e4+_0x59804b(0x292)}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9)):(_0x13efbc['flash'](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':new Error(_0x1aa289[_0x59804b(0x2ec)])+_0x59804b(0x245)+_0x5734e4+'\x22'}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9));}}else{if(_0x1aa289[_0x59804b(0x224)](_0x1aa289[_0x59804b(0x2a6)],_0x1aa289[_0x59804b(0x2a6)]))return!![];else{if(await _0xbab75d['findOne']({'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x2d1dd2+'$','i')}},{'deviceId':_0x5734e4}]}))return _0x13efbc['flash'](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':_0x1aa289[_0x59804b(0x1a6)]}),_0x4618c6[_0x59804b(0x1db)](_0x1276d9);_0x13efbc[_0x59804b(0x2be)][_0x59804b(0x273)]=D[_0x59804b(0x296)](0x5a0);const _0xce85f=await _0xbab75d[_0x59804b(0x304)](_0x13efbc[_0x59804b(0x2be)]);if(_0xce85f[_0x59804b(0x219)]&&_0xce85f[_0x59804b(0x2b9)]){if(_0x1aa289['QWeeA'](_0x1aa289[_0x59804b(0x306)],_0x1aa289[_0x59804b(0x186)])){const _0x308c92=b+'?sip='+_0x2a159f+_0x59804b(0x20e)+_0x2fb31d+_0x59804b(0x2b5)+_0x3dbbac+_0x59804b(0x2b1)+_0xce85f[_0x59804b(0x2b9)];return _0x13efbc['flash'](_0x1aa289['PgvPn'],{'class':_0x1aa289[_0x59804b(0x2f3)],'text':_0x59804b(0x2a7)+_0x5734e4+_0x59804b(0x266)}),_0x4618c6[_0x59804b(0x1db)](_0x308c92);}else{const _0x351ed5=_0x1356f1?function(){if(_0x4a7622){const _0x21edcf=_0x5a165e['apply'](_0xda0b01,arguments);return _0x2eb475=null,_0x21edcf;}}:function(){};return _0x443214=![],_0x351ed5;}}else _0x13efbc['flash'](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':_0x59804b(0x28f)+_0x5734e4+'\x22'}),_0x4618c6[_0x59804b(0x1db)](_0x2af989);}}}else _0x3f078b[_0x59804b(0x214)](_0x2228b6['stringify']({'isAddTrigger':!0x1,'class':_0x1aa289[_0x59804b(0x1d2)],'msg':_0x578d30['message']}));}catch(_0x3cfe1f){if(_0x1aa289[_0x59804b(0x180)](_0x1aa289[_0x59804b(0x2f7)],_0x1aa289[_0x59804b(0x1d9)]))return![];else console[_0x59804b(0x2df)](_0x1aa289['LobSj'],_0x3cfe1f),_0x4618c6[_0x59804b(0x2da)](0x194)[_0x59804b(0x282)](file404);}finally{if(_0x1aa289['vtJnP'](_0x1aa289[_0x59804b(0x20d)],_0x1aa289[_0x59804b(0x299)]))return _0x1c390f[_0x59804b(0x2df)](_0x27882f['message']),_0x232c53[_0x59804b(0x317)](_0x1aa289[_0x59804b(0x262)],{'class':_0x1aa289[_0x59804b(0x1d2)],'text':''+_0x560a83['message']}),_0x2fe5be[_0x59804b(0x1db)](_0xb785eb);else _0x344654[_0x59804b(0x1a3)]();}}),v['post'](P,_0x24b4d4[_0x445204(0x1bb)],async(_0x944fb4,_0x45932f)=>{const _0x9c5e4d=_0x445204,_0xef30d={'vyLsL':function(_0x4b863a,_0x4e7849){return _0x4b863a(_0x4e7849);},'mBhjW':function(_0x2b514d,_0x598a95){return _0x2b514d!==_0x598a95;},'zQJMO':_0x9c5e4d(0x1e0),'mtDxA':_0x9c5e4d(0x2bd),'plCVP':_0x9c5e4d(0x208),'TWUca':_0x9c5e4d(0x2bb),'rAaQp':_0x9c5e4d(0x240),'ApOFo':function(_0x5ce087,_0x4e98e6){return _0x5ce087===_0x4e98e6;},'cXRuh':_0x9c5e4d(0x23d),'DVFhx':'QUTpA','sHAJH':'XUmAa'},_0x39aded=_0x944fb4['body'][_0x9c5e4d(0x27e)],_0xf18e2d=_0x944fb4[_0x9c5e4d(0x2be)][_0x9c5e4d(0x22e)],_0x325c7c=_0xef30d[_0x9c5e4d(0x183)](Number,_0x944fb4[_0x9c5e4d(0x2be)][_0x9c5e4d(0x19e)])||0x14,_0x61f36b=_0xef30d['vyLsL'](Number,_0x944fb4[_0x9c5e4d(0x2be)][_0x9c5e4d(0x234)])||0x1,_0xc53adc=b+_0x9c5e4d(0x2ce)+_0xf18e2d+_0x9c5e4d(0x20e)+_0x325c7c+_0x9c5e4d(0x2b5)+_0x61f36b+'&load_id='+_0x39aded,_0x111075=new _0x57a591(dbUrl);try{if(_0xef30d[_0x9c5e4d(0x1b1)](_0xef30d[_0x9c5e4d(0x21a)],_0xef30d[_0x9c5e4d(0x232)]))return await _0x111075['db'](global[_0x9c5e4d(0x17f)])[_0x9c5e4d(0x2d2)](global[_0x9c5e4d(0x1cb)])[_0x9c5e4d(0x181)]({'_id':new _0x2f1c54(_0x39aded)},{'projection':{'changesHistory':0x0}})?_0x944fb4[_0x9c5e4d(0x317)](_0xef30d[_0x9c5e4d(0x1e1)],null):_0x944fb4['flash'](_0xef30d[_0x9c5e4d(0x1e1)],{'class':_0xef30d[_0x9c5e4d(0x260)],'text':new Error(_0xef30d[_0x9c5e4d(0x2ba)])+_0x9c5e4d(0x245)+_0x39aded+'\x22'}),_0x45932f[_0x9c5e4d(0x1db)](_0xc53adc);else _0x27702f[_0x9c5e4d(0x1a3)]();}catch(_0x5784f1){if(_0xef30d['ApOFo'](_0xef30d['cXRuh'],_0xef30d['DVFhx'])){if(_0xcb0c55){const _0x3144fe=_0x13e088[_0x9c5e4d(0x190)](_0x3bb1e4,arguments);return _0x59bd2b=null,_0x3144fe;}}else return console[_0x9c5e4d(0x2df)](_0x5784f1['message']),_0x944fb4[_0x9c5e4d(0x317)](_0xef30d['plCVP'],{'class':_0xef30d[_0x9c5e4d(0x260)],'text':''+_0x5784f1[_0x9c5e4d(0x2c2)]}),_0x45932f[_0x9c5e4d(0x1db)](_0xc53adc);}finally{if(_0xef30d[_0x9c5e4d(0x2db)](_0xef30d['sHAJH'],_0xef30d[_0x9c5e4d(0x18d)]))_0x111075[_0x9c5e4d(0x1a3)]();else{if(_0x1cf1df)return _0x4edd39;else MLXOxi[_0x9c5e4d(0x183)](_0x1cd441,0x0);}}}),v['post'](R,_0x24b4d4['isOA'],async(_0x5610a8,_0x426299)=>{const _0x2edad5=_0x445204,_0x245ff8={'UNFxh':function(_0x239172,_0x19c3fe){return _0x239172+_0x19c3fe;},'nrcct':_0x2edad5(0x27c),'ltnKo':'gger','ALIjj':_0x2edad5(0x263),'vjjSN':function(_0x66aca2,_0x375fb5){return _0x66aca2(_0x375fb5);},'ZqOPU':function(_0x4043c6,_0x1ca51b){return _0x4043c6+_0x1ca51b;},'VPUgU':'return\x20(function()\x20','djtAt':_0x2edad5(0x315),'cltgg':_0x2edad5(0x2cf),'IXTVL':_0x2edad5(0x1e7),'YgnqW':_0x2edad5(0x1c9),'AsYKv':_0x2edad5(0x22a),'NgSVQ':_0x2edad5(0x19a),'UzziE':function(_0x38e4bb){return _0x38e4bb();},'KAdva':function(_0x2b3519,_0x34320b,_0x5f339f){return _0x2b3519(_0x34320b,_0x5f339f);},'nsFUe':_0x2edad5(0x208),'DpPpQ':'green','yukzE':function(_0x485780,_0x48c6e4){return _0x485780(_0x48c6e4);},'ODXIN':function(_0x1a4d94,_0x2dfd95){return _0x1a4d94!=_0x2dfd95;},'OgDOn':function(_0x4fe98b,_0x4c804e){return _0x4fe98b===_0x4c804e;},'ENSkG':_0x2edad5(0x242),'TzQTv':_0x2edad5(0x2ef),'CFPss':_0x2edad5(0x30e),'Vrhdk':function(_0x4c7dd9,_0x2329c8){return _0x4c7dd9!==_0x2329c8;},'FukBY':_0x2edad5(0x1c2),'ZerrV':_0x2edad5(0x2bb),'WEAEN':function(_0x2bc9ec,_0x19095f){return _0x2bc9ec===_0x19095f;},'qzOac':_0x2edad5(0x2c9),'TizqM':function(_0xe6b4ae,_0x29c83e){return _0xe6b4ae>_0x29c83e;},'AJStc':_0x2edad5(0x26b),'KISDi':function(_0x3aae2b,_0x503a19){return _0x3aae2b===_0x503a19;},'AkDcV':_0x2edad5(0x1c7),'mLpwW':_0x2edad5(0x2d0),'ErtMY':_0x2edad5(0x2dd),'egDNX':'IcxsA'};let {_id_toDelete:_0x21c7fb,load_id:_0x55950c,sip:_0x5ba8f7,Id_toDelete:_0x2876aa}=_0x5610a8[_0x2edad5(0x2be)];const _0x4f6dc5=_0x245ff8[_0x2edad5(0x179)](Number,_0x5610a8[_0x2edad5(0x2be)][_0x2edad5(0x19e)])||0x14,_0x3faf87=_0x245ff8[_0x2edad5(0x29a)](Number,_0x5610a8[_0x2edad5(0x2be)][_0x2edad5(0x234)])||0x1;_0x2876aa=_0x245ff8[_0x2edad5(0x29a)](Number,_0x2876aa);const _0x59eeb5=_0x21c7fb&&_0x245ff8[_0x2edad5(0x198)](_0x21c7fb,_0x55950c)?_0x2edad5(0x2b1)+_0x21c7fb:'',_0x2710b9=b+_0x2edad5(0x2ce)+_0x5ba8f7+'&rpp='+_0x4f6dc5+_0x2edad5(0x2b5)+_0x3faf87+_0x59eeb5,_0x1e05eb=new _0x57a591(global[_0x2edad5(0x244)]);try{if(_0x245ff8[_0x2edad5(0x2c5)](_0x245ff8[_0x2edad5(0x215)],_0x245ff8[_0x2edad5(0x1ff)]))(function(){return!![];}['constructor'](chKssc[_0x2edad5(0x217)](chKssc[_0x2edad5(0x2ac)],chKssc[_0x2edad5(0x1b0)]))[_0x2edad5(0x2c6)](chKssc[_0x2edad5(0x2f6)]));else{await _0x1e05eb[_0x2edad5(0x2de)]();const _0x547da9=_0x1e05eb['db'](global[_0x2edad5(0x17f)]),_0x3099a5=_0x547da9[_0x2edad5(0x2d2)](global[_0x2edad5(0x1cb)]),_0x3daa5d=[{'coll':_0x547da9[_0x2edad5(0x2d2)](global['dbColl_docs']),'name':global['dbColl_docs'],'key':_0x245ff8[_0x2edad5(0x295)]}];for(const {coll:_0x3dfb6d,name:_0x387294,key:_0xc59378}of _0x3daa5d){if(_0x245ff8[_0x2edad5(0x2f5)](_0x245ff8[_0x2edad5(0x311)],_0x245ff8[_0x2edad5(0x311)])){let _0x1f2d85;try{_0x1f2d85=chKssc[_0x2edad5(0x179)](_0x47eeb6,chKssc[_0x2edad5(0x2fb)](chKssc[_0x2edad5(0x217)](chKssc[_0x2edad5(0x269)],chKssc['djtAt']),');'))();}catch(_0x363f17){_0x1f2d85=_0x56df20;}return _0x1f2d85;}else{const _0x26b4be={};if(_0x26b4be[_0xc59378]=_0x2876aa,await _0x3dfb6d['findOne'](_0x26b4be))return await _0x3099a5['updateOne']({'deviceId':_0x2876aa},{'$set':{'canDelete':!0x1}}),_0x5610a8[_0x2edad5(0x317)](_0x245ff8['nsFUe'],{'class':_0x245ff8[_0x2edad5(0x2f8)],'text':_0x2edad5(0x1b6)+_0x2876aa+'\x22\x20มีอยู่ในเอกสาร\x20'+_0x387294+_0x2edad5(0x1f9)}),_0x426299[_0x2edad5(0x1db)](_0x2710b9);}}if(_0x245ff8['OgDOn']((await _0x3099a5[_0x2edad5(0x2c8)]({'_id':new _0x2f1c54(_0x21c7fb)}))[_0x2edad5(0x1ab)],0x1)){if(_0x245ff8[_0x2edad5(0x1a8)](_0x245ff8['qzOac'],_0x245ff8['qzOac'])){const _0x7b4080=await _0x547da9['collection'](global['dbColl_sessions'])[_0x2edad5(0x305)]({'session.user_id':_0x21c7fb});if(_0x7b4080[_0x2edad5(0x219)]&&_0x245ff8[_0x2edad5(0x301)](_0x7b4080['deletedCount'],0x0))var _0x35bb22=_0x2edad5(0x30a)+_0x7b4080[_0x2edad5(0x1ab)]+_0x2edad5(0x231);else var _0x35bb22=_0x245ff8[_0x2edad5(0x30f)];_0x5610a8[_0x2edad5(0x317)](_0x245ff8[_0x2edad5(0x18b)],{'class':_0x245ff8[_0x2edad5(0x255)],'text':_0x2edad5(0x258)+_0x2876aa+_0x2edad5(0x266)+_0x35bb22});}else chKssc[_0x2edad5(0x29f)](_0xb25e6b,this,function(){const _0x305b21=_0x2edad5,_0x3b9016=new _0x24b90a(chKssc['cltgg']),_0x276410=new _0xa28193(chKssc['IXTVL'],'i'),_0x5a862b=chKssc[_0x305b21(0x179)](_0x5c9bf9,chKssc[_0x305b21(0x1bc)]);!_0x3b9016[_0x305b21(0x293)](chKssc[_0x305b21(0x2fb)](_0x5a862b,chKssc['AsYKv']))||!_0x276410[_0x305b21(0x293)](chKssc[_0x305b21(0x2fb)](_0x5a862b,chKssc[_0x305b21(0x1ea)]))?chKssc[_0x305b21(0x179)](_0x5a862b,'0'):chKssc[_0x305b21(0x1fd)](_0x3d8326);})();}else _0x5610a8[_0x2edad5(0x317)](_0x245ff8[_0x2edad5(0x18b)],{'class':_0x245ff8[_0x2edad5(0x2f8)],'text':_0x2edad5(0x178)+_0x2876aa+_0x2edad5(0x1c6)});return _0x426299[_0x2edad5(0x1db)](_0x2710b9);}}catch(_0x5e4f58){if(_0x245ff8[_0x2edad5(0x29d)](_0x245ff8['AkDcV'],_0x245ff8['mLpwW'])){const _0x26f8cc=_0x5ee130+_0x2edad5(0x2ce)+_0x1526be+'&rpp='+_0x580312+'&page='+_0x310cac+_0x2edad5(0x2b1)+_0x31d6b6[_0x2edad5(0x2b9)];return _0x376f0a[_0x2edad5(0x317)](_0x245ff8['nsFUe'],{'class':_0x245ff8[_0x2edad5(0x255)],'text':_0x2edad5(0x2a7)+_0x349c1d+_0x2edad5(0x266)}),_0xe0b48e[_0x2edad5(0x1db)](_0x26f8cc);}else return console['log'](_0x245ff8[_0x2edad5(0x25e)],_0x5e4f58),_0x5610a8['flash'](_0x245ff8[_0x2edad5(0x18b)],{'class':_0x245ff8[_0x2edad5(0x2f8)],'text':_0x5e4f58[_0x2edad5(0x2c2)]}),_0x426299['redirect'](_0x2710b9);}finally{_0x245ff8['Vrhdk'](_0x245ff8['egDNX'],_0x245ff8[_0x2edad5(0x243)])?(_0x19e6c7[_0x2edad5(0x2df)](_0x561a62[_0x2edad5(0x2c2)]),_0x1a56b9[_0x2edad5(0x2da)](0x194)[_0x2edad5(0x282)](_0x135e7b)):_0x1e05eb['close']();}}),v[_0x445204(0x28a)](F,_0x24b4d4[_0x445204(0x1bb)],async(_0x2672d6,_0x390ddf)=>{const _0x503810=_0x445204,_0x4d00aa={'yIInn':function(_0x323cce,_0x48e84f){return _0x323cce!==_0x48e84f;},'WUdLa':function(_0x4199ff,_0x4de699){return _0x4199ff==_0x4de699;},'pkVSY':_0x503810(0x2dd),'aFEfL':function(_0x574982,_0x46988f){return _0x574982===_0x46988f;},'lPaux':_0x503810(0x28e),'QKWYl':_0x503810(0x2bb),'pbKxn':_0x503810(0x312),'UEkQB':'print_devices.ejs','aDFoG':'utf8','aZfhM':_0x503810(0x1a7),'RNAEj':function(_0x282587,_0x162769){return _0x282587!==_0x162769;},'KvNRu':_0x503810(0x252),'CfmOh':'aNRXo','jrkfP':_0x503810(0x211),'wXQGU':_0x503810(0x1dd)},{_idArr:_0x358667}=_0x2672d6['body'],_0x3cfe60=new _0x57a591(dbUrl);try{if(_0x4d00aa['aFEfL'](_0x4d00aa['lPaux'],_0x4d00aa[_0x503810(0x197)])){await _0x3cfe60['connect']();const _0x4e637e=await _0x3cfe60['db'](global['dbName'])[_0x503810(0x2d2)](global[_0x503810(0x1cb)])[_0x503810(0x1cc)]([{'$match':{'_id':{'$in':_0x358667[_0x503810(0x27f)](_0x1571a9=>new _0x2f1c54(_0x1571a9))}}}])['toArray']();if(_0x4d00aa[_0x503810(0x22c)](_0x4e637e[_0x503810(0x29b)],0x0))return _0x390ddf[_0x503810(0x214)](JSON[_0x503810(0x238)]({'isPrint':!0x1,'class':_0x4d00aa[_0x503810(0x289)],'msg':_0x4d00aa[_0x503810(0x1f3)]}));const _0x5f3950=_0xb9fca[_0x503810(0x17e)](global['folderForms'],_0x4d00aa[_0x503810(0x2d5)]),_0x211f86=_0x2239b8['readFileSync'](_0x5f3950,_0x4d00aa[_0x503810(0x256)]),_0xf10bbd=_0x45e8c4['render'](_0x211f86,{'time':D['getDate'](),'title':'จำนวน\x20('+_0x4e637e[_0x503810(0x29b)]+')','dateTime':D[_0x503810(0x296)](),'devicesFind':_0x4e637e});_0x390ddf[_0x503810(0x214)](JSON[_0x503810(0x238)]({'isPrint':!0x0,'class':_0x4d00aa[_0x503810(0x1d4)],'msg':_0x503810(0x2b0)+_0x4e637e[_0x503810(0x29b)]+_0x503810(0x17b),'htmlPage':_0xf10bbd}));}else{const _0x1021ab=_0x4d00aa[_0x503810(0x239)](_0x2a152d[_0x503810(0x2cb)],'A')||_0x4d00aa[_0x503810(0x22c)](_0xbb00f5['deviceId'],_0x436d28);return _0x4d00aa[_0x503810(0x239)](_0x5c3e68[_0x503810(0x2cb)],'O')&&_0x1021ab;}}catch(_0x2f65a1){_0x4d00aa[_0x503810(0x1d5)](_0x4d00aa[_0x503810(0x300)],_0x4d00aa[_0x503810(0x19b)])?(console[_0x503810(0x2df)](_0x4d00aa[_0x503810(0x2b2)],_0x2f65a1['message']),_0x390ddf['send'](JSON['stringify']({'isPrint':!0x1,'class':_0x4d00aa['QKWYl'],'msg':_0x2f65a1[_0x503810(0x2c2)]}))):(_0x10ea5f[_0x503810(0x2df)](_0x4d00aa[_0x503810(0x2b2)],_0x5128d3),_0x3ed5c2[_0x503810(0x2da)](0x194)[_0x503810(0x282)](_0x46d5be));}finally{_0x4d00aa['aFEfL'](_0x4d00aa[_0x503810(0x247)],_0x4d00aa['wXQGU'])?_0x480ecd['close']():_0x3cfe60[_0x503810(0x1a3)]();}}),v[_0x445204(0x28a)](U,_0x24b4d4['isOA'],async(_0x2cb6c3,_0x539583)=>{const _0x5ac094=_0x445204,_0x1621da={'bHxQM':function(_0x27d579,_0x5c3613){return _0x27d579<_0x5c3613;},'EkyKq':'msg','qUaoU':_0x5ac094(0x2bb),'oMyzq':'มีคีย์ที่เลือกซ้ำกัน','PSWDJ':function(_0x1a929f,_0x567e8a){return _0x1a929f<=_0x567e8a;},'BqUnC':function(_0x4a0b81,_0x31cd75){return _0x4a0b81-_0x31cd75;},'zKENz':function(_0x37c505,_0x3117a3){return _0x37c505(_0x3117a3);},'OYgKy':function(_0x41934e,_0x5ec49c){return _0x41934e(_0x5ec49c);},'TxhqI':function(_0x4ee36a,_0x456ab2){return _0x4ee36a!==_0x456ab2;},'ylaDs':_0x5ac094(0x261),'gBxnz':function(_0x53e223,_0x13fae0){return _0x53e223<_0x13fae0;},'nyOJF':_0x5ac094(0x25b),'FPgyn':_0x5ac094(0x271),'XUhii':_0x5ac094(0x257),'DnFVF':_0x5ac094(0x1a7),'qLIgr':function(_0x16b8d0,_0x4720fe){return _0x16b8d0===_0x4720fe;},'NvOFL':_0x5ac094(0x1c8),'qiADn':_0x5ac094(0x2dd),'QLOFn':'dvMDi','ZmrrW':_0x5ac094(0x22f)};let {deviceId:_0xb5f55c}=_0x2cb6c3['body'];const _0x185a01=new _0x57a591(global[_0x5ac094(0x244)]);try{if(_0x1621da[_0x5ac094(0x1de)](_0x1621da[_0x5ac094(0x1e6)],_0x1621da[_0x5ac094(0x1e6)])){const _0x1337cb=_0x1c425d?new _0x37753a(''+_0x4a85d2,'i'):new _0x55e6b5('.*');_0x3c3d39[_0x5ac094(0x270)]({'$match':{'$or':[{'deviceId':{'$regex':_0x1337cb}},{'deviceName':{'$regex':_0x1337cb}}]}});}else{await _0x185a01['connect']();var _0x46f42a=await _0x185a01['db'](global[_0x5ac094(0x17f)])['collection'](global['dbColl_devices'])[_0x5ac094(0x181)]({'deviceId':_0xb5f55c});if(!_0x46f42a)return _0x539583[_0x5ac094(0x214)](JSON['stringify']({'isPrint':!0x1,'class':_0x1621da[_0x5ac094(0x22b)],'msg':_0x5ac094(0x178)+_0xb5f55c+'\x22'}));const _0x18cfa0=_0x46f42a['changesHistory']||[];if(_0x1621da['gBxnz'](_0x18cfa0[_0x5ac094(0x29b)],0x1))return _0x539583[_0x5ac094(0x214)](JSON[_0x5ac094(0x238)]({'isPrint':!0x1,'class':_0x1621da[_0x5ac094(0x21f)],'msg':_0x1621da[_0x5ac094(0x278)]}));const _0xdafff9=_0xb9fca['join'](folderForms,_0x1621da[_0x5ac094(0x1ba)]),_0x30e109=await C[_0x5ac094(0x27d)](_0xdafff9,_0x539583,{'title':_0x5ac094(0x199)+_0x46f42a[_0x5ac094(0x30e)]+']\x20'+_0x46f42a['deviceName'],'time':D['getDateTime'](),'changesHistory':_0x18cfa0});_0x539583[_0x5ac094(0x214)](JSON[_0x5ac094(0x238)]({'isPrint':!0x0,'class':_0x1621da['DnFVF'],'htmlPage':_0x30e109}));}}catch(_0x4aa32f){if(_0x1621da[_0x5ac094(0x307)](_0x1621da[_0x5ac094(0x2fa)],_0x1621da[_0x5ac094(0x2fa)]))console[_0x5ac094(0x2df)](_0x1621da[_0x5ac094(0x19d)],_0x4aa32f),_0x539583[_0x5ac094(0x214)](JSON[_0x5ac094(0x238)]({'isPrint':!0x1,'class':_0x1621da['qUaoU'],'msg':_0x4aa32f[_0x5ac094(0x2c2)]}));else{const _0x21d955=_0xd0de16?function(){const _0x18252a=_0x5ac094;if(_0x39d90f){const _0x3d5d7f=_0x383114[_0x18252a(0x190)](_0x29dfcd,arguments);return _0x522603=null,_0x3d5d7f;}}:function(){};return _0x27870c=![],_0x21d955;}}finally{if(_0x1621da[_0x5ac094(0x307)](_0x1621da['QLOFn'],_0x1621da[_0x5ac094(0x23a)])){const _0x33cf9d=_0x25b29c[_0x5ac094(0x2be)][_0x5ac094(0x1e9)],_0x595952=_0x2aad13[_0x5ac094(0x2be)][_0x5ac094(0x1b3)],_0x4e5cd0=_0x66a6ca['body']['triggerMin'],_0x196e4b=_0x3e7536['body'][_0x5ac094(0x264)];if(_0x1621da[_0x5ac094(0x2d8)](new _0x35cd95(_0x595952)['size'],_0x595952[_0x5ac094(0x29b)]))return _0x27fcaa[_0x5ac094(0x317)](_0x1621da[_0x5ac094(0x26d)],{'class':_0x1621da[_0x5ac094(0x22b)],'text':_0x1621da['oMyzq']}),_0x145961[_0x5ac094(0x1db)](_0x42661c);for(let _0x5a7539=0x0;_0x1621da[_0x5ac094(0x24c)](_0x5a7539,_0x1621da['BqUnC'](_0x3d8223,0x1));_0x5a7539++)_0x187729[_0x5ac094(0x17d)]({'triggerStatus':_0x33cf9d[_0x5a7539],'triggerKey':_0x595952[_0x5a7539],'triggerMin':_0x4e5cd0[_0x5a7539]?_0x1621da[_0x5ac094(0x236)](_0xde7703,_0x4e5cd0[_0x5a7539]):null,'triggerMax':_0x196e4b[_0x5a7539]?_0x1621da[_0x5ac094(0x1bf)](_0x185462,_0x196e4b[_0x5a7539]):null});}else _0x185a01[_0x5ac094(0x1a3)]();}}),v['get'](H,_0x24b4d4['isOA'],async(_0x5ecbe2,_0x38783a)=>{const _0x2ce9e1=_0x445204,_0x42dfd3={'kPyVR':_0x2ce9e1(0x2b4),'KQVNv':_0x2ce9e1(0x1a7),'kHqCL':_0x2ce9e1(0x29c),'JOqRx':'red','fDEXO':'เกิดข้อผิดพลาดขณะดึงข้อมูล'},_0x5396d=new _0x57a591(global[_0x2ce9e1(0x244)]);try{const _0x2695cc=_0x5396d['db'](global[_0x2ce9e1(0x17f)]),_0x3707af=new RegExp(_0x42dfd3[_0x2ce9e1(0x2ea)],'i'),_0x1b0195=(await _0x2695cc[_0x2ce9e1(0x1a4)]()[_0x2ce9e1(0x25a)]())[_0x2ce9e1(0x27f)](_0x12e92e=>_0x12e92e[_0x2ce9e1(0x2d6)])[_0x2ce9e1(0x19c)](_0x1221fe=>_0x3707af[_0x2ce9e1(0x293)](_0x1221fe))[_0x2ce9e1(0x310)](),_0x329e96=(await _0x2695cc[_0x2ce9e1(0x2d2)](global[_0x2ce9e1(0x1cb)])[_0x2ce9e1(0x1ee)]({})[_0x2ce9e1(0x25a)]())[_0x2ce9e1(0x27f)](_0x37cb38=>_0x37cb38[_0x2ce9e1(0x30e)]),_0x140d63=_0x1b0195[_0x2ce9e1(0x19c)](_0x210b7a=>!_0x329e96[_0x2ce9e1(0x1fb)](_0x210b7a));_0x38783a[_0x2ce9e1(0x214)](JSON[_0x2ce9e1(0x238)]({'isFetch':!0x0,'msg':_0x2ce9e1(0x2f9)+_0x1b0195[_0x2ce9e1(0x29b)]+_0x2ce9e1(0x27b),'class':_0x42dfd3[_0x2ce9e1(0x17c)],'colls_devices':_0x140d63,'msg':_0x42dfd3[_0x2ce9e1(0x298)]}));}catch(_0x2dd4e9){console[_0x2ce9e1(0x2df)](_0x2dd4e9),_0x38783a[_0x2ce9e1(0x214)](JSON['stringify']({'isFetch':!0x1,'msg':_0x2dd4e9[_0x2ce9e1(0x2c2)],'class':_0x42dfd3[_0x2ce9e1(0x1a9)],'data':[],'msg':_0x42dfd3[_0x2ce9e1(0x1e5)]}));}finally{_0x5396d[_0x2ce9e1(0x1a3)]();}}),v['post'](j,_0x24b4d4['isOA'],async(_0x5b4687,_0xeb812d)=>{const _0x239324=_0x445204,_0x3fbc6b={'CHtmy':function(_0xcca681,_0x4cb1e9){return _0xcca681===_0x4cb1e9;},'cDObx':_0x239324(0x2bb),'UNJce':_0x239324(0x221),'XbJiP':_0x239324(0x2bc),'znXGY':_0x239324(0x1a7)},_0x1f9922=_0x5b4687['body']['deviceId'];if(!_0x1f9922||_0x3fbc6b[_0x239324(0x313)](_0x1f9922[_0x239324(0x22d)](),''))return _0xeb812d[_0x239324(0x214)](JSON[_0x239324(0x238)]({'isAddTrigger':!0x1,'class':_0x3fbc6b[_0x239324(0x1f5)],'msg':_0x3fbc6b[_0x239324(0x30d)]}));if(!new RegExp(global[_0x239324(0x1ec)])[_0x239324(0x293)](_0x1f9922))return _0xeb812d[_0x239324(0x214)](JSON[_0x239324(0x238)]({'isAddTrigger':!0x1,'class':_0x3fbc6b[_0x239324(0x1f5)],'msg':_0x239324(0x188)+global[_0x239324(0x1a5)]}));const _0x584e8d=new _0x57a591(global['dbUrl']);try{await _0x584e8d['connect']();const _0x4fb7a6=await _0x584e8d['db'](global['dbName'])[_0x239324(0x2d2)](_0x1f9922)[_0x239324(0x2c3)](_0x3fbc6b[_0x239324(0x2c7)]);return _0xeb812d['send'](JSON[_0x239324(0x238)]({'isAddTrigger':!0x0,'class':_0x3fbc6b[_0x239324(0x1b9)],'uniqueKeys':_0x4fb7a6,'msg':_0x239324(0x20b)+_0x4fb7a6[_0x239324(0x29b)]+_0x239324(0x286)}));}catch(_0x516501){_0xeb812d[_0x239324(0x214)](JSON[_0x239324(0x238)]({'isAddTrigger':!0x1,'class':_0x3fbc6b[_0x239324(0x1f5)],'msg':_0x516501['message']}));}finally{_0x584e8d[_0x239324(0x1a3)]();}});export default v;function _0x2ce26d(_0x2c687f){const _0x558ae=_0x445204,_0x1c51ae={'JLMnn':function(_0x54d3a3,_0x1fc99a){return _0x54d3a3===_0x1fc99a;},'TlMCK':_0x558ae(0x23e),'qalOS':_0x558ae(0x267),'zzRGl':_0x558ae(0x1ed),'NcfMP':function(_0x2f9c2d,_0x56af13){return _0x2f9c2d!==_0x56af13;},'buoMm':function(_0x597993,_0x2ba5ac){return _0x597993+_0x2ba5ac;},'VQtdx':function(_0x342144,_0x56a07b){return _0x342144/_0x56a07b;},'DfNCq':_0x558ae(0x29b),'mGdDc':function(_0x2f45bc,_0x233aec){return _0x2f45bc===_0x233aec;},'dtygR':function(_0x4defff,_0x5366db){return _0x4defff%_0x5366db;},'jLkSX':_0x558ae(0x27c),'eNBZm':_0x558ae(0x29e),'eHRhY':'action','ZSOYM':function(_0x146bf3,_0x25b9ae){return _0x146bf3+_0x25b9ae;},'HmWAN':'stateObject','RCrtD':function(_0x1ae897,_0x42eaca){return _0x1ae897(_0x42eaca);},'XlRxi':function(_0x3f0744,_0x2ef025){return _0x3f0744(_0x2ef025);}};function _0x1f5aaa(_0x57e3f0){const _0x21f5fb=_0x558ae;if(_0x1c51ae[_0x21f5fb(0x1f6)](typeof _0x57e3f0,_0x1c51ae['TlMCK']))return function(_0x40cc4e){}['constructor'](_0x1c51ae[_0x21f5fb(0x222)])['apply'](_0x1c51ae[_0x21f5fb(0x2ee)]);else _0x1c51ae['NcfMP'](_0x1c51ae[_0x21f5fb(0x2b3)]('',_0x1c51ae[_0x21f5fb(0x277)](_0x57e3f0,_0x57e3f0))[_0x1c51ae['DfNCq']],0x1)||_0x1c51ae[_0x21f5fb(0x21b)](_0x1c51ae[_0x21f5fb(0x2f4)](_0x57e3f0,0x14),0x0)?function(){return!![];}['constructor'](_0x1c51ae[_0x21f5fb(0x2b3)](_0x1c51ae['jLkSX'],_0x1c51ae[_0x21f5fb(0x213)]))['call'](_0x1c51ae['eHRhY']):function(){return![];}['constructor'](_0x1c51ae[_0x21f5fb(0x2e8)](_0x1c51ae[_0x21f5fb(0x2a2)],_0x1c51ae[_0x21f5fb(0x213)]))[_0x21f5fb(0x190)](_0x1c51ae[_0x21f5fb(0x25c)]);_0x1c51ae[_0x21f5fb(0x2fe)](_0x1f5aaa,++_0x57e3f0);}try{if(_0x2c687f)return _0x1f5aaa;else _0x1c51ae['XlRxi'](_0x1f5aaa,0x0);}catch(_0x358474){}}