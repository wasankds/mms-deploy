const _0x540d2d=_0xd8e4;(function(_0x58a269,_0x3d6208){const _0x5e7987=_0xd8e4,_0x470845=_0x58a269();while(!![]){try{const _0x287d62=parseInt(_0x5e7987(0x24f))/0x1+parseInt(_0x5e7987(0x35f))/0x2*(-parseInt(_0x5e7987(0x24e))/0x3)+parseInt(_0x5e7987(0x1ed))/0x4*(-parseInt(_0x5e7987(0x334))/0x5)+-parseInt(_0x5e7987(0x356))/0x6*(-parseInt(_0x5e7987(0x21f))/0x7)+-parseInt(_0x5e7987(0x360))/0x8*(-parseInt(_0x5e7987(0x33a))/0x9)+parseInt(_0x5e7987(0x2bc))/0xa*(-parseInt(_0x5e7987(0x236))/0xb)+-parseInt(_0x5e7987(0x1b6))/0xc;if(_0x287d62===_0x3d6208)break;else _0x470845['push'](_0x470845['shift']());}catch(_0x5e34f8){_0x470845['push'](_0x470845['shift']());}}}(_0x5886,0xeb40f));const _0x492628=(function(){const _0x4a4a69=_0xd8e4,_0x5f2684={'XkwVv':'error\x20===>\x20','hnHbi':function(_0x1242f3,_0x16dd06){return _0x1242f3===_0x16dd06;},'YZqLT':_0x4a4a69(0x31d),'SbjPl':_0x4a4a69(0x1bc),'Ndxzp':_0x4a4a69(0x238),'nCLzf':_0x4a4a69(0x1d6),'uFoLL':function(_0x20e105,_0xcbdeb7){return _0x20e105!==_0xcbdeb7;},'uFjbC':_0x4a4a69(0x24c)};let _0x1faf0c=!![];return function(_0x5d88a7,_0xc739be){const _0x23163d=_0x4a4a69,_0x4339df={'Rvrhc':_0x5f2684[_0x23163d(0x266)]};if(_0x5f2684[_0x23163d(0x32b)](_0x5f2684['uFjbC'],_0x5f2684[_0x23163d(0x24a)]))_0x356951[_0x23163d(0x2df)](_0xafe54b[_0x23163d(0x29c)]({'isAddTrigger':!0x1,'class':_0x4339df[_0x23163d(0x2e9)],'msg':_0xa49284[_0x23163d(0x36f)]}));else{const _0x38fc87=_0x1faf0c?function(){const _0x21c713=_0x23163d,_0x4f1f82={'LifML':_0x5f2684[_0x21c713(0x1f5)]};if(_0x5f2684[_0x21c713(0x1de)](_0x5f2684[_0x21c713(0x309)],_0x5f2684[_0x21c713(0x309)])){if(_0xc739be){if(_0x5f2684[_0x21c713(0x1de)](_0x5f2684[_0x21c713(0x271)],_0x5f2684['Ndxzp']))_0x2ab587[_0x21c713(0x32a)]();else{const _0x230213=_0xc739be[_0x21c713(0x220)](_0x5d88a7,arguments);return _0xc739be=null,_0x230213;}}}else _0x43b53a[_0x21c713(0x2cf)](_0x4f1f82[_0x21c713(0x215)],_0x336e12),_0x45f085['status'](0x194)[_0x21c713(0x2d9)](_0x33ae47);}:function(){};return _0x1faf0c=![],_0x38fc87;}};}());(function(){const _0x104318=_0xd8e4,_0x4898b4={'UvIVh':'msg','rzPUj':_0x104318(0x1d6),'olhhO':function(_0xb6b4de,_0x3e2550){return _0xb6b4de(_0x3e2550);},'WfyKp':function(_0x13d370,_0x6edb8){return _0x13d370+_0x6edb8;},'xZVPj':_0x104318(0x1e5),'oRXWc':_0x104318(0x36b),'sOQQx':function(_0x407048,_0x15ad51){return _0x407048!==_0x15ad51;},'agITm':_0x104318(0x348),'IyudE':_0x104318(0x353),'KZEOT':_0x104318(0x207),'vzqJj':_0x104318(0x33c),'knJok':function(_0x193037,_0x48c56b){return _0x193037(_0x48c56b);},'mVoDc':_0x104318(0x20e),'ShrkY':function(_0x18c0d7,_0x55b9f5){return _0x18c0d7+_0x55b9f5;},'QPFym':_0x104318(0x275),'gXoFf':function(_0x327759,_0x5819c1){return _0x327759+_0x5819c1;},'QocrT':'input','uzVpD':function(_0x22fdfd,_0x1bcdd6){return _0x22fdfd===_0x1bcdd6;},'dxMVI':'eMFIK','iYhgT':function(_0xa0df5,_0x8186e1){return _0xa0df5!==_0x8186e1;},'lGNnf':_0x104318(0x2c8),'TauQm':function(_0x4d7702){return _0x4d7702();},'tGMHg':function(_0x496b0c,_0x448875,_0x590056){return _0x496b0c(_0x448875,_0x590056);}};_0x4898b4[_0x104318(0x281)](_0x492628,this,function(){const _0xeba822=_0x104318,_0x10d0c9={'aJZGl':_0x4898b4[_0xeba822(0x2fe)],'JEPuC':_0x4898b4[_0xeba822(0x1cf)],'zlgbq':function(_0x4d4d4e,_0x56b4d8){return _0x4898b4['olhhO'](_0x4d4d4e,_0x56b4d8);},'Vjzup':function(_0x1d63de,_0xf31fe2){const _0x4575be=_0xeba822;return _0x4898b4[_0x4575be(0x1f3)](_0x1d63de,_0xf31fe2);},'RCxBy':_0x4898b4[_0xeba822(0x23e)],'LfCIE':_0x4898b4[_0xeba822(0x2dc)]};if(_0x4898b4['sOQQx'](_0x4898b4[_0xeba822(0x241)],_0x4898b4[_0xeba822(0x2c1)])){const _0x3ef1ba=new RegExp(_0x4898b4[_0xeba822(0x322)]),_0x1b16d6=new RegExp(_0x4898b4[_0xeba822(0x20f)],'i'),_0x1afddd=_0x4898b4['knJok'](_0x2781d8,_0x4898b4[_0xeba822(0x31f)]);if(!_0x3ef1ba['test'](_0x4898b4[_0xeba822(0x33f)](_0x1afddd,_0x4898b4['QPFym']))||!_0x1b16d6[_0xeba822(0x21d)](_0x4898b4['gXoFf'](_0x1afddd,_0x4898b4[_0xeba822(0x2fa)]))){if(_0x4898b4['uzVpD'](_0x4898b4['dxMVI'],_0x4898b4[_0xeba822(0x335)]))_0x4898b4[_0xeba822(0x254)](_0x1afddd,'0');else return!![];}else{if(_0x4898b4[_0xeba822(0x219)](_0x4898b4[_0xeba822(0x222)],_0x4898b4[_0xeba822(0x222)]))return _0x4e9672['log'](_0x35bff8['message']),_0x2e325c['flash'](_0x10d0c9[_0xeba822(0x1dd)],{'class':_0x10d0c9[_0xeba822(0x1e3)],'text':''+_0x2f593f[_0xeba822(0x36f)]}),_0x3a7062['redirect'](_0x217270);else _0x4898b4[_0xeba822(0x2e4)](_0x2781d8);}}else _0x32a01c=_0x10d0c9[_0xeba822(0x225)](_0x42fde2,_0x10d0c9[_0xeba822(0x313)](_0x10d0c9[_0xeba822(0x313)](_0x10d0c9['RCxBy'],_0x10d0c9[_0xeba822(0x1cc)]),');'))();})();}());const _0x3f394b=(function(){const _0x4cbba7=_0xd8e4,_0x5e2c9f={'RcxyS':_0x4cbba7(0x1d6),'XYHQz':'เกิดข้อผิดพลาดขณะดึงข้อมูล','IDAmf':function(_0x4c9910,_0x5a5326){return _0x4c9910===_0x5a5326;},'xMHNG':_0x4cbba7(0x1f6),'bIUHQ':'hQsvk','TfPkv':_0x4cbba7(0x362),'MehfU':_0x4cbba7(0x244),'vyVeV':function(_0x35458d,_0x484465){return _0x35458d!==_0x484465;},'myIgU':_0x4cbba7(0x22a)};let _0x60ee3d=!![];return function(_0x3d1a14,_0x6843a3){const _0x1eb4c7=_0x4cbba7,_0x3d0c0b={'jifEn':_0x5e2c9f[_0x1eb4c7(0x239)],'asNuP':_0x5e2c9f[_0x1eb4c7(0x331)]};if(_0x5e2c9f['vyVeV'](_0x5e2c9f['myIgU'],_0x5e2c9f['myIgU']))_0x498a40[_0x1eb4c7(0x2cf)](_0x481b31),_0x1a795f[_0x1eb4c7(0x2df)](_0x73ab4e[_0x1eb4c7(0x29c)]({'isFetch':!0x1,'msg':_0x499b[_0x1eb4c7(0x36f)],'class':_0x5e2c9f[_0x1eb4c7(0x331)],'data':[],'msg':_0x5e2c9f[_0x1eb4c7(0x2ac)]}));else{const _0x50ceb0=_0x60ee3d?function(){const _0x44b23b=_0x1eb4c7;if(_0x5e2c9f[_0x44b23b(0x34d)](_0x5e2c9f[_0x44b23b(0x1b9)],_0x5e2c9f['bIUHQ'])){const _0x3f400b=_0x3c65d0[_0x44b23b(0x2fc)][_0x44b23b(0x305)][_0x44b23b(0x285)](_0x563fb1),_0x4ca65a=_0x33b2a1[_0x3114ac],_0x33d23e=_0x9c7174[_0x4ca65a]||_0x3f400b;_0x3f400b[_0x44b23b(0x2a7)]=_0x2ae453[_0x44b23b(0x285)](_0x597020),_0x3f400b[_0x44b23b(0x373)]=_0x33d23e[_0x44b23b(0x373)][_0x44b23b(0x285)](_0x33d23e),_0x4e59e0[_0x4ca65a]=_0x3f400b;}else{if(_0x6843a3){if(_0x5e2c9f[_0x44b23b(0x34d)](_0x5e2c9f['TfPkv'],_0x5e2c9f[_0x44b23b(0x226)])){const _0x4daa27=_0x6843a3['apply'](_0x3d1a14,arguments);return _0x6843a3=null,_0x4daa27;}else _0x1f7be6[_0x44b23b(0x2cf)](_0x3d0c0b[_0x44b23b(0x2f8)],_0x59428f),_0x50df3c[_0x44b23b(0x2df)](_0x4699d3[_0x44b23b(0x29c)]({'isPrint':!0x1,'class':_0x3d0c0b['asNuP'],'msg':_0x4695e2[_0x44b23b(0x36f)]}));}}}:function(){};return _0x60ee3d=![],_0x50ceb0;}};}()),_0x43d899=_0x3f394b(this,function(){const _0x50ae6b=_0xd8e4,_0x39011b={'Yrwyp':function(_0x5dbbf3,_0x74f6da){return _0x5dbbf3!==_0x74f6da;},'nDYFk':function(_0x5717fc,_0x3b53fd){return _0x5717fc==_0x3b53fd;},'bDSlP':function(_0xaa21de,_0x2d80fb){return _0xaa21de===_0x2d80fb;},'yOYVv':_0x50ae6b(0x2b9),'jspKz':function(_0x2ac447,_0x1c7848){return _0x2ac447!==_0x1c7848;},'jsUsH':'pQIeQ','OlwJJ':'CWhET','EbGOK':function(_0x5260b3,_0x2f974c){return _0x5260b3(_0x2f974c);},'UiFfX':function(_0x5d84e6,_0xac6bb0){return _0x5d84e6+_0xac6bb0;},'KZsNW':'return\x20(function()\x20','YsfyI':_0x50ae6b(0x36b),'iIPqR':function(_0x4097d1,_0x597583){return _0x4097d1===_0x597583;},'CLOWR':_0x50ae6b(0x229),'Dohhz':'error\x20===>\x20','Clmvs':_0x50ae6b(0x2b5),'kgXYP':_0x50ae6b(0x1d6),'DQUFn':function(_0x4c1b98){return _0x4c1b98();},'LqabJ':_0x50ae6b(0x2cf),'THWdY':_0x50ae6b(0x36c),'QMBJS':_0x50ae6b(0x2db),'Zeuhz':_0x50ae6b(0x28c),'uszIM':'exception','PdTrK':_0x50ae6b(0x216),'QnSLi':_0x50ae6b(0x2d0),'vcRgu':function(_0x48c5ac,_0x3bcdbf){return _0x48c5ac<_0x3bcdbf;},'XRJjG':function(_0x4f7946,_0x95aeec){return _0x4f7946===_0x95aeec;},'FMROk':'LzDXw','aepFQ':'jqYyy'},_0x39fcf3=function(){const _0x223ce2=_0x50ae6b,_0x4b1727={'LuHgW':function(_0x238596,_0x5116bf){const _0x317609=_0xd8e4;return _0x39011b[_0x317609(0x269)](_0x238596,_0x5116bf);},'BRCsR':function(_0x2f195c,_0x4e93a3){return _0x39011b['nDYFk'](_0x2f195c,_0x4e93a3);},'vGuEJ':function(_0x32cfaa,_0x5af299){const _0x287536=_0xd8e4;return _0x39011b[_0x287536(0x269)](_0x32cfaa,_0x5af299);}};if(_0x39011b['bDSlP'](_0x39011b['yOYVv'],_0x39011b[_0x223ce2(0x1c9)])){let _0x4b5d8f;try{if(_0x39011b[_0x223ce2(0x26c)](_0x39011b[_0x223ce2(0x2b0)],_0x39011b['OlwJJ']))_0x4b5d8f=_0x39011b['EbGOK'](Function,_0x39011b[_0x223ce2(0x297)](_0x39011b[_0x223ce2(0x297)](_0x39011b[_0x223ce2(0x315)],_0x39011b[_0x223ce2(0x27b)]),');'))();else{const _0x4a4060=_0x4d21d2[_0x223ce2(0x1f2)];_0xc0e49c=_0x41eae9[_0x223ce2(0x2da)](_0x39ee89=>{const _0xe5d525=_0x223ce2,_0x1894ed=_0x4b1727[_0xe5d525(0x33d)](_0x39ee89['userAuthority'],'A')||_0x4b1727[_0xe5d525(0x2bd)](_0x39ee89['deviceId'],_0x4a4060);return _0x4b1727[_0xe5d525(0x30b)](_0x39ee89[_0xe5d525(0x1c2)],'O')&&_0x1894ed;});}}catch(_0x2b2a88){_0x39011b[_0x223ce2(0x1fe)](_0x39011b['CLOWR'],_0x39011b[_0x223ce2(0x24b)])?_0x4b5d8f=window:(_0x4cb0cc[_0x223ce2(0x2cf)](_0x864cbe[_0x223ce2(0x36f)]),_0x531e15[_0x223ce2(0x2a8)](0x194)[_0x223ce2(0x2d9)](_0x1565da));}return _0x4b5d8f;}else{const _0x273e8a=_0x2dcaea[_0x223ce2(0x220)](_0x1d60a3,arguments);return _0x2a7f8d=null,_0x273e8a;}},_0x556e41=_0x39011b[_0x50ae6b(0x2b4)](_0x39fcf3),_0x507636=_0x556e41[_0x50ae6b(0x243)]=_0x556e41[_0x50ae6b(0x243)]||{},_0x17fecf=[_0x39011b[_0x50ae6b(0x354)],_0x39011b[_0x50ae6b(0x210)],_0x39011b[_0x50ae6b(0x257)],_0x39011b[_0x50ae6b(0x2a6)],_0x39011b['uszIM'],_0x39011b['PdTrK'],_0x39011b[_0x50ae6b(0x2d3)]];for(let _0x3d4e20=0x0;_0x39011b[_0x50ae6b(0x2fb)](_0x3d4e20,_0x17fecf[_0x50ae6b(0x35d)]);_0x3d4e20++){if(_0x39011b['XRJjG'](_0x39011b['FMROk'],_0x39011b[_0x50ae6b(0x214)]))return _0x1e788d[_0x50ae6b(0x2cf)](_0x39011b[_0x50ae6b(0x2a2)],_0x4a0176),_0x56280d['flash'](_0x39011b[_0x50ae6b(0x28b)],{'class':_0x39011b[_0x50ae6b(0x202)],'text':_0x184674['message']}),_0x1d56b7[_0x50ae6b(0x212)](_0x142d90);else{const _0x3d1fbe=_0x3f394b[_0x50ae6b(0x2fc)][_0x50ae6b(0x305)][_0x50ae6b(0x285)](_0x3f394b),_0x55961b=_0x17fecf[_0x3d4e20],_0x24dd9e=_0x507636[_0x55961b]||_0x3d1fbe;_0x3d1fbe[_0x50ae6b(0x2a7)]=_0x3f394b[_0x50ae6b(0x285)](_0x3f394b),_0x3d1fbe[_0x50ae6b(0x373)]=_0x24dd9e[_0x50ae6b(0x373)][_0x50ae6b(0x285)](_0x24dd9e),_0x507636[_0x55961b]=_0x3d1fbe;}}});_0x43d899();import _0x45c977 from'express';const v=_0x45c977[_0x540d2d(0x1b8)]();function _0x5886(){const _0x94a0e=['{{sep}}\x22','ZquoG','IyudE','readFileSync','vLgXe','ดึงข้อมูลเรียบร้อยแล้ว','Izwdt','feUzp','{{sep}}(\x20ไม่พบเซสชั่น\x20)','fpGrq','pczMy','รูปแบบไอดีอุปกรณ์ไม่ถูกต้อง{{sep}}','insertedId','deletedCount','cuLlz','GhfvA','log','trace','minute','KjleW','QnSLi','Vcnlb','PMwrp','ดึงค่าฟิลด์\x20key\x20ที่ไม่ซ้ำกัน\x20{{sep}}จำนวน\x20','PXzyF','cvdWR','sendFile','filter','info','oRXWc','uRhea','dbName','send','OrrEu','/delete','push','zPSMC','TauQm','UPzLH','VrEaN','triggerMin','IdEwB','Rvrhc','XBREo','jakjf','InTFy','action','triggerMax','updateOne','QomXa','../','query','YLXRA','OqpMI','debu','rpp','while\x20(true)\x20{}','jifEn','hFLvh','QocrT','vcRgu','constructor','getChangeHistory','UvIVh','listCollections','wVNrb','csvky','getSettings','Lzyrn','counter','prototype','wCETb','bJTBT','\x20คอลเล็กชัน','YZqLT','XADUx','vGuEJ','FQCQC','ประวัติการแก้ไข\x20:\x20[','sRGCA','RMZSe','FfuAw','find','AxAXT','Vjzup','gjoOc','KZsNW','กรุณาระบุค่า\x20Min\x20หรือ\x20Max\x20สำหรับคีย์\x20\x22','$changesHistory','\x22\x20เรียบร้อยแล้ว\x20)','flash','page','PNQZv','findOne','NclfN','JzEwW','mVoDc','QHbNW','qEbYK','KZEOT','connect','wcqBF','renderView','CVUDl','&page=','ลบยูสเซอร์\x20\x22','StNoM','close','uFoLL','triggerRows','distinct','udbkg','QzjAr','/changes','RcxyS','RGTYA','rjiym','10wfmXSo','dxMVI','EjuSa','key','JtEkO','SMTSr','4842yyXuIJ','\x20เรียบร้อยแล้ว','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','LuHgW','RtFAE','ShrkY','modifiedCount','AqwrE','lBaVC','fGoPa','GHFry','LOQqz','ZqyLP','name','PcYfD','getDateTime','ZOkIq','faSCD','dbColl_docs','IDAmf','UrHmn','rCXjX','FbGkV','vNkbs','hPbOT','XGAhk','LqabJ','fYkaR','66ULhRKT','VWUQt','fGdjc','iqZES','size','lrfPO','sort','length','uYhXY','5294HjFGGp','18184LGXIxA','nlDAl','LdWUe','VbzjC','PmUvn','triggerStatus','fLRff','TdCaW','LcsDB','ZPpbv','toArray','{}.constructor(\x22return\x20this\x22)(\x20)','warn','/myData.js','AIvwr','message','dIgGC','hHLHE','wuzmQ','toString','HytWy','เพิ่มอุปกรณ์\x20\x22','xQIlP','lDDDY','zShlA','IEtot','CjeXj','JVOOd','triggerKey','16974228SUEZhW','TcmsH','Router','xMHNG','pLmSG','yellow','vDmnj','เกิดข้อผิดพลาดขณะเพิ่มอุปกรณ์\x20\x22','uKpCP','PHtPA','acknowledged','rujEI','userAuthority','mddMi','OoKzD','TyGsP','$dateTimeCanDelete','yBuev','OAljI','yOYVv','bGmgp','trim','LfCIE','dbColl_devices','wcDbO','rzPUj','gYWzu','Xqsze','อัปเดท\x20\x22','zPdLh','ZsGYQ','RwzuI','red','YiWSf','mqbKY','isOA','/fetch','VjChH','ไม่พบประวัติการเปลี่ยนแปลง','aJZGl','hnHbi','input','eHbRc','FMRev','toNUX','JEPuC','QzeSy','return\x20(function()\x20','changes_device.ejs','QEYty','string','XLUML','KSMHw','CZBql','uKzlP','856780mIWnRy','/add-trigger','xUKji','โหลดข้อมูลอุปกรณ์\x20','TDYjk','deviceId','WfyKp','getDate','XkwVv','TXPuD','FdQkB','load_id','SZFSt','QjUnH','tKDWn','stateObject','tWTXW','iIPqR','yhhaF','hHeHK','/save','kgXYP','nYVnl','GZqRW','jQsXl','APlmt','function\x20*\x5c(\x20*\x5c)','KOdyz','{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22','rJRaK','KBtga','join','IItcy','init','vzqJj','THWdY','EloHd','redirect','ORcgY','aepFQ','LifML','table','ijola','sEUdO','iYhgT','VZugE','getSessionData','DEVICE_DESCRIPTION','test','PABmX','542143wxLYON','apply','IuyGb','lGNnf','WZAKF','EZQrU','zlgbq','TfPkv','sip','lTwxQ','sVvRH','fyFmc','deleteMany','siQwR','userFullname','call','ofVte','yeFJA','DrZqi','EORdj','vEpQc','jxbFQ','zygAu','1771xeLotX','OdmwF','nyLTu','MehfU','folderForms','bxuqA','juzud','/myModule.js','xZVPj','?sip=','changesHistory','agITm','kvTal','console','error\x20===>\x20','wVJoG','bqPyF','เกิดข้อผิดพลาดขณะดึงข้อมูล','HSqcy','dbColl_sessions','uFjbC','CLOWR','pxUOl','AbOvA','1083RKhTMn','1714149QtvQPR','BpaeC','ชื่ออุปกรณ์/ไออีอุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','BehYI','\x22\x20เรียบร้อยแล้ว','knJok','&load_id=','HEKrL','QMBJS','aZdJn','uRWUT','LvCqn','deleteOne','gziGW','brlqt','nIVqt','EoeIg','mbxEN','DEVICE_PATTERN','insertOne','ypDAx','hJYfB','VIPnG','nCLzf','post','includes','Yrwyp','eVHfY','XneFF','jspKz','TGTfq','KDaaz','rTiiv','กรุณาระบุไอดีอุปกรณ์','SbjPl','GySRY','NAlTu','eCDyp','chain','BSASk','iVsIJ','ARYQG','gLIwI','ไม่พบ\x20\x22','YsfyI','qIVJc','{{sep}}ไม่สามารถลบได้','get','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','^(e|s)\x5cd{3}$','tGMHg','/print','FGCKO','deviceName','bind','ayhIA','zazHQ','awxuf','pTCnC','&rpp=','Clmvs','error','map','KaOOf','gger','/devices','replace','FYBTc','oSdwi','QtFYp','jFaCf','userId','UiFfX','bAjrP','body','piQPu','wQUUI','stringify','VsrCy','WonSj','hbBOo','XpEMX','_id','Dohhz','ipIAk','{{sep}}[\x20บันทึกการแก้ไข\x20]','FScIV','Zeuhz','__proto__','status','jZxtB','cizVc','CyhHZ','XYHQz','render','pYQgd','ueBXT','jsUsH','OTMBh','green','XZfnf','DQUFn','msg','SeYJO','WGJyz','dbUrl','CglGf','collection','countDocuments','1670pyRUkb','BRCsR','pPwoB'];_0x5886=function(){return _0x94a0e;};return _0x5886();}import{MongoClient as _0x7ac3e2,ObjectId as _0x3b215c}from'mongodb';import _0xbbd27b from'ejs';import _0x45666c from'path';import _0x51f982 from'fs';import _0x572c2d from'../middleware/mainAuth.js';function _0xd8e4(_0xcbf8c7,_0x8885ea){const _0x4df1e9=_0x5886();return _0xd8e4=function(_0x43d899,_0x3f394b){_0x43d899=_0x43d899-0x1ae;let _0x5d5436=_0x4df1e9[_0x43d899];return _0x5d5436;},_0xd8e4(_0xcbf8c7,_0x8885ea);}const C=await import(_0x540d2d(0x2f1)+mymoduleFolder+_0x540d2d(0x23d)),D=await import(_0x540d2d(0x2f1)+mymoduleFolder+'/myDateTime.js'),T=await import(_0x540d2d(0x2f1)+mymoduleFolder+'/myUsers.js'),L=await import('../'+mymoduleFolder+_0x540d2d(0x36d)),b=_0x540d2d(0x290),M=b+_0x540d2d(0x201),P=b+'/load',R=b+_0x540d2d(0x2e1),F=b+_0x540d2d(0x282),H=b+_0x540d2d(0x1da),U=b+_0x540d2d(0x330),j=b+_0x540d2d(0x1ee),G=b[_0x540d2d(0x291)](/\//g,'_');v['get'](b,_0x572c2d['isOA'],async(_0x37b23b,_0x2f40c6)=>{const _0x2c824a=_0x540d2d,_0x79d28e={'VZugE':function(_0xf3c9f2,_0x481d2c){return _0xf3c9f2!==_0x481d2c;},'AqwrE':_0x2c824a(0x272),'iIYcn':_0x2c824a(0x2e0),'pYQgd':function(_0x467c31,_0x4ed140){return _0x467c31!==_0x4ed140;},'EoeIg':function(_0x263afb,_0x2ed70f){return _0x263afb==_0x2ed70f;},'TcmsH':function(_0x39675b,_0x4decbf){return _0x39675b(_0x4decbf);},'EORdj':function(_0x8af214,_0x1b7a57){return _0x8af214(_0x1b7a57);},'KBtga':function(_0x938610,_0x5ece2c){return _0x938610*_0x5ece2c;},'uYhXY':function(_0x4617ef,_0x4b880d){return _0x4617ef-_0x4b880d;},'LOQqz':function(_0x1fd22a,_0x4aabd4){return _0x1fd22a===_0x4aabd4;},'fLRff':_0x2c824a(0x203),'pLmSG':function(_0x57a173,_0x3438de){return _0x57a173===_0x3438de;},'cvdWR':'nrcId','XADUx':function(_0x443790,_0x458b02){return _0x443790/_0x458b02;},'qEbYK':function(_0x5e0a40,_0x18f996){return _0x5e0a40<_0x18f996;},'AIvwr':function(_0x587f36,_0x26868f){return _0x587f36(_0x26868f);},'OdmwF':function(_0x2e2db2,_0x1a3def){return _0x2e2db2>_0x1a3def;},'CeBSg':function(_0x47ffca,_0x59c513){return _0x47ffca+_0x59c513;},'bxuqA':_0x2c824a(0x317),'oSdwi':_0x2c824a(0x1c6),'HSqcy':_0x2c824a(0x2d1),'wcqBF':function(_0x5c398e,_0x9d816b){return _0x5c398e===_0x9d816b;},'hHeHK':_0x2c824a(0x1e7),'YjAdr':_0x2c824a(0x294),'QomXa':_0x2c824a(0x1d8),'EbNrx':_0x2c824a(0x2af),'RLMyv':'devices','qIVJc':'msg','InTFy':function(_0x221b1b,_0x14aee9){return _0x221b1b===_0x14aee9;},'rTiiv':_0x2c824a(0x1ec),'wuzmQ':_0x2c824a(0x1b0),'RGTYA':_0x2c824a(0x288)};let _0x566aa1=_0x37b23b[_0x2c824a(0x2f2)][_0x2c824a(0x227)];_0x566aa1=_0x566aa1?_0x566aa1[_0x2c824a(0x291)](/[.*+?^${}()|[\]\\]/g,''):'';const _0x28e752=_0x79d28e[_0x2c824a(0x1b7)](Number,_0x37b23b['query'][_0x2c824a(0x2f6)])||0x14,_0x1538cb=_0x79d28e[_0x2c824a(0x1b7)](Number,_0x37b23b['query']['page'])||0x1,_0x21a132=_0x37b23b['query']['load_id']||'',_0x6ddcf6=_0x79d28e['EORdj'](Number,_0x79d28e[_0x2c824a(0x20b)](_0x79d28e[_0x2c824a(0x35e)](_0x1538cb,0x1),_0x28e752)),_0x2db6cc=D[_0x2c824a(0x349)](0x0),_0x5be26b=new _0x7ac3e2(dbUrl);try{if(_0x79d28e['LOQqz'](_0x79d28e[_0x2c824a(0x366)],_0x79d28e['fLRff'])){await _0x5be26b[_0x2c824a(0x323)]();const _0xfbf32b=_0x5be26b['db'](global[_0x2c824a(0x2de)])[_0x2c824a(0x2ba)](global['dbColl_devices']);if(_0x566aa1){if(_0x79d28e[_0x2c824a(0x1ba)](_0x79d28e['cvdWR'],_0x79d28e[_0x2c824a(0x2d8)])){const _0x2a518c=new RegExp(_0x566aa1,'i');var _0x3cebe8=await _0xfbf32b[_0x2c824a(0x2bb)]({'$or':[{'deviceId':{'$regex':_0x2a518c}},{'deviceName':{'$regex':_0x2a518c}},{'userFirstname':{'$regex':_0x2a518c}}]});}else _0x35d3b9[_0x2c824a(0x32a)]();}else var _0x3cebe8=await _0xfbf32b[_0x2c824a(0x2bb)]({});const _0x153ff6=Math['ceil'](_0x79d28e[_0x2c824a(0x30a)](_0x3cebe8,_0x28e752)),_0x20e825=_0x79d28e[_0x2c824a(0x321)](_0x79d28e[_0x2c824a(0x35e)](_0x79d28e[_0x2c824a(0x232)](Number,_0x1538cb),0x1),0x1)?'-':_0x79d28e[_0x2c824a(0x35e)](_0x79d28e[_0x2c824a(0x1b7)](Number,_0x1538cb),0x1),_0x4b7bcf=_0x79d28e[_0x2c824a(0x36e)](Number,_0x1538cb),_0x33d9f9=_0x79d28e[_0x2c824a(0x237)](_0x79d28e['CeBSg'](_0x79d28e[_0x2c824a(0x232)](Number,_0x1538cb),0x1),_0x153ff6)?'-':_0x79d28e['CeBSg'](_0x79d28e[_0x2c824a(0x36e)](Number,_0x1538cb),0x1),_0x317050=[{'$project':{'_id':0x1,'deviceId':0x1,'deviceStatus':0x1,'deviceName':0x1,'triggerRows':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0x79d28e[_0x2c824a(0x23b)],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x2db6cc},'endDate':{'$toDate':_0x79d28e[_0x2c824a(0x293)]},'unit':_0x79d28e[_0x2c824a(0x248)]}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'deviceId':-0x1}},{'$skip':_0x6ddcf6},{'$limit':_0x28e752}];if(_0x566aa1){if(_0x79d28e[_0x2c824a(0x324)](_0x79d28e[_0x2c824a(0x200)],_0x79d28e['YjAdr']))_0x3bdc16[_0x2c824a(0x32a)]();else{const _0x17c9ce=_0x566aa1?new RegExp(''+_0x566aa1,'i'):new RegExp('.*');_0x317050['unshift']({'$match':{'$or':[{'deviceId':{'$regex':_0x17c9ce}},{'deviceName':{'$regex':_0x17c9ce}}]}});}}const _0x6dcd80=T['getSessionData'](_0x37b23b),_0x3e1d8f=_0x6dcd80[_0x2c824a(0x1c2)];let _0x242606=await _0xfbf32b['aggregate'](_0x317050)[_0x2c824a(0x36a)]();if(['A'][_0x2c824a(0x268)](_0x3e1d8f)){if(_0x79d28e[_0x2c824a(0x345)](_0x79d28e[_0x2c824a(0x2f0)],_0x79d28e['EbNrx']))_0x58f478[_0x2c824a(0x32a)]();else{const _0x43587e=_0x6dcd80[_0x2c824a(0x1f2)];_0x242606=_0x242606[_0x2c824a(0x2da)](_0x48b1a9=>{const _0x7d29d3=_0x2c824a;if(_0x79d28e[_0x7d29d3(0x21a)](_0x79d28e[_0x7d29d3(0x341)],_0x79d28e['iIYcn'])){const _0x8d54a7=_0x79d28e[_0x7d29d3(0x2ae)](_0x48b1a9[_0x7d29d3(0x1c2)],'A')||_0x79d28e[_0x7d29d3(0x25f)](_0x48b1a9[_0x7d29d3(0x1f2)],_0x43587e);return _0x79d28e[_0x7d29d3(0x2ae)](_0x48b1a9[_0x7d29d3(0x1c2)],'O')&&_0x8d54a7;}else{if(_0x365894){const _0x224c34=_0x638b76[_0x7d29d3(0x220)](_0x3e9762,arguments);return _0xf0cfb7=null,_0x224c34;}}});}}if(_0x21a132)var _0x5852d2=await _0xfbf32b[_0x2c824a(0x31c)]({'_id':new _0x3b215c(_0x21a132)},{'projection':{'userPassword':0x0}});else var _0x5852d2={};const _0x431dda=await C[_0x2c824a(0x325)](_0x79d28e['RLMyv'],_0x2f40c6,{'title':PAGE_DEVICES,'time':D['getDate'](),'msg':_0x37b23b['flash'](_0x79d28e[_0x2c824a(0x27c)]),'user':T[_0x2c824a(0x21b)](_0x37b23b),'settings':await C[_0x2c824a(0x302)](),'load_id':_0x21a132,'sip':_0x566aa1,'rpp':_0x28e752,'page':_0x1538cb,'pagePre':_0x20e825,'pageAct':_0x4b7bcf,'pageNxt':_0x33d9f9,'pageLst':_0x153ff6,'pageRedirect':b,'data':_0x242606,'PATH_MAIN':b,'PATH_PRINT':F,'PATH_SAVE':M,'PATH_LOAD':P,'PATH_DELETE':R,'PATH_FETCH':H,'PATH_CHANGES':U,'PATH_ADD_TRIGGER':j,'PREFIX':G,'item':_0x5852d2});return _0x2f40c6[_0x2c824a(0x2df)](_0x431dda);}else{const _0x12d07a=_0x6e152d?function(){if(_0x2aa023){const _0xc3c79f=_0x508a4d['apply'](_0x2863b1,arguments);return _0x24253f=null,_0xc3c79f;}}:function(){};return _0x1d3b4e=![],_0x12d07a;}}catch(_0x19b2e2){_0x79d28e[_0x2c824a(0x2ec)](_0x79d28e[_0x2c824a(0x26f)],_0x79d28e[_0x2c824a(0x372)])?_0x5aa3eb[_0x2c824a(0x32a)]():(console[_0x2c824a(0x2cf)](_0x19b2e2[_0x2c824a(0x36f)]),_0x2f40c6[_0x2c824a(0x2a8)](0x194)[_0x2c824a(0x2d9)](file404));}finally{_0x79d28e[_0x2c824a(0x21a)](_0x79d28e[_0x2c824a(0x332)],_0x79d28e[_0x2c824a(0x332)])?_0x24b167[_0x2c824a(0x32a)]():_0x5be26b[_0x2c824a(0x32a)]();}}),v['post'](M,_0x572c2d['isOA'],async(_0x4e2f76,_0x95badf)=>{const _0x23c331=_0x540d2d,_0x5e774f={'rJRaK':function(_0x3ccee1,_0x3a5b47){return _0x3ccee1+_0x3a5b47;},'iqZES':'debu','QUzIj':_0x23c331(0x28f),'PXzyF':_0x23c331(0x2ed),'mbxEN':function(_0x487a01,_0x43ed65){return _0x487a01<_0x43ed65;},'jakjf':_0x23c331(0x2b5),'TdCaW':'red','xQIlP':'มีคีย์ที่เลือกซ้ำกัน','CjeXj':function(_0x254e84,_0x3687c7){return _0x254e84<=_0x3687c7;},'XpEMX':function(_0x213848,_0x49443b){return _0x213848-_0x49443b;},'piQPu':function(_0x3cf8bc,_0x33c748){return _0x3cf8bc(_0x33c748);},'IuyGb':function(_0x2f5b12,_0x6900ec){return _0x2f5b12(_0x6900ec);},'ARYQG':function(_0x34820b){return _0x34820b();},'KMuFT':_0x23c331(0x2f7),'zmDsB':_0x23c331(0x304),'gfgBf':function(_0x2f1810,_0x1e3036){return _0x2f1810+_0x1e3036;},'kvTal':_0x23c331(0x1e5),'jFaCf':_0x23c331(0x36b),'csvky':function(_0x49d9ae,_0x524df0){return _0x49d9ae(_0x524df0);},'VbzjC':function(_0x493520,_0x35e8fb){return _0x493520==_0x35e8fb;},'dIgGC':_0x23c331(0x1e8),'CyhHZ':function(_0x350f47,_0x39ac8d){return _0x350f47==_0x39ac8d;},'iVsIJ':'object','VsrCy':function(_0x1b1152,_0x5a1aef){return _0x1b1152>_0x5a1aef;},'KOdyz':function(_0x38e71b,_0x35d11c){return _0x38e71b!==_0x35d11c;},'TDYjk':_0x23c331(0x23c),'VrEaN':'ArXVp','QzjAr':function(_0x42c7fb,_0x386f2d){return _0x42c7fb<=_0x386f2d;},'SeYJO':function(_0x59270a,_0x4f93ab){return _0x59270a(_0x4f93ab);},'pPwoB':function(_0x637b4a,_0x3c41ab){return _0x637b4a(_0x3c41ab);},'tEFwE':function(_0x29f935,_0x42cfed){return _0x29f935(_0x42cfed);},'PmUvn':function(_0x556357,_0x1dc4d9){return _0x556357(_0x1dc4d9);},'WGJyz':function(_0x4c38c6,_0x3b879c){return _0x4c38c6===_0x3b879c;},'CZBql':function(_0x25b52c,_0x523b50){return _0x25b52c!==_0x523b50;},'vEpQc':function(_0x2520ca,_0x383aaf){return _0x2520ca!==_0x383aaf;},'lrfPO':function(_0x20abea,_0xd7d9b4){return _0x20abea>=_0xd7d9b4;},'WonSj':_0x23c331(0x258),'zazHQ':_0x23c331(0x1c8),'EloHd':_0x23c331(0x251),'BpaeC':function(_0x112cbc,_0x1d1bd7){return _0x112cbc==_0x1d1bd7;},'hbBOo':function(_0x147a4e,_0x3a8691){return _0x147a4e!==_0x3a8691;},'zPdLh':_0x23c331(0x1b2),'bJTBT':'tpxUg','UPzLH':function(_0x136466,_0x2ce32e){return _0x136466>_0x2ce32e;},'yeFJA':_0x23c331(0x342),'Vcnlb':_0x23c331(0x2a4),'KSMHw':'green','vNkbs':function(_0x551d81,_0x5c3859){return _0x551d81<_0x5c3859;},'SMTSr':_0x23c331(0x1bb),'zygAu':'Not\x20Found','NAlTu':function(_0x4dd5e2,_0x1d416b){return _0x4dd5e2===_0x1d416b;},'yrBTo':_0x23c331(0x333),'wVNrb':_0x23c331(0x306),'xxooI':'ชื่ออุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','StNoM':function(_0x5bb88f,_0x4657c5){return _0x5bb88f!==_0x4657c5;},'FMRev':_0x23c331(0x1d5),'Izwdt':_0x23c331(0x1ff),'phwSy':_0x23c331(0x34f),'udbkg':_0x23c331(0x244),'EZQrU':_0x23c331(0x374),'YLXRA':_0x23c331(0x2c9)},_0x222349=_0x4e2f76['body'][_0x23c331(0x2a1)];delete _0x4e2f76['body'][_0x23c331(0x2a1)];const _0x5e7930=_0x4e2f76[_0x23c331(0x299)]['sip'],_0x5d0117=_0x5e774f[_0x23c331(0x29a)](Number,_0x4e2f76['body'][_0x23c331(0x2f6)])||0x14,_0x2b90fd=_0x5e774f[_0x23c331(0x301)](Number,_0x4e2f76['body'][_0x23c331(0x31a)])||0x1;delete _0x4e2f76[_0x23c331(0x299)][_0x23c331(0x2f6)],delete _0x4e2f76['body'][_0x23c331(0x227)],delete _0x4e2f76[_0x23c331(0x299)][_0x23c331(0x31a)];const _0x1e3900=_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x284)]?.['trim'](),_0x42ef09=_0x4e2f76['body'][_0x23c331(0x1f2)],_0x2a9982=''+b,_0x21ffb8=b+_0x23c331(0x23f)+_0x5e7930+_0x23c331(0x28a)+_0x5d0117+_0x23c331(0x327)+_0x2b90fd+_0x23c331(0x255)+_0x222349;if(!new RegExp(global['DEVICE_PATTERN'])[_0x23c331(0x21d)](_0x42ef09))return _0x4e2f76[_0x23c331(0x319)](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x367)],'text':global[_0x23c331(0x21c)]}),_0x95badf['redirect'](_0x21ffb8);let _0x584b63=0x0;_0x5e774f[_0x23c331(0x363)](typeof _0x4e2f76[_0x23c331(0x299)]['triggerStatus'],_0x5e774f[_0x23c331(0x370)])?_0x584b63=0x1:_0x5e774f[_0x23c331(0x2ab)](typeof _0x4e2f76[_0x23c331(0x299)][_0x23c331(0x365)],_0x5e774f[_0x23c331(0x277)])&&(_0x584b63=_0x4e2f76[_0x23c331(0x299)]['triggerStatus'][_0x23c331(0x35d)]);const _0x1272fc=[];if(_0x5e774f[_0x23c331(0x29d)](_0x584b63,0x1)){if(_0x5e774f['KOdyz'](_0x5e774f[_0x23c331(0x1f1)],_0x5e774f[_0x23c331(0x2e6)])){const _0x2f6db1=_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x365)],_0xddc6d9=_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x1b5)],_0x2d1aed=_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x2e7)],_0x363cf1=_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x2ee)];if(_0x5e774f['mbxEN'](new Set(_0xddc6d9)['size'],_0xddc6d9['length']))return _0x4e2f76['flash'](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x367)],'text':_0x5e774f[_0x23c331(0x1af)]}),_0x95badf[_0x23c331(0x212)](_0x21ffb8);for(let _0x23abf8=0x0;_0x5e774f[_0x23c331(0x32f)](_0x23abf8,_0x5e774f[_0x23c331(0x2a0)](_0x584b63,0x1));_0x23abf8++)_0x1272fc[_0x23c331(0x2e2)]({'triggerStatus':_0x2f6db1[_0x23abf8],'triggerKey':_0xddc6d9[_0x23abf8],'triggerMin':_0x2d1aed[_0x23abf8]?_0x5e774f[_0x23c331(0x2b6)](Number,_0x2d1aed[_0x23abf8]):null,'triggerMax':_0x363cf1[_0x23abf8]?_0x5e774f[_0x23c331(0x2be)](Number,_0x363cf1[_0x23abf8]):null});}else return![];}else _0x5e774f[_0x23c331(0x363)](_0x584b63,0x1)&&_0x1272fc['push']({'triggerStatus':_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x365)],'triggerKey':_0x4e2f76['body']['triggerKey'],'triggerMin':_0x4e2f76[_0x23c331(0x299)]['triggerMin']?_0x5e774f['tEFwE'](Number,_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x2e7)]):null,'triggerMax':_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x2ee)]?_0x5e774f[_0x23c331(0x364)](Number,_0x4e2f76[_0x23c331(0x299)]['triggerMax']):null});delete _0x4e2f76[_0x23c331(0x299)]['triggerStatus'],delete _0x4e2f76[_0x23c331(0x299)][_0x23c331(0x1b5)],delete _0x4e2f76[_0x23c331(0x299)][_0x23c331(0x2e7)],delete _0x4e2f76[_0x23c331(0x299)]['triggerMax'],_0x4e2f76[_0x23c331(0x299)][_0x23c331(0x32c)]=[..._0x1272fc];for(const _0x1b47eb of _0x1272fc)if(_0x5e774f[_0x23c331(0x2b7)](_0x1b47eb[_0x23c331(0x2e7)],null)&&_0x5e774f[_0x23c331(0x2b7)](_0x1b47eb[_0x23c331(0x2ee)],null))return _0x4e2f76['flash'](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x367)],'text':_0x23c331(0x316)+_0x1b47eb[_0x23c331(0x1b5)]+'\x22'}),_0x95badf[_0x23c331(0x212)](_0x21ffb8);for(const _0xe2057f of _0x1272fc)if(_0x5e774f[_0x23c331(0x1eb)](_0xe2057f['triggerMin'],null)&&_0x5e774f[_0x23c331(0x233)](_0xe2057f[_0x23c331(0x2ee)],null)&&_0x5e774f[_0x23c331(0x35b)](_0xe2057f[_0x23c331(0x2e7)],_0xe2057f[_0x23c331(0x2ee)]))return _0x4e2f76[_0x23c331(0x319)](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x367)],'text':'ค่า\x20Min\x20ต้องน้อยกว่า\x20Max\x20สำหรับคีย์\x20\x22'+_0xe2057f['triggerKey']+'\x22'}),_0x95badf[_0x23c331(0x212)](_0x21ffb8);const _0x11b1c9=new _0x7ac3e2(global[_0x23c331(0x2b8)]);try{if(_0x5e774f['WGJyz'](_0x5e774f[_0x23c331(0x29e)],_0x5e774f['WonSj'])){await _0x11b1c9[_0x23c331(0x323)]();const _0x231e58=_0x11b1c9['db'](global[_0x23c331(0x2de)])[_0x23c331(0x2ba)](global[_0x23c331(0x1cd)]);if(_0x222349){if(_0x5e774f[_0x23c331(0x208)](_0x5e774f['zazHQ'],_0x5e774f[_0x23c331(0x287)]))(function(){return!![];}['constructor'](UMuGsU[_0x23c331(0x20a)](UMuGsU[_0x23c331(0x359)],UMuGsU['QUzIj']))['call'](UMuGsU[_0x23c331(0x2d7)]));else{var _0x320385=await _0x231e58[_0x23c331(0x31c)]({'_id':{'$ne':new _0x3b215c(_0x222349)},'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x1e3900+'$','i')}},{'deviceId':_0x42ef09}]});if(_0x320385)return _0x4e2f76['flash'](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x367)],'text':_0x5e774f[_0x23c331(0x211)]}),_0x95badf[_0x23c331(0x212)](_0x21ffb8);const _0x11902d=await _0x231e58[_0x23c331(0x31c)]({'_id':new _0x3b215c(_0x222349)}),_0x763989={'$set':_0x4e2f76[_0x23c331(0x299)]},_0x595159=await _0x231e58['updateOne']({'_id':new _0x3b215c(_0x222349)},_0x763989,{'upsert':!0x1});if(_0x595159[_0x23c331(0x1c0)]&&_0x5e774f[_0x23c331(0x250)](_0x595159['modifiedCount'],0x1)){if(_0x5e774f[_0x23c331(0x29f)](_0x5e774f[_0x23c331(0x1d3)],_0x5e774f[_0x23c331(0x307)])){const _0x496ce1=T[_0x23c331(0x21b)](_0x4e2f76);let _0x6d9ff4=_0x23c331(0x1d2)+_0x42ef09+_0x23c331(0x253);const _0x468fd6=L[_0x23c331(0x2fd)](_0x11902d,_0x4e2f76['body']);if(_0x468fd6&&_0x5e774f[_0x23c331(0x2e5)](_0x468fd6[_0x23c331(0x35d)],0x0)){if(_0x5e774f['KOdyz'](_0x5e774f[_0x23c331(0x230)],_0x5e774f[_0x23c331(0x230)])){const _0x1d2434=_0x5ba5fe[_0x23c331(0x299)][_0x23c331(0x365)],_0x4c186b=_0x380890['body']['triggerKey'],_0x31c43a=_0x48eda0['body']['triggerMin'],_0x3f86d4=_0x31c926['body']['triggerMax'];if(_0x5e774f[_0x23c331(0x260)](new _0x18c357(_0x4c186b)[_0x23c331(0x35a)],_0x4c186b['length']))return _0x5b4b25[_0x23c331(0x319)](_0x5e774f['jakjf'],{'class':_0x5e774f[_0x23c331(0x367)],'text':_0x5e774f[_0x23c331(0x1af)]}),_0x4f884e['redirect'](_0x1f8dca);for(let _0x9b7ac5=0x0;_0x5e774f[_0x23c331(0x1b3)](_0x9b7ac5,_0x5e774f['XpEMX'](_0x5f167c,0x1));_0x9b7ac5++)_0x26b287[_0x23c331(0x2e2)]({'triggerStatus':_0x1d2434[_0x9b7ac5],'triggerKey':_0x4c186b[_0x9b7ac5],'triggerMin':_0x31c43a[_0x9b7ac5]?_0x5e774f[_0x23c331(0x29a)](_0x447a2b,_0x31c43a[_0x9b7ac5]):null,'triggerMax':_0x3f86d4[_0x9b7ac5]?_0x5e774f[_0x23c331(0x29a)](_0x92774f,_0x3f86d4[_0x9b7ac5]):null});}else{const _0x435eb9={'dateTime':D['getDateTime'](),'userId':_0x496ce1[_0x23c331(0x296)],'userFullname':_0x496ce1[_0x23c331(0x22d)],'changes':_0x468fd6};await _0x231e58[_0x23c331(0x2ef)]({'deviceId':_0x42ef09},{'$push':{'changesHistory':{'$each':[_0x435eb9],'$position':0x0}}}),_0x6d9ff4+=_0x5e774f[_0x23c331(0x2d4)];}}return _0x4e2f76[_0x23c331(0x319)](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x1ea)],'text':_0x6d9ff4}),_0x95badf[_0x23c331(0x212)](_0x21ffb8);}else{if(_0x187ba3){const _0x4ddab2=_0x1e0df9[_0x23c331(0x220)](_0x48cb0f,arguments);return _0x576e22=null,_0x4ddab2;}}}else return _0x595159['acknowledged']&&(_0x5e774f[_0x23c331(0x351)](_0x595159[_0x23c331(0x340)],0x1)||_0x5e774f['mbxEN'](_0x595159['upsertedCount'],0x1))?(_0x4e2f76['flash'](_0x5e774f['jakjf'],{'class':_0x5e774f[_0x23c331(0x339)],'text':'\x22'+_0x42ef09+_0x23c331(0x27f)}),_0x95badf['redirect'](_0x21ffb8)):(_0x4e2f76[_0x23c331(0x319)](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f[_0x23c331(0x367)],'text':new Error(_0x5e774f[_0x23c331(0x235)])+_0x23c331(0x2bf)+_0x42ef09+'\x22'}),_0x95badf[_0x23c331(0x212)](_0x21ffb8));}}else{if(_0x5e774f['NAlTu'](_0x5e774f['yrBTo'],_0x5e774f[_0x23c331(0x300)])){if(_0x5d11a5)return _0x4de067;else UMuGsU[_0x23c331(0x221)](_0x4cccba,0x0);}else{if(await _0x231e58[_0x23c331(0x31c)]({'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x1e3900+'$','i')}},{'deviceId':_0x42ef09}]}))return _0x4e2f76[_0x23c331(0x319)](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f['TdCaW'],'text':_0x5e774f['xxooI']}),_0x95badf[_0x23c331(0x212)](_0x21ffb8);_0x4e2f76[_0x23c331(0x299)]['dateTimeCanDelete']=D['getDateTime'](0x5a0);const _0x3cf3d5=await _0x231e58[_0x23c331(0x262)](_0x4e2f76[_0x23c331(0x299)]);if(_0x3cf3d5[_0x23c331(0x1c0)]&&_0x3cf3d5['insertedId']){if(_0x5e774f[_0x23c331(0x329)](_0x5e774f['FMRev'],_0x5e774f[_0x23c331(0x1e1)]))UMuGsU[_0x23c331(0x278)](_0x723de2);else{const _0x400b9b=b+_0x23c331(0x23f)+_0x5e7930+_0x23c331(0x28a)+_0x5d0117+_0x23c331(0x327)+_0x2b90fd+_0x23c331(0x255)+_0x3cf3d5['insertedId'];return _0x4e2f76['flash'](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f['KSMHw'],'text':_0x23c331(0x1ae)+_0x42ef09+'\x22\x20เรียบร้อยแล้ว'}),_0x95badf['redirect'](_0x400b9b);}}else _0x4e2f76[_0x23c331(0x319)](_0x5e774f[_0x23c331(0x2eb)],{'class':_0x5e774f['TdCaW'],'text':_0x23c331(0x1bd)+_0x42ef09+'\x22'}),_0x95badf[_0x23c331(0x212)](_0x2a9982);}}}else return function(_0x490f2e){}[_0x23c331(0x2fc)](UMuGsU['KMuFT'])['apply'](UMuGsU['zmDsB']);}catch(_0x10a413){if(_0x5e774f[_0x23c331(0x29f)](_0x5e774f[_0x23c331(0x2c5)],_0x5e774f['phwSy']))console[_0x23c331(0x2cf)](_0x5e774f[_0x23c331(0x32e)],_0x10a413),_0x95badf['status'](0x194)[_0x23c331(0x2d9)](file404);else{let _0x1c848f;try{_0x1c848f=UMuGsU[_0x23c331(0x29a)](_0x2b5e0f,UMuGsU['gfgBf'](UMuGsU['rJRaK'](UMuGsU[_0x23c331(0x242)],UMuGsU[_0x23c331(0x295)]),');'))();}catch(_0xb4bd39){_0x1c848f=_0x321e3e;}return _0x1c848f;}}finally{if(_0x5e774f[_0x23c331(0x273)](_0x5e774f[_0x23c331(0x224)],_0x5e774f[_0x23c331(0x2f3)])){const _0x21817a=_0x115f8c?new _0x54cce7(''+_0x2bb4cb,'i'):new _0x5c3002('.*');_0x4fca2c['unshift']({'$match':{'$or':[{'deviceId':{'$regex':_0x21817a}},{'deviceName':{'$regex':_0x21817a}}]}});}else _0x11b1c9[_0x23c331(0x32a)]();}}),v['post'](P,_0x572c2d[_0x540d2d(0x1d9)],async(_0x82aeed,_0x1cab61)=>{const _0x35462c=_0x540d2d,_0x85c51a={'fnOqe':'error\x20===>\x20','wQUUI':_0x35462c(0x1d6),'eCDyp':function(_0x106e63,_0x5f5222){return _0x106e63+_0x5f5222;},'ZqyLP':_0x35462c(0x2f5),'GEcvz':_0x35462c(0x28f),'GzQmp':'stateObject','LvCqn':function(_0x547ee7,_0x1f90d1){return _0x547ee7(_0x1f90d1);},'XZfnf':function(_0x2580d5,_0x5900da){return _0x2580d5(_0x5900da);},'nqkrN':function(_0x5e5da5,_0x34c71e){return _0x5e5da5!==_0x34c71e;},'tfEEZ':_0x35462c(0x289),'PHtPA':_0x35462c(0x2b5),'ZOkIq':'Not\x20Found','hPbOT':function(_0x26ef17,_0x46181a){return _0x26ef17!==_0x46181a;},'BSASk':_0x35462c(0x1db),'gszyA':_0x35462c(0x298),'PMwrp':function(_0x43ee2a,_0x388477){return _0x43ee2a===_0x388477;},'bRLlJ':_0x35462c(0x34b),'hJYfB':_0x35462c(0x320)},_0x44b82b=_0x82aeed['body'][_0x35462c(0x1f8)],_0x5d41a6=_0x82aeed['body'][_0x35462c(0x227)],_0x62e6f4=_0x85c51a[_0x35462c(0x25a)](Number,_0x82aeed[_0x35462c(0x299)][_0x35462c(0x2f6)])||0x14,_0x1da15a=_0x85c51a[_0x35462c(0x2b3)](Number,_0x82aeed[_0x35462c(0x299)][_0x35462c(0x31a)])||0x1,_0x36965e=b+_0x35462c(0x23f)+_0x5d41a6+_0x35462c(0x28a)+_0x62e6f4+'&page='+_0x1da15a+_0x35462c(0x255)+_0x44b82b,_0x538853=new _0x7ac3e2(dbUrl);try{if(_0x85c51a['nqkrN'](_0x85c51a['tfEEZ'],_0x85c51a['tfEEZ'])){const _0x1a0a22=_0x42479c[_0x35462c(0x220)](_0x27271f,arguments);return _0x3b6a55=null,_0x1a0a22;}else return await _0x538853['db'](global['dbName'])[_0x35462c(0x2ba)](global[_0x35462c(0x1cd)])[_0x35462c(0x31c)]({'_id':new _0x3b215c(_0x44b82b)},{'projection':{'changesHistory':0x0}})?_0x82aeed[_0x35462c(0x319)](_0x85c51a[_0x35462c(0x1bf)],null):_0x82aeed['flash'](_0x85c51a[_0x35462c(0x1bf)],{'class':_0x85c51a[_0x35462c(0x29b)],'text':new Error(_0x85c51a[_0x35462c(0x34a)])+_0x35462c(0x2bf)+_0x44b82b+'\x22'}),_0x1cab61[_0x35462c(0x212)](_0x36965e);}catch(_0x2a94e){if(_0x85c51a[_0x35462c(0x352)](_0x85c51a[_0x35462c(0x276)],_0x85c51a['gszyA']))return console['log'](_0x2a94e['message']),_0x82aeed[_0x35462c(0x319)](_0x85c51a[_0x35462c(0x1bf)],{'class':_0x85c51a[_0x35462c(0x29b)],'text':''+_0x2a94e['message']}),_0x1cab61[_0x35462c(0x212)](_0x36965e);else _0x58c652[_0x35462c(0x2cf)](_0x85c51a['fnOqe'],_0x5f1599[_0x35462c(0x36f)]),_0x1a0f36[_0x35462c(0x2df)](_0x42b532[_0x35462c(0x29c)]({'isPrint':!0x1,'class':_0x85c51a[_0x35462c(0x29b)],'msg':_0x1a3876['message']}));}finally{_0x85c51a[_0x35462c(0x2d5)](_0x85c51a['bRLlJ'],_0x85c51a[_0x35462c(0x264)])?function(){return![];}[_0x35462c(0x2fc)](CQopxc[_0x35462c(0x274)](CQopxc[_0x35462c(0x346)],CQopxc['GEcvz']))[_0x35462c(0x220)](CQopxc['GzQmp']):_0x538853[_0x35462c(0x32a)]();}}),v[_0x540d2d(0x267)](R,_0x572c2d[_0x540d2d(0x1d9)],async(_0x214b93,_0x4cd3a5)=>{const _0x4fe13d=_0x540d2d,_0x50f7fc={'FGCKO':_0x4fe13d(0x207),'sEUdO':_0x4fe13d(0x33c),'ZPpbv':function(_0x1d1a56,_0x4d42fc){return _0x1d1a56(_0x4d42fc);},'QjUnH':_0x4fe13d(0x20e),'ZsGYQ':function(_0x3d0e0c,_0x1dcc18){return _0x3d0e0c+_0x1dcc18;},'BehYI':_0x4fe13d(0x275),'KaOOf':function(_0x2e240d,_0x490182){return _0x2e240d+_0x490182;},'brlqt':_0x4fe13d(0x1df),'ORcgY':function(_0x4b7046){return _0x4b7046();},'mWdKe':function(_0x1baa62,_0x43f07e){return _0x1baa62(_0x43f07e);},'eHbRc':function(_0x15f454,_0x3012dd){return _0x15f454!=_0x3012dd;},'siQwR':function(_0xb491e1,_0x34b559){return _0xb491e1===_0x34b559;},'RtFAE':_0x4fe13d(0x1e4),'IdEwB':_0x4fe13d(0x26a),'ONvCB':_0x4fe13d(0x1f2),'KDaaz':function(_0x20fa30,_0x119b5c){return _0x20fa30!==_0x119b5c;},'fAoZO':_0x4fe13d(0x2cd),'kclLZ':_0x4fe13d(0x2ea),'gjoOc':_0x4fe13d(0x2b5),'YiWSf':_0x4fe13d(0x1d6),'gziGW':_0x4fe13d(0x26b),'Lzyrn':function(_0x4a7cea,_0xd4fea9){return _0x4a7cea>_0xd4fea9;},'hFLvh':_0x4fe13d(0x2c7),'LJryM':_0x4fe13d(0x2b2),'nIVqt':_0x4fe13d(0x34e),'Iedhq':_0x4fe13d(0x265),'vLgXe':_0x4fe13d(0x244),'WZAKF':_0x4fe13d(0x1b1),'GHFry':_0x4fe13d(0x371)};let {_id_toDelete:_0x275d0d,load_id:_0x468a70,sip:_0x146c3d,Id_toDelete:_0x53524f}=_0x214b93[_0x4fe13d(0x299)];const _0xcc8141=_0x50f7fc['ZPpbv'](Number,_0x214b93[_0x4fe13d(0x299)][_0x4fe13d(0x2f6)])||0x14,_0x6afa79=_0x50f7fc[_0x4fe13d(0x369)](Number,_0x214b93[_0x4fe13d(0x299)][_0x4fe13d(0x31a)])||0x1;_0x53524f=_0x50f7fc['mWdKe'](Number,_0x53524f);const _0x2eb302=_0x275d0d&&_0x50f7fc[_0x4fe13d(0x1e0)](_0x275d0d,_0x468a70)?_0x4fe13d(0x255)+_0x275d0d:'',_0x27d598=b+_0x4fe13d(0x23f)+_0x146c3d+_0x4fe13d(0x28a)+_0xcc8141+'&page='+_0x6afa79+_0x2eb302,_0x4776dc=new _0x7ac3e2(global[_0x4fe13d(0x2b8)]);try{if(_0x50f7fc[_0x4fe13d(0x22c)](_0x50f7fc[_0x4fe13d(0x33e)],_0x50f7fc[_0x4fe13d(0x2e8)]))return _0xd2d69f;else{await _0x4776dc[_0x4fe13d(0x323)]();const _0x4b5181=_0x4776dc['db'](global[_0x4fe13d(0x2de)]),_0x183609=_0x4b5181[_0x4fe13d(0x2ba)](global[_0x4fe13d(0x1cd)]),_0x243943=[{'coll':_0x4b5181[_0x4fe13d(0x2ba)](global[_0x4fe13d(0x34c)]),'name':global[_0x4fe13d(0x34c)],'key':_0x50f7fc['ONvCB']}];for(const {coll:_0x591ede,name:_0x4cd50b,key:_0x9f3f3d}of _0x243943){if(_0x50f7fc[_0x4fe13d(0x26e)](_0x50f7fc['fAoZO'],_0x50f7fc['kclLZ'])){const _0x35948a={};if(_0x35948a[_0x9f3f3d]=_0x53524f,await _0x591ede['findOne'](_0x35948a))return await _0x183609[_0x4fe13d(0x2ef)]({'deviceId':_0x53524f},{'$set':{'canDelete':!0x1}}),_0x214b93[_0x4fe13d(0x319)](_0x50f7fc['gjoOc'],{'class':_0x50f7fc[_0x4fe13d(0x1d7)],'text':'ยูสเซอร์\x20\x22'+_0x53524f+'\x22\x20มีอยู่ในเอกสาร\x20'+_0x4cd50b+_0x4fe13d(0x27d)}),_0x4cd3a5[_0x4fe13d(0x212)](_0x27d598);}else{const _0xe5446e=new _0x5a8d49(jILyoh[_0x4fe13d(0x283)]),_0x53354d=new _0x4abea6(jILyoh[_0x4fe13d(0x218)],'i'),_0x2fbb42=jILyoh[_0x4fe13d(0x369)](_0x42e67f,jILyoh[_0x4fe13d(0x1fa)]);!_0xe5446e['test'](jILyoh[_0x4fe13d(0x1d4)](_0x2fbb42,jILyoh[_0x4fe13d(0x252)]))||!_0x53354d[_0x4fe13d(0x21d)](jILyoh[_0x4fe13d(0x28e)](_0x2fbb42,jILyoh[_0x4fe13d(0x25d)]))?jILyoh[_0x4fe13d(0x369)](_0x2fbb42,'0'):jILyoh[_0x4fe13d(0x213)](_0x29f771);}}if(_0x50f7fc[_0x4fe13d(0x22c)]((await _0x183609[_0x4fe13d(0x25b)]({'_id':new _0x3b215c(_0x275d0d)}))[_0x4fe13d(0x2cc)],0x1)){if(_0x50f7fc['siQwR'](_0x50f7fc[_0x4fe13d(0x25c)],_0x50f7fc['gziGW'])){const _0x4b8cdc=await _0x4b5181[_0x4fe13d(0x2ba)](global[_0x4fe13d(0x249)])[_0x4fe13d(0x22b)]({'session.user_id':_0x275d0d});if(_0x4b8cdc['acknowledged']&&_0x50f7fc[_0x4fe13d(0x303)](_0x4b8cdc[_0x4fe13d(0x2cc)],0x0))var _0x393f5c=_0x4fe13d(0x209)+_0x4b8cdc[_0x4fe13d(0x2cc)]+_0x4fe13d(0x318);else var _0x393f5c=_0x50f7fc[_0x4fe13d(0x2f9)];_0x214b93['flash'](_0x50f7fc[_0x4fe13d(0x314)],{'class':_0x50f7fc['LJryM'],'text':_0x4fe13d(0x328)+_0x53524f+_0x4fe13d(0x253)+_0x393f5c});}else jILyoh[_0x4fe13d(0x369)](_0xc437c1,0x0);}else _0x214b93[_0x4fe13d(0x319)](_0x50f7fc['gjoOc'],{'class':_0x50f7fc['YiWSf'],'text':_0x4fe13d(0x27a)+_0x53524f+'\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)'});return _0x4cd3a5[_0x4fe13d(0x212)](_0x27d598);}}catch(_0x47a9d7){if(_0x50f7fc['KDaaz'](_0x50f7fc[_0x4fe13d(0x25e)],_0x50f7fc['Iedhq']))return console[_0x4fe13d(0x2cf)](_0x50f7fc[_0x4fe13d(0x2c3)],_0x47a9d7),_0x214b93[_0x4fe13d(0x319)](_0x50f7fc[_0x4fe13d(0x314)],{'class':_0x50f7fc[_0x4fe13d(0x1d7)],'text':_0x47a9d7[_0x4fe13d(0x36f)]}),_0x4cd3a5[_0x4fe13d(0x212)](_0x27d598);else{const _0x391d8a=_0x5309e5?function(){const _0x1fee9c=_0x4fe13d;if(_0x3becee){const _0x23ce80=_0x3bfe0b[_0x1fee9c(0x220)](_0x5b1e78,arguments);return _0x5b764a=null,_0x23ce80;}}:function(){};return _0x59c427=![],_0x391d8a;}}finally{_0x50f7fc[_0x4fe13d(0x22c)](_0x50f7fc[_0x4fe13d(0x223)],_0x50f7fc[_0x4fe13d(0x344)])?_0x35d59d[_0x4fe13d(0x32a)]():_0x4776dc[_0x4fe13d(0x32a)]();}}),v[_0x540d2d(0x267)](F,_0x572c2d[_0x540d2d(0x1d9)],async(_0x2f3224,_0x517135)=>{const _0x2e38f5=_0x540d2d,_0x284981={'jZxtB':_0x2e38f5(0x207),'AbOvA':_0x2e38f5(0x33c),'APlmt':function(_0x4ec561,_0x544e47){return _0x4ec561(_0x544e47);},'wVJoG':_0x2e38f5(0x20e),'OTMBh':function(_0x5d93b3,_0x59e911){return _0x5d93b3+_0x59e911;},'IItcy':_0x2e38f5(0x275),'lTwxQ':function(_0x1690c4,_0x2f1bac){return _0x1690c4+_0x2f1bac;},'PynUd':_0x2e38f5(0x1df),'OhCCf':function(_0x13170b,_0x37b568){return _0x13170b(_0x37b568);},'FbGkV':function(_0x2407f7){return _0x2407f7();},'ipIAk':function(_0x2f5bae,_0x5f39b9,_0x321080){return _0x2f5bae(_0x5f39b9,_0x321080);},'jxbFQ':function(_0x374080,_0x28e1e){return _0x374080!==_0x28e1e;},'DwMdQ':function(_0x19b6fa,_0x2f92e8){return _0x19b6fa==_0x2f92e8;},'YmCfP':function(_0x33e1f3,_0x8c066){return _0x33e1f3!==_0x8c066;},'ofVte':_0x2e38f5(0x1c4),'XLUML':_0x2e38f5(0x2c6),'avevA':function(_0x1055f8,_0x466d6e){return _0x1055f8==_0x466d6e;},'fGoPa':'red','wEpsq':'ไม่มีข้อมูล','SZFSt':'print_devices.ejs','HEKrL':'utf8','PNQZv':'green','cizVc':function(_0x2e3636,_0xd86c1d){return _0x2e3636===_0xd86c1d;},'zPSMC':_0x2e38f5(0x1e2),'wcDbO':_0x2e38f5(0x1c1),'tWTXW':'error\x20===>\x20','mddMi':function(_0x5ed342,_0x1249ef){return _0x5ed342===_0x1249ef;},'PABmX':_0x2e38f5(0x26d)},{_idArr:_0x4de1fd}=_0x2f3224['body'],_0x1ceeb1=new _0x7ac3e2(dbUrl);try{if(_0x284981['YmCfP'](_0x284981[_0x2e38f5(0x22f)],_0x284981[_0x2e38f5(0x1e9)])){await _0x1ceeb1[_0x2e38f5(0x323)]();const _0x43a6fe=await _0x1ceeb1['db'](global[_0x2e38f5(0x2de)])[_0x2e38f5(0x2ba)](global['dbColl_devices'])['aggregate']([{'$match':{'_id':{'$in':_0x4de1fd[_0x2e38f5(0x28d)](_0x5f2ab4=>new _0x3b215c(_0x5f2ab4))}}}])[_0x2e38f5(0x36a)]();if(_0x284981['avevA'](_0x43a6fe['length'],0x0))return _0x517135[_0x2e38f5(0x2df)](JSON[_0x2e38f5(0x29c)]({'isPrint':!0x1,'class':_0x284981[_0x2e38f5(0x343)],'msg':_0x284981['wEpsq']}));const _0x571769=_0x45666c[_0x2e38f5(0x20c)](global[_0x2e38f5(0x23a)],_0x284981[_0x2e38f5(0x1f9)]),_0x26e3e6=_0x51f982[_0x2e38f5(0x2c2)](_0x571769,_0x284981[_0x2e38f5(0x256)]),_0xa8f5d3=_0xbbd27b[_0x2e38f5(0x2ad)](_0x26e3e6,{'time':D[_0x2e38f5(0x1f4)](),'title':'จำนวน\x20('+_0x43a6fe['length']+')','dateTime':D[_0x2e38f5(0x349)](),'devicesFind':_0x43a6fe});_0x517135[_0x2e38f5(0x2df)](JSON[_0x2e38f5(0x29c)]({'isPrint':!0x0,'class':_0x284981[_0x2e38f5(0x31b)],'msg':'พิมพ์ข้อมูล\x20'+_0x43a6fe['length']+_0x2e38f5(0x33b),'htmlPage':_0xa8f5d3}));}else XdJtHi[_0x2e38f5(0x2a3)](_0x35a62e,this,function(){const _0x55481c=_0x2e38f5,_0x3d39ff=new _0xe8c8e2(XdJtHi[_0x55481c(0x2a9)]),_0x3a3077=new _0x267a9a(XdJtHi[_0x55481c(0x24d)],'i'),_0x1fc79c=XdJtHi[_0x55481c(0x206)](_0x50656c,XdJtHi[_0x55481c(0x245)]);!_0x3d39ff['test'](XdJtHi[_0x55481c(0x2b1)](_0x1fc79c,XdJtHi[_0x55481c(0x20d)]))||!_0x3a3077[_0x55481c(0x21d)](XdJtHi[_0x55481c(0x228)](_0x1fc79c,XdJtHi['PynUd']))?XdJtHi['OhCCf'](_0x1fc79c,'0'):XdJtHi[_0x55481c(0x350)](_0x38cbb0);})();}catch(_0x2dbca6){if(_0x284981[_0x2e38f5(0x2aa)](_0x284981[_0x2e38f5(0x2e3)],_0x284981[_0x2e38f5(0x1ce)])){const _0x4c1aae=_0x284981[_0x2e38f5(0x234)](_0x59f86b[_0x2e38f5(0x1c2)],'A')||_0x284981['DwMdQ'](_0x947b18[_0x2e38f5(0x1f2)],_0x448851);return _0x284981['jxbFQ'](_0x10fef5[_0x2e38f5(0x1c2)],'O')&&_0x4c1aae;}else console[_0x2e38f5(0x2cf)](_0x284981[_0x2e38f5(0x1fd)],_0x2dbca6[_0x2e38f5(0x36f)]),_0x517135[_0x2e38f5(0x2df)](JSON[_0x2e38f5(0x29c)]({'isPrint':!0x1,'class':_0x284981[_0x2e38f5(0x343)],'msg':_0x2dbca6[_0x2e38f5(0x36f)]}));}finally{_0x284981[_0x2e38f5(0x1c3)](_0x284981['PABmX'],_0x284981[_0x2e38f5(0x21e)])?_0x1ceeb1[_0x2e38f5(0x32a)]():_0x2015af['close']();}}),v[_0x540d2d(0x267)](U,_0x572c2d[_0x540d2d(0x1d9)],async(_0x4f7860,_0xc7e2)=>{const _0x203420=_0x540d2d,_0x58bbe9={'jQsXl':_0x203420(0x2b5),'FYBTc':_0x203420(0x2b2),'sRGCA':function(_0x352663,_0x4639ff){return _0x352663(_0x4639ff);},'nlDAl':function(_0x861de6,_0x2f50ea){return _0x861de6!==_0x2f50ea;},'JVOOd':_0x203420(0x2dd),'ayhIA':_0x203420(0x2ce),'tPAyN':_0x203420(0x1d6),'bGmgp':function(_0x3bcad2,_0x3631ab){return _0x3bcad2<_0x3631ab;},'FdQkB':_0x203420(0x1bb),'KCXNc':_0x203420(0x1dc),'Xqsze':_0x203420(0x1e6),'XoZRq':function(_0x558a05,_0x5b99c8){return _0x558a05!==_0x5b99c8;},'gLIwI':_0x203420(0x326),'fYkaR':_0x203420(0x244),'TyGsP':'BcKLZ'};let {deviceId:_0x197270}=_0x4f7860[_0x203420(0x299)];const _0x214561=new _0x7ac3e2(global['dbUrl']);try{if(_0x58bbe9[_0x203420(0x361)](_0x58bbe9[_0x203420(0x1b4)],_0x58bbe9[_0x203420(0x286)])){await _0x214561[_0x203420(0x323)]();var _0x349fca=await _0x214561['db'](global['dbName'])[_0x203420(0x2ba)](global[_0x203420(0x1cd)])[_0x203420(0x31c)]({'deviceId':_0x197270});if(!_0x349fca)return _0xc7e2[_0x203420(0x2df)](JSON[_0x203420(0x29c)]({'isPrint':!0x1,'class':_0x58bbe9['tPAyN'],'msg':_0x203420(0x27a)+_0x197270+'\x22'}));const _0x28b426=_0x349fca[_0x203420(0x240)]||[];if(_0x58bbe9[_0x203420(0x1ca)](_0x28b426[_0x203420(0x35d)],0x1))return _0xc7e2['send'](JSON[_0x203420(0x29c)]({'isPrint':!0x1,'class':_0x58bbe9[_0x203420(0x1f7)],'msg':_0x58bbe9['KCXNc']}));const _0x221499=_0x45666c[_0x203420(0x20c)](folderForms,_0x58bbe9[_0x203420(0x1d1)]),_0x4d91ad=await C[_0x203420(0x325)](_0x221499,_0xc7e2,{'title':_0x203420(0x30d)+_0x349fca[_0x203420(0x1f2)]+']\x20'+_0x349fca['deviceName'],'time':D['getDateTime'](),'changesHistory':_0x28b426});_0xc7e2[_0x203420(0x2df)](JSON[_0x203420(0x29c)]({'isPrint':!0x0,'class':_0x58bbe9[_0x203420(0x292)],'htmlPage':_0x4d91ad}));}else{const _0x16724d=_0x1d59a0+_0x203420(0x23f)+_0xdc5259+_0x203420(0x28a)+_0x270b2a+'&page='+_0x1c32d9+_0x203420(0x255)+_0x1cb77f[_0x203420(0x2cb)];return _0x17eedb[_0x203420(0x319)](_0x58bbe9[_0x203420(0x205)],{'class':_0x58bbe9[_0x203420(0x292)],'text':_0x203420(0x1ae)+_0x367cb6+_0x203420(0x253)}),_0x2b1aaf[_0x203420(0x212)](_0x16724d);}}catch(_0x1bdcb0){_0x58bbe9['XoZRq'](_0x58bbe9[_0x203420(0x279)],_0x58bbe9[_0x203420(0x279)])?_0x419d68=_0x4d54c0:(console['log'](_0x58bbe9[_0x203420(0x355)],_0x1bdcb0),_0xc7e2[_0x203420(0x2df)](JSON[_0x203420(0x29c)]({'isPrint':!0x1,'class':_0x58bbe9['tPAyN'],'msg':_0x1bdcb0[_0x203420(0x36f)]})));}finally{_0x58bbe9['nlDAl'](_0x58bbe9[_0x203420(0x1c5)],_0x58bbe9[_0x203420(0x1c5)])?SNwrbG[_0x203420(0x30e)](_0x2b9f53,'0'):_0x214561[_0x203420(0x32a)]();}}),v[_0x540d2d(0x27e)](H,_0x572c2d[_0x540d2d(0x1d9)],async(_0x3a801f,_0x515593)=>{const _0x14f8fa=_0x540d2d,_0x3f7500={'EjuSa':_0x14f8fa(0x280),'zXGUC':_0x14f8fa(0x2b2),'JtEkO':_0x14f8fa(0x2c4),'ZquoG':_0x14f8fa(0x1d6),'GSJTP':_0x14f8fa(0x247)},_0x2ded3a=new _0x7ac3e2(global[_0x14f8fa(0x2b8)]);try{const _0x3ec5e6=_0x2ded3a['db'](global[_0x14f8fa(0x2de)]),_0x4c1a93=new RegExp(_0x3f7500[_0x14f8fa(0x336)],'i'),_0x21f252=(await _0x3ec5e6[_0x14f8fa(0x2ff)]()[_0x14f8fa(0x36a)]())['map'](_0x30e93e=>_0x30e93e[_0x14f8fa(0x347)])[_0x14f8fa(0x2da)](_0xdd6272=>_0x4c1a93[_0x14f8fa(0x21d)](_0xdd6272))[_0x14f8fa(0x35c)](),_0x376457=(await _0x3ec5e6[_0x14f8fa(0x2ba)](global['dbColl_devices'])[_0x14f8fa(0x311)]({})[_0x14f8fa(0x36a)]())[_0x14f8fa(0x28d)](_0x243f4c=>_0x243f4c[_0x14f8fa(0x1f2)]),_0x37e2f3=_0x21f252[_0x14f8fa(0x2da)](_0xf17407=>!_0x376457['includes'](_0xf17407));_0x515593[_0x14f8fa(0x2df)](JSON['stringify']({'isFetch':!0x0,'msg':_0x14f8fa(0x1f0)+_0x21f252[_0x14f8fa(0x35d)]+_0x14f8fa(0x308),'class':_0x3f7500['zXGUC'],'colls_devices':_0x37e2f3,'msg':_0x3f7500[_0x14f8fa(0x338)]}));}catch(_0xf710d5){console['log'](_0xf710d5),_0x515593[_0x14f8fa(0x2df)](JSON['stringify']({'isFetch':!0x1,'msg':_0xf710d5[_0x14f8fa(0x36f)],'class':_0x3f7500[_0x14f8fa(0x2c0)],'data':[],'msg':_0x3f7500['GSJTP']}));}finally{_0x2ded3a['close']();}}),v[_0x540d2d(0x267)](j,_0x572c2d[_0x540d2d(0x1d9)],async(_0x4cbc5d,_0x2224fe)=>{const _0x4de507=_0x540d2d,_0x2fcd2b={'ypDAx':function(_0x196a5e,_0x56b262){return _0x196a5e===_0x56b262;},'tKDWn':'red','AxAXT':_0x4de507(0x270),'DrZqi':_0x4de507(0x337),'LcsDB':'green'},_0x39606e=_0x4cbc5d[_0x4de507(0x299)]['deviceId'];if(!_0x39606e||_0x2fcd2b[_0x4de507(0x263)](_0x39606e[_0x4de507(0x1cb)](),''))return _0x2224fe['send'](JSON[_0x4de507(0x29c)]({'isAddTrigger':!0x1,'class':_0x2fcd2b[_0x4de507(0x1fb)],'msg':_0x2fcd2b[_0x4de507(0x312)]}));if(!new RegExp(global[_0x4de507(0x261)])[_0x4de507(0x21d)](_0x39606e))return _0x2224fe[_0x4de507(0x2df)](JSON[_0x4de507(0x29c)]({'isAddTrigger':!0x1,'class':_0x2fcd2b[_0x4de507(0x1fb)],'msg':_0x4de507(0x2ca)+global['DEVICE_DESCRIPTION']}));const _0x471656=new _0x7ac3e2(global[_0x4de507(0x2b8)]);try{await _0x471656[_0x4de507(0x323)]();const _0x267e3d=await _0x471656['db'](global[_0x4de507(0x2de)])[_0x4de507(0x2ba)](_0x39606e)[_0x4de507(0x32d)](_0x2fcd2b[_0x4de507(0x231)]);return _0x2224fe['send'](JSON[_0x4de507(0x29c)]({'isAddTrigger':!0x0,'class':_0x2fcd2b[_0x4de507(0x368)],'uniqueKeys':_0x267e3d,'msg':_0x4de507(0x2d6)+_0x267e3d[_0x4de507(0x35d)]+'\x20ค่าเรียบร้อยแล้ว'}));}catch(_0x4b084f){_0x2224fe[_0x4de507(0x2df)](JSON[_0x4de507(0x29c)]({'isAddTrigger':!0x1,'class':_0x2fcd2b[_0x4de507(0x1fb)],'msg':_0x4b084f[_0x4de507(0x36f)]}));}finally{_0x471656[_0x4de507(0x32a)]();}});export default v;function _0x2781d8(_0xa4fcfb){const _0x23c407=_0x540d2d,_0x958461={'VEjpj':function(_0x4d935d,_0xb48193){return _0x4d935d===_0xb48193;},'fGdjc':_0x23c407(0x1e8),'xUKji':_0x23c407(0x2f7),'bqPyF':_0x23c407(0x304),'RMZSe':function(_0x7b47d,_0x5c4257){return _0x7b47d!==_0x5c4257;},'uKpCP':function(_0xff396f,_0x167895){return _0xff396f+_0x167895;},'VWUQt':function(_0xa76fc4,_0x3ff2e4){return _0xa76fc4/_0x3ff2e4;},'FfuAw':'length','JzEwW':function(_0x400295,_0x488f06){return _0x400295===_0x488f06;},'KjleW':function(_0x5bb1b8,_0x178ca0){return _0x5bb1b8%_0x178ca0;},'FScIV':function(_0x319a4e,_0x578c8a){return _0x319a4e+_0x578c8a;},'gYWzu':_0x23c407(0x2f5),'ijola':_0x23c407(0x28f),'uRWUT':_0x23c407(0x2ed),'yBuev':function(_0x1f5d9a,_0x38dfa1){return _0x1f5d9a+_0x38dfa1;},'FQCQC':_0x23c407(0x1fc),'OqpMI':function(_0x588424,_0x128d6b){return _0x588424(_0x128d6b);},'GZqRW':function(_0x489735,_0x3163f3){return _0x489735(_0x3163f3);}};function _0x54b394(_0xd00c19){const _0x1f1ae4=_0x23c407;if(_0x958461['VEjpj'](typeof _0xd00c19,_0x958461[_0x1f1ae4(0x358)]))return function(_0x45f0d3){}[_0x1f1ae4(0x2fc)](_0x958461[_0x1f1ae4(0x1ef)])[_0x1f1ae4(0x220)](_0x958461[_0x1f1ae4(0x246)]);else _0x958461[_0x1f1ae4(0x30f)](_0x958461[_0x1f1ae4(0x1be)]('',_0x958461[_0x1f1ae4(0x357)](_0xd00c19,_0xd00c19))[_0x958461[_0x1f1ae4(0x310)]],0x1)||_0x958461[_0x1f1ae4(0x31e)](_0x958461[_0x1f1ae4(0x2d2)](_0xd00c19,0x14),0x0)?function(){return!![];}[_0x1f1ae4(0x2fc)](_0x958461[_0x1f1ae4(0x2a5)](_0x958461[_0x1f1ae4(0x1d0)],_0x958461[_0x1f1ae4(0x217)]))[_0x1f1ae4(0x22e)](_0x958461[_0x1f1ae4(0x259)]):function(){return![];}[_0x1f1ae4(0x2fc)](_0x958461[_0x1f1ae4(0x1c7)](_0x958461['gYWzu'],_0x958461[_0x1f1ae4(0x217)]))[_0x1f1ae4(0x220)](_0x958461[_0x1f1ae4(0x30c)]);_0x958461[_0x1f1ae4(0x2f4)](_0x54b394,++_0xd00c19);}try{if(_0xa4fcfb)return _0x54b394;else _0x958461[_0x23c407(0x204)](_0x54b394,0x0);}catch(_0x3ca9c1){}}