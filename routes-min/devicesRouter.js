const _0x169192=_0x17e2;(function(_0x58a60b,_0x56d0d4){const _0x4daf05=_0x17e2,_0x4539cc=_0x58a60b();while(!![]){try{const _0x2079a4=parseInt(_0x4daf05(0x120))/0x1+-parseInt(_0x4daf05(0x1ed))/0x2*(parseInt(_0x4daf05(0x109))/0x3)+-parseInt(_0x4daf05(0x222))/0x4+-parseInt(_0x4daf05(0x258))/0x5*(parseInt(_0x4daf05(0x276))/0x6)+parseInt(_0x4daf05(0xe5))/0x7+parseInt(_0x4daf05(0x14f))/0x8+-parseInt(_0x4daf05(0x170))/0x9*(parseInt(_0x4daf05(0x1d1))/0xa);if(_0x2079a4===_0x56d0d4)break;else _0x4539cc['push'](_0x4539cc['shift']());}catch(_0xb3c8e4){_0x4539cc['push'](_0x4539cc['shift']());}}}(_0x3e7a,0x5526d));const _0x313df9=(function(){const _0x5ab3c5=_0x17e2,_0x3df98a={'SPRva':function(_0x38d1a0,_0x11590f){return _0x38d1a0!==_0x11590f;},'UPRSQ':_0x5ab3c5(0x108),'mExBs':_0x5ab3c5(0x117),'ZDVeD':'xiIKA','kSnSV':_0x5ab3c5(0x22f),'jUidL':function(_0x3fd168,_0x3f1ec2){return _0x3fd168!==_0x3f1ec2;},'YRWVv':function(_0x44aab6,_0x36ad57){return _0x44aab6==_0x36ad57;},'cXRzL':function(_0x4254bd,_0x4c8523){return _0x4254bd!==_0x4c8523;},'HGpQo':function(_0x17f318){return _0x17f318();},'MLBHF':function(_0x1c391f,_0x5b0a10){return _0x1c391f===_0x5b0a10;},'AemUG':_0x5ab3c5(0xfc)};let _0x2d7ef3=!![];return function(_0x5d30e8,_0x471255){const _0x3fdef7=_0x5ab3c5,_0xb24cab={'XPoHu':function(_0x4d791e){return _0x3df98a['HGpQo'](_0x4d791e);}};if(_0x3df98a[_0x3fdef7(0xf4)](_0x3df98a[_0x3fdef7(0x19b)],_0x3df98a[_0x3fdef7(0x19b)])){const _0xeeda2b=_0x2d7ef3?function(){const _0x315a64=_0x3fdef7;if(_0x3df98a['SPRva'](_0x3df98a['UPRSQ'],_0x3df98a[_0x315a64(0x24c)])){if(_0x471255){if(_0x3df98a[_0x315a64(0x155)](_0x3df98a[_0x315a64(0x259)],_0x3df98a[_0x315a64(0x183)])){const _0x45f993=_0x471255[_0x315a64(0x10b)](_0x5d30e8,arguments);return _0x471255=null,_0x45f993;}else _0xb24cab['XPoHu'](_0x35b04e);}}else _0x145271['close']();}:function(){};return _0x2d7ef3=![],_0xeeda2b;}else{const _0xdee5b5=_0x3df98a[_0x3fdef7(0x18f)](_0x593f18['userAuthority'],'A')||_0x3df98a['YRWVv'](_0x4b6435[_0x3fdef7(0x1f6)],_0x496f0c);return _0x3df98a['cXRzL'](_0x5eb46e[_0x3fdef7(0x192)],'O')&&_0xdee5b5;}};}());(function(){const _0x5c4192=_0x17e2,_0x3ae81={'yNBlG':_0x5c4192(0x256),'olTae':_0x5c4192(0x208),'qwxyv':function(_0x452b39,_0x26a14b){return _0x452b39(_0x26a14b);},'gEucU':function(_0xbe09ed,_0x2f0d6e){return _0xbe09ed+_0x2f0d6e;},'OoEUm':function(_0x16a69d,_0x85c31c){return _0x16a69d+_0x85c31c;},'Yplnj':'return\x20(function()\x20','KRtkL':_0x5c4192(0x1f5),'foQAE':function(_0x5c1938,_0x5cf1d6){return _0x5c1938!==_0x5cf1d6;},'NrBWl':_0x5c4192(0x1d0),'DGbDC':_0x5c4192(0x1e4),'QunKW':_0x5c4192(0x1fb),'BChRj':function(_0x5e74d0,_0xa1dfc2){return _0x5e74d0(_0xa1dfc2);},'EUPJN':_0x5c4192(0x10e),'KevyR':function(_0x5a9d09,_0x33187f){return _0x5a9d09+_0x33187f;},'XloDa':_0x5c4192(0x24e),'sGkbn':_0x5c4192(0x12d),'GcidP':function(_0x435721,_0x3afe22){return _0x435721===_0x3afe22;},'oeGgf':_0x5c4192(0x152),'capAb':'zabID','MBTlp':function(_0x2bbb11,_0x12ee15){return _0x2bbb11(_0x12ee15);},'LCiHB':function(_0x193f8e,_0x2a2ac6){return _0x193f8e!==_0x2a2ac6;},'ZqpiZ':'VSYft','CWOeF':function(_0x186c3b){return _0x186c3b();},'zeBJX':function(_0x4a1d57,_0x188f09,_0x311691){return _0x4a1d57(_0x188f09,_0x311691);}};_0x3ae81[_0x5c4192(0x1c3)](_0x313df9,this,function(){const _0x257f01=_0x5c4192,_0x4a36db={'GSrml':function(_0x526294,_0x503b5d){const _0x53b7e6=_0x17e2;return _0x3ae81[_0x53b7e6(0x18e)](_0x526294,_0x503b5d);}};if(_0x3ae81[_0x257f01(0x29e)](_0x3ae81[_0x257f01(0x115)],_0x3ae81[_0x257f01(0x115)]))_0x4a36db['GSrml'](_0x58f09c,'0');else{const _0x26232a=new RegExp(_0x3ae81[_0x257f01(0x25b)]),_0x85c29f=new RegExp(_0x3ae81[_0x257f01(0x21e)],'i'),_0x18be4e=_0x3ae81[_0x257f01(0x191)](_0x52f212,_0x3ae81[_0x257f01(0x296)]);if(!_0x26232a[_0x257f01(0x1f1)](_0x3ae81['KevyR'](_0x18be4e,_0x3ae81[_0x257f01(0x129)]))||!_0x85c29f[_0x257f01(0x1f1)](_0x3ae81[_0x257f01(0x215)](_0x18be4e,_0x3ae81['sGkbn']))){if(_0x3ae81['GcidP'](_0x3ae81[_0x257f01(0x279)],_0x3ae81[_0x257f01(0x1f8)]))return _0x191bf5['log'](_0x4d9842[_0x257f01(0x180)]),_0x1f7758[_0x257f01(0x225)](_0x3ae81[_0x257f01(0x194)],{'class':_0x3ae81[_0x257f01(0x1b7)],'text':''+_0x632803[_0x257f01(0x180)]}),_0x1b9233[_0x257f01(0x20b)](_0x1ccdba);else _0x3ae81[_0x257f01(0xee)](_0x18be4e,'0');}else _0x3ae81[_0x257f01(0xf1)](_0x3ae81[_0x257f01(0x261)],_0x3ae81[_0x257f01(0x261)])?_0x52cfc4=_0x3ae81[_0x257f01(0x18e)](_0x568c73,_0x3ae81[_0x257f01(0x215)](_0x3ae81['OoEUm'](_0x3ae81['Yplnj'],_0x3ae81[_0x257f01(0x162)]),');'))():_0x3ae81['CWOeF'](_0x52f212);}})();}());const _0x206f60=(function(){const _0x246a66=_0x17e2,_0xb02ca1={'TrwQr':function(_0x5a4a96,_0x32895a){return _0x5a4a96===_0x32895a;},'PstmX':_0x246a66(0x1bf),'DTuBK':'SFczs','VkFqZ':function(_0x556533,_0x52d7ab){return _0x556533===_0x52d7ab;},'PXmwh':_0x246a66(0x24b),'ipEvs':function(_0x2e876b,_0x20fcc1){return _0x2e876b(_0x20fcc1);},'JixAm':function(_0x1487c9,_0x551bb6){return _0x1487c9+_0x551bb6;},'JfFDG':_0x246a66(0x1fe),'gdpqo':_0x246a66(0x1f5),'HIqox':'error\x20===>\x20','juxiv':_0x246a66(0x208),'djFLO':function(_0x18b357,_0x37ccbc){return _0x18b357===_0x37ccbc;},'JcYut':_0x246a66(0x138)};let _0x59ee9=!![];return function(_0x248f18,_0x4ca106){const _0x28d0c2=_0x246a66,_0x40961f={'xfRCC':function(_0x4c0886,_0x513219){const _0x1d6320=_0x17e2;return _0xb02ca1[_0x1d6320(0x22e)](_0x4c0886,_0x513219);},'AjfHM':function(_0x160fc8,_0x3d6ddb){const _0x5e0826=_0x17e2;return _0xb02ca1[_0x5e0826(0x278)](_0x160fc8,_0x3d6ddb);},'qlrzu':_0xb02ca1[_0x28d0c2(0x269)],'vMfKB':_0xb02ca1[_0x28d0c2(0x24a)],'Eclqv':_0xb02ca1[_0x28d0c2(0x290)],'hvrFq':_0xb02ca1[_0x28d0c2(0x22c)]};if(_0xb02ca1[_0x28d0c2(0x118)](_0xb02ca1['JcYut'],_0xb02ca1[_0x28d0c2(0x111)])){const _0x26b275=_0x59ee9?function(){const _0x5086dc=_0x28d0c2;if(_0xb02ca1[_0x5086dc(0x102)](_0xb02ca1[_0x5086dc(0x1d5)],_0xb02ca1[_0x5086dc(0x17c)])){let _0x3a2b4d;try{_0x3a2b4d=_0x40961f[_0x5086dc(0x160)](_0x503d40,_0x40961f[_0x5086dc(0xf0)](_0x40961f['AjfHM'](_0x40961f[_0x5086dc(0x1e6)],_0x40961f['vMfKB']),');'))();}catch(_0x265b4a){_0x3a2b4d=_0x7350d5;}return _0x3a2b4d;}else{if(_0x4ca106){if(_0xb02ca1[_0x5086dc(0x206)](_0xb02ca1['PXmwh'],_0xb02ca1['PXmwh'])){const _0x1027db=_0x4ca106['apply'](_0x248f18,arguments);return _0x4ca106=null,_0x1027db;}else _0x472f70['close']();}}}:function(){};return _0x59ee9=![],_0x26b275;}else _0x12f2b3[_0x28d0c2(0x16e)](_0x40961f[_0x28d0c2(0x12b)],_0x3535ee[_0x28d0c2(0x180)]),_0x5d0bfa[_0x28d0c2(0x147)](_0x3c5cde[_0x28d0c2(0x1ec)]({'isPrint':!0x1,'class':_0x40961f[_0x28d0c2(0x106)],'msg':_0x5195d9[_0x28d0c2(0x180)]}));};}()),_0x1a71fc=_0x206f60(this,function(){const _0x2f859f=_0x17e2,_0x3cb661={'YzgVz':_0x2f859f(0x263),'Irdjd':function(_0x1b7fb1,_0x464e77){return _0x1b7fb1+_0x464e77;},'VaicE':_0x2f859f(0x213),'PllJO':_0x2f859f(0x1e2),'TmRME':_0x2f859f(0x146),'JXtiJ':function(_0x36d924,_0x3c3bd1){return _0x36d924!==_0x3c3bd1;},'ghZWJ':_0x2f859f(0x28e),'NgBzf':_0x2f859f(0x21c),'Dezzn':function(_0x44271b,_0x20de62){return _0x44271b!==_0x20de62;},'cvGji':_0x2f859f(0x1fc),'SyekZ':_0x2f859f(0x254),'lbkvY':function(_0x5a5a07,_0x40d3a0){return _0x5a5a07(_0x40d3a0);},'CcqQL':function(_0x9950f6,_0x19c2d3){return _0x9950f6+_0x19c2d3;},'lxido':_0x2f859f(0x1fe),'ubzve':_0x2f859f(0x1f5),'IJRHx':function(_0x10af6f,_0xf91543){return _0x10af6f===_0xf91543;},'rvGvj':_0x2f859f(0x17b),'FGoVx':'iqpdO','mJaCF':_0x2f859f(0x208),'xdSUi':function(_0x2cb6d3){return _0x2cb6d3();},'MiVjI':_0x2f859f(0x16e),'wdSlU':_0x2f859f(0x299),'TMgbw':_0x2f859f(0x1f0),'VCqZE':_0x2f859f(0x295),'yQjhY':_0x2f859f(0x1ce),'QMTmn':'table','bhUgl':_0x2f859f(0x164),'DXKWL':function(_0x2fbfde,_0x3cc334){return _0x2fbfde<_0x3cc334;},'XDxFF':function(_0x4fbfaa,_0x594bb1){return _0x4fbfaa===_0x594bb1;},'CbddL':_0x2f859f(0x231)},_0x540d3b=function(){const _0x3d732f=_0x2f859f;if(_0x3cb661[_0x3d732f(0x131)](_0x3cb661[_0x3d732f(0x1e5)],_0x3cb661[_0x3d732f(0x217)])){let _0x39efef;try{_0x3cb661[_0x3d732f(0x241)](_0x3cb661[_0x3d732f(0x285)],_0x3cb661[_0x3d732f(0x240)])?_0x39efef=_0x3cb661[_0x3d732f(0x238)](Function,_0x3cb661[_0x3d732f(0x173)](_0x3cb661[_0x3d732f(0x218)](_0x3cb661[_0x3d732f(0xe4)],_0x3cb661[_0x3d732f(0xe2)]),');'))():(_0x48d29d[_0x3d732f(0x16e)](_0x3cb661['YzgVz'],_0x4ed4a1),_0x2a72be['status'](0x194)[_0x3d732f(0x1a7)](_0x2b17a2));}catch(_0x49fd30){_0x3cb661[_0x3d732f(0x16b)](_0x3cb661[_0x3d732f(0x13c)],_0x3cb661[_0x3d732f(0x20a)])?_0x33f3c3=_0xb6de76:_0x39efef=window;}return _0x39efef;}else(function(){return!![];}[_0x3d732f(0x1b5)](_0x3cb661[_0x3d732f(0x173)](_0x3cb661['VaicE'],_0x3cb661['PllJO']))['call'](_0x3cb661['TmRME']));},_0x9f4fb0=_0x3cb661['xdSUi'](_0x540d3b),_0xbe2e4a=_0x9f4fb0[_0x2f859f(0x1e9)]=_0x9f4fb0[_0x2f859f(0x1e9)]||{},_0x1045cc=[_0x3cb661['MiVjI'],_0x3cb661['wdSlU'],_0x3cb661[_0x2f859f(0x1a4)],_0x3cb661['VCqZE'],_0x3cb661[_0x2f859f(0x1b0)],_0x3cb661[_0x2f859f(0x184)],_0x3cb661[_0x2f859f(0x121)]];for(let _0x269f4e=0x0;_0x3cb661['DXKWL'](_0x269f4e,_0x1045cc[_0x2f859f(0x255)]);_0x269f4e++){if(_0x3cb661[_0x2f859f(0x23c)](_0x3cb661[_0x2f859f(0x140)],_0x3cb661[_0x2f859f(0x140)])){const _0x4d928d=_0x206f60[_0x2f859f(0x1b5)]['prototype'][_0x2f859f(0x1fd)](_0x206f60),_0x182bf7=_0x1045cc[_0x269f4e],_0x1f7487=_0xbe2e4a[_0x182bf7]||_0x4d928d;_0x4d928d['__proto__']=_0x206f60[_0x2f859f(0x1fd)](_0x206f60),_0x4d928d[_0x2f859f(0x220)]=_0x1f7487[_0x2f859f(0x220)][_0x2f859f(0x1fd)](_0x1f7487),_0xbe2e4a[_0x182bf7]=_0x4d928d;}else _0x312b04['log'](_0x3cb661['YzgVz'],_0xf5ab86),_0x268e1c['send'](_0xeedc5b['stringify']({'isPrint':!0x1,'class':_0x3cb661[_0x2f859f(0x179)],'msg':_0x55f0e4['message']}));}});function _0x17e2(_0x421bdb,_0x455344){const _0x508bc9=_0x3e7a();return _0x17e2=function(_0x1a71fc,_0x206f60){_0x1a71fc=_0x1a71fc-0xe0;let _0x342a04=_0x508bc9[_0x1a71fc];return _0x342a04;},_0x17e2(_0x421bdb,_0x455344);}_0x1a71fc();import _0x6b869 from'express';const v=_0x6b869['Router']();import{MongoClient as _0x451a31,ObjectId as _0x244b4b}from'mongodb';import _0x5855da from'ejs';import _0x1ad236 from'path';function _0x3e7a(){const _0x4daa6b=['PstmX','triggerMin','JKjIM','deviceName','WYsDm','ZYpxT','filter','EGauN','gUoHE','WfGFq','XdCwH','green','GUIuE','gger','BznLt','function\x20*\x5c(\x20*\x5c)','ghZWJ','qlrzu','jwTne','YOEZC','console','Thnhu','GuLux','stringify','59434vWbIqS','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','DllCj','info','test','folderForms','aggregate','rpp','{}.constructor(\x22return\x20this\x22)(\x20)','deviceId','WPpGi','capAb','rpbPk','mNGgt','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','SPBFv','bind','return\x20(function()\x20','body','กรุณาระบุไอดีอุปกรณ์','get','query','oOKJp','includes','triggerKey','VkFqZ','xfFSk','red','/myUsers.js','FGoVx','redirect','rHZJp','QmsLY','_id','__proto__','oqVLP','bguKh','triggerRows','debu','PSbPR','gEucU','render','NgBzf','CcqQL','DPvTY','insertOne','WquLF','QnbdT','SHYyF','QunKW','STegX','toString','FiwVC','674748NTHMZv','ujPJM','acknowledged','flash','toArray','lhjTm','XdeqF','เพิ่มอุปกรณ์\x20\x22','DGvvG','CIhIt','juxiv','&load_id=','ipEvs','xHniv','zvHJQ','xVYjZ','STWCG','ToZYp','yPjwE','SoZtQ','connect','BvQsx','lbkvY','{{sep}}(\x20ไม่พบเซสชั่น\x20)','Pdchv','DYiPz','XDxFF','sJQAt','lgQkV','NmFek','SyekZ','Dezzn','chriB','gMDBm','ยูสเซอร์\x20\x22','isOA','RGKbR','unshift','deletedCount','ZkENp','gdpqo','kYApk','mExBs','/devices','chain','XYEjk','sJCQi','diyqC','zFuTK','close','lPxzP','length','msg','/add-trigger','2965MontHw','ZDVeD','HNrYS','DGbDC','../','map','ZRhZw','HxNKE','VOsIz','ZqpiZ','UqyES','error\x20===>\x20','\x22\x20เรียบร้อยแล้ว','dbColl_devices','key','YbBCn','push','JfFDG','ikCtQ','rswGE','FxRLa','SnXxy','load_id','name','AFAbZ','triggerMax','wfSMy','HARAv','UUjHK','bUTbG','4752GSRxWN','DEVICE_DESCRIPTION','JixAm','oeGgf','mVzZr','post','/delete','qRpOK','อัปเดท\x20\x22','FPFoV','dTInG','find','TMVsS','fgloT','modifiedCount','cvGji','ไม่มีข้อมูล','cbnet','kMRoK','tPyqe','dRKUj','BQYjk','dbUrl','ImOxN','VtvlL','GVkwG','HIqox','triggerStatus','wxidM','lMonz','wtlxE','error','EUPJN','tWuOU','&page=','warn','YTurv','Wahej','wMOaQ','updateOne','foQAE','JxUoo','hrwEK','ubzve','SByqH','lxido','1117676grWdRM','FKvSk','GxMRS','fJGBm','dhUfG','\x22\x20มีอยู่ในเอกสาร\x20','?sip=','bPHRd','ลบยูสเซอร์\x20\x22','MBTlp','DbQXu','AjfHM','LCiHB','nDBll','status','MLBHF','trim','hWnUf','dbName','object','MCmEV','aZHAF','POnHW','qKxIH','bEftQ','รูปแบบไอดีอุปกรณ์ไม่ถูกต้อง{{sep}}','fqcmE','renderView','izLcr','TrwQr','IBCcu','Podfi','sip','hvrFq','JPQjV','LAgGb','9GWJGxs','amufQ','apply','EFsHu','wssSs','init','replace','Erwyc','JcYut','iTRmG','IDMkW','gaBpL','NrBWl','hwLos','xeQaG','djFLO','VrFZC','izFdV','join','HZyKr','hpFXc','OSAKz','&rpp=','661876UcnLkf','bhUgl','sort','qgXEG','XPRGc','call','{{sep}}[\x20บันทึกการแก้ไข\x20]','BqIzr','กรุณาระบุค่า\x20Min\x20หรือ\x20Max\x20สำหรับคีย์\x20\x22','XloDa','ZodkM','Eclqv','zjVZp','input','ODUer','iEZMm','collection','JXtiJ','/myModule.js','ดึงข้อมูลเรียบร้อยแล้ว','AxMLJ','listCollections','fHRuh','SloUJ','EdeNQ','kjsTv','mBMvY','dvRAv','rvGvj','IvXxc','getSessionData','qoMOn','CbddL','fCGis','ประวัติการแก้ไข\x20:\x20[','nttck','qQceC','XTQDv','action','send','\x20ค่าเรียบร้อยแล้ว','eqqYL','uxIbB','dateTimeCanDelete','YuTVv','tKYzk','utf8','3688000obVQIj','SZzug','vJKaS','wetpT','XySZu','XCguq','SPRva','MnLRA','VpKrg','eEKuv','hTdUL','eqxtI','vpPWS','nRkiH','getDateTime','KHvfC','minute','xfRCC','lQgUm','KRtkL','$changesHistory','trace','dwCDZ','aywzw','TpGIZ','CTihx','ZmMOn','EwpeF','IJRHx','gQwxF','^(e|s)\x5cd{3}$','log','MrpTm','265203BTnpYz','ไม่พบประวัติการเปลี่ยนแปลง','RlGZk','Irdjd','/fetch','size','insertedId','SkjVI','/myData.js','mJaCF','deleteOne','IKKEP','DTuBK','WAucR','qQJyo','UUVTy','message','$dateTimeCanDelete','ดึงค่าฟิลด์\x20key\x20ที่ไม่ซ้ำกัน\x20{{sep}}จำนวน\x20','kSnSV','QMTmn','dbColl_docs','\x20เรียบร้อยแล้ว','\x22\x20เรียบร้อยแล้ว\x20)','HmsfS','ไม่พบ\x20\x22','Fplzg','YlnfS','ytnPA','UQkcd','qwxyv','jUidL','mernG','BChRj','userAuthority','aLcWR','yNBlG','sLKKR','DaWcX','เกิดข้อผิดพลาดขณะดึงข้อมูล','suogH','IOrpJ','Wyngd','AemUG','findOne','จำนวน\x20(','GTdtU','ESlZg','VhgAp','pvQep','RXKjR','BRzPq','TMgbw','while\x20(true)\x20{}','KOsBp','sendFile','getChangeHistory','APbyf','readFileSync','/load','bfwBx','countDocuments','STIbo','EDFEk','yQjhY','fmiDy','seMsR','ชื่ออุปกรณ์/ไออีอุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','nGfSM','constructor','gdZeH','olTae','DEVICE_PATTERN','BijsL','mlHBl','UiwVw','{{sep}}\x22','xaMHY','CfrXH','wWQJx','POWBc','fzDzs','ชื่ออุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','zeBJX','devices','getDate','AiwSw','KlyEF','DXrlI','string','bxucE','page','aferw','MsNHF','exception','pLnlD','lMPbq','70ABoicB','sUtKH','zeKtp','yellow'];_0x3e7a=function(){return _0x4daa6b;};return _0x3e7a();}import _0x3cec55 from'fs';import _0x134aab from'../middleware/mainAuth.js';const C=await import(_0x169192(0x25c)+mymoduleFolder+_0x169192(0x132)),D=await import(_0x169192(0x25c)+mymoduleFolder+'/myDateTime.js'),T=await import('../'+mymoduleFolder+_0x169192(0x209)),L=await import(_0x169192(0x25c)+mymoduleFolder+_0x169192(0x178)),b=_0x169192(0x24d),M=b+'/save',P=b+_0x169192(0x1ab),R=b+_0x169192(0x27c),F=b+'/print',H=b+_0x169192(0x174),U=b+'/changes',j=b+_0x169192(0x257),G=b[_0x169192(0x10f)](/\//g,'_');v[_0x169192(0x201)](b,_0x134aab[_0x169192(0x245)],async(_0xb491ac,_0x319e2b)=>{const _0xfca1c5=_0x169192,_0x12961c={'xaMHY':_0xfca1c5(0x1a5),'xfFSk':'counter','vpPWS':function(_0x13b28c,_0x15f1aa){return _0x13b28c!==_0x15f1aa;},'SHYyF':_0xfca1c5(0x1c1),'VhgAp':function(_0x26f120,_0x133845){return _0x26f120==_0x133845;},'BvQsx':function(_0x3e9efe,_0x31ed33){return _0x3e9efe+_0x31ed33;},'hpFXc':_0xfca1c5(0x213),'FxRLa':'gger','qRpOK':'stateObject','KOsBp':function(_0x4da66f,_0x2e835e){return _0x4da66f(_0x2e835e);},'gjcOo':function(_0x63a64e,_0x5ba195){return _0x63a64e(_0x5ba195);},'uPoTU':function(_0xc979ee,_0x1edb19){return _0xc979ee*_0x1edb19;},'qQceC':function(_0x3655c2,_0x8414a7){return _0x3655c2-_0x8414a7;},'IvXxc':function(_0x432f1d,_0x23de52){return _0x432f1d!==_0x23de52;},'dTInG':_0xfca1c5(0x14c),'wtlxE':function(_0x40ab15,_0x22acfa){return _0x40ab15!==_0x22acfa;},'JKjIM':_0xfca1c5(0x10d),'uxIbB':_0xfca1c5(0x23e),'mBMvY':function(_0x2ab5fd,_0x4fa168){return _0x2ab5fd/_0x4fa168;},'mVzZr':function(_0x36a010,_0x606fe0){return _0x36a010<_0x606fe0;},'SloUJ':function(_0x5087f2,_0x13a925){return _0x5087f2-_0x13a925;},'jwTne':function(_0x5640b5,_0x4ba0a7){return _0x5640b5(_0x4ba0a7);},'ytnPA':function(_0x5b7f74,_0x1ad631){return _0x5b7f74(_0x1ad631);},'DaWcX':function(_0x1bd1bd,_0x2a4a92){return _0x1bd1bd(_0x2a4a92);},'QUMPV':function(_0x7d54b7,_0x270d81){return _0x7d54b7>_0x270d81;},'AxMLJ':function(_0x57a266,_0x308624){return _0x57a266(_0x308624);},'zjVZp':_0xfca1c5(0x163),'AiwSw':_0xfca1c5(0x181),'gaBpL':_0xfca1c5(0x15f),'aferw':function(_0x4a5188,_0x4d4b2f){return _0x4a5188===_0x4d4b2f;},'eqxtI':_0xfca1c5(0x234),'EFsHu':_0xfca1c5(0x230),'HNrYS':'QkVcb','fgloT':_0xfca1c5(0x1c4),'lMonz':_0xfca1c5(0x256),'bxucE':function(_0xdb15d7,_0xc4ad30){return _0xdb15d7!==_0xc4ad30;},'ZodkM':_0xfca1c5(0x1b9),'skbwS':function(_0xbf56a6,_0x1f699d){return _0xbf56a6!==_0x1f699d;},'qoMOn':_0xfca1c5(0x156)};let _0x1685b7=_0xb491ac[_0xfca1c5(0x202)][_0xfca1c5(0x105)];_0x1685b7=_0x1685b7?_0x1685b7[_0xfca1c5(0x10f)](/[.*+?^${}()|[\]\\]/g,''):'';const _0x3f7397=_0x12961c[_0xfca1c5(0x1a6)](Number,_0xb491ac['query'][_0xfca1c5(0x1f4)])||0x14,_0x431bf7=_0x12961c['KOsBp'](Number,_0xb491ac['query']['page'])||0x1,_0x3df2eb=_0xb491ac[_0xfca1c5(0x202)][_0xfca1c5(0x26e)]||'',_0x3b6fa7=_0x12961c['gjcOo'](Number,_0x12961c['uPoTU'](_0x12961c[_0xfca1c5(0x144)](_0x431bf7,0x1),_0x3f7397)),_0x5c05f2=D[_0xfca1c5(0x15d)](0x0),_0x45c720=new _0x451a31(dbUrl);try{if(_0x12961c[_0xfca1c5(0x13d)](_0x12961c[_0xfca1c5(0x280)],_0x12961c['dTInG'])){const _0xfbb727=_0x3434f6?new _0x4d15d4(''+_0x52ddd7,'i'):new _0x4c766f('.*');_0x2dccbe[_0xfca1c5(0x247)]({'$match':{'$or':[{'deviceId':{'$regex':_0xfbb727}},{'deviceName':{'$regex':_0xfbb727}}]}});}else{await _0x45c720[_0xfca1c5(0x236)]();const _0x265b9e=_0x45c720['db'](global['dbName'])[_0xfca1c5(0x130)](global[_0xfca1c5(0x265)]);if(_0x1685b7){if(_0x12961c[_0xfca1c5(0x294)](_0x12961c[_0xfca1c5(0x1d7)],_0x12961c[_0xfca1c5(0x14a)])){const _0x1c4dda=new RegExp(_0x1685b7,'i');var _0x198d34=await _0x265b9e[_0xfca1c5(0x1ad)]({'$or':[{'deviceId':{'$regex':_0x1c4dda}},{'deviceName':{'$regex':_0x1c4dda}},{'userFirstname':{'$regex':_0x1c4dda}}]});}else return function(_0x3f107d){}[_0xfca1c5(0x1b5)](ABusKI[_0xfca1c5(0x1bd)])[_0xfca1c5(0x10b)](ABusKI[_0xfca1c5(0x207)]);}else var _0x198d34=await _0x265b9e['countDocuments']({});const _0xe4f80e=Math['ceil'](_0x12961c[_0xfca1c5(0x13a)](_0x198d34,_0x3f7397)),_0x5077c7=_0x12961c[_0xfca1c5(0x27a)](_0x12961c[_0xfca1c5(0x137)](_0x12961c[_0xfca1c5(0x1e7)](Number,_0x431bf7),0x1),0x1)?'-':_0x12961c[_0xfca1c5(0x137)](_0x12961c[_0xfca1c5(0x18c)](Number,_0x431bf7),0x1),_0x4d0de9=_0x12961c[_0xfca1c5(0x196)](Number,_0x431bf7),_0x58df5b=_0x12961c['QUMPV'](_0x12961c[_0xfca1c5(0x237)](_0x12961c[_0xfca1c5(0x18c)](Number,_0x431bf7),0x1),_0xe4f80e)?'-':_0x12961c['BvQsx'](_0x12961c[_0xfca1c5(0x134)](Number,_0x431bf7),0x1),_0xc712d=[{'$project':{'_id':0x1,'deviceId':0x1,'deviceStatus':0x1,'deviceName':0x1,'triggerRows':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0x12961c[_0xfca1c5(0x12c)],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x5c05f2},'endDate':{'$toDate':_0x12961c[_0xfca1c5(0x1c6)]},'unit':_0x12961c[_0xfca1c5(0x114)]}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'deviceId':-0x1}},{'$skip':_0x3b6fa7},{'$limit':_0x3f7397}];if(_0x1685b7){if(_0x12961c[_0xfca1c5(0x1cc)](_0x12961c['eqxtI'],_0x12961c[_0xfca1c5(0x15a)])){const _0x435a3e=_0x1685b7?new RegExp(''+_0x1685b7,'i'):new RegExp('.*');_0xc712d['unshift']({'$match':{'$or':[{'deviceId':{'$regex':_0x435a3e}},{'deviceName':{'$regex':_0x435a3e}}]}});}else _0x1d97c9[_0xfca1c5(0x253)]();}const _0x4c1cfe=T[_0xfca1c5(0x13e)](_0xb491ac),_0xd16ef4=_0x4c1cfe[_0xfca1c5(0x192)];let _0x5a050d=await _0x265b9e[_0xfca1c5(0x1f3)](_0xc712d)['toArray']();if(['A'][_0xfca1c5(0x204)](_0xd16ef4)){if(_0x12961c[_0xfca1c5(0x1cc)](_0x12961c[_0xfca1c5(0x10c)],_0x12961c[_0xfca1c5(0x25a)]))return!![];else{const _0x257844=_0x4c1cfe[_0xfca1c5(0x1f6)];_0x5a050d=_0x5a050d[_0xfca1c5(0x1db)](_0xb9e592=>{const _0x2c6a38=_0xfca1c5;if(_0x12961c['vpPWS'](_0x12961c[_0x2c6a38(0x21d)],_0x12961c[_0x2c6a38(0x21d)])){const _0x4a6d0d=_0x3b11e2[_0x2c6a38(0x10b)](_0x5e49a6,arguments);return _0x5bcf06=null,_0x4a6d0d;}else{const _0x551c3a=_0x12961c[_0x2c6a38(0x15b)](_0xb9e592[_0x2c6a38(0x192)],'A')||_0x12961c[_0x2c6a38(0x1a0)](_0xb9e592[_0x2c6a38(0x1f6)],_0x257844);return _0x12961c[_0x2c6a38(0x15b)](_0xb9e592[_0x2c6a38(0x192)],'O')&&_0x551c3a;}});}}if(_0x3df2eb)var _0x544a76=await _0x265b9e[_0xfca1c5(0x19c)]({'_id':new _0x244b4b(_0x3df2eb)},{'projection':{'userPassword':0x0}});else var _0x544a76={};const _0x415e20=await C[_0xfca1c5(0x100)](_0x12961c[_0xfca1c5(0x283)],_0x319e2b,{'title':PAGE_DEVICES,'time':D[_0xfca1c5(0x1c5)](),'msg':_0xb491ac[_0xfca1c5(0x225)](_0x12961c[_0xfca1c5(0x293)]),'user':T[_0xfca1c5(0x13e)](_0xb491ac),'settings':await C['getSettings'](),'load_id':_0x3df2eb,'sip':_0x1685b7,'rpp':_0x3f7397,'page':_0x431bf7,'pagePre':_0x5077c7,'pageAct':_0x4d0de9,'pageNxt':_0x58df5b,'pageLst':_0xe4f80e,'pageRedirect':b,'data':_0x5a050d,'PATH_MAIN':b,'PATH_PRINT':F,'PATH_SAVE':M,'PATH_LOAD':P,'PATH_DELETE':R,'PATH_FETCH':H,'PATH_CHANGES':U,'PATH_ADD_TRIGGER':j,'PREFIX':G,'item':_0x544a76});return _0x319e2b['send'](_0x415e20);}}catch(_0x2ce1a2){_0x12961c[_0xfca1c5(0x1ca)](_0x12961c[_0xfca1c5(0x12a)],_0x12961c[_0xfca1c5(0x12a)])?(_0x15a731[_0xfca1c5(0x16e)](_0x495aa6[_0xfca1c5(0x180)]),_0x540856[_0xfca1c5(0xf3)](0x194)[_0xfca1c5(0x1a7)](_0x58c656)):(console[_0xfca1c5(0x16e)](_0x2ce1a2[_0xfca1c5(0x180)]),_0x319e2b[_0xfca1c5(0xf3)](0x194)[_0xfca1c5(0x1a7)](file404));}finally{_0x12961c['skbwS'](_0x12961c[_0xfca1c5(0x13f)],_0x12961c[_0xfca1c5(0x13f)])?function(){return![];}[_0xfca1c5(0x1b5)](ABusKI[_0xfca1c5(0x237)](ABusKI[_0xfca1c5(0x11d)],ABusKI[_0xfca1c5(0x26c)]))[_0xfca1c5(0x10b)](ABusKI[_0xfca1c5(0x27d)]):_0x45c720['close']();}}),v[_0x169192(0x27b)](M,_0x134aab['isOA'],async(_0x4cc8a5,_0x562867)=>{const _0x428db4=_0x169192,_0x5e6c28={'bfwBx':function(_0x47c676,_0x417e83){return _0x47c676(_0x417e83);},'iTRmG':function(_0x3333d0,_0x516c87){return _0x3333d0(_0x516c87);},'tPyqe':_0x428db4(0x208),'zFuTK':function(_0x26c855,_0x4e0546){return _0x26c855!==_0x4e0546;},'EGauN':function(_0x828794,_0x19856e){return _0x828794==_0x19856e;},'FCAnA':function(_0x4d629b,_0x3df0c7){return _0x4d629b!==_0x3df0c7;},'oOKJp':function(_0x465db9,_0x3eca4b){return _0x465db9(_0x3eca4b);},'PSbPR':function(_0x5ca7c2,_0x4fe290){return _0x5ca7c2(_0x4fe290);},'dRKUj':_0x428db4(0x256),'NIUOb':function(_0x64181e,_0x219892){return _0x64181e==_0x219892;},'sUtKH':_0x428db4(0x1c9),'seMsR':function(_0x202e86,_0x2ed841){return _0x202e86==_0x2ed841;},'wMOaQ':_0x428db4(0xf8),'XYEjk':function(_0x3ec145,_0x3c9891){return _0x3ec145>_0x3c9891;},'JxUoo':function(_0x1f89fb,_0x5dc84e){return _0x1f89fb!==_0x5dc84e;},'ZmMOn':_0x428db4(0x1fa),'ujPJM':_0x428db4(0x1dd),'pvQep':function(_0x4a3f5d,_0x5b16e7){return _0x4a3f5d<_0x5b16e7;},'VpKrg':'มีคีย์ที่เลือกซ้ำกัน','nGfSM':function(_0x420ff7,_0xcda26b){return _0x420ff7<=_0xcda26b;},'GyHQI':function(_0x4572b2,_0x442c44){return _0x4572b2-_0x442c44;},'bUTbG':function(_0x1859c7,_0x5310ad){return _0x1859c7(_0x5310ad);},'HARAv':function(_0x5c141a,_0x59533a){return _0x5c141a(_0x59533a);},'ueeCR':function(_0x14c08b,_0x93a434){return _0x14c08b(_0x93a434);},'bPHRd':function(_0x3f5d99,_0x34a789){return _0x3f5d99===_0x34a789;},'tXQls':function(_0x378000,_0x3ce0d3){return _0x378000===_0x3ce0d3;},'bguKh':function(_0x19d580,_0x5b8fad){return _0x19d580>=_0x5b8fad;},'HmsfS':function(_0x56c485,_0x544f77){return _0x56c485===_0x544f77;},'BRzPq':_0x428db4(0x23a),'OAwfU':_0x428db4(0x20c),'nRkiH':_0x428db4(0x104),'vJKaS':_0x428db4(0xe7),'QmsLY':_0x428db4(0x1b3),'FzuHo':function(_0x36c532,_0x32c0c0){return _0x36c532!==_0x32c0c0;},'TpGIZ':'MOtfJ','wfSMy':function(_0x434d44,_0xcfe94b){return _0x434d44===_0xcfe94b;},'kwfNV':_0x428db4(0x1ae),'dwCDZ':'YQhPL','suogH':_0x428db4(0x126),'ESlZg':_0x428db4(0x1e0),'MCmEV':_0x428db4(0x1d4),'YOEZC':'Not\x20Found','dvRAv':_0x428db4(0x1b6),'EDFEk':_0x428db4(0x1c2),'VwUmY':'unUgB','LLlSY':'TrUyw','Wyngd':function(_0x2bc6b4,_0x1e9c53){return _0x2bc6b4!==_0x1e9c53;},'HZyKr':_0x428db4(0xe9),'mlHBl':_0x428db4(0x116),'diyqC':_0x428db4(0x263),'Wahej':function(_0x2fa9c2,_0x12edc5){return _0x2fa9c2===_0x12edc5;},'XySZu':'ajMQd','OSAKz':'qHTQW'},_0xee1ed0=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x20e)];delete _0x4cc8a5[_0x428db4(0x1ff)]['_id'];const _0xec8af=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x105)],_0x246454=_0x5e6c28[_0x428db4(0x203)](Number,_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1f4)])||0x14,_0x896acf=_0x5e6c28[_0x428db4(0x214)](Number,_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1cb)])||0x1;delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1f4)],delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x105)],delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1cb)];const _0x34c6a8=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1d8)]?.['trim'](),_0x3e6cdd=_0x4cc8a5[_0x428db4(0x1ff)]['deviceId'],_0xda432e=''+b,_0x5920ae=b+_0x428db4(0xeb)+_0xec8af+_0x428db4(0x11f)+_0x246454+'&page='+_0x896acf+'&load_id='+_0xee1ed0;if(!new RegExp(global[_0x428db4(0x1b8)])[_0x428db4(0x1f1)](_0x3e6cdd))return _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0x289)],'text':global['DEVICE_DESCRIPTION']}),_0x562867[_0x428db4(0x20b)](_0x5920ae);let _0x3b8d16=0x0;_0x5e6c28['NIUOb'](typeof _0x4cc8a5['body']['triggerStatus'],_0x5e6c28[_0x428db4(0x1d2)])?_0x3b8d16=0x1:_0x5e6c28[_0x428db4(0x1b2)](typeof _0x4cc8a5['body']['triggerStatus'],_0x5e6c28[_0x428db4(0x29c)])&&(_0x3b8d16=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x291)][_0x428db4(0x255)]);const _0x4c0ff2=[];if(_0x5e6c28[_0x428db4(0x24f)](_0x3b8d16,0x1)){if(_0x5e6c28[_0x428db4(0xe0)](_0x5e6c28[_0x428db4(0x169)],_0x5e6c28[_0x428db4(0x223)])){const _0x305934=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x291)],_0x5abe34=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x205)],_0x29bb5=_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1d6)],_0x35c1ff=_0x4cc8a5['body']['triggerMax'];if(_0x5e6c28['pvQep'](new Set(_0x5abe34)[_0x428db4(0x175)],_0x5abe34[_0x428db4(0x255)]))return _0x4cc8a5['flash'](_0x5e6c28['dRKUj'],{'class':_0x5e6c28[_0x428db4(0x289)],'text':_0x5e6c28[_0x428db4(0x157)]}),_0x562867['redirect'](_0x5920ae);for(let _0x3dc6f5=0x0;_0x5e6c28[_0x428db4(0x1b4)](_0x3dc6f5,_0x5e6c28['GyHQI'](_0x3b8d16,0x1));_0x3dc6f5++)_0x4c0ff2['push']({'triggerStatus':_0x305934[_0x3dc6f5],'triggerKey':_0x5abe34[_0x3dc6f5],'triggerMin':_0x29bb5[_0x3dc6f5]?_0x5e6c28[_0x428db4(0x275)](Number,_0x29bb5[_0x3dc6f5]):null,'triggerMax':_0x35c1ff[_0x3dc6f5]?_0x5e6c28[_0x428db4(0x273)](Number,_0x35c1ff[_0x3dc6f5]):null});}else ylwlpR[_0x428db4(0x1ac)](_0x2756ee,0x0);}else _0x5e6c28['seMsR'](_0x3b8d16,0x1)&&_0x4c0ff2['push']({'triggerStatus':_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x291)],'triggerKey':_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x205)],'triggerMin':_0x4cc8a5['body'][_0x428db4(0x1d6)]?_0x5e6c28['ueeCR'](Number,_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1d6)]):null,'triggerMax':_0x4cc8a5[_0x428db4(0x1ff)]['triggerMax']?_0x5e6c28['oOKJp'](Number,_0x4cc8a5['body'][_0x428db4(0x271)]):null});delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x291)],delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x205)],delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x1d6)],delete _0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x271)],_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x212)]=[..._0x4c0ff2];for(const _0x5c5f76 of _0x4c0ff2)if(_0x5e6c28['bPHRd'](_0x5c5f76[_0x428db4(0x1d6)],null)&&_0x5e6c28['tXQls'](_0x5c5f76[_0x428db4(0x271)],null))return _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28['tPyqe'],'text':_0x428db4(0x128)+_0x5c5f76[_0x428db4(0x205)]+'\x22'}),_0x562867['redirect'](_0x5920ae);for(const _0x5ab1a6 of _0x4c0ff2)if(_0x5e6c28['FCAnA'](_0x5ab1a6['triggerMin'],null)&&_0x5e6c28['JxUoo'](_0x5ab1a6[_0x428db4(0x271)],null)&&_0x5e6c28[_0x428db4(0x211)](_0x5ab1a6['triggerMin'],_0x5ab1a6[_0x428db4(0x271)]))return _0x4cc8a5['flash'](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0x289)],'text':'ค่า\x20Min\x20ต้องน้อยกว่า\x20Max\x20สำหรับคีย์\x20\x22'+_0x5ab1a6['triggerKey']+'\x22'}),_0x562867[_0x428db4(0x20b)](_0x5920ae);const _0x473623=new _0x451a31(global[_0x428db4(0x28c)]);try{if(_0x5e6c28[_0x428db4(0x188)](_0x5e6c28[_0x428db4(0x1a3)],_0x5e6c28['OAwfU'])){if(_0x50c747)return _0x3c921c;else ylwlpR[_0x428db4(0x112)](_0x49aade,0x0);}else{await _0x473623[_0x428db4(0x236)]();const _0x32ac9a=_0x473623['db'](global[_0x428db4(0xf7)])[_0x428db4(0x130)](global[_0x428db4(0x265)]);if(_0xee1ed0){if(_0x5e6c28['JxUoo'](_0x5e6c28[_0x428db4(0x15c)],_0x5e6c28[_0x428db4(0x151)])){var _0x1e9589=await _0x32ac9a[_0x428db4(0x19c)]({'_id':{'$ne':new _0x244b4b(_0xee1ed0)},'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x34c6a8+'$','i')}},{'deviceId':_0x3e6cdd}]});if(_0x1e9589)return _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28['tPyqe'],'text':_0x5e6c28[_0x428db4(0x20d)]}),_0x562867[_0x428db4(0x20b)](_0x5920ae);const _0x22e326=await _0x32ac9a[_0x428db4(0x19c)]({'_id':new _0x244b4b(_0xee1ed0)}),_0xa696d4={'$set':_0x4cc8a5[_0x428db4(0x1ff)]},_0x2b6a52=await _0x32ac9a['updateOne']({'_id':new _0x244b4b(_0xee1ed0)},_0xa696d4,{'upsert':!0x1});if(_0x2b6a52[_0x428db4(0x224)]&&_0x5e6c28['EGauN'](_0x2b6a52[_0x428db4(0x284)],0x1)){if(_0x5e6c28['FzuHo'](_0x5e6c28[_0x428db4(0x167)],_0x5e6c28[_0x428db4(0x167)]))_0x278f9d[_0x428db4(0x253)]();else{const _0x4c2c90=T[_0x428db4(0x13e)](_0x4cc8a5);let _0x1a5f8f=_0x428db4(0x27e)+_0x3e6cdd+_0x428db4(0x264);const _0x84618c=L[_0x428db4(0x1a8)](_0x22e326,_0x4cc8a5[_0x428db4(0x1ff)]);if(_0x84618c&&_0x5e6c28[_0x428db4(0x24f)](_0x84618c[_0x428db4(0x255)],0x0)){if(_0x5e6c28[_0x428db4(0x272)](_0x5e6c28['kwfNV'],_0x5e6c28[_0x428db4(0x165)])){if(_0x6032){const _0x56705a=_0x37a892['apply'](_0x3a7d1d,arguments);return _0x7bc7c5=null,_0x56705a;}}else{const _0x34579f={'dateTime':D[_0x428db4(0x15d)](),'userId':_0x4c2c90['userId'],'userFullname':_0x4c2c90['userFullname'],'changes':_0x84618c};await _0x32ac9a[_0x428db4(0x29d)]({'deviceId':_0x3e6cdd},{'$push':{'changesHistory':{'$each':[_0x34579f],'$position':0x0}}}),_0x1a5f8f+=_0x5e6c28[_0x428db4(0x198)];}}return _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0x19f)],'text':_0x1a5f8f}),_0x562867[_0x428db4(0x20b)](_0x5920ae);}}else return _0x2b6a52['acknowledged']&&(_0x5e6c28[_0x428db4(0x1a1)](_0x2b6a52[_0x428db4(0x284)],0x1)||_0x5e6c28[_0x428db4(0x1a1)](_0x2b6a52['upsertedCount'],0x1))?(_0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0xf9)],'text':'\x22'+_0x3e6cdd+_0x428db4(0x1ee)}),_0x562867[_0x428db4(0x20b)](_0x5920ae)):(_0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0x289)],'text':new Error(_0x5e6c28[_0x428db4(0x1e8)])+_0x428db4(0x1bc)+_0x3e6cdd+'\x22'}),_0x562867[_0x428db4(0x20b)](_0x5920ae));}else{const _0x2fb3ec=_0x46daaa?function(){const _0x32a3a5=_0x428db4;if(_0x52b00a){const _0x12f4f1=_0x164c76[_0x32a3a5(0x10b)](_0x480c0b,arguments);return _0x2ca299=null,_0x12f4f1;}}:function(){};return _0x3b8651=![],_0x2fb3ec;}}else{if(_0x5e6c28[_0x428db4(0x272)](_0x5e6c28[_0x428db4(0x13b)],_0x5e6c28[_0x428db4(0x13b)])){if(await _0x32ac9a[_0x428db4(0x19c)]({'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x34c6a8+'$','i')}},{'deviceId':_0x3e6cdd}]}))return _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28['dRKUj'],{'class':_0x5e6c28[_0x428db4(0x289)],'text':_0x5e6c28[_0x428db4(0x1af)]}),_0x562867[_0x428db4(0x20b)](_0x5920ae);_0x4cc8a5[_0x428db4(0x1ff)][_0x428db4(0x14b)]=D[_0x428db4(0x15d)](0x5a0);const _0x47655d=await _0x32ac9a[_0x428db4(0x21a)](_0x4cc8a5[_0x428db4(0x1ff)]);if(_0x47655d[_0x428db4(0x224)]&&_0x47655d[_0x428db4(0x176)]){if(_0x5e6c28[_0x428db4(0xec)](_0x5e6c28['VwUmY'],_0x5e6c28['LLlSY'])){if(_0x478323){const _0x520378=_0x5eee10[_0x428db4(0x10b)](_0x50c81f,arguments);return _0x863e7a=null,_0x520378;}}else{const _0x3660e9=b+_0x428db4(0xeb)+_0xec8af+_0x428db4(0x11f)+_0x246454+_0x428db4(0x298)+_0x896acf+'&load_id='+_0x47655d[_0x428db4(0x176)];return _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0x19f)],'text':_0x428db4(0x229)+_0x3e6cdd+'\x22\x20เรียบร้อยแล้ว'}),_0x562867[_0x428db4(0x20b)](_0x3660e9);}}else _0x4cc8a5[_0x428db4(0x225)](_0x5e6c28[_0x428db4(0x28a)],{'class':_0x5e6c28[_0x428db4(0x289)],'text':'เกิดข้อผิดพลาดขณะเพิ่มอุปกรณ์\x20\x22'+_0x3e6cdd+'\x22'}),_0x562867[_0x428db4(0x20b)](_0xda432e);}else _0x2050b4[_0x428db4(0x147)](_0x2b7740[_0x428db4(0x1ec)]({'isAddTrigger':!0x1,'class':_0x5e6c28[_0x428db4(0x289)],'msg':_0x112175['message']}));}}}catch(_0x84748f){if(_0x5e6c28[_0x428db4(0x19a)](_0x5e6c28[_0x428db4(0x11c)],_0x5e6c28[_0x428db4(0x1ba)]))console[_0x428db4(0x16e)](_0x5e6c28[_0x428db4(0x251)],_0x84748f),_0x562867['status'](0x194)[_0x428db4(0x1a7)](file404);else{const _0x197a62=_0x276ded[_0x428db4(0x10b)](_0xfbd1f3,arguments);return _0x3ffa92=null,_0x197a62;}}finally{if(_0x5e6c28[_0x428db4(0x29b)](_0x5e6c28[_0x428db4(0x153)],_0x5e6c28[_0x428db4(0x11e)])){const _0x32ac13=_0x41a729[_0x428db4(0x1f6)];_0x24c679=_0x4dbf59['filter'](_0x27d645=>{const _0x35c49e=_0x428db4,_0x67c1b=_0x5e6c28[_0x35c49e(0x252)](_0x27d645[_0x35c49e(0x192)],'A')||_0x5e6c28[_0x35c49e(0x1dc)](_0x27d645[_0x35c49e(0x1f6)],_0x32ac13);return _0x5e6c28['FCAnA'](_0x27d645[_0x35c49e(0x192)],'O')&&_0x67c1b;});}else _0x473623[_0x428db4(0x253)]();}}),v[_0x169192(0x27b)](P,_0x134aab['isOA'],async(_0x58289d,_0x2ccd33)=>{const _0x1fb0b3=_0x169192,_0xb2ca6d={'FKvSk':_0x1fb0b3(0x263),'SkjVI':_0x1fb0b3(0x256),'MrpTm':_0x1fb0b3(0x208),'MsNHF':function(_0x2ebea6,_0x595e1d){return _0x2ebea6(_0x595e1d);},'KwyVh':function(_0x1278ab,_0x152b99){return _0x1278ab!==_0x152b99;},'rswGE':_0x1fb0b3(0x21f),'VrFZC':_0x1fb0b3(0x1e3),'AFAbZ':'Not\x20Found','kEOCP':function(_0x370d9d,_0x14aed7){return _0x370d9d===_0x14aed7;},'ZRhZw':'fhqtG','tWuOU':function(_0x120ad7,_0x5c6e14){return _0x120ad7===_0x5c6e14;},'iEZMm':_0x1fb0b3(0x124),'gMDBm':_0x1fb0b3(0x28d)},_0x3a38ef=_0x58289d[_0x1fb0b3(0x1ff)][_0x1fb0b3(0x26e)],_0x2e3176=_0x58289d[_0x1fb0b3(0x1ff)][_0x1fb0b3(0x105)],_0x2e94f5=_0xb2ca6d[_0x1fb0b3(0x1cd)](Number,_0x58289d['body'][_0x1fb0b3(0x1f4)])||0x14,_0x500967=_0xb2ca6d[_0x1fb0b3(0x1cd)](Number,_0x58289d['body'][_0x1fb0b3(0x1cb)])||0x1,_0x3cf1c6=b+_0x1fb0b3(0xeb)+_0x2e3176+_0x1fb0b3(0x11f)+_0x2e94f5+'&page='+_0x500967+_0x1fb0b3(0x22d)+_0x3a38ef,_0x289fc0=new _0x451a31(dbUrl);try{if(_0xb2ca6d['KwyVh'](_0xb2ca6d[_0x1fb0b3(0x26b)],_0xb2ca6d[_0x1fb0b3(0x119)]))return await _0x289fc0['db'](global['dbName'])[_0x1fb0b3(0x130)](global[_0x1fb0b3(0x265)])[_0x1fb0b3(0x19c)]({'_id':new _0x244b4b(_0x3a38ef)},{'projection':{'changesHistory':0x0}})?_0x58289d[_0x1fb0b3(0x225)](_0xb2ca6d[_0x1fb0b3(0x177)],null):_0x58289d[_0x1fb0b3(0x225)](_0xb2ca6d[_0x1fb0b3(0x177)],{'class':_0xb2ca6d['MrpTm'],'text':new Error(_0xb2ca6d[_0x1fb0b3(0x270)])+'{{sep}}\x22'+_0x3a38ef+'\x22'}),_0x2ccd33[_0x1fb0b3(0x20b)](_0x3cf1c6);else _0x4fab1c[_0x1fb0b3(0x253)]();}catch(_0x344707){return _0xb2ca6d['kEOCP'](_0xb2ca6d[_0x1fb0b3(0x25e)],_0xb2ca6d[_0x1fb0b3(0x25e)])?(console[_0x1fb0b3(0x16e)](_0x344707[_0x1fb0b3(0x180)]),_0x58289d[_0x1fb0b3(0x225)](_0xb2ca6d['SkjVI'],{'class':_0xb2ca6d['MrpTm'],'text':''+_0x344707[_0x1fb0b3(0x180)]}),_0x2ccd33['redirect'](_0x3cf1c6)):(_0x38a857[_0x1fb0b3(0x16e)](_0xb2ca6d[_0x1fb0b3(0xe6)],_0x80e7cd),_0x587323['flash'](_0xb2ca6d[_0x1fb0b3(0x177)],{'class':_0xb2ca6d[_0x1fb0b3(0x16f)],'text':_0x207d47[_0x1fb0b3(0x180)]}),_0x565f42[_0x1fb0b3(0x20b)](_0x52c5ed));}finally{if(_0xb2ca6d[_0x1fb0b3(0x297)](_0xb2ca6d[_0x1fb0b3(0x12f)],_0xb2ca6d[_0x1fb0b3(0x243)])){const _0x4f314e=_0x3a80f9['constructor']['prototype']['bind'](_0x32550a),_0x295de5=_0x150e30[_0x218636],_0x592352=_0x54048f[_0x295de5]||_0x4f314e;_0x4f314e[_0x1fb0b3(0x20f)]=_0x27934c['bind'](_0x5568af),_0x4f314e['toString']=_0x592352['toString']['bind'](_0x592352),_0x1c376c[_0x295de5]=_0x4f314e;}else _0x289fc0['close']();}}),v[_0x169192(0x27b)](R,_0x134aab[_0x169192(0x245)],async(_0x3d37ac,_0x360a5a)=>{const _0x1449a2=_0x169192,_0x24f8a2={'flRFn':'function\x20*\x5c(\x20*\x5c)','toFFx':_0x1449a2(0x1fb),'qgXEG':function(_0x2d38e5,_0xf0286b){return _0x2d38e5(_0xf0286b);},'WPpGi':_0x1449a2(0x10e),'XdCwH':function(_0x120918,_0x5bbea7){return _0x120918+_0x5bbea7;},'gNSYS':_0x1449a2(0x24e),'eqqYL':function(_0x4817dd,_0x1a4663){return _0x4817dd+_0x1a4663;},'RhRoP':'input','WfGFq':function(_0x5c65c5){return _0x5c65c5();},'STWCG':function(_0x5412d0,_0x398ef5,_0x420f98){return _0x5412d0(_0x398ef5,_0x420f98);},'MnxHt':function(_0x241220,_0x2bf4c8){return _0x241220(_0x2bf4c8);},'uTwbi':function(_0x2cadc9,_0x263d67){return _0x2cadc9(_0x263d67);},'YTurv':function(_0x564417,_0x16c106){return _0x564417(_0x16c106);},'mcGzH':function(_0x57ef01,_0x4182cb){return _0x57ef01!=_0x4182cb;},'XTQDv':function(_0x3946c0,_0x357172){return _0x3946c0===_0x357172;},'UXzQO':_0x1449a2(0x28f),'nQiOZ':_0x1449a2(0xe1),'qRocz':_0x1449a2(0x1f6),'RDtob':function(_0x32c45e,_0x22ef57){return _0x32c45e!==_0x22ef57;},'sJQAt':'wXkje','ikCtQ':_0x1449a2(0x228),'SnXxy':_0x1449a2(0x256),'zeKtp':_0x1449a2(0x208),'fqcmE':function(_0x1ec1a3,_0x3664fc){return _0x1ec1a3!==_0x3664fc;},'UUVTy':_0x1449a2(0x195),'DbQXu':function(_0x517ce1,_0x560c49){return _0x517ce1>_0x560c49;},'FPFoV':_0x1449a2(0x239),'CfrXH':_0x1449a2(0x1e0),'UUjHK':function(_0x272a2a,_0x2c2c23){return _0x272a2a!==_0x2c2c23;},'reZkp':_0x1449a2(0x110),'ZYpxT':_0x1449a2(0x263),'chriB':function(_0x36a4b4,_0x40985a){return _0x36a4b4===_0x40985a;},'RlGZk':_0x1449a2(0x17e)};let {_id_toDelete:_0x5af6db,load_id:_0xf22e56,sip:_0x58f1fa,Id_toDelete:_0x39ecc4}=_0x3d37ac['body'];const _0x7f763b=_0x24f8a2['MnxHt'](Number,_0x3d37ac[_0x1449a2(0x1ff)]['rpp'])||0x14,_0x295b8f=_0x24f8a2['uTwbi'](Number,_0x3d37ac[_0x1449a2(0x1ff)][_0x1449a2(0x1cb)])||0x1;_0x39ecc4=_0x24f8a2[_0x1449a2(0x29a)](Number,_0x39ecc4);const _0x1b15c7=_0x5af6db&&_0x24f8a2['mcGzH'](_0x5af6db,_0xf22e56)?_0x1449a2(0x22d)+_0x5af6db:'',_0x11cc46=b+'?sip='+_0x58f1fa+'&rpp='+_0x7f763b+_0x1449a2(0x298)+_0x295b8f+_0x1b15c7,_0x2b8d99=new _0x451a31(global['dbUrl']);try{if(_0x24f8a2[_0x1449a2(0x145)](_0x24f8a2['UXzQO'],_0x24f8a2['nQiOZ']))return _0x22986c;else{await _0x2b8d99[_0x1449a2(0x236)]();const _0x5594e8=_0x2b8d99['db'](global['dbName']),_0x3ed136=_0x5594e8[_0x1449a2(0x130)](global[_0x1449a2(0x265)]),_0x474f56=[{'coll':_0x5594e8['collection'](global[_0x1449a2(0x185)]),'name':global[_0x1449a2(0x185)],'key':_0x24f8a2['qRocz']}];for(const {coll:_0x2e81d9,name:_0x543fea,key:_0x1e9353}of _0x474f56){if(_0x24f8a2['RDtob'](_0x24f8a2[_0x1449a2(0x23d)],_0x24f8a2[_0x1449a2(0x26a)])){const _0x3212c8={};if(_0x3212c8[_0x1e9353]=_0x39ecc4,await _0x2e81d9[_0x1449a2(0x19c)](_0x3212c8))return await _0x3ed136[_0x1449a2(0x29d)]({'deviceId':_0x39ecc4},{'$set':{'canDelete':!0x1}}),_0x3d37ac[_0x1449a2(0x225)](_0x24f8a2[_0x1449a2(0x26d)],{'class':_0x24f8a2[_0x1449a2(0x1d3)],'text':_0x1449a2(0x244)+_0x39ecc4+_0x1449a2(0xea)+_0x543fea+'{{sep}}ไม่สามารถลบได้'}),_0x360a5a[_0x1449a2(0x20b)](_0x11cc46);}else _0x1c0adf[_0x1449a2(0x253)]();}if(_0x24f8a2[_0x1449a2(0x145)]((await _0x3ed136[_0x1449a2(0x17a)]({'_id':new _0x244b4b(_0x5af6db)}))[_0x1449a2(0x248)],0x1)){if(_0x24f8a2[_0x1449a2(0xff)](_0x24f8a2['UUVTy'],_0x24f8a2[_0x1449a2(0x17f)])){const _0x2d62b2=_0x32a1dd?function(){if(_0x506ea5){const _0x2443f8=_0x32df3c['apply'](_0x1e9cd6,arguments);return _0x445e19=null,_0x2443f8;}}:function(){};return _0x1f3739=![],_0x2d62b2;}else{const _0x3d41dc=await _0x5594e8[_0x1449a2(0x130)](global['dbColl_sessions'])['deleteMany']({'session.user_id':_0x5af6db});if(_0x3d41dc[_0x1449a2(0x224)]&&_0x24f8a2[_0x1449a2(0xef)](_0x3d41dc[_0x1449a2(0x248)],0x0))var _0x330efb='{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22'+_0x3d41dc[_0x1449a2(0x248)]+_0x1449a2(0x187);else var _0x330efb=_0x24f8a2[_0x1449a2(0x27f)];_0x3d37ac[_0x1449a2(0x225)](_0x24f8a2['SnXxy'],{'class':_0x24f8a2[_0x1449a2(0x1be)],'text':_0x1449a2(0xed)+_0x39ecc4+_0x1449a2(0x264)+_0x330efb});}}else _0x3d37ac[_0x1449a2(0x225)](_0x24f8a2['SnXxy'],{'class':_0x24f8a2[_0x1449a2(0x1d3)],'text':'ไม่พบ\x20\x22'+_0x39ecc4+'\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)'});return _0x360a5a[_0x1449a2(0x20b)](_0x11cc46);}}catch(_0x9b1e87){if(_0x24f8a2[_0x1449a2(0x274)](_0x24f8a2['reZkp'],_0x24f8a2['reZkp'])){const _0xf306ed={'KHvfC':IWIuHm['flRFn'],'oqVLP':IWIuHm['toFFx'],'nttck':function(_0x47405b,_0x31476b){const _0x64ed01=_0x1449a2;return IWIuHm[_0x64ed01(0x123)](_0x47405b,_0x31476b);},'RXKjR':IWIuHm[_0x1449a2(0x1f7)],'BqIzr':function(_0x4e13eb,_0x1039cc){const _0x42d443=_0x1449a2;return IWIuHm[_0x42d443(0x1df)](_0x4e13eb,_0x1039cc);},'AnxEm':IWIuHm['gNSYS'],'FiwVC':function(_0x29f392,_0x53eb6e){const _0x3e9c31=_0x1449a2;return IWIuHm[_0x3e9c31(0x149)](_0x29f392,_0x53eb6e);},'nDBll':IWIuHm['RhRoP'],'fHRuh':function(_0x44c5a5,_0x55a1b1){const _0x5ba0e5=_0x1449a2;return IWIuHm[_0x5ba0e5(0x123)](_0x44c5a5,_0x55a1b1);},'DPvTY':function(_0x4f2f41){const _0x2aa902=_0x1449a2;return IWIuHm[_0x2aa902(0x1de)](_0x4f2f41);}};IWIuHm[_0x1449a2(0x232)](_0x2f6e54,this,function(){const _0x1eb621=_0x1449a2,_0x51ab04=new _0x205794(_0xf306ed[_0x1eb621(0x15e)]),_0x51ff7b=new _0x4dede6(_0xf306ed[_0x1eb621(0x210)],'i'),_0x242829=_0xf306ed[_0x1eb621(0x143)](_0x213cea,_0xf306ed[_0x1eb621(0x1a2)]);!_0x51ab04['test'](_0xf306ed[_0x1eb621(0x127)](_0x242829,_0xf306ed['AnxEm']))||!_0x51ff7b[_0x1eb621(0x1f1)](_0xf306ed[_0x1eb621(0x221)](_0x242829,_0xf306ed[_0x1eb621(0xf2)]))?_0xf306ed[_0x1eb621(0x136)](_0x242829,'0'):_0xf306ed[_0x1eb621(0x219)](_0x3cd4f0);})();}else return console['log'](_0x24f8a2[_0x1449a2(0x1da)],_0x9b1e87),_0x3d37ac['flash'](_0x24f8a2[_0x1449a2(0x26d)],{'class':_0x24f8a2[_0x1449a2(0x1d3)],'text':_0x9b1e87[_0x1449a2(0x180)]}),_0x360a5a['redirect'](_0x11cc46);}finally{if(_0x24f8a2[_0x1449a2(0x242)](_0x24f8a2[_0x1449a2(0x172)],_0x24f8a2[_0x1449a2(0x172)]))_0x2b8d99[_0x1449a2(0x253)]();else return![];}}),v[_0x169192(0x27b)](F,_0x134aab['isOA'],async(_0x9c082b,_0x17375d)=>{const _0xa14c6d=_0x169192,_0x2e9f29={'fJGBm':function(_0x5ce03e,_0x3ae31a){return _0x5ce03e<_0x3ae31a;},'NmFek':_0xa14c6d(0x256),'POnHW':'red','NcBeh':'มีคีย์ที่เลือกซ้ำกัน','cbnet':function(_0x514f35,_0x5c3ebc){return _0x514f35<=_0x5c3ebc;},'rpbPk':function(_0x4263a7,_0x514b3c){return _0x4263a7-_0x514b3c;},'ODUer':function(_0x2cc54e,_0xda592c){return _0x2cc54e(_0xda592c);},'aywzw':function(_0x28da80,_0x3890bc){return _0x28da80(_0x3890bc);},'IOrpJ':_0xa14c6d(0x1e0),'oPBCQ':_0xa14c6d(0x1e4),'gQwxF':_0xa14c6d(0x1fb),'DllCj':_0xa14c6d(0x10e),'ZkENp':function(_0xc6b20e,_0x2f98e2){return _0xc6b20e+_0x2f98e2;},'XCguq':_0xa14c6d(0x24e),'athJW':function(_0x34ff4a,_0x430559){return _0x34ff4a+_0x430559;},'sJCQi':_0xa14c6d(0x12d),'amufQ':function(_0x153540){return _0x153540();},'lhjTm':function(_0x340d43,_0xddf50e){return _0x340d43!==_0xddf50e;},'izLcr':_0xa14c6d(0x235),'POWBc':function(_0x318226,_0x53b8d3){return _0x318226==_0x53b8d3;},'aZHAF':_0xa14c6d(0x286),'GTdtU':'print_devices.ejs','eEKuv':_0xa14c6d(0x14e),'JZWXI':function(_0x123be1,_0x79839){return _0x123be1!==_0x79839;},'bEftQ':_0xa14c6d(0x18b),'GUIuE':_0xa14c6d(0x1c7),'WAucR':_0xa14c6d(0x263),'UQkcd':_0xa14c6d(0x1bb)},{_idArr:_0x3237be}=_0x9c082b[_0xa14c6d(0x1ff)],_0x46c8e9=new _0x451a31(dbUrl);try{if(_0x2e9f29[_0xa14c6d(0x227)](_0x2e9f29[_0xa14c6d(0x101)],_0x2e9f29[_0xa14c6d(0x101)])){const _0x56a01d=_0x27edf8[_0xa14c6d(0x1ff)][_0xa14c6d(0x291)],_0x28d68f=_0x19ec89[_0xa14c6d(0x1ff)][_0xa14c6d(0x205)],_0x22416a=_0x5791ef[_0xa14c6d(0x1ff)][_0xa14c6d(0x1d6)],_0x106bc5=_0x1199db[_0xa14c6d(0x1ff)][_0xa14c6d(0x271)];if(_0x2e9f29[_0xa14c6d(0xe8)](new _0x4ac78b(_0x28d68f)[_0xa14c6d(0x175)],_0x28d68f[_0xa14c6d(0x255)]))return _0x548b95['flash'](_0x2e9f29[_0xa14c6d(0x23f)],{'class':_0x2e9f29[_0xa14c6d(0xfb)],'text':_0x2e9f29['NcBeh']}),_0x5d2cb1[_0xa14c6d(0x20b)](_0x1434e6);for(let _0x56ea65=0x0;_0x2e9f29[_0xa14c6d(0x287)](_0x56ea65,_0x2e9f29[_0xa14c6d(0x1f9)](_0x1b4c37,0x1));_0x56ea65++)_0x15855c[_0xa14c6d(0x268)]({'triggerStatus':_0x56a01d[_0x56ea65],'triggerKey':_0x28d68f[_0x56ea65],'triggerMin':_0x22416a[_0x56ea65]?_0x2e9f29[_0xa14c6d(0x12e)](_0x4594f9,_0x22416a[_0x56ea65]):null,'triggerMax':_0x106bc5[_0x56ea65]?_0x2e9f29[_0xa14c6d(0x166)](_0x657b85,_0x106bc5[_0x56ea65]):null});}else{await _0x46c8e9[_0xa14c6d(0x236)]();const _0x3ab7fd=await _0x46c8e9['db'](global['dbName'])[_0xa14c6d(0x130)](global['dbColl_devices'])['aggregate']([{'$match':{'_id':{'$in':_0x3237be[_0xa14c6d(0x25d)](_0x4f4ddc=>new _0x244b4b(_0x4f4ddc))}}}])['toArray']();if(_0x2e9f29[_0xa14c6d(0x1c0)](_0x3ab7fd[_0xa14c6d(0x255)],0x0))return _0x17375d[_0xa14c6d(0x147)](JSON[_0xa14c6d(0x1ec)]({'isPrint':!0x1,'class':_0x2e9f29['POnHW'],'msg':_0x2e9f29[_0xa14c6d(0xfa)]}));const _0x35ce92=_0x1ad236['join'](global[_0xa14c6d(0x1f2)],_0x2e9f29[_0xa14c6d(0x19e)]),_0xb6f6fa=_0x3cec55[_0xa14c6d(0x1aa)](_0x35ce92,_0x2e9f29[_0xa14c6d(0x158)]),_0x4323d1=_0x5855da[_0xa14c6d(0x216)](_0xb6f6fa,{'time':D[_0xa14c6d(0x1c5)](),'title':_0xa14c6d(0x19d)+_0x3ab7fd[_0xa14c6d(0x255)]+')','dateTime':D[_0xa14c6d(0x15d)](),'devicesFind':_0x3ab7fd});_0x17375d[_0xa14c6d(0x147)](JSON[_0xa14c6d(0x1ec)]({'isPrint':!0x0,'class':_0x2e9f29[_0xa14c6d(0x199)],'msg':'พิมพ์ข้อมูล\x20'+_0x3ab7fd[_0xa14c6d(0x255)]+_0xa14c6d(0x186),'htmlPage':_0x4323d1}));}}catch(_0x5930af){if(_0x2e9f29['JZWXI'](_0x2e9f29[_0xa14c6d(0xfd)],_0x2e9f29[_0xa14c6d(0x1e1)]))console[_0xa14c6d(0x16e)](_0x2e9f29[_0xa14c6d(0x17d)],_0x5930af[_0xa14c6d(0x180)]),_0x17375d['send'](JSON[_0xa14c6d(0x1ec)]({'isPrint':!0x1,'class':_0x2e9f29[_0xa14c6d(0xfb)],'msg':_0x5930af['message']}));else{const _0xc2c9c5=_0x275d30+_0xa14c6d(0xeb)+_0x1adc97+_0xa14c6d(0x11f)+_0x1eb0a3+'&page='+_0x57e9eb+_0xa14c6d(0x22d)+_0x3a4238[_0xa14c6d(0x176)];return _0x37ecca[_0xa14c6d(0x225)](_0x2e9f29[_0xa14c6d(0x23f)],{'class':_0x2e9f29['IOrpJ'],'text':'เพิ่มอุปกรณ์\x20\x22'+_0x35f447+'\x22\x20เรียบร้อยแล้ว'}),_0x5dd9f9[_0xa14c6d(0x20b)](_0xc2c9c5);}}finally{if(_0x2e9f29[_0xa14c6d(0x227)](_0x2e9f29[_0xa14c6d(0x18d)],_0x2e9f29[_0xa14c6d(0x18d)])){const _0x467665=new _0x47638b(ErmpXl['oPBCQ']),_0x58be34=new _0x3f60cd(ErmpXl[_0xa14c6d(0x16c)],'i'),_0x5b638b=ErmpXl[_0xa14c6d(0x12e)](_0x4cdf6f,ErmpXl[_0xa14c6d(0x1ef)]);!_0x467665[_0xa14c6d(0x1f1)](ErmpXl[_0xa14c6d(0x249)](_0x5b638b,ErmpXl[_0xa14c6d(0x154)]))||!_0x58be34['test'](ErmpXl['athJW'](_0x5b638b,ErmpXl[_0xa14c6d(0x250)]))?ErmpXl['ODUer'](_0x5b638b,'0'):ErmpXl[_0xa14c6d(0x10a)](_0x43ae88);}else _0x46c8e9['close']();}}),v[_0x169192(0x27b)](U,_0x134aab[_0x169192(0x245)],async(_0x36ee13,_0x1b2999)=>{const _0x35a9a5=_0x169192,_0x639dd7={'fCGis':_0x35a9a5(0x208),'IDMkW':_0x35a9a5(0x197),'wxidM':function(_0x5b75d6,_0x2f8337){return _0x5b75d6===_0x2f8337;},'SZzug':_0x35a9a5(0x16a),'NWDsX':_0x35a9a5(0x11a),'DYiPz':function(_0x113813,_0x60bcf1){return _0x113813<_0x60bcf1;},'HxNKE':_0x35a9a5(0x1d4),'JPQjV':_0x35a9a5(0x171),'XnjqD':'changes_device.ejs','VOsIz':'green','WquLF':function(_0x44a319,_0x277670){return _0x44a319===_0x277670;},'APbyf':_0x35a9a5(0x193),'WYsDm':_0x35a9a5(0x263),'TzSZf':function(_0x8157ec,_0x30a00d){return _0x8157ec!==_0x30a00d;},'hWnUf':_0x35a9a5(0x168),'jcnCC':'UwlDQ'};let {deviceId:_0x15b76a}=_0x36ee13[_0x35a9a5(0x1ff)];const _0x2d63cd=new _0x451a31(global['dbUrl']);try{if(_0x639dd7[_0x35a9a5(0x292)](_0x639dd7[_0x35a9a5(0x150)],_0x639dd7['NWDsX']))_0x5423dc[_0x35a9a5(0x253)]();else{await _0x2d63cd[_0x35a9a5(0x236)]();var _0x5bb131=await _0x2d63cd['db'](global[_0x35a9a5(0xf7)])['collection'](global['dbColl_devices'])[_0x35a9a5(0x19c)]({'deviceId':_0x15b76a});if(!_0x5bb131)return _0x1b2999[_0x35a9a5(0x147)](JSON['stringify']({'isPrint':!0x1,'class':_0x639dd7[_0x35a9a5(0x141)],'msg':_0x35a9a5(0x189)+_0x15b76a+'\x22'}));const _0x37f881=_0x5bb131['changesHistory']||[];if(_0x639dd7[_0x35a9a5(0x23b)](_0x37f881[_0x35a9a5(0x255)],0x1))return _0x1b2999[_0x35a9a5(0x147)](JSON[_0x35a9a5(0x1ec)]({'isPrint':!0x1,'class':_0x639dd7[_0x35a9a5(0x25f)],'msg':_0x639dd7[_0x35a9a5(0x107)]}));const _0x4f25d6=_0x1ad236[_0x35a9a5(0x11b)](folderForms,_0x639dd7['XnjqD']),_0x282cbb=await C['renderView'](_0x4f25d6,_0x1b2999,{'title':_0x35a9a5(0x142)+_0x5bb131[_0x35a9a5(0x1f6)]+']\x20'+_0x5bb131['deviceName'],'time':D['getDateTime'](),'changesHistory':_0x37f881});_0x1b2999['send'](JSON[_0x35a9a5(0x1ec)]({'isPrint':!0x0,'class':_0x639dd7[_0x35a9a5(0x260)],'htmlPage':_0x282cbb}));}}catch(_0x2cfa29){_0x639dd7[_0x35a9a5(0x21b)](_0x639dd7[_0x35a9a5(0x1a9)],_0x639dd7['APbyf'])?(console[_0x35a9a5(0x16e)](_0x639dd7[_0x35a9a5(0x1d9)],_0x2cfa29),_0x1b2999[_0x35a9a5(0x147)](JSON[_0x35a9a5(0x1ec)]({'isPrint':!0x1,'class':_0x639dd7[_0x35a9a5(0x141)],'msg':_0x2cfa29[_0x35a9a5(0x180)]}))):(_0x149fb7[_0x35a9a5(0x16e)](_0x49a904),_0x32323d[_0x35a9a5(0x147)](_0x371694[_0x35a9a5(0x1ec)]({'isFetch':!0x1,'msg':_0x5e3fd4[_0x35a9a5(0x180)],'class':_0x639dd7['fCGis'],'data':[],'msg':_0x639dd7[_0x35a9a5(0x113)]})));}finally{_0x639dd7['TzSZf'](_0x639dd7[_0x35a9a5(0xf6)],_0x639dd7['jcnCC'])?_0x2d63cd[_0x35a9a5(0x253)]():_0x17973c[_0x35a9a5(0x253)]();}}),v[_0x169192(0x201)](H,_0x134aab['isOA'],async(_0x56fe37,_0x3b4995)=>{const _0x24418e=_0x169192,_0x455fad={'TMVsS':_0x24418e(0x16d),'pLnlD':_0x24418e(0x1e0),'kjsTv':_0x24418e(0x133),'DXrlI':'red','BQYjk':_0x24418e(0x197)},_0x1d733f=new _0x451a31(global['dbUrl']);try{const _0xe402d8=_0x1d733f['db'](global[_0x24418e(0xf7)]),_0xbddf9f=new RegExp(_0x455fad[_0x24418e(0x282)],'i'),_0x34727c=(await _0xe402d8[_0x24418e(0x135)]()[_0x24418e(0x226)]())[_0x24418e(0x25d)](_0x11163f=>_0x11163f[_0x24418e(0x26f)])[_0x24418e(0x1db)](_0x2a0af6=>_0xbddf9f['test'](_0x2a0af6))[_0x24418e(0x122)](),_0x1ec9ad=(await _0xe402d8[_0x24418e(0x130)](global['dbColl_devices'])[_0x24418e(0x281)]({})[_0x24418e(0x226)]())[_0x24418e(0x25d)](_0x5eda43=>_0x5eda43[_0x24418e(0x1f6)]),_0x3bc220=_0x34727c[_0x24418e(0x1db)](_0x42c9ee=>!_0x1ec9ad['includes'](_0x42c9ee));_0x3b4995[_0x24418e(0x147)](JSON[_0x24418e(0x1ec)]({'isFetch':!0x0,'msg':'โหลดข้อมูลอุปกรณ์\x20'+_0x34727c[_0x24418e(0x255)]+'\x20คอลเล็กชัน','class':_0x455fad[_0x24418e(0x1cf)],'colls_devices':_0x3bc220,'msg':_0x455fad[_0x24418e(0x139)]}));}catch(_0x348e00){console[_0x24418e(0x16e)](_0x348e00),_0x3b4995[_0x24418e(0x147)](JSON[_0x24418e(0x1ec)]({'isFetch':!0x1,'msg':_0x348e00[_0x24418e(0x180)],'class':_0x455fad[_0x24418e(0x1c8)],'data':[],'msg':_0x455fad[_0x24418e(0x28b)]}));}finally{_0x1d733f[_0x24418e(0x253)]();}}),v[_0x169192(0x27b)](j,_0x134aab[_0x169192(0x245)],async(_0x2186df,_0x15d34a)=>{const _0x460b73=_0x169192,_0x3d8a28={'UqyES':function(_0xa4ea64,_0x418adb){return _0xa4ea64===_0x418adb;},'Fplzg':'red','RGKbR':_0x460b73(0x200),'mernG':_0x460b73(0x266),'swDZB':_0x460b73(0x1e0)},_0x220fe7=_0x2186df['body'][_0x460b73(0x1f6)];if(!_0x220fe7||_0x3d8a28[_0x460b73(0x262)](_0x220fe7[_0x460b73(0xf5)](),''))return _0x15d34a[_0x460b73(0x147)](JSON['stringify']({'isAddTrigger':!0x1,'class':_0x3d8a28[_0x460b73(0x18a)],'msg':_0x3d8a28[_0x460b73(0x246)]}));if(!new RegExp(global[_0x460b73(0x1b8)])['test'](_0x220fe7))return _0x15d34a['send'](JSON[_0x460b73(0x1ec)]({'isAddTrigger':!0x1,'class':_0x3d8a28[_0x460b73(0x18a)],'msg':_0x460b73(0xfe)+global[_0x460b73(0x277)]}));const _0xd1e546=new _0x451a31(global[_0x460b73(0x28c)]);try{await _0xd1e546[_0x460b73(0x236)]();const _0x304e41=await _0xd1e546['db'](global[_0x460b73(0xf7)])[_0x460b73(0x130)](_0x220fe7)['distinct'](_0x3d8a28[_0x460b73(0x190)]);return _0x15d34a[_0x460b73(0x147)](JSON[_0x460b73(0x1ec)]({'isAddTrigger':!0x0,'class':_0x3d8a28['swDZB'],'uniqueKeys':_0x304e41,'msg':_0x460b73(0x182)+_0x304e41['length']+_0x460b73(0x148)}));}catch(_0x278c4c){_0x15d34a[_0x460b73(0x147)](JSON[_0x460b73(0x1ec)]({'isAddTrigger':!0x1,'class':_0x3d8a28[_0x460b73(0x18a)],'msg':_0x278c4c['message']}));}finally{_0xd1e546[_0x460b73(0x253)]();}});export default v;function _0x52f212(_0x43d9f5){const _0x5bb16c=_0x169192,_0x468e12={'tKYzk':function(_0x5f5403,_0x339650){return _0x5f5403===_0x339650;},'SByqH':_0x5bb16c(0x1c9),'XSqFs':_0x5bb16c(0x1a5),'Thnhu':'counter','raJeL':function(_0x6bde5,_0x55b0c3){return _0x6bde5!==_0x55b0c3;},'GuLux':function(_0x5bc948,_0x453e51){return _0x5bc948+_0x453e51;},'hTdUL':function(_0xfdcbae,_0x44f18a){return _0xfdcbae/_0x44f18a;},'YbBCn':_0x5bb16c(0x255),'lQgUm':function(_0x282ac3,_0x5318e1){return _0x282ac3%_0x5318e1;},'DGvvG':function(_0x2bbf27,_0x1ebfa8){return _0x2bbf27+_0x1ebfa8;},'ToZYp':_0x5bb16c(0x213),'fmiDy':_0x5bb16c(0x1e2),'CIhIt':_0x5bb16c(0x146),'pyCOm':'stateObject','kMRoK':function(_0x56bd78,_0xd8e7cb){return _0x56bd78(_0xd8e7cb);},'IBCcu':function(_0x25fa8d,_0x18440b){return _0x25fa8d(_0x18440b);}};function _0x31b66f(_0x455857){const _0x5c93f8=_0x5bb16c;if(_0x468e12[_0x5c93f8(0x14d)](typeof _0x455857,_0x468e12[_0x5c93f8(0xe3)]))return function(_0x47f330){}[_0x5c93f8(0x1b5)](_0x468e12['XSqFs'])[_0x5c93f8(0x10b)](_0x468e12[_0x5c93f8(0x1ea)]);else _0x468e12['raJeL'](_0x468e12[_0x5c93f8(0x1eb)]('',_0x468e12[_0x5c93f8(0x159)](_0x455857,_0x455857))[_0x468e12[_0x5c93f8(0x267)]],0x1)||_0x468e12['tKYzk'](_0x468e12[_0x5c93f8(0x161)](_0x455857,0x14),0x0)?function(){return!![];}[_0x5c93f8(0x1b5)](_0x468e12[_0x5c93f8(0x22a)](_0x468e12['ToZYp'],_0x468e12['fmiDy']))[_0x5c93f8(0x125)](_0x468e12[_0x5c93f8(0x22b)]):function(){return![];}['constructor'](_0x468e12[_0x5c93f8(0x1eb)](_0x468e12[_0x5c93f8(0x233)],_0x468e12[_0x5c93f8(0x1b1)]))[_0x5c93f8(0x10b)](_0x468e12['pyCOm']);_0x468e12[_0x5c93f8(0x288)](_0x31b66f,++_0x455857);}try{if(_0x43d9f5)return _0x31b66f;else _0x468e12[_0x5bb16c(0x103)](_0x31b66f,0x0);}catch(_0x4efce2){}}