const _0x4582fc=_0x19f6;(function(_0x27177c,_0x1cfcc2){const _0x57ac53=_0x19f6,_0x1cad67=_0x27177c();while(!![]){try{const _0x13cb0b=parseInt(_0x57ac53(0x25f))/0x1+parseInt(_0x57ac53(0x1a8))/0x2*(-parseInt(_0x57ac53(0x2e2))/0x3)+parseInt(_0x57ac53(0x1fd))/0x4*(parseInt(_0x57ac53(0x23b))/0x5)+parseInt(_0x57ac53(0x2fa))/0x6+-parseInt(_0x57ac53(0x218))/0x7*(parseInt(_0x57ac53(0x24b))/0x8)+-parseInt(_0x57ac53(0x248))/0x9+-parseInt(_0x57ac53(0x2d7))/0xa*(-parseInt(_0x57ac53(0x2ab))/0xb);if(_0x13cb0b===_0x1cfcc2)break;else _0x1cad67['push'](_0x1cad67['shift']());}catch(_0x23f297){_0x1cad67['push'](_0x1cad67['shift']());}}}(_0x4f3c,0xd4629));const _0x1e99be=(function(){const _0x59133a=_0x19f6,_0x12651b={'MsDVq':function(_0x38123e,_0x4ea460){return _0x38123e+_0x4ea460;},'cCIoN':'debu','XXlVf':_0x59133a(0x208),'HMNGH':_0x59133a(0x203),'SuQlZ':function(_0x3b380f,_0x170ddf){return _0x3b380f===_0x170ddf;},'VwoNM':_0x59133a(0x231),'oxxDD':_0x59133a(0x2cb),'FmDSs':function(_0x16feb1,_0x4f1552){return _0x16feb1===_0x4f1552;},'PRZlL':_0x59133a(0x225),'ZOzlE':_0x59133a(0x307),'wQPKQ':function(_0x14d484,_0x498896){return _0x14d484(_0x498896);},'nnVea':function(_0x3f12f2,_0x1c8976){return _0x3f12f2+_0x1c8976;},'TSdPq':_0x59133a(0x19d),'HidbL':_0x59133a(0x1c4),'TxClE':function(_0x4abc4e,_0x1e196f){return _0x4abc4e(_0x1e196f);},'oibkP':function(_0x1baebb,_0x1e0edc){return _0x1baebb===_0x1e0edc;},'Myxwv':_0x59133a(0x278),'QVpQM':_0x59133a(0x2ec)};let _0xfa737e=!![];return function(_0x49e177,_0x42036f){const _0x24fde4=_0x59133a,_0x1abb5a={'EernM':function(_0x336b95,_0x165de3){const _0x29678c=_0x19f6;return _0x12651b[_0x29678c(0x241)](_0x336b95,_0x165de3);},'SKWMK':function(_0x1fbc1c,_0x959b3b){const _0x46ce6c=_0x19f6;return _0x12651b[_0x46ce6c(0x187)](_0x1fbc1c,_0x959b3b);},'okamU':function(_0x191578,_0x2a8771){const _0x2f508d=_0x19f6;return _0x12651b[_0x2f508d(0x1b1)](_0x191578,_0x2a8771);},'iJzOx':_0x12651b[_0x24fde4(0x268)],'tOaLc':_0x12651b[_0x24fde4(0x1d8)],'EidRr':function(_0x45f5d1,_0x292398){const _0x1d5ff6=_0x24fde4;return _0x12651b[_0x1d5ff6(0x1aa)](_0x45f5d1,_0x292398);}};if(_0x12651b[_0x24fde4(0x181)](_0x12651b['Myxwv'],_0x12651b[_0x24fde4(0x272)]))(function(){return!![];}[_0x24fde4(0x253)](_0x12651b[_0x24fde4(0x187)](_0x12651b[_0x24fde4(0x1c1)],_0x12651b['XXlVf']))[_0x24fde4(0x316)](_0x12651b[_0x24fde4(0x2f8)]));else{const _0x4a83bf=_0xfa737e?function(){const _0x10b45e=_0x24fde4;if(_0x12651b['SuQlZ'](_0x12651b[_0x10b45e(0x298)],_0x12651b[_0x10b45e(0x259)])){let _0x84677b;try{_0x84677b=_0x1abb5a[_0x10b45e(0x1f5)](_0x35bc2d,_0x1abb5a[_0x10b45e(0x269)](_0x1abb5a[_0x10b45e(0x247)](_0x1abb5a['iJzOx'],_0x1abb5a[_0x10b45e(0x1a6)]),');'))();}catch(_0x237571){_0x84677b=_0x290b68;}return _0x84677b;}else{if(_0x42036f){if(_0x12651b[_0x10b45e(0x2ea)](_0x12651b[_0x10b45e(0x317)],_0x12651b['ZOzlE'])){if(_0x1747c2)return _0x564de3;else _0x1abb5a[_0x10b45e(0x289)](_0x2efbc5,0x0);}else{const _0x414a6c=_0x42036f['apply'](_0x49e177,arguments);return _0x42036f=null,_0x414a6c;}}}}:function(){};return _0xfa737e=![],_0x4a83bf;}};}());(function(){const _0x4663c6=_0x19f6,_0xa8636c={'SkjZN':function(_0x173b4a,_0x154143){return _0x173b4a!==_0x154143;},'pgyrq':_0x4663c6(0x2ed),'tJXxw':_0x4663c6(0x207),'eWAsO':_0x4663c6(0x26f),'nvOvH':function(_0x3d725f,_0x2b6d59){return _0x3d725f(_0x2b6d59);},'FAAVp':_0x4663c6(0x270),'NcELL':function(_0x1c74c3,_0x2649de){return _0x1c74c3+_0x2649de;},'GIhfg':_0x4663c6(0x1ba),'pNCRL':_0x4663c6(0x18e),'SBrAN':function(_0x1e3618,_0x309901){return _0x1e3618===_0x309901;},'hydDG':_0x4663c6(0x2b1),'qnXlT':_0x4663c6(0x319),'goBKW':function(_0x50f73e,_0x5f56d9){return _0x50f73e(_0x5f56d9);},'QOjel':_0x4663c6(0x27b),'bSALL':function(_0x46d973){return _0x46d973();},'SIQkD':function(_0x2364a7,_0x1f3b09,_0x4c2ae5){return _0x2364a7(_0x1f3b09,_0x4c2ae5);}};_0xa8636c[_0x4663c6(0x219)](_0x1e99be,this,function(){const _0x316256=_0x4663c6;if(_0xa8636c[_0x316256(0x1c3)](_0xa8636c[_0x316256(0x1de)],_0xa8636c['pgyrq'])){const _0x388411=_0x3e7ebb?new _0x53687e(''+_0x2d418a,'i'):new _0x416545('.*');_0x23bd02['unshift']({'$match':{'$or':[{'deviceId':{'$regex':_0x388411}},{'deviceName':{'$regex':_0x388411}}]}});}else{const _0x4b85aa=new RegExp(_0xa8636c[_0x316256(0x1fb)]),_0x577ae1=new RegExp(_0xa8636c[_0x316256(0x29e)],'i'),_0x1a2c93=_0xa8636c[_0x316256(0x30b)](_0x3b5ae2,_0xa8636c[_0x316256(0x2ba)]);if(!_0x4b85aa[_0x316256(0x22c)](_0xa8636c['NcELL'](_0x1a2c93,_0xa8636c[_0x316256(0x311)]))||!_0x577ae1['test'](_0xa8636c[_0x316256(0x2c0)](_0x1a2c93,_0xa8636c[_0x316256(0x2ae)])))_0xa8636c[_0x316256(0x2d4)](_0xa8636c[_0x316256(0x194)],_0xa8636c[_0x316256(0x2ee)])?_0xeb2f8[_0x316256(0x304)]():_0xa8636c[_0x316256(0x2f1)](_0x1a2c93,'0');else{if(_0xa8636c['SkjZN'](_0xa8636c[_0x316256(0x202)],_0xa8636c['QOjel'])){const _0x512c55=_0x54369b[_0x316256(0x2de)](_0x5d5e83,arguments);return _0x21ad4d=null,_0x512c55;}else _0xa8636c[_0x316256(0x284)](_0x3b5ae2);}}})();}());const _0x7539b7=(function(){const _0x45b480=_0x19f6,_0x30820b={'WRhhR':function(_0x313325,_0x484a09){return _0x313325!==_0x484a09;},'RvZKa':function(_0x401af5,_0x593dab){return _0x401af5==_0x593dab;},'lYOCu':function(_0x14c33f,_0x14d040){return _0x14c33f(_0x14d040);},'dxhNB':function(_0x572732,_0x4d9c0c){return _0x572732===_0x4d9c0c;},'OQUjj':_0x45b480(0x322),'abYdo':function(_0x2a53ec,_0x582cf5){return _0x2a53ec===_0x582cf5;},'auRbU':_0x45b480(0x2bc),'ovQcx':function(_0x53d8ac,_0x53b59b){return _0x53d8ac===_0x53b59b;},'eEmrm':_0x45b480(0x1f2)};let _0x5ac44f=!![];return function(_0x3049b6,_0x38ae28){const _0x388cc1=_0x45b480,_0x3fa89f={'ZbaWF':function(_0x7b1e98,_0x32706c){const _0x555e71=_0x19f6;return _0x30820b[_0x555e71(0x28b)](_0x7b1e98,_0x32706c);},'iAwaA':function(_0x9536f5,_0x34ec0b){const _0x5407ea=_0x19f6;return _0x30820b[_0x5407ea(0x282)](_0x9536f5,_0x34ec0b);},'vYMVF':function(_0x632411,_0x2a19e7){const _0x5444a7=_0x19f6;return _0x30820b[_0x5444a7(0x306)](_0x632411,_0x2a19e7);},'hEDQk':function(_0x299208,_0x2ca50d){const _0x474aaf=_0x19f6;return _0x30820b[_0x474aaf(0x296)](_0x299208,_0x2ca50d);},'SmuvV':_0x30820b[_0x388cc1(0x228)],'sHBmn':function(_0x3aa707,_0x249764){const _0x323a92=_0x388cc1;return _0x30820b[_0x323a92(0x2c9)](_0x3aa707,_0x249764);},'IHzgK':_0x30820b[_0x388cc1(0x1e0)]};if(_0x30820b[_0x388cc1(0x1c6)](_0x30820b[_0x388cc1(0x265)],_0x30820b['eEmrm'])){const _0x582f01=_0x5ac44f?function(){const _0x5a1ae3=_0x388cc1,_0x58535c={'PhhwO':function(_0x427ed6,_0x27dc1f){const _0x543f0d=_0x19f6;return _0x3fa89f[_0x543f0d(0x1b7)](_0x427ed6,_0x27dc1f);}};if(_0x3fa89f['hEDQk'](_0x3fa89f[_0x5a1ae3(0x1b0)],_0x3fa89f[_0x5a1ae3(0x1b0)])){if(_0x38ae28){if(_0x3fa89f['sHBmn'](_0x3fa89f[_0x5a1ae3(0x2d8)],_0x3fa89f[_0x5a1ae3(0x2d8)])){const _0x4ced3b=_0x38ae28[_0x5a1ae3(0x2de)](_0x3049b6,arguments);return _0x38ae28=null,_0x4ced3b;}else{const _0x13e639=_0x3fa89f[_0x5a1ae3(0x25a)](_0x34cc70[_0x5a1ae3(0x1b8)],'A')||_0x3fa89f['iAwaA'](_0x57004f[_0x5a1ae3(0x1b4)],_0x4a4116);return _0x3fa89f[_0x5a1ae3(0x25a)](_0x250403['userAuthority'],'O')&&_0x13e639;}}}else _0x58535c['PhhwO'](_0x2f5a2c,0x0);}:function(){};return _0x5ac44f=![],_0x582f01;}else return _0x3e1108;};}()),_0x7a2b21=_0x7539b7(this,function(){const _0xe42a79=_0x19f6,_0x44a496={'sQRRX':function(_0x2ad98f,_0x50ed1e){return _0x2ad98f+_0x50ed1e;},'XFhHE':_0xe42a79(0x1c8),'xjnyC':_0xe42a79(0x208),'gGjbD':_0xe42a79(0x2e0),'vOUMj':'function\x20*\x5c(\x20*\x5c)','TtXoo':_0xe42a79(0x26f),'Rktvc':function(_0xbc5364,_0x5dfe26){return _0xbc5364(_0x5dfe26);},'dcxoq':_0xe42a79(0x270),'ThWJc':'chain','OVCvi':function(_0x25ca10,_0x1fbc51){return _0x25ca10+_0x1fbc51;},'XYdfr':_0xe42a79(0x18e),'ENpXs':function(_0x221f82){return _0x221f82();},'VXvLF':function(_0x27bb84,_0x534c5a){return _0x27bb84!==_0x534c5a;},'iQsAx':'fYpWP','UgIZx':function(_0x323098,_0x171286){return _0x323098===_0x171286;},'qsHtW':'wQDvZ','ezJBi':_0xe42a79(0x286),'woZih':function(_0x58cb64,_0x58be10){return _0x58cb64(_0x58be10);},'VwuAZ':function(_0x507443,_0x2d555d){return _0x507443+_0x2d555d;},'iixkS':_0xe42a79(0x19d),'VOxCC':_0xe42a79(0x1c4),'QiFGn':function(_0x344955,_0x468a6a){return _0x344955===_0x468a6a;},'prqVd':'gITiY','IPxkl':_0xe42a79(0x229),'maHoB':_0xe42a79(0x2c5),'yGRzg':_0xe42a79(0x1db),'aPyeh':'log','jNDnS':'warn','KJQwh':_0xe42a79(0x1ca),'MDWny':_0xe42a79(0x297),'oPPQP':_0xe42a79(0x2b9),'XmxKV':'table','fkCAx':'trace','RvAzx':function(_0x3fcfcc,_0x33a86e){return _0x3fcfcc<_0x33a86e;},'efaip':'RCnYa'},_0x219469=function(){const _0x5bf115=_0xe42a79;if(_0x44a496['VXvLF'](_0x44a496[_0x5bf115(0x31b)],_0x44a496[_0x5bf115(0x31b)]))_0x314b8f[_0x5bf115(0x304)]();else{let _0x266327;try{_0x44a496[_0x5bf115(0x23a)](_0x44a496['qsHtW'],_0x44a496[_0x5bf115(0x2d9)])?function(){return![];}[_0x5bf115(0x253)](_0x44a496[_0x5bf115(0x188)](_0x44a496[_0x5bf115(0x31d)],_0x44a496[_0x5bf115(0x318)]))[_0x5bf115(0x2de)](_0x44a496[_0x5bf115(0x242)]):_0x266327=_0x44a496[_0x5bf115(0x2b7)](Function,_0x44a496['VwuAZ'](_0x44a496[_0x5bf115(0x188)](_0x44a496[_0x5bf115(0x1b6)],_0x44a496['VOxCC']),');'))();}catch(_0x482e26){if(_0x44a496[_0x5bf115(0x31f)](_0x44a496[_0x5bf115(0x1ab)],_0x44a496['IPxkl'])){const _0x398ae0=new _0x2e02cd(_0x44a496['vOUMj']),_0x489cc2=new _0x488c86(_0x44a496[_0x5bf115(0x25d)],'i'),_0xf721ea=_0x44a496[_0x5bf115(0x1a0)](_0x4bb527,_0x44a496[_0x5bf115(0x1d4)]);!_0x398ae0[_0x5bf115(0x22c)](_0x44a496[_0x5bf115(0x188)](_0xf721ea,_0x44a496[_0x5bf115(0x2a3)]))||!_0x489cc2[_0x5bf115(0x22c)](_0x44a496['OVCvi'](_0xf721ea,_0x44a496[_0x5bf115(0x2a1)]))?_0x44a496[_0x5bf115(0x1a0)](_0xf721ea,'0'):_0x44a496[_0x5bf115(0x24c)](_0x106d8d);}else _0x266327=window;}return _0x266327;}},_0x4bcee8=_0x44a496['ENpXs'](_0x219469),_0x150e6d=_0x4bcee8[_0xe42a79(0x223)]=_0x4bcee8[_0xe42a79(0x223)]||{},_0x3384ef=[_0x44a496[_0xe42a79(0x182)],_0x44a496[_0xe42a79(0x1bc)],_0x44a496[_0xe42a79(0x23d)],_0x44a496[_0xe42a79(0x18f)],_0x44a496[_0xe42a79(0x28a)],_0x44a496[_0xe42a79(0x204)],_0x44a496[_0xe42a79(0x250)]];for(let _0x44da05=0x0;_0x44a496['RvAzx'](_0x44da05,_0x3384ef[_0xe42a79(0x2da)]);_0x44da05++){if(_0x44a496[_0xe42a79(0x23a)](_0x44a496['efaip'],_0x44a496['efaip'])){const _0x24bb21=_0x7539b7[_0xe42a79(0x253)][_0xe42a79(0x24a)][_0xe42a79(0x279)](_0x7539b7),_0x30b731=_0x3384ef[_0x44da05],_0x137820=_0x150e6d[_0x30b731]||_0x24bb21;_0x24bb21[_0xe42a79(0x31a)]=_0x7539b7['bind'](_0x7539b7),_0x24bb21[_0xe42a79(0x295)]=_0x137820[_0xe42a79(0x295)][_0xe42a79(0x279)](_0x137820),_0x150e6d[_0x30b731]=_0x24bb21;}else{const _0x1c8a76=_0x66925b+_0xe42a79(0x23c)+_0xa247fe+_0xe42a79(0x30a)+_0x12440f+_0xe42a79(0x195)+_0x15a455+_0xe42a79(0x312)+_0x484048['insertedId'];return _0x37f825[_0xe42a79(0x199)](_0x44a496[_0xe42a79(0x2f0)],{'class':_0x44a496['yGRzg'],'text':_0xe42a79(0x2b3)+_0xfc5dac+_0xe42a79(0x1e3)}),_0x48f30d['redirect'](_0x1c8a76);}}});function _0x19f6(_0x168755,_0x37718c){const _0x388c10=_0x4f3c();return _0x19f6=function(_0x7a2b21,_0x7539b7){_0x7a2b21=_0x7a2b21-0x181;let _0x4da811=_0x388c10[_0x7a2b21];return _0x4da811;},_0x19f6(_0x168755,_0x37718c);}_0x7a2b21();import _0x1d10f8 from'express';const v=_0x1d10f8[_0x4582fc(0x196)]();import{MongoClient as _0x2d011d,ObjectId as _0x429e57}from'mongodb';import _0x14be9 from'ejs';import _0x2b7731 from'path';import _0x45fbfa from'fs';import _0x2848e3 from'../middleware/mainAuth.js';function _0x4f3c(){const _0x4e6adf=['jRLYV','wabYh','message','\x22\x20มีอยู่ในเอกสาร\x20','onPhx','44NEWiiK','IslNF','SartS','pNCRL','มีคีย์ที่เลือกซ้ำกัน','HbBlR','cGQqY','Ozsge','เพิ่มอุปกรณ์\x20\x22','sip','yVxdh','HPsmc','woZih','../','exception','FAAVp','อัปเดท\x20\x22','sdaCD','hEAdF','umHHu','oIWCR','NcELL','BXPPC','vEzSF','EefnD','load_id','msg','IlPhw','cqPRu','pKAYs','abYdo','waSjW','aHwYG','triggerStatus','LgIwA','map','filter','counter','lUdPe','toArray','HquED','SBrAN','aggregate','mPACq','4877520QzgXLF','IHzgK','ezJBi','length','countDocuments','connect','โหลดข้อมูลอุปกรณ์\x20','apply','body','stateObject','\x20คอลเล็กชัน','12MRuPvA','sRzNC','insertOne','vXitO','pBuLh','WRaQJ','PuLkp','ipZaD','FmDSs','page','GUYqt','XpODA','qnXlT','ICYqY','maHoB','goBKW','join','dbUrl','render','ไม่พบ\x20\x22','nVzLi','YWUzZ','HMNGH','HHpQM','871746rjfBPH','wBJVT','kCviW','PJFmU','VbMiE','BzFqr','ดึงข้อมูลเรียบร้อยแล้ว','hKrqD','FkpoO','jGvFx','close','TDDNV','lYOCu','vAdLR','Lotlm','utf8','&rpp=','nvOvH','xlOkZ','เกิดข้อผิดพลาดขณะเพิ่มอุปกรณ์\x20\x22','devices','clrxM','_id','GIhfg','&load_id=','insertedId','FafJU','fNltL','call','PRZlL','xjnyC','zJeVQ','__proto__','iQsAx','mQOYi','XFhHE','INBBg','QiFGn','foWMw','/myData.js','XyCUv','getSessionData','XlFXF','uTHPH','sIaFw','oibkP','aPyeh','log','error\x20===>\x20','EBWQN','GuNiv','MsDVq','sQRRX','QNoQN','AEfhe','cvgzM','DDoce','UHyjd','input','MDWny','SENwP','/myModule.js','{{sep}}(\x20ไม่พบเซสชั่น\x20)','ceil','hydDG','&page=','Router','getDateTime','replace','flash','aVvVY','hDxwW','string','return\x20(function()\x20','deleteOne','GVMzY','Rktvc','isOA','JGZtH','pzYTx','RBAXu','get','tOaLc','RUeiz','806254zeHsFD','MScQk','TxClE','prqVd','ชื่ออุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','MMxTy','kXKXK','Gesix','SmuvV','nnVea','qJIhn','modifiedCount','deviceId','GgMNm','iixkS','vYMVF','userAuthority','dzWQW','chain','nyKoj','jNDnS','BlWKY','/devices','/fetch','uqURH','cCIoN','bRUFl','SkjZN','{}.constructor(\x22return\x20this\x22)(\x20)','dateTimeCanDelete','ovQcx','nazLz','debu','dbName','info','folderForms','Not\x20Found','deviceName','ZHbGB','vScMl','TEJXL','cmNWd','xOkYn','bKKfl','dcxoq','ZdKxU','xPRqB','vJJoZ','HidbL','{{sep}}\x22','kFJIL','green','KiFbS','yKokw','pgyrq','mOWUk','auRbU','dbColl_docs','collection','\x22\x20เรียบร้อยแล้ว','getChangeHistory','kDfaV','kVKUV','bLexG','aLEsu','PeKTJ','yQvFl','/add-trigger','status','rpp','$changesHistory','LkNaX','/save','dbColl_sessions','RPXEC','nuLyV','jTeYL','EernM','sort','renderView','tYQPz','gJmqU','kJyPe','tJXxw','aayWd','56996UrtJux','ReIwd','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','xZwca','DEVICE_PATTERN','QOjel','action','XmxKV','unshift','post','function\x20*\x5c(\x20*\x5c)','gger','DEVICE_DESCRIPTION','find','deletedCount','uGXHx','mECba','QVSHT','kYtax','bClIc','Jespz','listCollections','getDate','sFlRI','pjLsQ','ZsfTG','PpjsM','331723iivatz','SIQkD','QXBEX','print_devices.ejs','KOmkO','red','redirect','eMGuM','AXicO','OxBRB','vxxRA','console','deleteMany','KPAQW','KkskQ','mCedS','OQUjj','ANQty','qlFsJ','size','test','TjYFX','acknowledged','UlRUo','distinct','LmRtb','\x22\x20เรียบร้อยแล้ว\x20)','HqmUc','jJPXi','oFEMn','^(e|s)\x5cd{3}$','triggerMin','dPWSt','UNdXD','UgIZx','515fmIFDA','?sip=','KJQwh','RuotQ','ZxQeV','updateOne','wQPKQ','gGjbD','ไม่มีข้อมูล','/myDateTime.js','query','send','okamU','5832171eLbwES','UFTES','prototype','144tXUlyW','ENpXs','pRwlT','QquYp','coTHO','fkCAx','ZSNau','dbColl_devices','constructor','EBfIf','tmpUN','wivvM','$dateTimeCanDelete','userId','oxxDD','ZbaWF','iilEM','findOne','TtXoo','รูปแบบไอดีอุปกรณ์ไม่ถูกต้อง{{sep}}','419512ENSszU','sendFile','gfwBb','Kahhf','clcGr','readFileSync','eEmrm','/print','พิมพ์ข้อมูล\x20','TSdPq','SKWMK','key','triggerMax','ชื่ออุปกรณ์/ไออีอุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','LcNhq','ITBLB','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','init','ไม่พบประวัติการเปลี่ยนแปลง','QVpQM','fnPSE','KOtUD','wjehD','/myUsers.js','wrlnk','SJmFm','bind','stringify','mByKO','userFullname','UPBxt','uTMyE','QPvmd','upsertedCount','MkDue','RvZKa','ELfDv','bSALL','{{sep}}[\x20บันทึกการแก้ไข\x20]','WgQkG','hkUVM','\x20ค่าเรียบร้อยแล้ว','EidRr','oPPQP','WRhhR','ลบยูสเซอร์\x20\x22','triggerKey','/delete','Qacto','\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)','TywfT','XWXJw','XouLE','push','toString','dxhNB','error','VwoNM','DMOkj','MsOaM','YTwHx','oWRlO','VSZYF','eWAsO','zWNjj','Hxzyo','XYdfr','xXCUT','ThWJc','mfUYR','while\x20(true)\x20{}'];_0x4f3c=function(){return _0x4e6adf;};return _0x4f3c();}const C=await import(_0x4582fc(0x2b8)+mymoduleFolder+_0x4582fc(0x191)),D=await import(_0x4582fc(0x2b8)+mymoduleFolder+_0x4582fc(0x244)),T=await import('../'+mymoduleFolder+_0x4582fc(0x276)),L=await import(_0x4582fc(0x2b8)+mymoduleFolder+_0x4582fc(0x321)),b=_0x4582fc(0x1be),M=b+_0x4582fc(0x1f0),P=b+'/load',R=b+_0x4582fc(0x28e),F=b+_0x4582fc(0x266),H=b+_0x4582fc(0x1bf),U=b+'/changes',j=b+_0x4582fc(0x1eb),G=b[_0x4582fc(0x198)](/\//g,'_');v[_0x4582fc(0x1a5)](b,_0x2848e3[_0x4582fc(0x1a1)],async(_0x4749a8,_0x58d23d)=>{const _0x2800be=_0x4582fc,_0x496f28={'aLEsu':function(_0x6504ba,_0xd24337){return _0x6504ba<_0xd24337;},'scIgo':_0x2800be(0x2c5),'nVzLi':_0x2800be(0x21d),'dxJNB':'มีคีย์ที่เลือกซ้ำกัน','UsWKd':function(_0x38209a,_0x23d29c){return _0x38209a<=_0x23d29c;},'kCviW':function(_0x5c6fbb,_0x3af5ea){return _0x5c6fbb-_0x3af5ea;},'pRwlT':function(_0x396e6f,_0x15b2c8){return _0x396e6f(_0x15b2c8);},'coTHO':function(_0x43774c,_0x5837bf){return _0x43774c(_0x5837bf);},'MkDue':function(_0x5eaf80,_0x214342){return _0x5eaf80===_0x214342;},'GzNHz':_0x2800be(0x275),'RBAXu':_0x2800be(0x1d7),'uTMyE':function(_0x4ecc82,_0x2daf1e){return _0x4ecc82!==_0x2daf1e;},'xFOsh':function(_0x5ab109,_0x3d9b22){return _0x5ab109==_0x3d9b22;},'TDDNV':_0x2800be(0x2a5),'cmNWd':_0x2800be(0x2d0),'QXBEX':function(_0x6a8b30,_0x9b2380){return _0x6a8b30(_0x9b2380);},'fNltL':function(_0xd8def,_0x3dc95a){return _0xd8def+_0x3dc95a;},'oIWCR':_0x2800be(0x19d),'ZDubM':'{}.constructor(\x22return\x20this\x22)(\x20)','HHpQM':function(_0x581f9a,_0x180d8d){return _0x581f9a*_0x180d8d;},'ebinu':_0x2800be(0x2fe),'HbBlR':_0x2800be(0x29d),'kFJIL':_0x2800be(0x210),'lKBxh':function(_0x4e1684,_0x32128b){return _0x4e1684/_0x32128b;},'geZtU':function(_0x1d5772,_0x2d0eea){return _0x1d5772<_0x2d0eea;},'tIMXm':function(_0x326554,_0x55a0f){return _0x326554-_0x55a0f;},'rzyTu':function(_0x3b3091,_0x525fc0){return _0x3b3091(_0x525fc0);},'vxxRA':function(_0x186416,_0x23ab7c){return _0x186416>_0x23ab7c;},'hTwSy':function(_0xb87745,_0x2f238b){return _0xb87745+_0x2f238b;},'nazLz':function(_0x1b127d,_0x42aaa2){return _0x1b127d(_0x42aaa2);},'YTwHx':function(_0x5ca7cc,_0x5e857e){return _0x5ca7cc+_0x5e857e;},'ZHbGB':_0x2800be(0x1ee),'nPVkF':_0x2800be(0x257),'JDxTh':'minute','wmzvh':function(_0x1cae17,_0x562a2a){return _0x1cae17!==_0x562a2a;},'zWNjj':'FETcS','mQOYi':_0x2800be(0x2e3),'aVvVY':_0x2800be(0x226),'XWXJw':_0x2800be(0x30e),'xPRqB':function(_0x565ecf,_0x4b6026){return _0x565ecf!==_0x4b6026;},'nuLyV':_0x2800be(0x19b),'oFEMn':function(_0x19baa1,_0x5239eb){return _0x19baa1!==_0x5239eb;},'yAfpa':'PqzKF'};let _0x4f9844=_0x4749a8[_0x2800be(0x245)]['sip'];_0x4f9844=_0x4f9844?_0x4f9844[_0x2800be(0x198)](/[.*+?^${}()|[\]\\]/g,''):'';const _0x1139b7=_0x496f28[_0x2800be(0x21a)](Number,_0x4749a8[_0x2800be(0x245)][_0x2800be(0x1ed)])||0x14,_0x37a2fc=_0x496f28[_0x2800be(0x24f)](Number,_0x4749a8['query'][_0x2800be(0x2eb)])||0x1,_0x5946e9=_0x4749a8[_0x2800be(0x245)][_0x2800be(0x2c4)]||'',_0x45f50e=_0x496f28['QXBEX'](Number,_0x496f28[_0x2800be(0x2f9)](_0x496f28[_0x2800be(0x2fc)](_0x37a2fc,0x1),_0x1139b7)),_0x183de9=D['getDateTime'](0x0),_0x1593ac=new _0x2d011d(dbUrl);try{if(_0x496f28[_0x2800be(0x27e)](_0x496f28['ebinu'],_0x496f28[_0x2800be(0x2b0)])){await _0x1593ac['connect']();const _0x33a1cb=_0x1593ac['db'](global[_0x2800be(0x1c9)])[_0x2800be(0x1e2)](global[_0x2800be(0x252)]);if(_0x4f9844){if(_0x496f28[_0x2800be(0x281)](_0x496f28['kFJIL'],_0x496f28[_0x2800be(0x1da)])){const _0x57c639=new RegExp(_0x4f9844,'i');var _0x528d04=await _0x33a1cb[_0x2800be(0x2db)]({'$or':[{'deviceId':{'$regex':_0x57c639}},{'deviceName':{'$regex':_0x57c639}},{'userFirstname':{'$regex':_0x57c639}}]});}else _0x1d3b56['close']();}else var _0x528d04=await _0x33a1cb[_0x2800be(0x2db)]({});const _0x23ba48=Math[_0x2800be(0x193)](_0x496f28['lKBxh'](_0x528d04,_0x1139b7)),_0x18e838=_0x496f28['geZtU'](_0x496f28[_0x2800be(0x2fc)](_0x496f28[_0x2800be(0x21a)](Number,_0x37a2fc),0x1),0x1)?'-':_0x496f28['tIMXm'](_0x496f28['rzyTu'](Number,_0x37a2fc),0x1),_0x48b25c=_0x496f28[_0x2800be(0x24d)](Number,_0x37a2fc),_0x4c9d35=_0x496f28[_0x2800be(0x222)](_0x496f28['hTwSy'](_0x496f28[_0x2800be(0x1c7)](Number,_0x37a2fc),0x1),_0x23ba48)?'-':_0x496f28[_0x2800be(0x29b)](_0x496f28[_0x2800be(0x24d)](Number,_0x37a2fc),0x1),_0x18ac75=[{'$project':{'_id':0x1,'deviceId':0x1,'deviceStatus':0x1,'deviceName':0x1,'triggerRows':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0x496f28[_0x2800be(0x1ce)],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x183de9},'endDate':{'$toDate':_0x496f28['nPVkF']},'unit':_0x496f28['JDxTh']}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'deviceId':-0x1}},{'$skip':_0x45f50e},{'$limit':_0x1139b7}];if(_0x4f9844){if(_0x496f28['wmzvh'](_0x496f28[_0x2800be(0x29f)],_0x496f28[_0x2800be(0x31c)])){const _0x213acb=_0x4f9844?new RegExp(''+_0x4f9844,'i'):new RegExp('.*');_0x18ac75[_0x2800be(0x205)]({'$match':{'$or':[{'deviceId':{'$regex':_0x213acb}},{'deviceName':{'$regex':_0x213acb}}]}});}else return![];}const _0x5d7d9a=T[_0x2800be(0x323)](_0x4749a8),_0x461294=_0x5d7d9a['userAuthority'];let _0x58d205=await _0x33a1cb[_0x2800be(0x2d5)](_0x18ac75)[_0x2800be(0x2d2)]();if(['A']['includes'](_0x461294)){if(_0x496f28[_0x2800be(0x281)](_0x496f28[_0x2800be(0x19a)],_0x496f28[_0x2800be(0x19a)])){const _0x586d77=_0x5d7d9a[_0x2800be(0x1b4)];_0x58d205=_0x58d205[_0x2800be(0x2cf)](_0x3d45f5=>{const _0x5abb87=_0x2800be;if(_0x496f28[_0x5abb87(0x281)](_0x496f28['GzNHz'],_0x496f28[_0x5abb87(0x1a4)])){const _0x236721=_0x5a55bd[_0x5abb87(0x2df)]['triggerStatus'],_0x2b9de2=_0x21c9fb[_0x5abb87(0x2df)][_0x5abb87(0x28d)],_0x4eeb0f=_0xc5e57c[_0x5abb87(0x2df)]['triggerMin'],_0x152457=_0x11c411[_0x5abb87(0x2df)][_0x5abb87(0x26b)];if(_0x496f28[_0x5abb87(0x1e8)](new _0x141ce6(_0x2b9de2)['size'],_0x2b9de2[_0x5abb87(0x2da)]))return _0x49942d[_0x5abb87(0x199)](_0x496f28['scIgo'],{'class':_0x496f28[_0x5abb87(0x2f6)],'text':_0x496f28['dxJNB']}),_0x25b053[_0x5abb87(0x21e)](_0x1dea1e);for(let _0x148416=0x0;_0x496f28['UsWKd'](_0x148416,_0x496f28['kCviW'](_0x85fd4d,0x1));_0x148416++)_0x1980fd[_0x5abb87(0x294)]({'triggerStatus':_0x236721[_0x148416],'triggerKey':_0x2b9de2[_0x148416],'triggerMin':_0x4eeb0f[_0x148416]?_0x496f28['pRwlT'](_0x1f9dfc,_0x4eeb0f[_0x148416]):null,'triggerMax':_0x152457[_0x148416]?_0x496f28[_0x5abb87(0x24f)](_0x41816f,_0x152457[_0x148416]):null});}else{const _0x1b5e10=_0x496f28[_0x5abb87(0x27e)](_0x3d45f5[_0x5abb87(0x1b8)],'A')||_0x496f28['xFOsh'](_0x3d45f5[_0x5abb87(0x1b4)],_0x586d77);return _0x496f28['uTMyE'](_0x3d45f5['userAuthority'],'O')&&_0x1b5e10;}});}else return function(_0x5d397a){}[_0x2800be(0x253)](nJqyng[_0x2800be(0x305)])[_0x2800be(0x2de)](nJqyng[_0x2800be(0x1d1)]);}if(_0x5946e9)var _0x13b59a=await _0x33a1cb[_0x2800be(0x25c)]({'_id':new _0x429e57(_0x5946e9)},{'projection':{'userPassword':0x0}});else var _0x13b59a={};const _0x1e7210=await C[_0x2800be(0x1f7)](_0x496f28[_0x2800be(0x292)],_0x58d23d,{'title':PAGE_DEVICES,'time':D['getDate'](),'msg':_0x4749a8[_0x2800be(0x199)](_0x496f28['scIgo']),'user':T[_0x2800be(0x323)](_0x4749a8),'settings':await C['getSettings'](),'load_id':_0x5946e9,'sip':_0x4f9844,'rpp':_0x1139b7,'page':_0x37a2fc,'pagePre':_0x18e838,'pageAct':_0x48b25c,'pageNxt':_0x4c9d35,'pageLst':_0x23ba48,'pageRedirect':b,'data':_0x58d205,'PATH_MAIN':b,'PATH_PRINT':F,'PATH_SAVE':M,'PATH_LOAD':P,'PATH_DELETE':R,'PATH_FETCH':H,'PATH_CHANGES':U,'PATH_ADD_TRIGGER':j,'PREFIX':G,'item':_0x13b59a});return _0x58d23d[_0x2800be(0x246)](_0x1e7210);}else _0x31a365[_0x2800be(0x304)]();}catch(_0x1fad9b){if(_0x496f28[_0x2800be(0x1d6)](_0x496f28[_0x2800be(0x1f3)],_0x496f28['nuLyV'])){const _0x4e28c4=_0x6da4f4?function(){const _0x28fb74=_0x2800be;if(_0x11aa39){const _0x214c80=_0xe1e829[_0x28fb74(0x2de)](_0x4bc789,arguments);return _0x4fd4b4=null,_0x214c80;}}:function(){};return _0x4ae55f=![],_0x4e28c4;}else console['log'](_0x1fad9b[_0x2800be(0x2a8)]),_0x58d23d['status'](0x194)[_0x2800be(0x260)](file404);}finally{_0x496f28[_0x2800be(0x235)](_0x496f28['yAfpa'],_0x496f28['yAfpa'])?_0x372fbf=nJqyng[_0x2800be(0x21a)](_0x4dce51,nJqyng[_0x2800be(0x315)](nJqyng[_0x2800be(0x315)](nJqyng[_0x2800be(0x2bf)],nJqyng['ZDubM']),');'))():_0x1593ac[_0x2800be(0x304)]();}}),v['post'](M,_0x2848e3[_0x4582fc(0x1a1)],async(_0x47e06c,_0x478ab3)=>{const _0x33e758=_0x4582fc,_0x3bbd44={'ZsfTG':_0x33e758(0x21d),'bLexG':'เกิดข้อผิดพลาดขณะดึงข้อมูล','ReIwd':function(_0x597a01,_0x2d1ecd){return _0x597a01(_0x2d1ecd);},'cvgzM':function(_0xd5fa2c,_0x245cdb){return _0xd5fa2c(_0x245cdb);},'tYQPz':_0x33e758(0x2c5),'jTeYL':function(_0x5bae9c,_0x35f76b){return _0x5bae9c==_0x35f76b;},'yVxdh':_0x33e758(0x19c),'JmHUk':'object','sFlRI':function(_0x565b0b,_0x117c35){return _0x565b0b>_0x117c35;},'PJFmU':function(_0x25772a,_0x2a7883){return _0x25772a!==_0x2a7883;},'nyKoj':_0x33e758(0x2e9),'PeKTJ':function(_0x12755d,_0x171094){return _0x12755d<_0x171094;},'clrxM':_0x33e758(0x2af),'hKrqD':function(_0x4d3815,_0x26d3c9){return _0x4d3815<=_0x26d3c9;},'xZwca':function(_0x48c94f,_0x3bac9d){return _0x48c94f-_0x3bac9d;},'vScMl':function(_0x5a4198,_0x5c1857){return _0x5a4198===_0x5c1857;},'onPhx':function(_0x25cdf1,_0x59b8b6){return _0x25cdf1!==_0x59b8b6;},'ZSNau':function(_0x46056f,_0x2b5add){return _0x46056f>=_0x2b5add;},'BzFqr':_0x33e758(0x29a),'LgIwA':_0x33e758(0x277),'pWuuN':_0x33e758(0x26c),'tmpUN':function(_0x415747,_0x1621c5){return _0x415747==_0x1621c5;},'ICYqY':_0x33e758(0x1e6),'HPsmc':function(_0x2e530f,_0x16bd5c){return _0x2e530f!==_0x16bd5c;},'GVMzY':_0x33e758(0x1fc),'AXicO':_0x33e758(0x285),'UFTES':_0x33e758(0x1db),'eMGuM':function(_0x50ea5f,_0x3b13bb){return _0x50ea5f<_0x3b13bb;},'jRLYV':'yellow','MScQk':_0x33e758(0x1cc),'HkDrZ':_0x33e758(0x24e),'UlRUo':_0x33e758(0x1ac),'zFlHS':_0x33e758(0x1b9),'yQvFl':function(_0x14e4fb,_0x447d99){return _0x14e4fb!==_0x447d99;},'hEAdF':_0x33e758(0x185),'IslNF':_0x33e758(0x184),'kDfaV':function(_0x1bc475,_0x27f4df){return _0x1bc475===_0x27f4df;},'cqPRu':'eCmjZ'},_0xce3c11=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x310)];delete _0x47e06c[_0x33e758(0x2df)][_0x33e758(0x310)];const _0x43d49b=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2b4)],_0x2fa6ac=_0x3bbd44[_0x33e758(0x1fe)](Number,_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x1ed)])||0x14,_0x36ae0b=_0x3bbd44['cvgzM'](Number,_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2eb)])||0x1;delete _0x47e06c[_0x33e758(0x2df)][_0x33e758(0x1ed)],delete _0x47e06c['body'][_0x33e758(0x2b4)],delete _0x47e06c['body'][_0x33e758(0x2eb)];const _0x161e10=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x1cd)]?.['trim'](),_0x93eb64=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x1b4)],_0x26f01a=''+b,_0x1135ca=b+_0x33e758(0x23c)+_0x43d49b+'&rpp='+_0x2fa6ac+_0x33e758(0x195)+_0x36ae0b+_0x33e758(0x312)+_0xce3c11;if(!new RegExp(global[_0x33e758(0x201)])['test'](_0x93eb64))return _0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x216)],'text':global[_0x33e758(0x209)]}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca);let _0x3f4259=0x0;_0x3bbd44[_0x33e758(0x1f4)](typeof _0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2cc)],_0x3bbd44[_0x33e758(0x2b5)])?_0x3f4259=0x1:_0x3bbd44[_0x33e758(0x1f4)](typeof _0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2cc)],_0x3bbd44['JmHUk'])&&(_0x3f4259=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2cc)][_0x33e758(0x2da)]);const _0x20d50b=[];if(_0x3bbd44[_0x33e758(0x214)](_0x3f4259,0x1)){if(_0x3bbd44[_0x33e758(0x2fd)](_0x3bbd44[_0x33e758(0x1bb)],_0x3bbd44[_0x33e758(0x1bb)]))_0x4e8d78['log'](_0x329a0e[_0x33e758(0x2a8)]),_0x2e3ae9[_0x33e758(0x1ec)](0x194)[_0x33e758(0x260)](_0x41417a);else{const _0xb91500=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2cc)],_0xa274c9=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x28d)],_0x11deb6=_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x237)],_0x3c3ded=_0x47e06c[_0x33e758(0x2df)]['triggerMax'];if(_0x3bbd44[_0x33e758(0x1e9)](new Set(_0xa274c9)[_0x33e758(0x22b)],_0xa274c9[_0x33e758(0x2da)]))return _0x47e06c[_0x33e758(0x199)](_0x3bbd44['tYQPz'],{'class':_0x3bbd44['ZsfTG'],'text':_0x3bbd44[_0x33e758(0x30f)]}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca);for(let _0x2ab7b3=0x0;_0x3bbd44[_0x33e758(0x301)](_0x2ab7b3,_0x3bbd44[_0x33e758(0x200)](_0x3f4259,0x1));_0x2ab7b3++)_0x20d50b[_0x33e758(0x294)]({'triggerStatus':_0xb91500[_0x2ab7b3],'triggerKey':_0xa274c9[_0x2ab7b3],'triggerMin':_0x11deb6[_0x2ab7b3]?_0x3bbd44[_0x33e758(0x18b)](Number,_0x11deb6[_0x2ab7b3]):null,'triggerMax':_0x3c3ded[_0x2ab7b3]?_0x3bbd44[_0x33e758(0x1fe)](Number,_0x3c3ded[_0x2ab7b3]):null});}}else _0x3bbd44[_0x33e758(0x1f4)](_0x3f4259,0x1)&&_0x20d50b[_0x33e758(0x294)]({'triggerStatus':_0x47e06c['body']['triggerStatus'],'triggerKey':_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x28d)],'triggerMin':_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x237)]?_0x3bbd44[_0x33e758(0x1fe)](Number,_0x47e06c[_0x33e758(0x2df)]['triggerMin']):null,'triggerMax':_0x47e06c[_0x33e758(0x2df)]['triggerMax']?_0x3bbd44[_0x33e758(0x1fe)](Number,_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x26b)]):null});delete _0x47e06c[_0x33e758(0x2df)][_0x33e758(0x2cc)],delete _0x47e06c[_0x33e758(0x2df)][_0x33e758(0x28d)],delete _0x47e06c['body'][_0x33e758(0x237)],delete _0x47e06c['body'][_0x33e758(0x26b)],_0x47e06c[_0x33e758(0x2df)]['triggerRows']=[..._0x20d50b];for(const _0x5af5ae of _0x20d50b)if(_0x3bbd44['vScMl'](_0x5af5ae['triggerMin'],null)&&_0x3bbd44[_0x33e758(0x1cf)](_0x5af5ae[_0x33e758(0x26b)],null))return _0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x216)],'text':'กรุณาระบุค่า\x20Min\x20หรือ\x20Max\x20สำหรับคีย์\x20\x22'+_0x5af5ae[_0x33e758(0x28d)]+'\x22'}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca);for(const _0x3461d1 of _0x20d50b)if(_0x3bbd44[_0x33e758(0x2fd)](_0x3461d1['triggerMin'],null)&&_0x3bbd44['onPhx'](_0x3461d1[_0x33e758(0x26b)],null)&&_0x3bbd44[_0x33e758(0x251)](_0x3461d1[_0x33e758(0x237)],_0x3461d1[_0x33e758(0x26b)]))return _0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x216)],'text':'ค่า\x20Min\x20ต้องน้อยกว่า\x20Max\x20สำหรับคีย์\x20\x22'+_0x3461d1[_0x33e758(0x28d)]+'\x22'}),_0x478ab3['redirect'](_0x1135ca);const _0x252bdd=new _0x2d011d(global[_0x33e758(0x2f3)]);try{if(_0x3bbd44[_0x33e758(0x2aa)](_0x3bbd44[_0x33e758(0x2ff)],_0x3bbd44[_0x33e758(0x2ff)]))return!![];else{await _0x252bdd[_0x33e758(0x2dc)]();const _0x53b37d=_0x252bdd['db'](global[_0x33e758(0x1c9)])['collection'](global[_0x33e758(0x252)]);if(_0xce3c11){if(_0x3bbd44[_0x33e758(0x2aa)](_0x3bbd44[_0x33e758(0x2cd)],_0x3bbd44[_0x33e758(0x2cd)]))_0x3a888a[_0x33e758(0x183)](_0x48452f),_0x53a279[_0x33e758(0x246)](_0x386505[_0x33e758(0x27a)]({'isFetch':!0x1,'msg':_0x896b99[_0x33e758(0x2a8)],'class':_0x3bbd44[_0x33e758(0x216)],'data':[],'msg':_0x3bbd44[_0x33e758(0x1e7)]}));else{var _0x75f21e=await _0x53b37d[_0x33e758(0x25c)]({'_id':{'$ne':new _0x429e57(_0xce3c11)},'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x161e10+'$','i')}},{'deviceId':_0x93eb64}]});if(_0x75f21e)return _0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x216)],'text':_0x3bbd44['pWuuN']}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca);const _0x220928=await _0x53b37d['findOne']({'_id':new _0x429e57(_0xce3c11)}),_0x3dcaea={'$set':_0x47e06c[_0x33e758(0x2df)]},_0x38fb29=await _0x53b37d[_0x33e758(0x240)]({'_id':new _0x429e57(_0xce3c11)},_0x3dcaea,{'upsert':!0x1});if(_0x38fb29[_0x33e758(0x22e)]&&_0x3bbd44[_0x33e758(0x255)](_0x38fb29[_0x33e758(0x1b3)],0x1)){if(_0x3bbd44[_0x33e758(0x2fd)](_0x3bbd44[_0x33e758(0x2ef)],_0x3bbd44[_0x33e758(0x2ef)]))_0x2f1eec[_0x33e758(0x246)](_0x5c48c5['stringify']({'isAddTrigger':!0x1,'class':_0x3bbd44[_0x33e758(0x216)],'msg':_0x22499c[_0x33e758(0x2a8)]}));else{const _0x1aaaa1=T[_0x33e758(0x323)](_0x47e06c);let _0x105810=_0x33e758(0x2bb)+_0x93eb64+'\x22\x20เรียบร้อยแล้ว';const _0x2420a5=L[_0x33e758(0x1e4)](_0x220928,_0x47e06c['body']);if(_0x2420a5&&_0x3bbd44[_0x33e758(0x214)](_0x2420a5[_0x33e758(0x2da)],0x0)){if(_0x3bbd44[_0x33e758(0x2b6)](_0x3bbd44[_0x33e758(0x19f)],_0x3bbd44['GVMzY'])){if(_0x203499){const _0x48e580=_0x50da03[_0x33e758(0x2de)](_0x55ce96,arguments);return _0x5f27d4=null,_0x48e580;}}else{const _0x5e6932={'dateTime':D['getDateTime'](),'userId':_0x1aaaa1[_0x33e758(0x258)],'userFullname':_0x1aaaa1[_0x33e758(0x27c)],'changes':_0x2420a5};await _0x53b37d['updateOne']({'deviceId':_0x93eb64},{'$push':{'changesHistory':{'$each':[_0x5e6932],'$position':0x0}}}),_0x105810+=_0x3bbd44[_0x33e758(0x220)];}}return _0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x249)],'text':_0x105810}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca);}}else return _0x38fb29['acknowledged']&&(_0x3bbd44[_0x33e758(0x21f)](_0x38fb29[_0x33e758(0x1b3)],0x1)||_0x3bbd44[_0x33e758(0x21f)](_0x38fb29[_0x33e758(0x280)],0x1))?(_0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x2a6)],'text':'\x22'+_0x93eb64+_0x33e758(0x1ff)}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca)):(_0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44['ZsfTG'],'text':new Error(_0x3bbd44[_0x33e758(0x1a9)])+_0x33e758(0x1d9)+_0x93eb64+'\x22'}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca));}}else{if(_0x3bbd44[_0x33e758(0x1cf)](_0x3bbd44['HkDrZ'],_0x3bbd44['HkDrZ'])){if(await _0x53b37d[_0x33e758(0x25c)]({'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x161e10+'$','i')}},{'deviceId':_0x93eb64}]}))return _0x47e06c[_0x33e758(0x199)](_0x3bbd44['tYQPz'],{'class':_0x3bbd44[_0x33e758(0x216)],'text':_0x3bbd44[_0x33e758(0x22f)]}),_0x478ab3[_0x33e758(0x21e)](_0x1135ca);_0x47e06c[_0x33e758(0x2df)][_0x33e758(0x1c5)]=D['getDateTime'](0x5a0);const _0x1425c9=await _0x53b37d[_0x33e758(0x2e4)](_0x47e06c['body']);if(_0x1425c9[_0x33e758(0x22e)]&&_0x1425c9[_0x33e758(0x313)]){if(_0x3bbd44[_0x33e758(0x2aa)](_0x3bbd44['zFlHS'],_0x3bbd44['zFlHS'])){const _0x27e96b=_0x23e45b[_0x33e758(0x2de)](_0x2391ae,arguments);return _0x2dac77=null,_0x27e96b;}else{const _0xaf72b0=b+_0x33e758(0x23c)+_0x43d49b+'&rpp='+_0x2fa6ac+_0x33e758(0x195)+_0x36ae0b+'&load_id='+_0x1425c9[_0x33e758(0x313)];return _0x47e06c[_0x33e758(0x199)](_0x3bbd44[_0x33e758(0x1f8)],{'class':_0x3bbd44[_0x33e758(0x249)],'text':_0x33e758(0x2b3)+_0x93eb64+_0x33e758(0x1e3)}),_0x478ab3['redirect'](_0xaf72b0);}}else _0x47e06c[_0x33e758(0x199)](_0x3bbd44['tYQPz'],{'class':_0x3bbd44['ZsfTG'],'text':_0x33e758(0x30d)+_0x93eb64+'\x22'}),_0x478ab3[_0x33e758(0x21e)](_0x26f01a);}else _0x52a32b[_0x33e758(0x304)]();}}}catch(_0x33599f){_0x3bbd44[_0x33e758(0x1ea)](_0x3bbd44[_0x33e758(0x2bd)],_0x3bbd44['hEAdF'])?_0x436296['close']():(console[_0x33e758(0x183)](_0x3bbd44[_0x33e758(0x2ac)],_0x33599f),_0x478ab3[_0x33e758(0x1ec)](0x194)['sendFile'](file404));}finally{_0x3bbd44[_0x33e758(0x1e5)](_0x3bbd44[_0x33e758(0x2c7)],_0x3bbd44[_0x33e758(0x2c7)])?_0x252bdd[_0x33e758(0x304)]():_0x48ee34[_0x33e758(0x304)]();}}),v[_0x4582fc(0x206)](P,_0x2848e3[_0x4582fc(0x1a1)],async(_0x54434e,_0x493639)=>{const _0x530593=_0x4582fc,_0x255c51={'vXitO':'msg','waSjW':'red','ITBLB':function(_0x34e2f4,_0x146bf1){return _0x34e2f4(_0x146bf1);},'CFOZF':function(_0x3d9e13,_0x53775f){return _0x3d9e13!==_0x53775f;},'KOmkO':_0x530593(0x1a2),'BUfal':_0x530593(0x1cc),'MMxTy':function(_0x584710,_0x2266f2){return _0x584710!==_0x2266f2;},'qJIhn':'TkpoH','dPWSt':_0x530593(0x217),'hJTNf':function(_0x331f60,_0x3271e3){return _0x331f60!==_0x3271e3;},'Jespz':_0x530593(0x1a7)},_0x14a93f=_0x54434e[_0x530593(0x2df)][_0x530593(0x2c4)],_0x3a4b36=_0x54434e['body'][_0x530593(0x2b4)],_0x2cabf3=_0x255c51[_0x530593(0x26e)](Number,_0x54434e[_0x530593(0x2df)][_0x530593(0x1ed)])||0x14,_0x445002=_0x255c51[_0x530593(0x26e)](Number,_0x54434e['body'][_0x530593(0x2eb)])||0x1,_0x3f466f=b+'?sip='+_0x3a4b36+_0x530593(0x30a)+_0x2cabf3+'&page='+_0x445002+_0x530593(0x312)+_0x14a93f,_0x344e69=new _0x2d011d(dbUrl);try{if(_0x255c51['CFOZF'](_0x255c51['KOmkO'],_0x255c51[_0x530593(0x21c)]))_0x52ceb9['close']();else return await _0x344e69['db'](global['dbName'])['collection'](global[_0x530593(0x252)])[_0x530593(0x25c)]({'_id':new _0x429e57(_0x14a93f)},{'projection':{'changesHistory':0x0}})?_0x54434e[_0x530593(0x199)](_0x255c51[_0x530593(0x2e5)],null):_0x54434e[_0x530593(0x199)](_0x255c51[_0x530593(0x2e5)],{'class':_0x255c51['waSjW'],'text':new Error(_0x255c51['BUfal'])+_0x530593(0x1d9)+_0x14a93f+'\x22'}),_0x493639['redirect'](_0x3f466f);}catch(_0x4f092a){return _0x255c51[_0x530593(0x1ad)](_0x255c51[_0x530593(0x1b2)],_0x255c51[_0x530593(0x238)])?(console[_0x530593(0x183)](_0x4f092a['message']),_0x54434e[_0x530593(0x199)](_0x255c51['vXitO'],{'class':_0x255c51[_0x530593(0x2ca)],'text':''+_0x4f092a[_0x530593(0x2a8)]}),_0x493639[_0x530593(0x21e)](_0x3f466f)):(_0x59a621['log'](_0x464dc6[_0x530593(0x2a8)]),_0x6c2dc0[_0x530593(0x199)](_0x255c51['vXitO'],{'class':_0x255c51[_0x530593(0x2ca)],'text':''+_0x23f6ad['message']}),_0x49d9a8[_0x530593(0x21e)](_0x53e3f9));}finally{if(_0x255c51['hJTNf'](_0x255c51[_0x530593(0x211)],_0x255c51['Jespz'])){const _0x3bb9ee=_0x23d340[_0x530593(0x253)][_0x530593(0x24a)][_0x530593(0x279)](_0x360f11),_0x2ce557=_0x1d752b[_0x414039],_0x3f2591=_0x3910e3[_0x2ce557]||_0x3bb9ee;_0x3bb9ee[_0x530593(0x31a)]=_0x223126['bind'](_0x49397d),_0x3bb9ee[_0x530593(0x295)]=_0x3f2591[_0x530593(0x295)][_0x530593(0x279)](_0x3f2591),_0x2e3858[_0x2ce557]=_0x3bb9ee;}else _0x344e69[_0x530593(0x304)]();}}),v[_0x4582fc(0x206)](R,_0x2848e3[_0x4582fc(0x1a1)],async(_0x5e02d7,_0x539141)=>{const _0x449beb=_0x4582fc,_0x1098fd={'QNoQN':function(_0x338dc9,_0x4e2211){return _0x338dc9(_0x4e2211);},'kXKXK':_0x449beb(0x184),'PuLkp':_0x449beb(0x21d),'mPACq':_0x449beb(0x2c5),'Kahhf':_0x449beb(0x207),'ccJxd':_0x449beb(0x26f),'Ozsge':_0x449beb(0x270),'jJPXi':function(_0xdc9719,_0xe9e7d2){return _0xdc9719+_0xe9e7d2;},'mfUYR':'chain','TjYFX':'input','LcNhq':function(_0xe1b31d,_0xf2b5cb){return _0xe1b31d(_0xf2b5cb);},'gJmqU':function(_0x4afbde){return _0x4afbde();},'BgzDh':function(_0x322efe,_0x652cad,_0x9588ee){return _0x322efe(_0x652cad,_0x9588ee);},'Frsck':function(_0x1644e8,_0x114c63){return _0x1644e8!=_0x114c63;},'AOJti':function(_0x2fe352,_0x11df39){return _0x2fe352===_0x11df39;},'BtLZU':_0x449beb(0x314),'mCedS':'UKLjq','CRPFV':_0x449beb(0x1b4),'foWMw':function(_0x1680d5,_0x208e79){return _0x1680d5===_0x208e79;},'htvJZ':'NTALX','Vvggl':_0x449beb(0x1b5),'TywfT':function(_0x121459,_0x505b08){return _0x121459===_0x505b08;},'ZdKxU':_0x449beb(0x254),'yKokw':_0x449beb(0x2c6),'QVSHT':function(_0x3267f7,_0x37c6ff){return _0x3267f7>_0x37c6ff;},'xOkYn':_0x449beb(0x192),'SENwP':_0x449beb(0x1db),'xlOkZ':function(_0x4a460a,_0x57ea39){return _0x4a460a!==_0x57ea39;},'BXPPC':_0x449beb(0x303),'EefnD':_0x449beb(0x287),'UNdXD':_0x449beb(0x293)};let {_id_toDelete:_0x31163e,load_id:_0x48dba7,sip:_0x42b38e,Id_toDelete:_0x5df326}=_0x5e02d7[_0x449beb(0x2df)];const _0x5d6a60=_0x1098fd[_0x449beb(0x189)](Number,_0x5e02d7[_0x449beb(0x2df)]['rpp'])||0x14,_0x1f0a53=_0x1098fd[_0x449beb(0x26d)](Number,_0x5e02d7[_0x449beb(0x2df)][_0x449beb(0x2eb)])||0x1;_0x5df326=_0x1098fd[_0x449beb(0x189)](Number,_0x5df326);const _0x3ae6ac=_0x31163e&&_0x1098fd['Frsck'](_0x31163e,_0x48dba7)?_0x449beb(0x312)+_0x31163e:'',_0x2bb381=b+_0x449beb(0x23c)+_0x42b38e+_0x449beb(0x30a)+_0x5d6a60+_0x449beb(0x195)+_0x1f0a53+_0x3ae6ac,_0x1948f0=new _0x2d011d(global[_0x449beb(0x2f3)]);try{if(_0x1098fd['AOJti'](_0x1098fd['BtLZU'],_0x1098fd[_0x449beb(0x227)]))XEMFpZ[_0x449beb(0x189)](_0x10c8b0,'0');else{await _0x1948f0[_0x449beb(0x2dc)]();const _0x594923=_0x1948f0['db'](global[_0x449beb(0x1c9)]),_0x9a127f=_0x594923['collection'](global['dbColl_devices']),_0x46f261=[{'coll':_0x594923[_0x449beb(0x1e2)](global['dbColl_docs']),'name':global[_0x449beb(0x1e1)],'key':_0x1098fd['CRPFV']}];for(const {coll:_0x350222,name:_0xd383df,key:_0x1e6d0d}of _0x46f261){if(_0x1098fd[_0x449beb(0x320)](_0x1098fd['htvJZ'],_0x1098fd['Vvggl']))_0x4044b5[_0x449beb(0x183)](_0x1098fd[_0x449beb(0x1ae)],_0x570944),_0x388556[_0x449beb(0x246)](_0xa1406f[_0x449beb(0x27a)]({'isPrint':!0x1,'class':_0x1098fd[_0x449beb(0x2e8)],'msg':_0x29d80f[_0x449beb(0x2a8)]}));else{const _0x55bd73={};if(_0x55bd73[_0x1e6d0d]=_0x5df326,await _0x350222[_0x449beb(0x25c)](_0x55bd73))return await _0x9a127f[_0x449beb(0x240)]({'deviceId':_0x5df326},{'$set':{'canDelete':!0x1}}),_0x5e02d7[_0x449beb(0x199)](_0x1098fd[_0x449beb(0x2d6)],{'class':_0x1098fd[_0x449beb(0x2e8)],'text':'ยูสเซอร์\x20\x22'+_0x5df326+_0x449beb(0x2a9)+_0xd383df+'{{sep}}ไม่สามารถลบได้'}),_0x539141['redirect'](_0x2bb381);}}if(_0x1098fd[_0x449beb(0x320)]((await _0x9a127f[_0x449beb(0x19e)]({'_id':new _0x429e57(_0x31163e)}))[_0x449beb(0x20b)],0x1)){if(_0x1098fd[_0x449beb(0x291)](_0x1098fd[_0x449beb(0x1d5)],_0x1098fd[_0x449beb(0x1dd)]))return _0x165474['log'](_0x1098fd[_0x449beb(0x1ae)],_0x259eef),_0x3afd8c['flash'](_0x1098fd[_0x449beb(0x2d6)],{'class':_0x1098fd['PuLkp'],'text':_0x23cac6[_0x449beb(0x2a8)]}),_0x1c9a11[_0x449beb(0x21e)](_0x3a6830);else{const _0x35c6e2=await _0x594923['collection'](global[_0x449beb(0x1f1)])[_0x449beb(0x224)]({'session.user_id':_0x31163e});if(_0x35c6e2[_0x449beb(0x22e)]&&_0x1098fd[_0x449beb(0x20e)](_0x35c6e2[_0x449beb(0x20b)],0x0))var _0x46daf7='{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22'+_0x35c6e2['deletedCount']+_0x449beb(0x232);else var _0x46daf7=_0x1098fd[_0x449beb(0x1d2)];_0x5e02d7[_0x449beb(0x199)](_0x1098fd[_0x449beb(0x2d6)],{'class':_0x1098fd[_0x449beb(0x190)],'text':_0x449beb(0x28c)+_0x5df326+_0x449beb(0x1e3)+_0x46daf7});}}else _0x5e02d7[_0x449beb(0x199)](_0x1098fd[_0x449beb(0x2d6)],{'class':_0x1098fd['PuLkp'],'text':_0x449beb(0x2f5)+_0x5df326+_0x449beb(0x290)});return _0x539141[_0x449beb(0x21e)](_0x2bb381);}}catch(_0x1eadb0){if(_0x1098fd[_0x449beb(0x30c)](_0x1098fd[_0x449beb(0x2c1)],_0x1098fd[_0x449beb(0x2c3)]))return console['log'](_0x1098fd[_0x449beb(0x1ae)],_0x1eadb0),_0x5e02d7[_0x449beb(0x199)](_0x1098fd[_0x449beb(0x2d6)],{'class':_0x1098fd[_0x449beb(0x2e8)],'text':_0x1eadb0[_0x449beb(0x2a8)]}),_0x539141[_0x449beb(0x21e)](_0x2bb381);else{const _0x3c6524={'kJyPe':XEMFpZ[_0x449beb(0x262)],'TQefP':XEMFpZ['ccJxd'],'wBJVT':function(_0x366ae2,_0x2e7fec){const _0xfe9b4a=_0x449beb;return XEMFpZ[_0xfe9b4a(0x189)](_0x366ae2,_0x2e7fec);},'wabYh':XEMFpZ[_0x449beb(0x2b2)],'XlFXF':function(_0x290907,_0x2f98e2){const _0x5b0278=_0x449beb;return XEMFpZ[_0x5b0278(0x234)](_0x290907,_0x2f98e2);},'bKKfl':XEMFpZ[_0x449beb(0x2a4)],'QPvmd':XEMFpZ[_0x449beb(0x22d)],'lKTQA':function(_0x5235a6,_0x1cbd84){const _0x311794=_0x449beb;return XEMFpZ[_0x311794(0x26d)](_0x5235a6,_0x1cbd84);},'CKrea':function(_0x511606){const _0x1db408=_0x449beb;return XEMFpZ[_0x1db408(0x1f9)](_0x511606);}};XEMFpZ['BgzDh'](_0x30302c,this,function(){const _0x18aca8=_0x449beb,_0x62d016=new _0x18d045(_0x3c6524[_0x18aca8(0x1fa)]),_0x3af0d3=new _0x216f1d(_0x3c6524['TQefP'],'i'),_0x4d897c=_0x3c6524[_0x18aca8(0x2fb)](_0x1578a3,_0x3c6524[_0x18aca8(0x2a7)]);!_0x62d016['test'](_0x3c6524['XlFXF'](_0x4d897c,_0x3c6524[_0x18aca8(0x1d3)]))||!_0x3af0d3[_0x18aca8(0x22c)](_0x3c6524[_0x18aca8(0x324)](_0x4d897c,_0x3c6524[_0x18aca8(0x27f)]))?_0x3c6524['lKTQA'](_0x4d897c,'0'):_0x3c6524['CKrea'](_0x2e571c);})();}}finally{if(_0x1098fd[_0x449beb(0x320)](_0x1098fd['UNdXD'],_0x1098fd[_0x449beb(0x239)]))_0x1948f0[_0x449beb(0x304)]();else{const _0x2fe09a=_0x51a9c3?function(){const _0x354c78=_0x449beb;if(_0x2db4a4){const _0x581110=_0x7b750[_0x354c78(0x2de)](_0x273105,arguments);return _0x4f8580=null,_0x581110;}}:function(){};return _0x5bcafa=![],_0x2fe09a;}}}),v[_0x4582fc(0x206)](F,_0x2848e3['isOA'],async(_0x1aefe3,_0x240569)=>{const _0x4d6095=_0x4582fc,_0x369d27={'HquED':function(_0x558b53){return _0x558b53();},'xXCUT':function(_0x5b1d61,_0x5b881f){return _0x5b1d61!==_0x5b881f;},'UHyjd':function(_0x50d0ce,_0x138748){return _0x50d0ce==_0x138748;},'UPBxt':function(_0x26724e,_0x43f9fe){return _0x26724e===_0x43f9fe;},'OxBRB':_0x4d6095(0x2ad),'LkNaX':_0x4d6095(0x21d),'GuNiv':_0x4d6095(0x243),'DMOkj':_0x4d6095(0x21b),'PysfL':_0x4d6095(0x309),'gfwBb':_0x4d6095(0x1db),'xidZs':_0x4d6095(0x20f),'WRaQJ':'JtKax','iYrKf':'error\x20===>\x20','uTHPH':_0x4d6095(0x215),'Lotlm':_0x4d6095(0x22a)},{_idArr:_0x14ece8}=_0x1aefe3['body'],_0x169928=new _0x2d011d(dbUrl);try{if(_0x369d27[_0x4d6095(0x27d)](_0x369d27[_0x4d6095(0x221)],_0x369d27['OxBRB'])){await _0x169928[_0x4d6095(0x2dc)]();const _0xcb9b00=await _0x169928['db'](global[_0x4d6095(0x1c9)])['collection'](global['dbColl_devices'])[_0x4d6095(0x2d5)]([{'$match':{'_id':{'$in':_0x14ece8[_0x4d6095(0x2ce)](_0x15a7df=>new _0x429e57(_0x15a7df))}}}])[_0x4d6095(0x2d2)]();if(_0x369d27[_0x4d6095(0x18d)](_0xcb9b00['length'],0x0))return _0x240569['send'](JSON[_0x4d6095(0x27a)]({'isPrint':!0x1,'class':_0x369d27[_0x4d6095(0x1ef)],'msg':_0x369d27[_0x4d6095(0x186)]}));const _0x5bb36b=_0x2b7731[_0x4d6095(0x2f2)](global[_0x4d6095(0x1cb)],_0x369d27[_0x4d6095(0x299)]),_0x36d1fb=_0x45fbfa[_0x4d6095(0x264)](_0x5bb36b,_0x369d27['PysfL']),_0x2b051b=_0x14be9[_0x4d6095(0x2f4)](_0x36d1fb,{'time':D[_0x4d6095(0x213)](),'title':'จำนวน\x20('+_0xcb9b00['length']+')','dateTime':D[_0x4d6095(0x197)](),'devicesFind':_0xcb9b00});_0x240569[_0x4d6095(0x246)](JSON[_0x4d6095(0x27a)]({'isPrint':!0x0,'class':_0x369d27[_0x4d6095(0x261)],'msg':_0x4d6095(0x267)+_0xcb9b00[_0x4d6095(0x2da)]+'\x20เรียบร้อยแล้ว','htmlPage':_0x2b051b}));}else FhNAYo[_0x4d6095(0x2d3)](_0x128b16);}catch(_0x2fef25){if(_0x369d27['UPBxt'](_0x369d27['xidZs'],_0x369d27[_0x4d6095(0x2e7)])){const _0x17feb6={'oWRlO':function(_0x3d0121,_0x34be47){return _0x369d27['xXCUT'](_0x3d0121,_0x34be47);},'KiFbS':function(_0x332c64,_0x259a86){const _0x55f530=_0x4d6095;return _0x369d27[_0x55f530(0x18d)](_0x332c64,_0x259a86);}},_0x438bd6=_0x1770ea['deviceId'];_0x4171fc=_0xf60371['filter'](_0x51c350=>{const _0x44a50c=_0x4d6095,_0x3aa99b=_0x17feb6[_0x44a50c(0x29c)](_0x51c350[_0x44a50c(0x1b8)],'A')||_0x17feb6[_0x44a50c(0x1dc)](_0x51c350['deviceId'],_0x438bd6);return _0x17feb6[_0x44a50c(0x29c)](_0x51c350[_0x44a50c(0x1b8)],'O')&&_0x3aa99b;});}else console[_0x4d6095(0x183)](_0x369d27['iYrKf'],_0x2fef25[_0x4d6095(0x2a8)]),_0x240569[_0x4d6095(0x246)](JSON[_0x4d6095(0x27a)]({'isPrint':!0x1,'class':_0x369d27[_0x4d6095(0x1ef)],'msg':_0x2fef25[_0x4d6095(0x2a8)]}));}finally{if(_0x369d27[_0x4d6095(0x2a2)](_0x369d27[_0x4d6095(0x325)],_0x369d27[_0x4d6095(0x308)]))_0x169928[_0x4d6095(0x304)]();else{if(_0x23fc59){const _0x31e59a=_0x567ac8[_0x4d6095(0x2de)](_0x3f7dd9,arguments);return _0x17a611=null,_0x31e59a;}}}}),v[_0x4582fc(0x206)](U,_0x2848e3['isOA'],async(_0x36e325,_0x516175)=>{const _0x1a8c71=_0x4582fc,_0x2c924c={'ELfDv':_0x1a8c71(0x184),'YWUzZ':_0x1a8c71(0x21d),'vEzSF':function(_0x585205,_0x17e759){return _0x585205!==_0x17e759;},'upEwe':_0x1a8c71(0x2a0),'FkpoO':function(_0x3f6690,_0x37b2f0){return _0x3f6690<_0x37b2f0;},'CdAKf':'yellow','INBBg':_0x1a8c71(0x271),'bRUFl':'changes_device.ejs','TEJXL':_0x1a8c71(0x1db),'RuotQ':'eIaMR','yGYJp':_0x1a8c71(0x25b),'HqmUc':_0x1a8c71(0x1c0)};let {deviceId:_0x7419c0}=_0x36e325[_0x1a8c71(0x2df)];const _0x3994fa=new _0x2d011d(global[_0x1a8c71(0x2f3)]);try{if(_0x2c924c['vEzSF'](_0x2c924c['upEwe'],_0x2c924c['upEwe']))_0x3ff155['log'](_0x2c924c[_0x1a8c71(0x283)],_0x59e93c['message']),_0x1392c8[_0x1a8c71(0x246)](_0x5562af[_0x1a8c71(0x27a)]({'isPrint':!0x1,'class':_0x2c924c[_0x1a8c71(0x2f7)],'msg':_0x3964d0[_0x1a8c71(0x2a8)]}));else{await _0x3994fa['connect']();var _0x2baa23=await _0x3994fa['db'](global[_0x1a8c71(0x1c9)])[_0x1a8c71(0x1e2)](global[_0x1a8c71(0x252)])['findOne']({'deviceId':_0x7419c0});if(!_0x2baa23)return _0x516175[_0x1a8c71(0x246)](JSON[_0x1a8c71(0x27a)]({'isPrint':!0x1,'class':_0x2c924c[_0x1a8c71(0x2f7)],'msg':'ไม่พบ\x20\x22'+_0x7419c0+'\x22'}));const _0x3e7799=_0x2baa23['changesHistory']||[];if(_0x2c924c[_0x1a8c71(0x302)](_0x3e7799[_0x1a8c71(0x2da)],0x1))return _0x516175[_0x1a8c71(0x246)](JSON['stringify']({'isPrint':!0x1,'class':_0x2c924c['CdAKf'],'msg':_0x2c924c[_0x1a8c71(0x31e)]}));const _0xa67b8a=_0x2b7731[_0x1a8c71(0x2f2)](folderForms,_0x2c924c[_0x1a8c71(0x1c2)]),_0x206030=await C['renderView'](_0xa67b8a,_0x516175,{'title':'ประวัติการแก้ไข\x20:\x20['+_0x2baa23[_0x1a8c71(0x1b4)]+']\x20'+_0x2baa23[_0x1a8c71(0x1cd)],'time':D[_0x1a8c71(0x197)](),'changesHistory':_0x3e7799});_0x516175['send'](JSON[_0x1a8c71(0x27a)]({'isPrint':!0x0,'class':_0x2c924c[_0x1a8c71(0x1d0)],'htmlPage':_0x206030}));}}catch(_0x5c5808){_0x2c924c[_0x1a8c71(0x2c2)](_0x2c924c[_0x1a8c71(0x23e)],_0x2c924c['yGYJp'])?(console[_0x1a8c71(0x183)](_0x2c924c[_0x1a8c71(0x283)],_0x5c5808),_0x516175[_0x1a8c71(0x246)](JSON[_0x1a8c71(0x27a)]({'isPrint':!0x1,'class':_0x2c924c[_0x1a8c71(0x2f7)],'msg':_0x5c5808[_0x1a8c71(0x2a8)]}))):_0xec31cc=_0x5583fe;}finally{_0x2c924c[_0x1a8c71(0x2c2)](_0x2c924c[_0x1a8c71(0x233)],_0x2c924c[_0x1a8c71(0x233)])?(_0x4055e0['log'](_0x2c924c[_0x1a8c71(0x283)],_0x3c3c91),_0x20abf8[_0x1a8c71(0x1ec)](0x194)[_0x1a8c71(0x260)](_0x1f29e1)):_0x3994fa['close']();}}),v[_0x4582fc(0x1a5)](H,_0x2848e3[_0x4582fc(0x1a1)],async(_0x296e67,_0x4d30b3)=>{const _0x19228c=_0x4582fc,_0x1dcffa={'uGXHx':_0x19228c(0x236),'AEfhe':_0x19228c(0x1db),'Gesix':_0x19228c(0x300),'KOtUD':'red','Qacto':'เกิดข้อผิดพลาดขณะดึงข้อมูล'},_0x1e2120=new _0x2d011d(global['dbUrl']);try{const _0x1d7228=_0x1e2120['db'](global[_0x19228c(0x1c9)]),_0x23a611=new RegExp(_0x1dcffa[_0x19228c(0x20c)],'i'),_0x590b25=(await _0x1d7228[_0x19228c(0x212)]()[_0x19228c(0x2d2)]())['map'](_0x4e4bff=>_0x4e4bff['name'])['filter'](_0x38fc81=>_0x23a611[_0x19228c(0x22c)](_0x38fc81))[_0x19228c(0x1f6)](),_0x15020b=(await _0x1d7228[_0x19228c(0x1e2)](global['dbColl_devices'])[_0x19228c(0x20a)]({})[_0x19228c(0x2d2)]())['map'](_0x2cd877=>_0x2cd877[_0x19228c(0x1b4)]),_0x21ef57=_0x590b25[_0x19228c(0x2cf)](_0x221164=>!_0x15020b['includes'](_0x221164));_0x4d30b3[_0x19228c(0x246)](JSON[_0x19228c(0x27a)]({'isFetch':!0x0,'msg':_0x19228c(0x2dd)+_0x590b25[_0x19228c(0x2da)]+_0x19228c(0x2e1),'class':_0x1dcffa[_0x19228c(0x18a)],'colls_devices':_0x21ef57,'msg':_0x1dcffa[_0x19228c(0x1af)]}));}catch(_0x830ac4){console[_0x19228c(0x183)](_0x830ac4),_0x4d30b3[_0x19228c(0x246)](JSON[_0x19228c(0x27a)]({'isFetch':!0x1,'msg':_0x830ac4[_0x19228c(0x2a8)],'class':_0x1dcffa[_0x19228c(0x274)],'data':[],'msg':_0x1dcffa[_0x19228c(0x28f)]}));}finally{_0x1e2120[_0x19228c(0x304)]();}}),v[_0x4582fc(0x206)](j,_0x2848e3[_0x4582fc(0x1a1)],async(_0x27bdbf,_0x5d5c6b)=>{const _0x4a7d00=_0x4582fc,_0x3f5d24={'mOWUk':function(_0x377f11,_0x50d1e4){return _0x377f11===_0x50d1e4;},'pBuLh':'red','STKFN':'กรุณาระบุไอดีอุปกรณ์','pKAYs':_0x4a7d00(0x26a),'ZTGvV':_0x4a7d00(0x1db)},_0x4a2faa=_0x27bdbf[_0x4a7d00(0x2df)]['deviceId'];if(!_0x4a2faa||_0x3f5d24[_0x4a7d00(0x1df)](_0x4a2faa['trim'](),''))return _0x5d5c6b[_0x4a7d00(0x246)](JSON[_0x4a7d00(0x27a)]({'isAddTrigger':!0x1,'class':_0x3f5d24[_0x4a7d00(0x2e6)],'msg':_0x3f5d24['STKFN']}));if(!new RegExp(global[_0x4a7d00(0x201)])['test'](_0x4a2faa))return _0x5d5c6b[_0x4a7d00(0x246)](JSON[_0x4a7d00(0x27a)]({'isAddTrigger':!0x1,'class':_0x3f5d24[_0x4a7d00(0x2e6)],'msg':_0x4a7d00(0x25e)+global[_0x4a7d00(0x209)]}));const _0xb756cf=new _0x2d011d(global[_0x4a7d00(0x2f3)]);try{await _0xb756cf[_0x4a7d00(0x2dc)]();const _0x3a7e25=await _0xb756cf['db'](global[_0x4a7d00(0x1c9)])[_0x4a7d00(0x1e2)](_0x4a2faa)[_0x4a7d00(0x230)](_0x3f5d24[_0x4a7d00(0x2c8)]);return _0x5d5c6b['send'](JSON[_0x4a7d00(0x27a)]({'isAddTrigger':!0x0,'class':_0x3f5d24['ZTGvV'],'uniqueKeys':_0x3a7e25,'msg':'ดึงค่าฟิลด์\x20key\x20ที่ไม่ซ้ำกัน\x20{{sep}}จำนวน\x20'+_0x3a7e25['length']+_0x4a7d00(0x288)}));}catch(_0x8e8217){_0x5d5c6b['send'](JSON[_0x4a7d00(0x27a)]({'isAddTrigger':!0x1,'class':_0x3f5d24[_0x4a7d00(0x2e6)],'msg':_0x8e8217['message']}));}finally{_0xb756cf[_0x4a7d00(0x304)]();}});export default v;function _0x3b5ae2(_0x2731a9){const _0x2608f2=_0x4582fc,_0x21f128={'clcGr':function(_0x461b2c,_0x1f8dc9){return _0x461b2c===_0x1f8dc9;},'DDoce':_0x2608f2(0x19c),'VuVoo':'while\x20(true)\x20{}','fnPSE':_0x2608f2(0x2d0),'lUdPe':function(_0x12b057,_0x369498){return _0x12b057!==_0x369498;},'izlIw':function(_0x400a55,_0x463548){return _0x400a55+_0x463548;},'pzYTx':function(_0x1ca2fe,_0x39e677){return _0x1ca2fe/_0x39e677;},'sIaFw':_0x2608f2(0x2da),'rlqIc':function(_0x431224,_0x29b618){return _0x431224%_0x29b618;},'umHHu':function(_0xf7c766,_0x1a9714){return _0xf7c766+_0x1a9714;},'wivvM':_0x2608f2(0x1c8),'BlWKY':_0x2608f2(0x208),'eWpQV':_0x2608f2(0x203),'ZxQeV':_0x2608f2(0x2e0),'mECba':function(_0x3b23ee,_0x16707a){return _0x3b23ee(_0x16707a);},'Tjscc':function(_0x30e4ef,_0x212b38){return _0x30e4ef(_0x212b38);}};function _0xce0bfa(_0xb8fe4){const _0x2fe0cf=_0x2608f2;if(_0x21f128[_0x2fe0cf(0x263)](typeof _0xb8fe4,_0x21f128[_0x2fe0cf(0x18c)]))return function(_0xc1d4f6){}[_0x2fe0cf(0x253)](_0x21f128['VuVoo'])[_0x2fe0cf(0x2de)](_0x21f128[_0x2fe0cf(0x273)]);else _0x21f128[_0x2fe0cf(0x2d1)](_0x21f128['izlIw']('',_0x21f128[_0x2fe0cf(0x1a3)](_0xb8fe4,_0xb8fe4))[_0x21f128[_0x2fe0cf(0x326)]],0x1)||_0x21f128[_0x2fe0cf(0x263)](_0x21f128['rlqIc'](_0xb8fe4,0x14),0x0)?function(){return!![];}['constructor'](_0x21f128[_0x2fe0cf(0x2be)](_0x21f128[_0x2fe0cf(0x256)],_0x21f128['BlWKY']))[_0x2fe0cf(0x316)](_0x21f128['eWpQV']):function(){return![];}[_0x2fe0cf(0x253)](_0x21f128['umHHu'](_0x21f128[_0x2fe0cf(0x256)],_0x21f128[_0x2fe0cf(0x1bd)]))[_0x2fe0cf(0x2de)](_0x21f128[_0x2fe0cf(0x23f)]);_0x21f128[_0x2fe0cf(0x20d)](_0xce0bfa,++_0xb8fe4);}try{if(_0x2731a9)return _0xce0bfa;else _0x21f128['Tjscc'](_0xce0bfa,0x0);}catch(_0x342aec){}}