const _0x2b0399=_0x5d2d;(function(_0x11987e,_0x2967bc){const _0x54021d=_0x5d2d,_0x5a0371=_0x11987e();while(!![]){try{const _0x311d7d=-parseInt(_0x54021d(0xdf))/0x1+-parseInt(_0x54021d(0x1a7))/0x2*(parseInt(_0x54021d(0x198))/0x3)+-parseInt(_0x54021d(0x18d))/0x4+-parseInt(_0x54021d(0x15d))/0x5+-parseInt(_0x54021d(0x192))/0x6*(parseInt(_0x54021d(0x10a))/0x7)+parseInt(_0x54021d(0x128))/0x8*(parseInt(_0x54021d(0x213))/0x9)+-parseInt(_0x54021d(0x228))/0xa*(-parseInt(_0x54021d(0x23c))/0xb);if(_0x311d7d===_0x2967bc)break;else _0x5a0371['push'](_0x5a0371['shift']());}catch(_0x32eda2){_0x5a0371['push'](_0x5a0371['shift']());}}}(_0x305e,0xd0d0e));const _0x264117=(function(){const _0x4a3fe0=_0x5d2d,_0x3a985c={'WdXLJ':function(_0x1d0cff,_0x556420){return _0x1d0cff+_0x556420;},'ejEGt':'debu','MuzDc':'gger','JUZms':_0x4a3fe0(0x245),'DdcKz':function(_0x5b9a0a,_0x3fa58f){return _0x5b9a0a!==_0x3fa58f;},'zuzdF':'jBRuf','juilj':_0x4a3fe0(0xcd),'DwsmS':function(_0xf11950,_0x192dde){return _0xf11950===_0x192dde;},'UIMIV':_0x4a3fe0(0x18b),'hABtJ':'ZdgCv','avvPr':function(_0x88c382,_0x2bfa9a){return _0x88c382(_0x2bfa9a);},'xtVfs':_0x4a3fe0(0x168)};let _0x5452e6=!![];return function(_0x18630b,_0x34bef7){const _0x4a0149=_0x4a3fe0,_0x4966fc={'fTAdq':function(_0x4cb255,_0x358e95){const _0x4bbe8f=_0x5d2d;return _0x3a985c[_0x4bbe8f(0x141)](_0x4cb255,_0x358e95);},'XxIEm':_0x3a985c[_0x4a0149(0x1bf)],'SnKtx':_0x3a985c[_0x4a0149(0xbb)],'nxMZy':_0x3a985c[_0x4a0149(0xc2)],'ouGbM':function(_0x50ff71,_0x3ff0fc){return _0x3a985c['DdcKz'](_0x50ff71,_0x3ff0fc);},'BnXCP':_0x3a985c[_0x4a0149(0x1c2)],'btVWv':_0x3a985c['juilj'],'SxPuG':function(_0x2d0c95,_0x19be05){const _0x4a26b5=_0x4a0149;return _0x3a985c[_0x4a26b5(0x1f4)](_0x2d0c95,_0x19be05);},'PSopY':_0x3a985c['UIMIV'],'UQGco':_0x3a985c['hABtJ'],'GsNBH':function(_0x48c9c9,_0x9a7556){return _0x3a985c['avvPr'](_0x48c9c9,_0x9a7556);}};if(_0x3a985c[_0x4a0149(0x1f4)](_0x3a985c['xtVfs'],_0x3a985c[_0x4a0149(0x269)])){const _0x358bff=_0x5452e6?function(){const _0x1c73e6=_0x4a0149;if(_0x4966fc[_0x1c73e6(0x14a)](_0x4966fc[_0x1c73e6(0x186)],_0x4966fc[_0x1c73e6(0xf1)])){if(_0x34bef7){if(_0x4966fc[_0x1c73e6(0x270)](_0x4966fc[_0x1c73e6(0x179)],_0x4966fc['UQGco'])){const _0x7fee06=_0x2a42ca?new _0x1bf47f(''+_0x224f3b,'i'):new _0x107fbd('.*');_0x422bac[_0x1c73e6(0x230)]({'$match':{'$or':[{'deviceId':{'$regex':_0x7fee06}},{'deviceName':{'$regex':_0x7fee06}}]}});}else{const _0x57ddca=_0x34bef7[_0x1c73e6(0xb8)](_0x18630b,arguments);return _0x34bef7=null,_0x57ddca;}}}else(function(){return![];}['constructor'](_0x4966fc[_0x1c73e6(0xfa)](_0x4966fc[_0x1c73e6(0x196)],_0x4966fc['SnKtx']))[_0x1c73e6(0xb8)](_0x4966fc[_0x1c73e6(0x255)]));}:function(){};return _0x5452e6=![],_0x358bff;}else _0x4966fc[_0x4a0149(0xf3)](_0x5197ce,'0');};}());(function(){const _0x101c94=_0x5d2d,_0x4eeadb={'zAnzb':_0x101c94(0x1ae),'jkYym':_0x101c94(0x216),'HqHQV':function(_0x14705e,_0x2c2bb9,_0x224d12){return _0x14705e(_0x2c2bb9,_0x224d12);},'FtHCn':function(_0x26d30a){return _0x26d30a();},'ATLVl':_0x101c94(0x16a),'XZytb':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','VJXnP':function(_0x205ca3,_0x54fbe1){return _0x205ca3(_0x54fbe1);},'EDKbP':_0x101c94(0x166),'TCmnY':function(_0x3b686e,_0xab1e32){return _0x3b686e+_0xab1e32;},'KCOTq':'chain','IldOD':function(_0x379711,_0x2c3f0e){return _0x379711+_0x2c3f0e;},'xcqwE':_0x101c94(0x273),'HWyhf':function(_0x1afe16,_0x887ecf){return _0x1afe16===_0x887ecf;},'WkSGq':_0x101c94(0x1a6),'rffQM':_0x101c94(0x1c1),'zMdCt':function(_0x44bf86,_0x1fe7be){return _0x44bf86+_0x1fe7be;},'lKWIW':function(_0x331b8a,_0xa80c3b){return _0x331b8a+_0xa80c3b;},'sBFYn':function(_0x314528,_0x542e3a){return _0x314528!==_0x542e3a;},'ePzdQ':_0x101c94(0x1c6),'aPzky':function(_0x2aa344,_0x3d168a){return _0x2aa344(_0x3d168a);},'YyAEB':function(_0x4f0fbd,_0x49e6b7){return _0x4f0fbd!==_0x49e6b7;},'ywior':'PiSoN','XTttJ':_0x101c94(0x1e8),'zMcdp':function(_0x227cde){return _0x227cde();},'DLwun':function(_0x188119,_0x25b233,_0x44715d){return _0x188119(_0x25b233,_0x44715d);}};_0x4eeadb[_0x101c94(0x1e9)](_0x264117,this,function(){const _0x36169d=_0x101c94,_0x238d11={'WBjlI':_0x4eeadb[_0x36169d(0x205)],'YcFsP':_0x4eeadb[_0x36169d(0x173)],'xNUhp':function(_0x51dc9a,_0x96fa9a){return _0x4eeadb['VJXnP'](_0x51dc9a,_0x96fa9a);},'OIzDb':_0x4eeadb[_0x36169d(0x204)],'cTxQI':function(_0x258ffb,_0xb1642c){const _0x53b4cf=_0x36169d;return _0x4eeadb[_0x53b4cf(0x1d4)](_0x258ffb,_0xb1642c);},'frAZM':_0x4eeadb[_0x36169d(0x138)],'cSTBg':function(_0x2ff8b0,_0x9d1b71){return _0x4eeadb['IldOD'](_0x2ff8b0,_0x9d1b71);},'afWFl':_0x4eeadb[_0x36169d(0x18c)],'lDAec':function(_0x5d1793,_0x4ae62a){const _0x52bb7c=_0x36169d;return _0x4eeadb[_0x52bb7c(0xd4)](_0x5d1793,_0x4ae62a);},'qdaTP':function(_0x526f29){return _0x4eeadb['FtHCn'](_0x526f29);}};if(_0x4eeadb[_0x36169d(0x16b)](_0x4eeadb['WkSGq'],_0x4eeadb['rffQM'])){const _0x1e9bbc=_0x44724f+_0x36169d(0x145)+_0x4deb4c+'&rpp='+_0x1c007a+'&page='+_0x105c4a+'&load_id='+_0x80e768[_0x36169d(0x201)];return _0x41feaa[_0x36169d(0x1c8)](_0x4eeadb['zAnzb'],{'class':_0x4eeadb[_0x36169d(0xbc)],'text':_0x36169d(0x23d)+_0x462190+_0x36169d(0x10f)}),_0x75600f[_0x36169d(0x1de)](_0x1e9bbc);}else{const _0x58d2a3=new RegExp(_0x4eeadb['ATLVl']),_0x126451=new RegExp(_0x4eeadb['XZytb'],'i'),_0x2f78e9=_0x4eeadb['VJXnP'](_0x48b6d1,_0x4eeadb[_0x36169d(0x204)]);!_0x58d2a3[_0x36169d(0x1b7)](_0x4eeadb[_0x36169d(0xec)](_0x2f78e9,_0x4eeadb[_0x36169d(0x138)]))||!_0x126451[_0x36169d(0x1b7)](_0x4eeadb[_0x36169d(0x12e)](_0x2f78e9,_0x4eeadb[_0x36169d(0x18c)]))?_0x4eeadb[_0x36169d(0x263)](_0x4eeadb[_0x36169d(0x16d)],_0x4eeadb['ePzdQ'])?_0x4eeadb[_0x36169d(0xe4)](_0x3254c7,this,function(){const _0x44cba6=_0x36169d,_0x565983=new _0x5b132b(_0x238d11[_0x44cba6(0x1aa)]),_0x269c74=new _0x4e06d9(_0x238d11[_0x44cba6(0x1f0)],'i'),_0x5beabc=_0x238d11['xNUhp'](_0x3961e8,_0x238d11[_0x44cba6(0x26b)]);!_0x565983[_0x44cba6(0x1b7)](_0x238d11[_0x44cba6(0x194)](_0x5beabc,_0x238d11['frAZM']))||!_0x269c74[_0x44cba6(0x1b7)](_0x238d11[_0x44cba6(0x217)](_0x5beabc,_0x238d11['afWFl']))?_0x238d11[_0x44cba6(0xe5)](_0x5beabc,'0'):_0x238d11['qdaTP'](_0x3fd590);})():_0x4eeadb['aPzky'](_0x2f78e9,'0'):_0x4eeadb[_0x36169d(0x1bd)](_0x4eeadb[_0x36169d(0x150)],_0x4eeadb[_0x36169d(0xbe)])?_0x4eeadb[_0x36169d(0x1a2)](_0x48b6d1):_0x4eeadb[_0x36169d(0x21e)](_0x37365c);}})();}());function _0x5d2d(_0x2afdb3,_0x36fe4f){const _0x473c2a=_0x305e();return _0x5d2d=function(_0x38ebde,_0x26128e){_0x38ebde=_0x38ebde-0xb1;let _0xe7f517=_0x473c2a[_0x38ebde];return _0xe7f517;},_0x5d2d(_0x2afdb3,_0x36fe4f);}const _0x26128e=(function(){const _0x4eb5d7=_0x5d2d,_0x362abf={'bNHKd':_0x4eb5d7(0x1ae),'JapKJ':_0x4eb5d7(0x1ca),'RHCIx':function(_0x3c3303,_0x104693){return _0x3c3303!==_0x104693;},'elUPp':_0x4eb5d7(0x17f),'JNboB':_0x4eb5d7(0x1e3),'ZfEpv':function(_0x149011,_0x1c6954){return _0x149011===_0x1c6954;},'PDBxb':'HzcSj'};let _0x5c917e=!![];return function(_0x3c7c47,_0xba386){const _0x5b1a40=_0x4eb5d7,_0x2c182c={'yjlRS':_0x362abf[_0x5b1a40(0x1cb)],'wKjnk':_0x362abf[_0x5b1a40(0x1d0)],'dKYWj':function(_0x1a49d9,_0x2e280d){const _0x2c7f91=_0x5b1a40;return _0x362abf[_0x2c7f91(0x111)](_0x1a49d9,_0x2e280d);},'aqxES':_0x362abf[_0x5b1a40(0x12f)],'lqRyP':_0x362abf['JNboB']};if(_0x362abf[_0x5b1a40(0x14e)](_0x362abf[_0x5b1a40(0x113)],_0x362abf[_0x5b1a40(0x113)])){const _0x3ca725=_0x5c917e?function(){const _0x357d6e=_0x5b1a40,_0x16e065={'IcHJI':_0x2c182c[_0x357d6e(0x169)],'YXJje':_0x2c182c[_0x357d6e(0x224)]};if(_0x2c182c[_0x357d6e(0xc0)](_0x2c182c[_0x357d6e(0x22d)],_0x2c182c[_0x357d6e(0x22d)]))return _0x39c0bb['log'](_0x4da1b2[_0x357d6e(0x225)]),_0x47d658[_0x357d6e(0x1c8)](_0x16e065['IcHJI'],{'class':_0x16e065[_0x357d6e(0x1e0)],'text':''+_0x2a219c[_0x357d6e(0x225)]}),_0x521de1[_0x357d6e(0x1de)](_0x56bedb);else{if(_0xba386){if(_0x2c182c[_0x357d6e(0xc0)](_0x2c182c[_0x357d6e(0x1d8)],_0x2c182c['lqRyP']))return!![];else{const _0x2fd4ce=_0xba386['apply'](_0x3c7c47,arguments);return _0xba386=null,_0x2fd4ce;}}}}:function(){};return _0x5c917e=![],_0x3ca725;}else _0x426ae2=_0x270def;};}()),_0x38ebde=_0x26128e(this,function(){const _0x44b2b6=_0x5d2d,_0x9ec7a={'IvQRp':function(_0x3524bf,_0x3c64c0){return _0x3524bf(_0x3c64c0);},'Ymqxj':function(_0x5a471a,_0x5aa4a7){return _0x5a471a===_0x5aa4a7;},'kNzgW':_0x44b2b6(0xcc),'PAkyf':'wTzkX','ceOzA':function(_0x44d420,_0xb9e1ef){return _0x44d420(_0xb9e1ef);},'EnAeg':function(_0x4b9228,_0x147ca7){return _0x4b9228+_0x147ca7;},'RoBLD':_0x44b2b6(0xe8),'VMqYt':_0x44b2b6(0x151),'qwmFd':function(_0x3a78d3){return _0x3a78d3();},'oAPqR':function(_0x4d9322,_0x3e6409){return _0x4d9322!==_0x3e6409;},'QxeuR':_0x44b2b6(0x18f),'VHviR':'log','JXdzQ':_0x44b2b6(0x1b9),'WhmPn':_0x44b2b6(0x1c5),'BRDst':_0x44b2b6(0x21a),'veqlD':_0x44b2b6(0x22f),'HqCqD':_0x44b2b6(0x1f5),'nEcRu':_0x44b2b6(0x242),'RXQCY':function(_0x26790c,_0x1edd43){return _0x26790c<_0x1edd43;},'ekXMy':function(_0xc0b349,_0x17713b){return _0xc0b349!==_0x17713b;},'UZPAq':_0x44b2b6(0x14c)};let _0x217fb9;try{if(_0x9ec7a[_0x44b2b6(0x1a1)](_0x9ec7a['kNzgW'],_0x9ec7a[_0x44b2b6(0x1ba)]))_0x9ec7a[_0x44b2b6(0xc1)](_0x274d2e,0x0);else{const _0x188ec3=_0x9ec7a[_0x44b2b6(0xe1)](Function,_0x9ec7a[_0x44b2b6(0x171)](_0x9ec7a[_0x44b2b6(0x171)](_0x9ec7a['RoBLD'],_0x9ec7a['VMqYt']),');'));_0x217fb9=_0x9ec7a[_0x44b2b6(0xf9)](_0x188ec3);}}catch(_0x1338f0){_0x9ec7a[_0x44b2b6(0xe3)](_0x9ec7a[_0x44b2b6(0x1d7)],_0x9ec7a[_0x44b2b6(0x1d7)])?_0x3e7052['close']():_0x217fb9=window;}const _0x3e0e5e=_0x217fb9[_0x44b2b6(0x202)]=_0x217fb9['console']||{},_0x4a67bb=[_0x9ec7a['VHviR'],_0x9ec7a[_0x44b2b6(0x114)],_0x9ec7a['WhmPn'],_0x9ec7a[_0x44b2b6(0x1db)],_0x9ec7a['veqlD'],_0x9ec7a[_0x44b2b6(0x11d)],_0x9ec7a[_0x44b2b6(0xb5)]];for(let _0x43bba1=0x0;_0x9ec7a[_0x44b2b6(0x237)](_0x43bba1,_0x4a67bb[_0x44b2b6(0x184)]);_0x43bba1++){if(_0x9ec7a[_0x44b2b6(0x20a)](_0x9ec7a[_0x44b2b6(0x23e)],_0x9ec7a[_0x44b2b6(0x23e)])){if(_0x4a8cbb){const _0x1b97e9=_0x2fb16c[_0x44b2b6(0xb8)](_0x43f607,arguments);return _0x37ad5a=null,_0x1b97e9;}}else{const _0x51a6b1=_0x26128e[_0x44b2b6(0x155)][_0x44b2b6(0x253)][_0x44b2b6(0x156)](_0x26128e),_0x405563=_0x4a67bb[_0x43bba1],_0x39b6b2=_0x3e0e5e[_0x405563]||_0x51a6b1;_0x51a6b1[_0x44b2b6(0x234)]=_0x26128e[_0x44b2b6(0x156)](_0x26128e),_0x51a6b1['toString']=_0x39b6b2[_0x44b2b6(0x1c0)][_0x44b2b6(0x156)](_0x39b6b2),_0x3e0e5e[_0x405563]=_0x51a6b1;}}});_0x38ebde();import _0x1a23a1 from'express';const v=_0x1a23a1[_0x2b0399(0x15e)]();import{MongoClient as _0x356a10,ObjectId as _0x41fe69}from'mongodb';import _0x44bb92 from'ejs';import _0x562714 from'path';function _0x305e(){const _0x187ade=['URgxd','275338IwrDEl','Ciyzt','SzVNK','KjmuJ','IGQIR','\x22\x20เรียบร้อยแล้ว','egRLN','RHCIx','findOne','PDBxb','JXdzQ','dJzAb','userAuthority','SpBUl','chain','_id','getSessionData','TJnMR','ชื่ออุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','HqCqD','devices','status','pLaKf','AcRCC','MYLDg','collection','bBbIU','changes_device.ejs','isOA','stringify','8KnLgZm','modifiedCount','send','verBK','aKrRg','lTwWp','lKWIW','elUPp','eCFDu','{{sep}}ไม่สามารถลบได้','\x20คอลเล็กชัน','MXdSN','neJVa','Fjvaw','WyeMI','AsMsi','KCOTq','Cyami','jBYUO','deviceId','proPT','kDwoD','nAeDf','XUNxQ','/myModule.js','WdXLJ','jZAPU','kQXmm','XKQZD','?sip=','gOIPt','jiAoS','iXlvN','gger','ouGbM','deletedCount','AdHpw','Ugyey','ZfEpv','print_devices.ejs','ywior','{}.constructor(\x22return\x20this\x22)(\x20)','triggerStatus','&rpp=','RYczf','constructor','bind','IFIAA','render','NusYp','EXKiY','ลบยูสเซอร์\x20\x22','changesHistory','1403700NxCnTQ','Router','\x22\x20มีอยู่ในเอกสาร\x20','VUUuq','action','mQyyd','vcLQR','tSwPF','MSFDR','init','vgzBG','qiuDy','yjlRS','function\x20*\x5c(\x20*\x5c)','HWyhf','replace','ePzdQ','yzfLY','haLxP','DlLsS','EnAeg','push','XZytb','SHEWu','vneBu','azmfZ','getDate','AMItd','PSopY','folderForms','renderView','wZHPW','Wkoru','dUcaq','iaLKB','WtEET','countDocuments','IUeYt','KXbTF','length','JlVmQ','BnXCP','BoSLJ','VANrv','mlvKM','connect','jFmDP','xcqwE','5769816AnLKEj','ceil','IFfqG','DXsCe','call','162QZGdec','EZnzp','cTxQI','JFwMC','XxIEm','{{sep}}\x22','948TuptNR','../','XYKYZ','ETAMG','/delete','hlgUi','dbName','QnJUW','YeInH','Ymqxj','zMcdp','FtXhB','SkLan','KgNnr','BRJAh','1552duUpqz','load_id','{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22','WBjlI','qrVOP','body','eqJGl','msg','fMEZv','rZUQJ','Aoibo','KtSrj','ค่า\x20Min\x20ต้องน้อยกว่า\x20Max\x20สำหรับคีย์\x20\x22','$dateTimeCanDelete','/myData.js','MygrB','test','qcCrU','warn','PAkyf','XWXYj','&page=','YyAEB','zamsQ','ejEGt','toString','zoieu','zuzdF','getDateTime','MijwD','info','GDxaN','ljmkr','flash','/fetch','red','bNHKd','YxUHR','mlfqV','zVldw','/changes','JapKJ','NFidn','Bdnin','yMTcX','TCmnY','MNgKC','kCkbz','QxeuR','lqRyP','xAPPK','includes','BRDst','rpp','error\x20===>\x20','redirect','query','YXJje','listCollections','page','nikkI','พิมพ์ข้อมูล\x20','aQdhq','XwLpf','eFNLY','vxraV','DLwun','/devices','ZVvkC','XJUDx','toArray','Lpdpj','EOgTQ','YcFsP','EvvKu','fqEVf','eQWGw','DwsmS','table','JqDbI','nwAbl','DEVICE_DESCRIPTION','string','close','XFkEJ','dLPuE','JnpHd','dbColl_sessions','yellow','cHFxa','insertedId','console','GQkJt','EDKbP','ATLVl','filter','NXXtX','LEzAL','gnrtR','ekXMy','AnTdv','ypYLe','yKlxb','Pxrkd','sip','gzzCK','while\x20(true)\x20{}','CgjeI','12100797qDhaUI','rEmQA','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','green','cSTBg','hclVF','fjBcD','error','zCkGC','vsmqp','OQQtj','FtHCn','ePHSb','qNCDR','CFdwh','HVBvF','KiquI','wKjnk','message','wLoyP','PmahS','8222230YIqKIC','owmJC','ดึงค่าฟิลด์\x20key\x20ที่ไม่ซ้ำกัน\x20{{sep}}จำนวน\x20','อัปเดท\x20\x22','ไม่พบประวัติการเปลี่ยนแปลง','aqxES','IKQKX','exception','unshift','get','UlOys','^(e|s)\x5cd{3}$','__proto__','jOSLy','deleteMany','RXQCY','iEYMY','OlkIm','กรุณาระบุไอดีอุปกรณ์','UJacd','55xZCuFI','เพิ่มอุปกรณ์\x20\x22','UZPAq','wqTtD','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)','trace','FfafR','deviceName','stateObject','wVsnr','เกิดข้อผิดพลาดขณะดึงข้อมูล','GpjOU','koQhR','HdOCs','ไม่พบ\x20\x22','dbColl_docs','VOrKR','readFileSync','koZBj','find','KQnKC','aggregate','prototype','acknowledged','nxMZy','quGCR','CPQyE','dFbYJ','post','triggerRows','fYach','userId','จำนวน\x20(','yfkgL','ruEyu','sueCO','join','/add-trigger','sBFYn','MdgQJ','wXOwc','/save','PIRaG','Fcckd','xtVfs','YoVUV','OIzDb','FDFsr','triggerKey','bcuDn','tiHDX','SxPuG','tvkga','vXiWw','input','wHNCX','seGYz','Not\x20Found','trim','nEcRu','counter','vbkzt','apply','vJbmf','LlExH','MuzDc','jkYym','BVEzJ','XTttJ','vZOCJ','dKYWj','IvQRp','JUZms','log','minute','STFSj','XJuOF','triggerMax','yNfRj','Qmazf','FCSVV','orqwZ','aMwSJ','SKlRI','hIFMl','EQMFY','PLXFS','pmxJj','size','WnpHm','VJXnP','xuYAM','รูปแบบไอดีอุปกรณ์ไม่ถูกต้อง{{sep}}','FCDwE','/myDateTime.js','zakeE','niVCh','map','DRWzW','jQuPH','CBbLI','1569910xOseLJ','ยูสเซอร์\x20\x22','ceOzA','Avpjg','oAPqR','HqHQV','lDAec','&load_id=','มีคีย์ที่เลือกซ้ำกัน','return\x20(function()\x20','getChangeHistory','LasnE','VaNPq','zMdCt','qiSsR','FhmoV','xNwNX','triggerMin','btVWv','updateOne','GsNBH','sort','eLOMn','ไม่มีข้อมูล','sendFile','Nbuts','qwmFd','fTAdq','debu','JitKD','txDTK','xbCop','xhxKr','dbUrl','ประวัติการแก้ไข\x20:\x20[','PjWfk','/print','OcxdU','key','dbColl_devices','bEIyg','lBSco'];_0x305e=function(){return _0x187ade;};return _0x305e();}import _0x3d969b from'fs';import _0x34f609 from'../middleware/mainAuth.js';const C=await import(_0x2b0399(0x199)+mymoduleFolder+_0x2b0399(0x140)),D=await import(_0x2b0399(0x199)+mymoduleFolder+_0x2b0399(0xd8)),T=await import(_0x2b0399(0x199)+mymoduleFolder+'/myUsers.js'),L=await import(_0x2b0399(0x199)+mymoduleFolder+_0x2b0399(0x1b5)),b=_0x2b0399(0x1ea),M=b+_0x2b0399(0x266),P=b+'/load',R=b+_0x2b0399(0x19c),F=b+_0x2b0399(0x103),H=b+_0x2b0399(0x1c9),U=b+_0x2b0399(0x1cf),j=b+_0x2b0399(0x262),G=b[_0x2b0399(0x16c)](/\//g,'_');v['get'](b,_0x34f609[_0x2b0399(0x126)],async(_0x373def,_0x95f7e7)=>{const _0x14e1ed=_0x2b0399,_0x2cc26b={'Zllia':_0x14e1ed(0x1dd),'URgxd':_0x14e1ed(0x1ca),'DXsCe':function(_0x340f30,_0x5e8096){return _0x340f30!==_0x5e8096;},'HBQPS':'AobAb','fYach':_0x14e1ed(0x1ee),'Fjvaw':function(_0x5d0cf2,_0x38eb35){return _0x5d0cf2==_0x38eb35;},'mQyyd':function(_0x5a7af5,_0x14c94c){return _0x5a7af5(_0x14c94c);},'VRUoV':function(_0x33ed00,_0x2dd064){return _0x33ed00*_0x2dd064;},'FketE':function(_0x285975,_0x36e719){return _0x285975-_0x36e719;},'wlYzT':function(_0x1c4e56,_0x35c62b){return _0x1c4e56===_0x35c62b;},'SzVNK':_0x14e1ed(0x24d),'XYKYZ':_0x14e1ed(0x176),'LEzAL':function(_0x377eeb,_0x4df0ab){return _0x377eeb!==_0x4df0ab;},'IKQKX':'hcCWi','gOIPt':_0x14e1ed(0xd0),'FDFsr':function(_0x259735,_0x3300d8){return _0x259735/_0x3300d8;},'AsMsi':function(_0x872ea2,_0x184201){return _0x872ea2<_0x184201;},'AuJYQ':function(_0x4af47c,_0xe25395){return _0x4af47c-_0xe25395;},'JqDbI':function(_0xc78b87,_0x172a23){return _0xc78b87(_0x172a23);},'MYLDg':function(_0x2d4147,_0x5bd17a){return _0x2d4147-_0x5bd17a;},'GCulz':function(_0x484c74,_0x187679){return _0x484c74(_0x187679);},'CMnJb':function(_0x42da62,_0x33a072){return _0x42da62>_0x33a072;},'izZFx':function(_0x1109b5,_0x5e7d8c){return _0x1109b5+_0x5e7d8c;},'MdgQJ':function(_0x13a5a4,_0x117a18){return _0x13a5a4(_0x117a18);},'wZHPW':function(_0x258fc7,_0x33ff54){return _0x258fc7+_0x33ff54;},'LIMYv':function(_0x12d8e6,_0x4ce1ee){return _0x12d8e6(_0x4ce1ee);},'LbKKl':'$changesHistory','nDsic':_0x14e1ed(0x1b4),'hSYHm':_0x14e1ed(0xc4),'NXXtX':_0x14e1ed(0x1ad),'niVCh':_0x14e1ed(0x1ec),'wVsnr':_0x14e1ed(0xc9),'YoVUV':_0x14e1ed(0x232),'fMEZv':_0x14e1ed(0x11e),'Cyami':_0x14e1ed(0x1ae),'XwLpf':function(_0x187a41,_0x136bf9){return _0x187a41===_0x136bf9;},'myVKf':'czvVD','aVTjS':_0x14e1ed(0x19b),'HdOCs':_0x14e1ed(0xef),'ypYLe':_0x14e1ed(0xd3)};let _0x37265a=_0x373def['query']['sip'];_0x37265a=_0x37265a?_0x37265a[_0x14e1ed(0x16c)](/[.*+?^${}()|[\]\\]/g,''):'';const _0xa6585d=_0x2cc26b[_0x14e1ed(0x162)](Number,_0x373def[_0x14e1ed(0x1df)][_0x14e1ed(0x1dc)])||0x14,_0x325c57=_0x2cc26b[_0x14e1ed(0x162)](Number,_0x373def[_0x14e1ed(0x1df)]['page'])||0x1,_0x251923=_0x373def[_0x14e1ed(0x1df)][_0x14e1ed(0x1a8)]||'',_0x201306=_0x2cc26b['mQyyd'](Number,_0x2cc26b['VRUoV'](_0x2cc26b['FketE'](_0x325c57,0x1),_0xa6585d)),_0x55dd2f=D[_0x14e1ed(0x1c3)](0x0),_0x472aa2=new _0x356a10(dbUrl);try{if(_0x2cc26b['wlYzT'](_0x2cc26b[_0x14e1ed(0x10c)],_0x2cc26b[_0x14e1ed(0x19a)]))_0x2cdaa8[_0x14e1ed(0x1fa)]();else{await _0x472aa2[_0x14e1ed(0x18a)]();const _0x2e644e=_0x472aa2['db'](global[_0x14e1ed(0x19e)])[_0x14e1ed(0x123)](global[_0x14e1ed(0x106)]);if(_0x37265a){if(_0x2cc26b[_0x14e1ed(0x208)](_0x2cc26b[_0x14e1ed(0x22e)],_0x2cc26b[_0x14e1ed(0x146)])){const _0x3ffd58=new RegExp(_0x37265a,'i');var _0x22ac05=await _0x2e644e[_0x14e1ed(0x181)]({'$or':[{'deviceId':{'$regex':_0x3ffd58}},{'deviceName':{'$regex':_0x3ffd58}},{'userFirstname':{'$regex':_0x3ffd58}}]});}else{const _0x593aa0=_0x7696fd?function(){const _0x581b38=_0x14e1ed;if(_0x1ec5c4){const _0x32bd5f=_0xc13a1b[_0x581b38(0xb8)](_0xf1fecd,arguments);return _0x1ae471=null,_0x32bd5f;}}:function(){};return _0x336cef=![],_0x593aa0;}}else var _0x22ac05=await _0x2e644e[_0x14e1ed(0x181)]({});const _0x195c88=Math[_0x14e1ed(0x18e)](_0x2cc26b[_0x14e1ed(0x26c)](_0x22ac05,_0xa6585d)),_0x462f7c=_0x2cc26b[_0x14e1ed(0x137)](_0x2cc26b['AuJYQ'](_0x2cc26b[_0x14e1ed(0x1f6)](Number,_0x325c57),0x1),0x1)?'-':_0x2cc26b[_0x14e1ed(0x122)](_0x2cc26b[_0x14e1ed(0x162)](Number,_0x325c57),0x1),_0x34136d=_0x2cc26b['GCulz'](Number,_0x325c57),_0x299727=_0x2cc26b['CMnJb'](_0x2cc26b['izZFx'](_0x2cc26b[_0x14e1ed(0x264)](Number,_0x325c57),0x1),_0x195c88)?'-':_0x2cc26b[_0x14e1ed(0x17c)](_0x2cc26b['LIMYv'](Number,_0x325c57),0x1),_0x491aad=[{'$project':{'_id':0x1,'deviceId':0x1,'deviceStatus':0x1,'deviceName':0x1,'triggerRows':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0x2cc26b['LbKKl'],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x55dd2f},'endDate':{'$toDate':_0x2cc26b['nDsic']},'unit':_0x2cc26b['hSYHm']}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'deviceId':-0x1}},{'$skip':_0x201306},{'$limit':_0xa6585d}];if(_0x37265a){if(_0x2cc26b[_0x14e1ed(0x208)](_0x2cc26b[_0x14e1ed(0x207)],_0x2cc26b[_0x14e1ed(0xda)])){const _0x2828a7=_0x37265a?new RegExp(''+_0x37265a,'i'):new RegExp('.*');_0x491aad[_0x14e1ed(0x230)]({'$match':{'$or':[{'deviceId':{'$regex':_0x2828a7}},{'deviceName':{'$regex':_0x2828a7}}]}});}else{const _0x45c253=_0x247db0[_0x14e1ed(0x155)]['prototype'][_0x14e1ed(0x156)](_0x1108ff),_0x1053ec=_0x1d6a5e[_0x4ed072],_0x4917f4=_0x1c2b2b[_0x1053ec]||_0x45c253;_0x45c253[_0x14e1ed(0x234)]=_0x5994ac['bind'](_0x2a58e5),_0x45c253[_0x14e1ed(0x1c0)]=_0x4917f4[_0x14e1ed(0x1c0)][_0x14e1ed(0x156)](_0x4917f4),_0x165d09[_0x1053ec]=_0x45c253;}}const _0x21f981=T['getSessionData'](_0x373def),_0x1bc2c1=_0x21f981[_0x14e1ed(0x116)];let _0x1941fb=await _0x2e644e[_0x14e1ed(0x252)](_0x491aad)[_0x14e1ed(0x1ed)]();if(['A']['includes'](_0x1bc2c1)){if(_0x2cc26b[_0x14e1ed(0x190)](_0x2cc26b[_0x14e1ed(0x246)],_0x2cc26b[_0x14e1ed(0x26a)])){const _0x1987fe=_0x21f981['deviceId'];_0x1941fb=_0x1941fb['filter'](_0x56da97=>{const _0x354d99=_0x14e1ed,_0x210f3b={'txDTK':_0x2cc26b['Zllia'],'bCmUv':_0x2cc26b[_0x354d99(0x109)]};if(_0x2cc26b[_0x354d99(0x190)](_0x2cc26b['HBQPS'],_0x2cc26b[_0x354d99(0x25b)])){const _0x1a632a=_0x2cc26b[_0x354d99(0x190)](_0x56da97[_0x354d99(0x116)],'A')||_0x2cc26b[_0x354d99(0x135)](_0x56da97[_0x354d99(0x13b)],_0x1987fe);return _0x2cc26b[_0x354d99(0x190)](_0x56da97['userAuthority'],'O')&&_0x1a632a;}else _0x58e453['log'](_0x210f3b[_0x354d99(0xfd)],_0x53d5f9),_0x2c0e4d[_0x354d99(0x12a)](_0x4e2a8a[_0x354d99(0x127)]({'isPrint':!0x1,'class':_0x210f3b['bCmUv'],'msg':_0x1cefb2[_0x354d99(0x225)]}));});}else _0x10685e[_0x14e1ed(0x1fa)]();}if(_0x251923)var _0x52dd88=await _0x2e644e[_0x14e1ed(0x112)]({'_id':new _0x41fe69(_0x251923)},{'projection':{'userPassword':0x0}});else var _0x52dd88={};const _0x578edb=await C[_0x14e1ed(0x17b)](_0x2cc26b[_0x14e1ed(0x1af)],_0x95f7e7,{'title':PAGE_DEVICES,'time':D[_0x14e1ed(0x177)](),'msg':_0x373def[_0x14e1ed(0x1c8)](_0x2cc26b[_0x14e1ed(0x139)]),'user':T[_0x14e1ed(0x11a)](_0x373def),'settings':await C['getSettings'](),'load_id':_0x251923,'sip':_0x37265a,'rpp':_0xa6585d,'page':_0x325c57,'pagePre':_0x462f7c,'pageAct':_0x34136d,'pageNxt':_0x299727,'pageLst':_0x195c88,'pageRedirect':b,'data':_0x1941fb,'PATH_MAIN':b,'PATH_PRINT':F,'PATH_SAVE':M,'PATH_LOAD':P,'PATH_DELETE':R,'PATH_FETCH':H,'PATH_CHANGES':U,'PATH_ADD_TRIGGER':j,'PREFIX':G,'item':_0x52dd88});return _0x95f7e7[_0x14e1ed(0x12a)](_0x578edb);}}catch(_0x553b86){if(_0x2cc26b[_0x14e1ed(0x1e6)](_0x2cc26b['myVKf'],_0x2cc26b['aVTjS'])){const _0x1ff7db=_0x22e4b8[_0x14e1ed(0xb8)](_0x15b20d,arguments);return _0x201e07=null,_0x1ff7db;}else console[_0x14e1ed(0xc3)](_0x553b86['message']),_0x95f7e7[_0x14e1ed(0x11f)](0x194)[_0x14e1ed(0xf7)](file404);}finally{if(_0x2cc26b['LEzAL'](_0x2cc26b[_0x14e1ed(0x24a)],_0x2cc26b[_0x14e1ed(0x20c)]))_0x472aa2[_0x14e1ed(0x1fa)]();else{if(_0x36ccec){const _0x38fcb1=_0x1e5e0e[_0x14e1ed(0xb8)](_0x1d2d89,arguments);return _0x427d39=null,_0x38fcb1;}}}}),v[_0x2b0399(0x259)](M,_0x34f609['isOA'],async(_0xdd5cde,_0x166c5a)=>{const _0x1d388c=_0x2b0399,_0x4446d8={'XUNxQ':function(_0x1691ae,_0x24853f){return _0x1691ae!==_0x24853f;},'lBSco':function(_0x16aef7,_0x9d8426){return _0x16aef7==_0x9d8426;},'dFbYJ':_0x1d388c(0x1ca),'SpBUl':function(_0x4a0327,_0x37ee31){return _0x4a0327(_0x37ee31);},'vJbmf':_0x1d388c(0x247),'wHNCX':function(_0x305a21,_0x2d945c){return _0x305a21(_0x2d945c);},'vgzBG':'msg','XWXYj':_0x1d388c(0x1f9),'Ugyey':'object','FtXhB':function(_0x553301,_0x239497){return _0x553301>_0x239497;},'vneBu':function(_0x197535,_0x13ef18){return _0x197535===_0x13ef18;},'tiHDX':_0x1d388c(0x251),'VdiPX':function(_0x3e6d5d,_0x294c04){return _0x3e6d5d<_0x294c04;},'Avpjg':'มีคีย์ที่เลือกซ้ำกัน','AcRCC':function(_0x566814,_0x4ef7ce){return _0x566814<=_0x4ef7ce;},'DBxuA':function(_0x684dd3,_0x2c5c47){return _0x684dd3-_0x2c5c47;},'aAGBW':function(_0x3df476,_0x590528){return _0x3df476(_0x590528);},'XJuOF':function(_0x2ad85c,_0x29fa35){return _0x2ad85c(_0x29fa35);},'qrVOP':function(_0x38bc2a,_0x1a128c){return _0x38bc2a===_0x1a128c;},'AnTdv':function(_0x5695dc,_0xa9353f){return _0x5695dc===_0xa9353f;},'zakeE':function(_0x579fe3,_0x4ed88f){return _0x579fe3!==_0x4ed88f;},'haLxP':function(_0x156750,_0x4f7c05){return _0x156750!==_0x4f7c05;},'zamsQ':function(_0x41d59f,_0x1b5ea4){return _0x41d59f>=_0x1b5ea4;},'OcxdU':_0x1d388c(0x170),'jBYUO':function(_0x17ee6c,_0x52877e){return _0x17ee6c!==_0x52877e;},'proPT':_0x1d388c(0xf5),'IUeYt':'UWpiO','owmJC':'ชื่ออุปกรณ์/ไออีอุปกรณ์{{sep}}มีอยู่ในระบบแล้ว','yzfLY':function(_0x2b6011,_0x4e1020){return _0x2b6011===_0x4e1020;},'NFidn':'IRATy','HbWax':'pxDnO','xEVId':'{{sep}}[\x20บันทึกการแก้ไข\x20]','SHEWu':_0x1d388c(0x216),'jQuPH':function(_0x33bf3f,_0x50d79d){return _0x33bf3f<_0x50d79d;},'KjmuJ':_0x1d388c(0x1ff),'vXiWw':_0x1d388c(0xb3),'PjWfk':_0x1d388c(0x257),'NusYp':_0x1d388c(0x13d),'rZUQJ':_0x1d388c(0x11c),'jOSLy':function(_0x413d05,_0x3c704a){return _0x413d05!==_0x3c704a;},'iEYMY':_0x1d388c(0xff),'aQdhq':_0x1d388c(0x110),'LasnE':function(_0x486efa,_0x2faa1f){return _0x486efa!==_0x2faa1f;},'WyeMI':_0x1d388c(0x1b2),'qiSsR':'CYbMw','FhmoV':_0x1d388c(0x1dd),'XHOCv':function(_0x1f5579,_0x273e73){return _0x1f5579===_0x273e73;},'vbkzt':_0x1d388c(0x1e7)},_0xdbad0e=_0xdd5cde['body'][_0x1d388c(0x119)];delete _0xdd5cde['body'][_0x1d388c(0x119)];const _0x54f7b1=_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x20f)],_0x97ce63=_0x4446d8[_0x1d388c(0xb1)](Number,_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x1dc)])||0x14,_0x506175=_0x4446d8['SpBUl'](Number,_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x1e2)])||0x1;delete _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x1dc)],delete _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x20f)],delete _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x1e2)];const _0x5e4bbc=_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x244)]?.[_0x1d388c(0xb4)](),_0x56812e=_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x13b)],_0x368a3f=''+b,_0x43f1c0=b+'?sip='+_0x54f7b1+_0x1d388c(0x153)+_0x97ce63+_0x1d388c(0x1bc)+_0x506175+_0x1d388c(0xe6)+_0xdbad0e;if(!new RegExp(global['DEVICE_PATTERN'])[_0x1d388c(0x1b7)](_0x56812e))return _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x258)],'text':global[_0x1d388c(0x1f8)]}),_0x166c5a['redirect'](_0x43f1c0);let _0x41dab7=0x0;_0x4446d8['lBSco'](typeof _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x152)],_0x4446d8[_0x1d388c(0x1bb)])?_0x41dab7=0x1:_0x4446d8[_0x1d388c(0x108)](typeof _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x152)],_0x4446d8[_0x1d388c(0x14d)])&&(_0x41dab7=_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x152)][_0x1d388c(0x184)]);const _0x38fe06=[];if(_0x4446d8[_0x1d388c(0x1a3)](_0x41dab7,0x1)){if(_0x4446d8[_0x1d388c(0x175)](_0x4446d8[_0x1d388c(0x26f)],_0x4446d8[_0x1d388c(0x26f)])){const _0x26d92e=_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x152)],_0x2f8e1e=_0xdd5cde['body'][_0x1d388c(0x26d)],_0x24afc6=_0xdd5cde['body'][_0x1d388c(0xf0)],_0x46cba6=_0xdd5cde['body'][_0x1d388c(0xc7)];if(_0x4446d8['VdiPX'](new Set(_0x2f8e1e)[_0x1d388c(0xd2)],_0x2f8e1e['length']))return _0xdd5cde['flash'](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8['dFbYJ'],'text':_0x4446d8[_0x1d388c(0xe2)]}),_0x166c5a[_0x1d388c(0x1de)](_0x43f1c0);for(let _0x166672=0x0;_0x4446d8[_0x1d388c(0x121)](_0x166672,_0x4446d8['DBxuA'](_0x41dab7,0x1));_0x166672++)_0x38fe06[_0x1d388c(0x172)]({'triggerStatus':_0x26d92e[_0x166672],'triggerKey':_0x2f8e1e[_0x166672],'triggerMin':_0x24afc6[_0x166672]?_0x4446d8['aAGBW'](Number,_0x24afc6[_0x166672]):null,'triggerMax':_0x46cba6[_0x166672]?_0x4446d8[_0x1d388c(0x117)](Number,_0x46cba6[_0x166672]):null});}else{const _0x6594b8={'fqEVf':function(_0x59370f,_0x40ab83){const _0x4756ab=_0x1d388c;return _0x4446d8[_0x4756ab(0x13f)](_0x59370f,_0x40ab83);},'SRsSw':function(_0x2b9a34,_0x1465b2){return _0x4446d8['lBSco'](_0x2b9a34,_0x1465b2);}},_0x4a2cac=_0x3eec1f[_0x1d388c(0x13b)];_0x530fcb=_0x1a7c65[_0x1d388c(0x206)](_0x5f5c6e=>{const _0x2a80a5=_0x1d388c,_0xc00662=_0x6594b8[_0x2a80a5(0x1f2)](_0x5f5c6e[_0x2a80a5(0x116)],'A')||_0x6594b8['SRsSw'](_0x5f5c6e[_0x2a80a5(0x13b)],_0x4a2cac);return _0x6594b8[_0x2a80a5(0x1f2)](_0x5f5c6e['userAuthority'],'O')&&_0xc00662;});}}else _0x4446d8[_0x1d388c(0x108)](_0x41dab7,0x1)&&_0x38fe06[_0x1d388c(0x172)]({'triggerStatus':_0xdd5cde['body'][_0x1d388c(0x152)],'triggerKey':_0xdd5cde['body']['triggerKey'],'triggerMin':_0xdd5cde[_0x1d388c(0x1ac)]['triggerMin']?_0x4446d8[_0x1d388c(0xc6)](Number,_0xdd5cde[_0x1d388c(0x1ac)]['triggerMin']):null,'triggerMax':_0xdd5cde['body'][_0x1d388c(0xc7)]?_0x4446d8[_0x1d388c(0xb1)](Number,_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0xc7)]):null});delete _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x152)],delete _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x26d)],delete _0xdd5cde[_0x1d388c(0x1ac)]['triggerMin'],delete _0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0xc7)],_0xdd5cde[_0x1d388c(0x1ac)][_0x1d388c(0x25a)]=[..._0x38fe06];for(const _0x4836d1 of _0x38fe06)if(_0x4446d8[_0x1d388c(0x1ab)](_0x4836d1[_0x1d388c(0xf0)],null)&&_0x4446d8[_0x1d388c(0x20b)](_0x4836d1[_0x1d388c(0xc7)],null))return _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x258)],'text':'กรุณาระบุค่า\x20Min\x20หรือ\x20Max\x20สำหรับคีย์\x20\x22'+_0x4836d1[_0x1d388c(0x26d)]+'\x22'}),_0x166c5a[_0x1d388c(0x1de)](_0x43f1c0);for(const _0x1a76be of _0x38fe06)if(_0x4446d8[_0x1d388c(0xd9)](_0x1a76be[_0x1d388c(0xf0)],null)&&_0x4446d8['haLxP'](_0x1a76be['triggerMax'],null)&&_0x4446d8[_0x1d388c(0x1be)](_0x1a76be['triggerMin'],_0x1a76be[_0x1d388c(0xc7)]))return _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x258)],'text':_0x1d388c(0x1b3)+_0x1a76be[_0x1d388c(0x26d)]+'\x22'}),_0x166c5a[_0x1d388c(0x1de)](_0x43f1c0);const _0x23b1bf=new _0x356a10(global['dbUrl']);try{if(_0x4446d8[_0x1d388c(0x1ab)](_0x4446d8[_0x1d388c(0x104)],_0x4446d8['OcxdU'])){await _0x23b1bf[_0x1d388c(0x18a)]();const _0x42d5d2=_0x23b1bf['db'](global[_0x1d388c(0x19e)])['collection'](global[_0x1d388c(0x106)]);if(_0xdbad0e){if(_0x4446d8[_0x1d388c(0x13a)](_0x4446d8[_0x1d388c(0x13c)],_0x4446d8[_0x1d388c(0x182)])){var _0x452699=await _0x42d5d2['findOne']({'_id':{'$ne':new _0x41fe69(_0xdbad0e)},'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x5e4bbc+'$','i')}},{'deviceId':_0x56812e}]});if(_0x452699)return _0xdd5cde['flash'](_0x4446d8['vgzBG'],{'class':_0x4446d8[_0x1d388c(0x258)],'text':_0x4446d8[_0x1d388c(0x229)]}),_0x166c5a[_0x1d388c(0x1de)](_0x43f1c0);const _0x41c02d=await _0x42d5d2[_0x1d388c(0x112)]({'_id':new _0x41fe69(_0xdbad0e)}),_0x522c95={'$set':_0xdd5cde['body']},_0x8c5a0f=await _0x42d5d2[_0x1d388c(0xf2)]({'_id':new _0x41fe69(_0xdbad0e)},_0x522c95,{'upsert':!0x1});if(_0x8c5a0f[_0x1d388c(0x254)]&&_0x4446d8[_0x1d388c(0x108)](_0x8c5a0f['modifiedCount'],0x1)){if(_0x4446d8['yzfLY'](_0x4446d8[_0x1d388c(0x1d1)],_0x4446d8[_0x1d388c(0x1d1)])){const _0x3f246e=T['getSessionData'](_0xdd5cde);let _0x3f79cd=_0x1d388c(0x22b)+_0x56812e+_0x1d388c(0x10f);const _0x376d8a=L[_0x1d388c(0xe9)](_0x41c02d,_0xdd5cde[_0x1d388c(0x1ac)]);if(_0x376d8a&&_0x4446d8['FtXhB'](_0x376d8a[_0x1d388c(0x184)],0x0)){if(_0x4446d8[_0x1d388c(0x16f)](_0x4446d8['HbWax'],_0x4446d8['HbWax']))_0x50b336[_0x1d388c(0x1fa)]();else{const _0x446171={'dateTime':D[_0x1d388c(0x1c3)](),'userId':_0x3f246e[_0x1d388c(0x25c)],'userFullname':_0x3f246e['userFullname'],'changes':_0x376d8a};await _0x42d5d2['updateOne']({'deviceId':_0x56812e},{'$push':{'changesHistory':{'$each':[_0x446171],'$position':0x0}}}),_0x3f79cd+=_0x4446d8['xEVId'];}}return _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x174)],'text':_0x3f79cd}),_0x166c5a[_0x1d388c(0x1de)](_0x43f1c0);}else _0x306fd7['send'](_0x342527[_0x1d388c(0x127)]({'isAddTrigger':!0x1,'class':_0x4446d8[_0x1d388c(0x258)],'msg':_0x254ad7[_0x1d388c(0x225)]}));}else return _0x8c5a0f[_0x1d388c(0x254)]&&(_0x4446d8[_0x1d388c(0xdd)](_0x8c5a0f[_0x1d388c(0x129)],0x1)||_0x4446d8[_0x1d388c(0xdd)](_0x8c5a0f['upsertedCount'],0x1))?(_0xdd5cde['flash'](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x10d)],'text':'\x22'+_0x56812e+_0x1d388c(0x240)}),_0x166c5a['redirect'](_0x43f1c0)):(_0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x258)],'text':new Error(_0x4446d8[_0x1d388c(0x272)])+_0x1d388c(0x197)+_0x56812e+'\x22'}),_0x166c5a['redirect'](_0x43f1c0));}else _0x21f16a[_0x1d388c(0x1fa)]();}else{if(_0x4446d8[_0x1d388c(0x16e)](_0x4446d8[_0x1d388c(0x102)],_0x4446d8[_0x1d388c(0x159)]))_0x30e04[_0x1d388c(0xc3)](_0x4ce44d[_0x1d388c(0x225)]),_0x4773c2[_0x1d388c(0x11f)](0x194)[_0x1d388c(0xf7)](_0x2b86af);else{if(await _0x42d5d2[_0x1d388c(0x112)]({'$or':[{'deviceName':{'$regex':new RegExp('^'+_0x5e4bbc+'$','i')}},{'deviceId':_0x56812e}]}))return _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8[_0x1d388c(0x258)],'text':_0x4446d8[_0x1d388c(0x1b0)]}),_0x166c5a['redirect'](_0x43f1c0);_0xdd5cde[_0x1d388c(0x1ac)]['dateTimeCanDelete']=D[_0x1d388c(0x1c3)](0x5a0);const _0x2ade7e=await _0x42d5d2['insertOne'](_0xdd5cde[_0x1d388c(0x1ac)]);if(_0x2ade7e[_0x1d388c(0x254)]&&_0x2ade7e[_0x1d388c(0x201)]){if(_0x4446d8[_0x1d388c(0x235)](_0x4446d8[_0x1d388c(0x238)],_0x4446d8[_0x1d388c(0x1e5)])){const _0x8aa1c4=b+_0x1d388c(0x145)+_0x54f7b1+_0x1d388c(0x153)+_0x97ce63+'&page='+_0x506175+_0x1d388c(0xe6)+_0x2ade7e[_0x1d388c(0x201)];return _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8['vgzBG'],{'class':_0x4446d8[_0x1d388c(0x174)],'text':_0x1d388c(0x23d)+_0x56812e+'\x22\x20เรียบร้อยแล้ว'}),_0x166c5a[_0x1d388c(0x1de)](_0x8aa1c4);}else{if(_0x5eb295)return _0x56d574;else KJlxIK[_0x1d388c(0x117)](_0x5c8ba4,0x0);}}else _0xdd5cde[_0x1d388c(0x1c8)](_0x4446d8[_0x1d388c(0x167)],{'class':_0x4446d8['dFbYJ'],'text':'เกิดข้อผิดพลาดขณะเพิ่มอุปกรณ์\x20\x22'+_0x56812e+'\x22'}),_0x166c5a['redirect'](_0x368a3f);}}}else return![];}catch(_0x25e82e){_0x4446d8[_0x1d388c(0xea)](_0x4446d8[_0x1d388c(0x136)],_0x4446d8[_0x1d388c(0xed)])?(console[_0x1d388c(0xc3)](_0x4446d8[_0x1d388c(0xee)],_0x25e82e),_0x166c5a['status'](0x194)[_0x1d388c(0xf7)](file404)):(_0x3f3e82[_0x1d388c(0xc3)](_0x283424),_0x484b9f[_0x1d388c(0x12a)](_0x5f4ac4[_0x1d388c(0x127)]({'isFetch':!0x1,'msg':_0x164c74[_0x1d388c(0x225)],'class':_0x4446d8[_0x1d388c(0x258)],'data':[],'msg':_0x4446d8[_0x1d388c(0xb9)]})));}finally{if(_0x4446d8['XHOCv'](_0x4446d8[_0x1d388c(0xb7)],_0x4446d8['vbkzt']))_0x23b1bf[_0x1d388c(0x1fa)]();else return _0x5c3fac;}}),v['post'](P,_0x34f609['isOA'],async(_0x38aa5c,_0x1cd367)=>{const _0x564fc4=_0x2b0399,_0x4f9e44={'tvkga':function(_0x342324,_0x39d52b){return _0x342324<_0x39d52b;},'VANrv':_0x564fc4(0x1ae),'iXlvN':_0x564fc4(0x1ca),'VUJks':_0x564fc4(0xe7),'CgjeI':function(_0x3767ac,_0xe62552){return _0x3767ac<=_0xe62552;},'PIRaG':function(_0x37dda5,_0x1d0616){return _0x37dda5-_0x1d0616;},'wROdg':function(_0x284e1b,_0x3e74ec){return _0x284e1b(_0x3e74ec);},'CFdwh':function(_0x49eb65,_0x3a42e8){return _0x49eb65(_0x3a42e8);},'HVBvF':'function\x20*\x5c(\x20*\x5c)','kCkbz':_0x564fc4(0x215),'nAQDx':function(_0x559bad,_0x2ed060){return _0x559bad(_0x2ed060);},'XFkEJ':_0x564fc4(0x166),'yKlxb':function(_0x33eff5,_0x15a1f7){return _0x33eff5+_0x15a1f7;},'vcLQR':_0x564fc4(0x118),'rEmQA':_0x564fc4(0x273),'hIFMl':function(_0x536fee,_0x16b492){return _0x536fee(_0x16b492);},'pXVUv':function(_0x1fca08){return _0x1fca08();},'GpjOU':_0x564fc4(0xe8),'QBewK':_0x564fc4(0x151),'Kwpun':function(_0x1eb803){return _0x1eb803();},'VaNPq':'log','HJXgQ':'warn','tSwPF':_0x564fc4(0x1c5),'xuYAM':'error','MygrB':_0x564fc4(0x22f),'Ciyzt':_0x564fc4(0x1f5),'Nbuts':_0x564fc4(0x242),'bcuDn':function(_0x39e18c,_0x569a24){return _0x39e18c<_0x569a24;},'FCSVV':function(_0x4d16d2,_0x5ec406){return _0x4d16d2(_0x5ec406);},'yMTcX':function(_0x4b5275,_0x1896ab){return _0x4b5275===_0x1896ab;},'jZAPU':_0x564fc4(0x1cd),'bBbIU':_0x564fc4(0x1b1),'Fcckd':'Not\x20Found','jiAoS':function(_0x55922a,_0x3cba09){return _0x55922a!==_0x3cba09;},'MXdSN':_0x564fc4(0x243),'Bdnin':'RfmyN','LlExH':'tSAxk','FCDwE':'udjFJ'},_0x5d4db2=_0x38aa5c[_0x564fc4(0x1ac)]['load_id'],_0x258a2e=_0x38aa5c['body']['sip'],_0xdf6c97=_0x4f9e44[_0x564fc4(0xca)](Number,_0x38aa5c[_0x564fc4(0x1ac)]['rpp'])||0x14,_0x6290f6=_0x4f9e44['nAQDx'](Number,_0x38aa5c['body'][_0x564fc4(0x1e2)])||0x1,_0x276c3d=b+'?sip='+_0x258a2e+_0x564fc4(0x153)+_0xdf6c97+_0x564fc4(0x1bc)+_0x6290f6+_0x564fc4(0xe6)+_0x5d4db2,_0x1e89be=new _0x356a10(dbUrl);try{if(_0x4f9e44[_0x564fc4(0x1d3)](_0x4f9e44[_0x564fc4(0x142)],_0x4f9e44[_0x564fc4(0x124)])){const _0x5ce3e0=_0x3976bb[_0x564fc4(0x1ac)][_0x564fc4(0x152)],_0x21a09c=_0x1988c6['body'][_0x564fc4(0x26d)],_0xcaceeb=_0x3890c7['body'][_0x564fc4(0xf0)],_0x564e91=_0x31c208[_0x564fc4(0x1ac)][_0x564fc4(0xc7)];if(_0x4f9e44[_0x564fc4(0x271)](new _0x83a7c(_0x21a09c)['size'],_0x21a09c[_0x564fc4(0x184)]))return _0x449828[_0x564fc4(0x1c8)](_0x4f9e44[_0x564fc4(0x188)],{'class':_0x4f9e44['iXlvN'],'text':_0x4f9e44['VUJks']}),_0x116ed0['redirect'](_0x38e642);for(let _0x57032c=0x0;_0x4f9e44[_0x564fc4(0x212)](_0x57032c,_0x4f9e44[_0x564fc4(0x267)](_0x4e2a99,0x1));_0x57032c++)_0x54e58f['push']({'triggerStatus':_0x5ce3e0[_0x57032c],'triggerKey':_0x21a09c[_0x57032c],'triggerMin':_0xcaceeb[_0x57032c]?_0x4f9e44['wROdg'](_0x4111da,_0xcaceeb[_0x57032c]):null,'triggerMax':_0x564e91[_0x57032c]?_0x4f9e44[_0x564fc4(0x221)](_0x48d368,_0x564e91[_0x57032c]):null});}else return await _0x1e89be['db'](global[_0x564fc4(0x19e)])['collection'](global[_0x564fc4(0x106)])[_0x564fc4(0x112)]({'_id':new _0x41fe69(_0x5d4db2)},{'projection':{'changesHistory':0x0}})?_0x38aa5c[_0x564fc4(0x1c8)](_0x4f9e44[_0x564fc4(0x188)],null):_0x38aa5c[_0x564fc4(0x1c8)](_0x4f9e44['VANrv'],{'class':_0x4f9e44['iXlvN'],'text':new Error(_0x4f9e44[_0x564fc4(0x268)])+_0x564fc4(0x197)+_0x5d4db2+'\x22'}),_0x1cd367[_0x564fc4(0x1de)](_0x276c3d);}catch(_0x1ed24f){if(_0x4f9e44[_0x564fc4(0x147)](_0x4f9e44[_0x564fc4(0x133)],_0x4f9e44[_0x564fc4(0x1d2)]))return console['log'](_0x1ed24f[_0x564fc4(0x225)]),_0x38aa5c[_0x564fc4(0x1c8)](_0x4f9e44['VANrv'],{'class':_0x4f9e44[_0x564fc4(0x148)],'text':''+_0x1ed24f[_0x564fc4(0x225)]}),_0x1cd367['redirect'](_0x276c3d);else{const _0x47ee16=new _0x1d0ae0(ljTkBt[_0x564fc4(0x222)]),_0x3a53a9=new _0x3dfccd(ljTkBt[_0x564fc4(0x1d6)],'i'),_0x14be3d=ljTkBt['nAQDx'](_0x3e1e68,ljTkBt[_0x564fc4(0x1fb)]);!_0x47ee16[_0x564fc4(0x1b7)](ljTkBt[_0x564fc4(0x20d)](_0x14be3d,ljTkBt[_0x564fc4(0x163)]))||!_0x3a53a9[_0x564fc4(0x1b7)](ljTkBt['yKlxb'](_0x14be3d,ljTkBt[_0x564fc4(0x214)]))?ljTkBt[_0x564fc4(0xce)](_0x14be3d,'0'):ljTkBt['pXVUv'](_0x11435d);}}finally{if(_0x4f9e44[_0x564fc4(0x147)](_0x4f9e44[_0x564fc4(0xba)],_0x4f9e44[_0x564fc4(0xd7)]))_0x1e89be[_0x564fc4(0x1fa)]();else{let _0x395275;try{const _0x5a33b9=ljTkBt[_0x564fc4(0x221)](_0x5e2cb7,ljTkBt[_0x564fc4(0x20d)](ljTkBt['yKlxb'](ljTkBt[_0x564fc4(0x248)],ljTkBt['QBewK']),');'));_0x395275=ljTkBt['Kwpun'](_0x5a33b9);}catch(_0x56bddb){_0x395275=_0x3c7171;}const _0x3b9ac6=_0x395275[_0x564fc4(0x202)]=_0x395275[_0x564fc4(0x202)]||{},_0x135d74=[ljTkBt[_0x564fc4(0xeb)],ljTkBt['HJXgQ'],ljTkBt[_0x564fc4(0x164)],ljTkBt[_0x564fc4(0xd5)],ljTkBt[_0x564fc4(0x1b6)],ljTkBt[_0x564fc4(0x10b)],ljTkBt[_0x564fc4(0xf8)]];for(let _0x5efd43=0x0;ljTkBt[_0x564fc4(0x26e)](_0x5efd43,_0x135d74[_0x564fc4(0x184)]);_0x5efd43++){const _0x17c7f8=_0x554965['constructor'][_0x564fc4(0x253)][_0x564fc4(0x156)](_0x53501d),_0x562545=_0x135d74[_0x5efd43],_0x1cd848=_0x3b9ac6[_0x562545]||_0x17c7f8;_0x17c7f8[_0x564fc4(0x234)]=_0x528926[_0x564fc4(0x156)](_0xb7fb2d),_0x17c7f8['toString']=_0x1cd848[_0x564fc4(0x1c0)]['bind'](_0x1cd848),_0x3b9ac6[_0x562545]=_0x17c7f8;}}}}),v[_0x2b0399(0x259)](R,_0x34f609[_0x2b0399(0x126)],async(_0x42f7bf,_0x4ba0cf)=>{const _0x2306a8=_0x2b0399,_0x141149={'yfkgL':_0x2306a8(0x1dd),'sueCO':'msg','OQQtj':_0x2306a8(0x1ca),'bEIyg':function(_0x578942,_0x2a6697){return _0x578942(_0x2a6697);},'lsrNf':function(_0x3a2a86,_0x1fc1d1){return _0x3a2a86+_0x1fc1d1;},'kkbbf':_0x2306a8(0xe8),'IFIAA':_0x2306a8(0x151),'EQMFY':function(_0x9c3fdd){return _0x9c3fdd();},'JlVmQ':function(_0x2642a7,_0x975a2d){return _0x2642a7(_0x975a2d);},'ruEyu':function(_0x333614,_0x45c275){return _0x333614!=_0x45c275;},'WtEET':function(_0x6e75bc,_0x90efd6){return _0x6e75bc!==_0x90efd6;},'KgNnr':'ZAvGF','vZOCJ':_0x2306a8(0x13b),'nwAbl':'pxxyB','EXKiY':'ucRwu','nAeDf':function(_0x534c49,_0x5dd9a7){return _0x534c49===_0x5dd9a7;},'MNgKC':function(_0x48b464,_0x3604f6){return _0x48b464!==_0x3604f6;},'MplvD':'xyACx','xgAzD':'dZxAI','EOgTQ':function(_0x4b915c,_0x333052){return _0x4b915c>_0x333052;},'wLoyP':'{{sep}}(\x20ไม่พบเซสชั่น\x20)','XxLiO':'green','eCFDu':_0x2306a8(0x17d),'neJVa':_0x2306a8(0x187),'wXOwc':_0x2306a8(0x223)};let {_id_toDelete:_0x5c506d,load_id:_0x3cf5a9,sip:_0x5abf12,Id_toDelete:_0x4953a6}=_0x42f7bf[_0x2306a8(0x1ac)];const _0x4077f4=_0x141149[_0x2306a8(0x107)](Number,_0x42f7bf[_0x2306a8(0x1ac)][_0x2306a8(0x1dc)])||0x14,_0x7411a5=_0x141149[_0x2306a8(0x185)](Number,_0x42f7bf['body'][_0x2306a8(0x1e2)])||0x1;_0x4953a6=_0x141149[_0x2306a8(0x107)](Number,_0x4953a6);const _0x4bb901=_0x5c506d&&_0x141149[_0x2306a8(0x25f)](_0x5c506d,_0x3cf5a9)?_0x2306a8(0xe6)+_0x5c506d:'',_0x15b1ce=b+_0x2306a8(0x145)+_0x5abf12+_0x2306a8(0x153)+_0x4077f4+'&page='+_0x7411a5+_0x4bb901,_0x23658a=new _0x356a10(global['dbUrl']);try{if(_0x141149[_0x2306a8(0x180)](_0x141149[_0x2306a8(0x1a5)],_0x141149[_0x2306a8(0x1a5)]))return _0x304fdc[_0x2306a8(0xc3)](_0x141149[_0x2306a8(0x25e)],_0x15c22d),_0x4c23c0[_0x2306a8(0x1c8)](_0x141149['sueCO'],{'class':_0x141149[_0x2306a8(0x21d)],'text':_0x18891a[_0x2306a8(0x225)]}),_0x2c2917[_0x2306a8(0x1de)](_0x243ac9);else{await _0x23658a[_0x2306a8(0x18a)]();const _0x10726d=_0x23658a['db'](global[_0x2306a8(0x19e)]),_0x29dc35=_0x10726d[_0x2306a8(0x123)](global[_0x2306a8(0x106)]),_0x58bef7=[{'coll':_0x10726d['collection'](global[_0x2306a8(0x24c)]),'name':global[_0x2306a8(0x24c)],'key':_0x141149[_0x2306a8(0xbf)]}];for(const {coll:_0x591ff9,name:_0x3e0c7e,key:_0x45c8e1}of _0x58bef7){if(_0x141149[_0x2306a8(0x180)](_0x141149[_0x2306a8(0x1f7)],_0x141149[_0x2306a8(0x15a)])){const _0x1745fa={};if(_0x1745fa[_0x45c8e1]=_0x4953a6,await _0x591ff9[_0x2306a8(0x112)](_0x1745fa))return await _0x29dc35[_0x2306a8(0xf2)]({'deviceId':_0x4953a6},{'$set':{'canDelete':!0x1}}),_0x42f7bf[_0x2306a8(0x1c8)](_0x141149[_0x2306a8(0x260)],{'class':_0x141149[_0x2306a8(0x21d)],'text':_0x2306a8(0xe0)+_0x4953a6+_0x2306a8(0x15f)+_0x3e0c7e+_0x2306a8(0x131)}),_0x4ba0cf[_0x2306a8(0x1de)](_0x15b1ce);}else _0x51dac3['close']();}if(_0x141149[_0x2306a8(0x13e)]((await _0x29dc35['deleteOne']({'_id':new _0x41fe69(_0x5c506d)}))['deletedCount'],0x1)){if(_0x141149[_0x2306a8(0x1d5)](_0x141149['MplvD'],_0x141149['xgAzD'])){const _0x4298de=await _0x10726d['collection'](global[_0x2306a8(0x1fe)])[_0x2306a8(0x236)]({'session.user_id':_0x5c506d});if(_0x4298de['acknowledged']&&_0x141149[_0x2306a8(0x1ef)](_0x4298de[_0x2306a8(0x14b)],0x0))var _0x37e981=_0x2306a8(0x1a9)+_0x4298de['deletedCount']+'\x22\x20เรียบร้อยแล้ว\x20)';else var _0x37e981=_0x141149[_0x2306a8(0x226)];_0x42f7bf['flash'](_0x141149[_0x2306a8(0x260)],{'class':_0x141149['XxLiO'],'text':_0x2306a8(0x15b)+_0x4953a6+'\x22\x20เรียบร้อยแล้ว'+_0x37e981});}else _0x39a342[_0x2306a8(0x1fa)]();}else _0x42f7bf[_0x2306a8(0x1c8)](_0x141149['sueCO'],{'class':_0x141149[_0x2306a8(0x21d)],'text':_0x2306a8(0x24b)+_0x4953a6+_0x2306a8(0x241)});return _0x4ba0cf[_0x2306a8(0x1de)](_0x15b1ce);}}catch(_0x4e8c76){if(_0x141149['WtEET'](_0x141149[_0x2306a8(0x130)],_0x141149[_0x2306a8(0x134)]))return console['log'](_0x141149[_0x2306a8(0x25e)],_0x4e8c76),_0x42f7bf[_0x2306a8(0x1c8)](_0x141149[_0x2306a8(0x260)],{'class':_0x141149[_0x2306a8(0x21d)],'text':_0x4e8c76['message']}),_0x4ba0cf[_0x2306a8(0x1de)](_0x15b1ce);else{const _0x1d6b6b=lesMuU[_0x2306a8(0x107)](_0xda2adf,lesMuU['lsrNf'](lesMuU['lsrNf'](lesMuU['kkbbf'],lesMuU[_0x2306a8(0x157)]),');'));_0x5e88b2=lesMuU[_0x2306a8(0xcf)](_0x1d6b6b);}}finally{_0x141149[_0x2306a8(0x13e)](_0x141149[_0x2306a8(0x265)],_0x141149[_0x2306a8(0x265)])?_0x23658a[_0x2306a8(0x1fa)]():(_0x28885c[_0x2306a8(0xc3)](_0x141149['yfkgL'],_0x5e4e53),_0x4f16fb[_0x2306a8(0x11f)](0x194)[_0x2306a8(0xf7)](_0x3aeff1));}}),v[_0x2b0399(0x259)](F,_0x34f609[_0x2b0399(0x126)],async(_0x2b3706,_0x3b70ed)=>{const _0x29b548=_0x2b0399,_0x32ca5c={'vsmqp':_0x29b548(0x1dd),'STFSj':'red','qcCrU':function(_0x191bdf,_0x3bc2ac){return _0x191bdf+_0x3bc2ac;},'bStgx':_0x29b548(0xfb),'zCkGC':_0x29b548(0x149),'lTwWp':_0x29b548(0x161),'Pxrkd':function(_0x3a9056,_0x76dca){return _0x3a9056===_0x76dca;},'hlgUi':'UEoMO','ugxdz':function(_0x28262d,_0x4aaa64){return _0x28262d==_0x4aaa64;},'mlvKM':_0x29b548(0xf6),'koQhR':_0x29b548(0x14f),'AMItd':'utf8','GZtbc':_0x29b548(0x216),'ZVvkC':function(_0x4eba36,_0x563891){return _0x4eba36!==_0x563891;},'koZBj':'TcARV','VUUuq':_0x29b548(0x120),'cHFxa':_0x29b548(0x21f)},{_idArr:_0x4558ea}=_0x2b3706[_0x29b548(0x1ac)],_0x1e2f29=new _0x356a10(dbUrl);try{if(_0x32ca5c['Pxrkd'](_0x32ca5c[_0x29b548(0x19d)],_0x32ca5c[_0x29b548(0x19d)])){await _0x1e2f29[_0x29b548(0x18a)]();const _0x4fef10=await _0x1e2f29['db'](global[_0x29b548(0x19e)])[_0x29b548(0x123)](global[_0x29b548(0x106)])[_0x29b548(0x252)]([{'$match':{'_id':{'$in':_0x4558ea['map'](_0x7533f2=>new _0x41fe69(_0x7533f2))}}}])['toArray']();if(_0x32ca5c['ugxdz'](_0x4fef10['length'],0x0))return _0x3b70ed[_0x29b548(0x12a)](JSON[_0x29b548(0x127)]({'isPrint':!0x1,'class':_0x32ca5c['STFSj'],'msg':_0x32ca5c[_0x29b548(0x189)]}));const _0x246501=_0x562714[_0x29b548(0x261)](global[_0x29b548(0x17a)],_0x32ca5c[_0x29b548(0x249)]),_0x18f273=_0x3d969b[_0x29b548(0x24e)](_0x246501,_0x32ca5c[_0x29b548(0x178)]),_0x4960f0=_0x44bb92[_0x29b548(0x158)](_0x18f273,{'time':D[_0x29b548(0x177)](),'title':_0x29b548(0x25d)+_0x4fef10[_0x29b548(0x184)]+')','dateTime':D[_0x29b548(0x1c3)](),'devicesFind':_0x4fef10});_0x3b70ed[_0x29b548(0x12a)](JSON[_0x29b548(0x127)]({'isPrint':!0x0,'class':_0x32ca5c['GZtbc'],'msg':_0x29b548(0x1e4)+_0x4fef10['length']+'\x20เรียบร้อยแล้ว','htmlPage':_0x4960f0}));}else _0x3f7b71[_0x29b548(0x1fa)]();}catch(_0x1e2ee5){_0x32ca5c[_0x29b548(0x1eb)](_0x32ca5c[_0x29b548(0x24f)],_0x32ca5c[_0x29b548(0x160)])?(console[_0x29b548(0xc3)](_0x32ca5c[_0x29b548(0x21c)],_0x1e2ee5[_0x29b548(0x225)]),_0x3b70ed[_0x29b548(0x12a)](JSON[_0x29b548(0x127)]({'isPrint':!0x1,'class':_0x32ca5c[_0x29b548(0xc5)],'msg':_0x1e2ee5[_0x29b548(0x225)]}))):(_0x38a802[_0x29b548(0xc3)](_0x32ca5c[_0x29b548(0x21c)],_0x26097d[_0x29b548(0x225)]),_0x5e9ec2[_0x29b548(0x12a)](_0x44ae46['stringify']({'isPrint':!0x1,'class':_0x32ca5c[_0x29b548(0xc5)],'msg':_0x4e996b['message']})));}finally{_0x32ca5c[_0x29b548(0x20e)](_0x32ca5c[_0x29b548(0x200)],_0x32ca5c[_0x29b548(0x200)])?_0x1e2f29[_0x29b548(0x1fa)]():function(){return!![];}[_0x29b548(0x155)](QsGdri[_0x29b548(0x1b8)](QsGdri['bStgx'],QsGdri[_0x29b548(0x21b)]))[_0x29b548(0x191)](QsGdri[_0x29b548(0x12d)]);}}),v[_0x2b0399(0x259)](U,_0x34f609['isOA'],async(_0x2c8b8c,_0xf73817)=>{const _0x1ceb32=_0x2b0399,_0x10a8d8={'gnrtR':_0x1ceb32(0x211),'mGYWA':_0x1ceb32(0xb6),'UJacd':function(_0x351839,_0xc48252){return _0x351839!==_0xc48252;},'MSFDR':function(_0x33be92,_0xf5eb4f){return _0x33be92==_0xf5eb4f;},'zVldw':function(_0x48d7af,_0x42dac0){return _0x48d7af!==_0x42dac0;},'kQXmm':function(_0x43e4a6,_0x1db652){return _0x43e4a6===_0x1db652;},'BVEzJ':_0x1ceb32(0x1d9),'SkLan':'red','aKrRg':function(_0x43b77a,_0xde4233){return _0x43b77a<_0xde4233;},'wqTtD':_0x1ceb32(0x1ff),'dehkT':_0x1ceb32(0x22c),'QnJUW':_0x1ceb32(0x125),'gzzCK':'green','yNfRj':function(_0xa27ac5,_0x44b489){return _0xa27ac5!==_0x44b489;},'pmxJj':'WSjJg','PmahS':'ynubR','xbCop':_0x1ceb32(0x1dd),'RYczf':_0x1ceb32(0x195)};let {deviceId:_0xee91ac}=_0x2c8b8c['body'];const _0x29b223=new _0x356a10(global[_0x1ceb32(0x100)]);try{if(_0x10a8d8[_0x1ceb32(0x143)](_0x10a8d8['BVEzJ'],_0x10a8d8[_0x1ceb32(0xbd)])){await _0x29b223['connect']();var _0x669298=await _0x29b223['db'](global['dbName'])[_0x1ceb32(0x123)](global[_0x1ceb32(0x106)])[_0x1ceb32(0x112)]({'deviceId':_0xee91ac});if(!_0x669298)return _0xf73817['send'](JSON[_0x1ceb32(0x127)]({'isPrint':!0x1,'class':_0x10a8d8[_0x1ceb32(0x1a4)],'msg':_0x1ceb32(0x24b)+_0xee91ac+'\x22'}));const _0x50bd38=_0x669298[_0x1ceb32(0x15c)]||[];if(_0x10a8d8[_0x1ceb32(0x12c)](_0x50bd38['length'],0x1))return _0xf73817[_0x1ceb32(0x12a)](JSON['stringify']({'isPrint':!0x1,'class':_0x10a8d8[_0x1ceb32(0x23f)],'msg':_0x10a8d8['dehkT']}));const _0x2e33d5=_0x562714[_0x1ceb32(0x261)](folderForms,_0x10a8d8[_0x1ceb32(0x19f)]),_0x491db9=await C[_0x1ceb32(0x17b)](_0x2e33d5,_0xf73817,{'title':_0x1ceb32(0x101)+_0x669298[_0x1ceb32(0x13b)]+']\x20'+_0x669298[_0x1ceb32(0x244)],'time':D[_0x1ceb32(0x1c3)](),'changesHistory':_0x50bd38});_0xf73817[_0x1ceb32(0x12a)](JSON[_0x1ceb32(0x127)]({'isPrint':!0x0,'class':_0x10a8d8[_0x1ceb32(0x210)],'htmlPage':_0x491db9}));}else{const _0xfe781d=_0x39fcaf?function(){const _0x1be7bd=_0x1ceb32;if(_0x38c087){const _0x7ce75f=_0x1f9ca1[_0x1be7bd(0xb8)](_0x2a4896,arguments);return _0x4191b7=null,_0x7ce75f;}}:function(){};return _0x18bfa6=![],_0xfe781d;}}catch(_0x5fd512){if(_0x10a8d8[_0x1ceb32(0xc8)](_0x10a8d8[_0x1ceb32(0xd1)],_0x10a8d8[_0x1ceb32(0x227)]))console[_0x1ceb32(0xc3)](_0x10a8d8[_0x1ceb32(0xfe)],_0x5fd512),_0xf73817[_0x1ceb32(0x12a)](JSON[_0x1ceb32(0x127)]({'isPrint':!0x1,'class':_0x10a8d8[_0x1ceb32(0x1a4)],'msg':_0x5fd512[_0x1ceb32(0x225)]}));else return function(_0x333ed9){}[_0x1ceb32(0x155)](VbLUHa[_0x1ceb32(0x209)])[_0x1ceb32(0xb8)](VbLUHa['mGYWA']);}finally{if(_0x10a8d8[_0x1ceb32(0x143)](_0x10a8d8[_0x1ceb32(0x154)],_0x10a8d8['RYczf']))_0x29b223[_0x1ceb32(0x1fa)]();else{const _0x5c0f72=_0x10a8d8[_0x1ceb32(0x23b)](_0x9eb0d7[_0x1ceb32(0x116)],'A')||_0x10a8d8[_0x1ceb32(0x165)](_0x42c2a3[_0x1ceb32(0x13b)],_0x3e05f9);return _0x10a8d8[_0x1ceb32(0x1ce)](_0x5dee55[_0x1ceb32(0x116)],'O')&&_0x5c0f72;}}}),v[_0x2b0399(0x231)](H,_0x34f609['isOA'],async(_0x13dcd0,_0x52d4ec)=>{const _0x29bae5=_0x2b0399,_0x4dba84={'ljmkr':function(_0x22ca73,_0x5da48d){return _0x22ca73===_0x5da48d;},'dUcaq':_0x29bae5(0x219),'XKQZD':_0x29bae5(0x233),'IGQIR':'green','quGCR':'ดึงข้อมูลเรียบร้อยแล้ว','JnpHd':_0x29bae5(0x1ca),'verBK':_0x29bae5(0x247)},_0xd14ff7=new _0x356a10(global[_0x29bae5(0x100)]);try{if(_0x4dba84[_0x29bae5(0x1c7)](_0x4dba84[_0x29bae5(0x17e)],_0x4dba84[_0x29bae5(0x17e)])){const _0x58e769=_0xd14ff7['db'](global[_0x29bae5(0x19e)]),_0x4a4014=new RegExp(_0x4dba84[_0x29bae5(0x144)],'i'),_0x503327=(await _0x58e769[_0x29bae5(0x1e1)]()['toArray']())[_0x29bae5(0xdb)](_0x83e5db=>_0x83e5db['name'])[_0x29bae5(0x206)](_0x2977e3=>_0x4a4014[_0x29bae5(0x1b7)](_0x2977e3))[_0x29bae5(0xf4)](),_0x519b11=(await _0x58e769[_0x29bae5(0x123)](global['dbColl_devices'])[_0x29bae5(0x250)]({})[_0x29bae5(0x1ed)]())[_0x29bae5(0xdb)](_0x4ac642=>_0x4ac642[_0x29bae5(0x13b)]),_0x187310=_0x503327[_0x29bae5(0x206)](_0x47d38d=>!_0x519b11[_0x29bae5(0x1da)](_0x47d38d));_0x52d4ec['send'](JSON['stringify']({'isFetch':!0x0,'msg':'โหลดข้อมูลอุปกรณ์\x20'+_0x503327[_0x29bae5(0x184)]+_0x29bae5(0x132),'class':_0x4dba84[_0x29bae5(0x10e)],'colls_devices':_0x187310,'msg':_0x4dba84[_0x29bae5(0x256)]}));}else{const _0x1b2e1d=_0x57418b[_0x29bae5(0xb8)](_0x80a48d,arguments);return _0x509ff2=null,_0x1b2e1d;}}catch(_0x23c53b){console[_0x29bae5(0xc3)](_0x23c53b),_0x52d4ec[_0x29bae5(0x12a)](JSON[_0x29bae5(0x127)]({'isFetch':!0x1,'msg':_0x23c53b[_0x29bae5(0x225)],'class':_0x4dba84[_0x29bae5(0x1fd)],'data':[],'msg':_0x4dba84[_0x29bae5(0x12b)]}));}finally{_0xd14ff7[_0x29bae5(0x1fa)]();}}),v[_0x2b0399(0x259)](j,_0x34f609[_0x2b0399(0x126)],async(_0x330ce2,_0x4395e2)=>{const _0x519030=_0x2b0399,_0x5e2417={'qNCDR':function(_0xd9b0d1,_0x2f9893){return _0xd9b0d1===_0x2f9893;},'seGYz':_0x519030(0x1ca),'JitKD':_0x519030(0x23a),'EZnzp':_0x519030(0x105),'OlkIm':_0x519030(0x216)},_0x5f5910=_0x330ce2[_0x519030(0x1ac)]['deviceId'];if(!_0x5f5910||_0x5e2417[_0x519030(0x220)](_0x5f5910['trim'](),''))return _0x4395e2[_0x519030(0x12a)](JSON[_0x519030(0x127)]({'isAddTrigger':!0x1,'class':_0x5e2417[_0x519030(0xb2)],'msg':_0x5e2417[_0x519030(0xfc)]}));if(!new RegExp(global['DEVICE_PATTERN'])['test'](_0x5f5910))return _0x4395e2[_0x519030(0x12a)](JSON[_0x519030(0x127)]({'isAddTrigger':!0x1,'class':_0x5e2417[_0x519030(0xb2)],'msg':_0x519030(0xd6)+global[_0x519030(0x1f8)]}));const _0x5b0ceb=new _0x356a10(global[_0x519030(0x100)]);try{await _0x5b0ceb[_0x519030(0x18a)]();const _0x2b0264=await _0x5b0ceb['db'](global['dbName'])['collection'](_0x5f5910)['distinct'](_0x5e2417[_0x519030(0x193)]);return _0x4395e2[_0x519030(0x12a)](JSON[_0x519030(0x127)]({'isAddTrigger':!0x0,'class':_0x5e2417[_0x519030(0x239)],'uniqueKeys':_0x2b0264,'msg':_0x519030(0x22a)+_0x2b0264[_0x519030(0x184)]+'\x20ค่าเรียบร้อยแล้ว'}));}catch(_0x376bd3){_0x4395e2[_0x519030(0x12a)](JSON[_0x519030(0x127)]({'isAddTrigger':!0x1,'class':_0x5e2417[_0x519030(0xb2)],'msg':_0x376bd3[_0x519030(0x225)]}));}finally{_0x5b0ceb[_0x519030(0x1fa)]();}});export default v;function _0x48b6d1(_0x787a99){const _0x5e0f05=_0x2b0399,_0x576c07={'orqwZ':function(_0x49383d,_0x40a2a6){return _0x49383d===_0x40a2a6;},'wFfsA':'string','CBbLI':'while\x20(true)\x20{}','EvvKu':_0x5e0f05(0xb6),'YeInH':function(_0x390d9a,_0x25d98b){return _0x390d9a!==_0x25d98b;},'DRWzW':function(_0x4284e5,_0x4e967c){return _0x4284e5+_0x4e967c;},'hclVF':function(_0x1b65e6,_0x44081c){return _0x1b65e6/_0x44081c;},'MijwD':_0x5e0f05(0x184),'dLPuE':function(_0x1e31f9,_0x1d4d31){return _0x1e31f9===_0x1d4d31;},'KXbTF':function(_0x2605d6,_0x2c725a){return _0x2605d6%_0x2c725a;},'GQkJt':function(_0x98b750,_0x344bae){return _0x98b750+_0x344bae;},'dJzAb':'debu','eQWGw':'gger','hjkyY':_0x5e0f05(0x161),'YxUHR':_0x5e0f05(0x245),'TJnMR':function(_0x446ea2,_0x1428a2){return _0x446ea2(_0x1428a2);}};function _0x7f1bd2(_0x345989){const _0x2cf197=_0x5e0f05;if(_0x576c07[_0x2cf197(0xcb)](typeof _0x345989,_0x576c07['wFfsA']))return function(_0x3f1322){}[_0x2cf197(0x155)](_0x576c07[_0x2cf197(0xde)])[_0x2cf197(0xb8)](_0x576c07[_0x2cf197(0x1f1)]);else _0x576c07[_0x2cf197(0x1a0)](_0x576c07[_0x2cf197(0xdc)]('',_0x576c07[_0x2cf197(0x218)](_0x345989,_0x345989))[_0x576c07[_0x2cf197(0x1c4)]],0x1)||_0x576c07[_0x2cf197(0x1fc)](_0x576c07[_0x2cf197(0x183)](_0x345989,0x14),0x0)?function(){return!![];}[_0x2cf197(0x155)](_0x576c07[_0x2cf197(0x203)](_0x576c07['dJzAb'],_0x576c07['eQWGw']))[_0x2cf197(0x191)](_0x576c07['hjkyY']):function(){return![];}[_0x2cf197(0x155)](_0x576c07[_0x2cf197(0xdc)](_0x576c07[_0x2cf197(0x115)],_0x576c07[_0x2cf197(0x1f3)]))[_0x2cf197(0xb8)](_0x576c07[_0x2cf197(0x1cc)]);_0x576c07[_0x2cf197(0x11b)](_0x7f1bd2,++_0x345989);}try{if(_0x787a99)return _0x7f1bd2;else _0x576c07[_0x5e0f05(0x11b)](_0x7f1bd2,0x0);}catch(_0x49f67c){}}