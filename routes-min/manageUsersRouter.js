const _0x41ee4c=_0x8851;(function(_0x4e2bb5,_0x337909){const _0x3a71ad=_0x8851,_0x5eded7=_0x4e2bb5();while(!![]){try{const _0x31d634=parseInt(_0x3a71ad(0x1b4))/0x1+parseInt(_0x3a71ad(0x176))/0x2*(-parseInt(_0x3a71ad(0x2a6))/0x3)+-parseInt(_0x3a71ad(0x1f2))/0x4+-parseInt(_0x3a71ad(0x217))/0x5*(parseInt(_0x3a71ad(0x166))/0x6)+-parseInt(_0x3a71ad(0x1c8))/0x7+parseInt(_0x3a71ad(0x1ef))/0x8*(parseInt(_0x3a71ad(0x265))/0x9)+-parseInt(_0x3a71ad(0x173))/0xa*(-parseInt(_0x3a71ad(0x1f4))/0xb);if(_0x31d634===_0x337909)break;else _0x5eded7['push'](_0x5eded7['shift']());}catch(_0x5dbc87){_0x5eded7['push'](_0x5eded7['shift']());}}}(_0x3e12,0xd8df9));const _0x116dd6=(function(){const _0x4bcc63=_0x8851,_0x2f8b79={'pEjiW':_0x4bcc63(0x214),'LeuuV':_0x4bcc63(0x13a),'YAQzR':_0x4bcc63(0x142),'fDyns':function(_0x22d019,_0x3546d6){return _0x22d019===_0x3546d6;},'begrR':_0x4bcc63(0x149),'KBrsn':_0x4bcc63(0x140),'LsNix':function(_0xd3e69a,_0x35a14b){return _0xd3e69a!==_0x35a14b;},'iEixa':_0x4bcc63(0xf4),'CRiLY':function(_0x20fb7a,_0x1db460){return _0x20fb7a===_0x1db460;},'msneB':'bRQAJ','Huawy':_0x4bcc63(0x17e)};let _0x50ac2b=!![];return function(_0xbc0635,_0x2542b7){const _0x5a1fa3=_0x4bcc63;if(_0x2f8b79[_0x5a1fa3(0x127)](_0x2f8b79[_0x5a1fa3(0x232)],_0x2f8b79[_0x5a1fa3(0x19e)]))_0x27ca0e['log'](_0x32d600[_0x5a1fa3(0x1f7)]),_0x4e2da2[_0x5a1fa3(0x1e5)](0x194)[_0x5a1fa3(0x19b)](_0x3615db);else{const _0x32546b=_0x50ac2b?function(){const _0xa2d516=_0x5a1fa3,_0x462738={'bDeNj':_0x2f8b79['pEjiW'],'rLjyo':_0x2f8b79[_0xa2d516(0x1b2)],'Ifzbd':_0x2f8b79[_0xa2d516(0x29c)]};if(_0x2f8b79['fDyns'](_0x2f8b79['begrR'],_0x2f8b79['KBrsn']))return function(_0x2924e1){}['constructor'](_0x462738['bDeNj'])[_0xa2d516(0x231)](_0x462738['rLjyo']);else{if(_0x2542b7){if(_0x2f8b79[_0xa2d516(0x184)](_0x2f8b79[_0xa2d516(0x274)],_0x2f8b79[_0xa2d516(0x274)]))_0x429047[_0xa2d516(0x1f6)](_0x462738['Ifzbd'],_0x5706f1),_0x2a1370[_0xa2d516(0x1e5)](0x194)[_0xa2d516(0x19b)](_0x3c74cb);else{const _0x28e6d0=_0x2542b7[_0xa2d516(0x231)](_0xbc0635,arguments);return _0x2542b7=null,_0x28e6d0;}}}}:function(){};return _0x50ac2b=![],_0x32546b;}};}());(function(){const _0xdabb8a=_0x8851,_0xda7515={'sLeit':_0xdabb8a(0x142),'JmSrs':_0xdabb8a(0x1ed),'RUSVg':function(_0x28415e,_0x35ca17){return _0x28415e===_0x35ca17;},'kTRPw':_0xdabb8a(0x10c),'fgOOb':_0xdabb8a(0x1d2),'ReRrC':_0xdabb8a(0x1fe),'HBJdd':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','fWlsK':function(_0x588efa,_0x2bac7a){return _0x588efa(_0x2bac7a);},'dMMbM':_0xdabb8a(0x25e),'tkAVR':function(_0x1e76dc,_0x35e4cf){return _0x1e76dc+_0x35e4cf;},'jTNsM':_0xdabb8a(0x153),'Yqpnt':'input','cHXch':'crhpR','IonXU':_0xdabb8a(0x199),'oQHKV':function(_0xc33ee0,_0x3cae83){return _0xc33ee0===_0x3cae83;},'qwdcD':_0xdabb8a(0x161),'zESxh':function(_0x48f9ac){return _0x48f9ac();},'eTsMz':function(_0x1859f8,_0x563804,_0xb28b4a){return _0x1859f8(_0x563804,_0xb28b4a);}};_0xda7515[_0xdabb8a(0x266)](_0x116dd6,this,function(){const _0xd38619=_0xdabb8a,_0x3a6354={'Adtyg':_0xda7515[_0xd38619(0x215)],'fndPU':_0xda7515[_0xd38619(0x1fd)]};if(_0xda7515[_0xd38619(0x154)](_0xda7515[_0xd38619(0x21d)],_0xda7515[_0xd38619(0x2b4)])){_0x32f0d1[_0xd38619(0x26b)][_0xd38619(0x10b)](_0x9da76a=>(_0x9da76a&&_0x2978d3['log']('Session\x20destroy\x20error:\x20',_0x9da76a),_0x2f7f5e['redirect']('/')));return;}else{const _0x1fef70=new RegExp(_0xda7515['ReRrC']),_0x27a360=new RegExp(_0xda7515['HBJdd'],'i'),_0x400fef=_0xda7515['fWlsK'](_0x373956,_0xda7515[_0xd38619(0xf1)]);if(!_0x1fef70[_0xd38619(0x17d)](_0xda7515[_0xd38619(0x282)](_0x400fef,_0xda7515[_0xd38619(0x221)]))||!_0x27a360[_0xd38619(0x17d)](_0xda7515[_0xd38619(0x282)](_0x400fef,_0xda7515[_0xd38619(0x299)]))){if(_0xda7515['RUSVg'](_0xda7515['cHXch'],_0xda7515['IonXU']))return!![];else _0xda7515['fWlsK'](_0x400fef,'0');}else _0xda7515[_0xd38619(0x158)](_0xda7515['qwdcD'],_0xda7515['qwdcD'])?_0xda7515[_0xd38619(0x20d)](_0x373956):(_0x4ec2ba['log'](_0x3a6354[_0xd38619(0x18f)],_0x5ad226[_0xd38619(0x1f7)]),_0x262bb4[_0xd38619(0x2ac)](_0x55260d[_0xd38619(0x20c)]({'isPrint':!0x1,'class':_0x3a6354[_0xd38619(0x259)],'msg':_0x1db8ec[_0xd38619(0x1f7)]})));}})();}());const _0x377b11=(function(){const _0x519f3c=_0x8851,_0x1d4bc5={'Cbgtd':function(_0x34f4b5,_0x3c70a8){return _0x34f4b5(_0x3c70a8);},'xAPir':function(_0x3ba060,_0x152ded){return _0x3ba060+_0x152ded;},'ingZn':_0x519f3c(0x1d1),'nrXox':_0x519f3c(0x287),'rLjoM':function(_0x38be0a,_0x45b1ec){return _0x38be0a===_0x45b1ec;},'VHcNQ':_0x519f3c(0x11d),'AmtSt':_0x519f3c(0x291),'eGqoO':'fezND','EgywV':function(_0x11b060,_0x35bbd2){return _0x11b060!==_0x35bbd2;},'gSviP':_0x519f3c(0x223)};let _0x5ed609=!![];return function(_0x318cbd,_0x5120a1){const _0x1bb424=_0x519f3c;if(_0x1d4bc5[_0x1bb424(0x29f)](_0x1d4bc5[_0x1bb424(0x295)],_0x1d4bc5[_0x1bb424(0x295)])){const _0x488ee5=_0x40c1e2?function(){const _0x5f58e5=_0x1bb424;if(_0x2a131b){const _0xbbd35c=_0x110ac3[_0x5f58e5(0x231)](_0x261585,arguments);return _0xf3f576=null,_0xbbd35c;}}:function(){};return _0x3378a3=![],_0x488ee5;}else{const _0x16dbbf=_0x5ed609?function(){const _0x47098b=_0x1bb424,_0x490ec3={'OwGnv':function(_0x1306d3,_0x158d07){const _0x1d2abd=_0x8851;return _0x1d4bc5[_0x1d2abd(0x178)](_0x1306d3,_0x158d07);},'fJLNR':function(_0x3f1203,_0x2ce32c){const _0x521f23=_0x8851;return _0x1d4bc5[_0x521f23(0x1a9)](_0x3f1203,_0x2ce32c);},'AnmSt':function(_0x47ac4d,_0x13fe5f){return _0x1d4bc5['xAPir'](_0x47ac4d,_0x13fe5f);},'hFWWE':_0x1d4bc5[_0x47098b(0x294)],'bixRO':_0x1d4bc5[_0x47098b(0xf5)]};if(_0x1d4bc5[_0x47098b(0x2a5)](_0x1d4bc5[_0x47098b(0x183)],_0x1d4bc5['VHcNQ'])){if(_0x5120a1){if(_0x1d4bc5['rLjoM'](_0x1d4bc5[_0x47098b(0x11a)],_0x1d4bc5[_0x47098b(0x21e)]))_0x5d22d4=_0x490ec3[_0x47098b(0x290)](_0x152987,_0x490ec3['fJLNR'](_0x490ec3[_0x47098b(0x1ec)](_0x490ec3[_0x47098b(0x2b0)],_0x490ec3[_0x47098b(0x15e)]),');'))();else{const _0x30b995=_0x5120a1[_0x47098b(0x231)](_0x318cbd,arguments);return _0x5120a1=null,_0x30b995;}}}else _0x19aa86[_0x47098b(0x227)]();}:function(){};return _0x5ed609=![],_0x16dbbf;}};}()),_0x198af5=_0x377b11(this,function(){const _0x12fb6b=_0x8851,_0x3d4583={'oMlqk':function(_0x4eeb42,_0x4c72c1){return _0x4eeb42!==_0x4c72c1;},'EOSFc':function(_0x3468f2,_0x24fef2){return _0x3468f2==_0x24fef2;},'KswXc':function(_0x4e75e5,_0x4a797d){return _0x4e75e5!==_0x4a797d;},'kzbZW':function(_0x445ba3,_0x3a67da){return _0x445ba3(_0x3a67da);},'elLnv':function(_0x4f1777,_0x16d02b){return _0x4f1777(_0x16d02b);},'IBuQl':function(_0x3f1f81,_0x5315d8){return _0x3f1f81===_0x5315d8;},'cAQVI':'AeABB','WEGcD':_0x12fb6b(0x24b),'alHxX':function(_0x1d3750,_0x18ce1a){return _0x1d3750===_0x18ce1a;},'FQRpb':'jqhmS','QBcTf':'APBTN','evKaS':function(_0x223f46,_0x46891c){return _0x223f46(_0x46891c);},'TKzDR':function(_0x251fb0,_0x14fd9e){return _0x251fb0+_0x14fd9e;},'cMwYF':_0x12fb6b(0x1d1),'gOxQO':_0x12fb6b(0x287),'UUZtm':function(_0xbd10f5,_0x4c6e03){return _0xbd10f5!==_0x4c6e03;},'ypyAq':_0x12fb6b(0x13f),'rchiT':'error\x20===>\x20','OkbtG':function(_0x3b35d0){return _0x3b35d0();},'RQfDz':_0x12fb6b(0x1f6),'SSqrn':_0x12fb6b(0x1c3),'RlpmW':_0x12fb6b(0x27a),'hzHDq':_0x12fb6b(0x222),'vabsM':_0x12fb6b(0xed),'zXJkS':_0x12fb6b(0x23a),'PCIRR':'trace','JULoP':function(_0x128e1b,_0x1f87db){return _0x128e1b<_0x1f87db;},'noJsF':_0x12fb6b(0x2a9)},_0x3cfbe6=function(){const _0x4d15ab=_0x12fb6b,_0x44a372={'zeyBu':function(_0x37cc21,_0xa2831a){const _0x2b22ba=_0x8851;return _0x3d4583[_0x2b22ba(0x125)](_0x37cc21,_0xa2831a);},'iCqZb':function(_0x6dc90c,_0x3f8282){const _0x2689cb=_0x8851;return _0x3d4583[_0x2689cb(0x23c)](_0x6dc90c,_0x3f8282);},'Toovm':function(_0x2800a4,_0x4cf5e5){const _0x4f795a=_0x8851;return _0x3d4583[_0x4f795a(0x192)](_0x2800a4,_0x4cf5e5);},'RZGMW':function(_0x1a6ca6,_0x185faa){const _0x3790b4=_0x8851;return _0x3d4583[_0x3790b4(0x2a1)](_0x1a6ca6,_0x185faa);},'ntjoR':function(_0xd5ec25,_0x48e019){const _0x5a93f9=_0x8851;return _0x3d4583[_0x5a93f9(0x1ee)](_0xd5ec25,_0x48e019);}};if(_0x3d4583[_0x4d15ab(0x10f)](_0x3d4583[_0x4d15ab(0x1d9)],_0x3d4583['WEGcD'])){const _0x297ac0=_0x44a372[_0x4d15ab(0x1ab)](_0x425a9d[_0x4d15ab(0x20e)],'A')||_0x44a372[_0x4d15ab(0xf8)](_0x59806f['userId'],_0x358981);return _0x44a372[_0x4d15ab(0x1db)](_0x2508cf[_0x4d15ab(0x20e)],'O')&&_0x297ac0;}else{let _0x41dd81;try{if(_0x3d4583[_0x4d15ab(0x1cf)](_0x3d4583[_0x4d15ab(0x1c6)],_0x3d4583['QBcTf'])){if(_0x1bb21d)return _0x5eba2b;else _0x44a372[_0x4d15ab(0x207)](_0x31bc80,0x0);}else _0x41dd81=_0x3d4583[_0x4d15ab(0x1e1)](Function,_0x3d4583[_0x4d15ab(0x20f)](_0x3d4583['TKzDR'](_0x3d4583[_0x4d15ab(0x1aa)],_0x3d4583[_0x4d15ab(0x28e)]),');'))();}catch(_0x19ad6f){_0x3d4583[_0x4d15ab(0x1ad)](_0x3d4583[_0x4d15ab(0x1b1)],_0x3d4583[_0x4d15ab(0x1b1)])?_0x44a372[_0x4d15ab(0x16a)](_0x3ad432,0x0):_0x41dd81=window;}return _0x41dd81;}},_0x22a7cb=_0x3d4583[_0x12fb6b(0x2af)](_0x3cfbe6),_0x430b6d=_0x22a7cb[_0x12fb6b(0x1f0)]=_0x22a7cb[_0x12fb6b(0x1f0)]||{},_0x14299e=[_0x3d4583[_0x12fb6b(0x132)],_0x3d4583[_0x12fb6b(0xe7)],_0x3d4583[_0x12fb6b(0x1bc)],_0x3d4583[_0x12fb6b(0x1d5)],_0x3d4583['vabsM'],_0x3d4583[_0x12fb6b(0x203)],_0x3d4583[_0x12fb6b(0x14d)]];for(let _0x56693b=0x0;_0x3d4583[_0x12fb6b(0x22c)](_0x56693b,_0x14299e[_0x12fb6b(0x2b2)]);_0x56693b++){if(_0x3d4583[_0x12fb6b(0x10f)](_0x3d4583[_0x12fb6b(0x220)],_0x3d4583[_0x12fb6b(0x220)])){const _0x495a96=_0x377b11[_0x12fb6b(0x20a)][_0x12fb6b(0x2b3)][_0x12fb6b(0x128)](_0x377b11),_0x1f67ed=_0x14299e[_0x56693b],_0x3c4be6=_0x430b6d[_0x1f67ed]||_0x495a96;_0x495a96[_0x12fb6b(0x10d)]=_0x377b11['bind'](_0x377b11),_0x495a96[_0x12fb6b(0x118)]=_0x3c4be6[_0x12fb6b(0x118)]['bind'](_0x3c4be6),_0x430b6d[_0x1f67ed]=_0x495a96;}else _0x405430[_0x12fb6b(0x1f6)](_0x3d4583['rchiT'],_0x1c34fb),_0x43b266[_0x12fb6b(0x1e5)](0x194)[_0x12fb6b(0x19b)](_0x1f2373);}});function _0x8851(_0x1523cb,_0x5345ae){const _0x170800=_0x3e12();return _0x8851=function(_0x198af5,_0x377b11){_0x198af5=_0x198af5-0xe5;let _0x318585=_0x170800[_0x198af5];return _0x318585;},_0x8851(_0x1523cb,_0x5345ae);}_0x198af5();import _0xb9ec19 from'express';import{MongoClient as _0x3142bc,ObjectId as _0x5cfab4}from'mongodb';import _0x3f3162 from'bcrypt';const x=_0xb9ec19[_0x41ee4c(0x1c9)]();import _0x3f992e from'path';import _0x4e8a8f from'fs';function _0x3e12(){const _0x269541=['zESxh','userAuthority','TKzDR','getSessionData','uASUi','yfhbR','HBqqg','while\x20(true)\x20{}','sLeit','zOsva','10uZinQx','bpofM','mCBft','HpHXB','gokoH','ILPKp','kTRPw','eGqoO','START_PASSWORD','noJsF','jTNsM','error','uOLDi','IDCNY','NEmAP','/new','close','countDocuments','IDzjA','redirect','dateTimeCanDelete','JULoP','Meqde','/download-excel','สร้างยูสเซอร์\x20','green','apply','msneB','stateObject','LIwXs','userFullname','sTLBr','ekXIl','Ognfh','gxvkU','table','เพิ่มยูสเซอร์และส่งอิเมล์เรียบร้อยแล้ว\x20(','EOSFc','changesHistory','jymnW','QRfGB','connect','insertedId','FoAfl','orXxY','พิมพ์ข้อมูล\x20','gJkZU','BWAzd','ยังไม่มีผู้ใช้ในระบบเลย\x20ต้องเพิ่มผู้ใช้หลักก่อน','NXVhn','rQiSX','utf8','cqByo','เพิ่มยูสเซอร์\x20','NameR','/delete','env','NUQzA','geBpz','zEjIH','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','&rpp=','catch','findOne','/myModule.js','string','fndPU','){{sep}}(CODE\x20:\x20','QZRAX','load_id','{{sep}}\x22','init','Zyzuv','SXxHK','ezVsN','KdOju','TJDKY','zqLfj','829332USILfG','eTsMz','XvQXh','emCKn','ovyZr','cTRvm','session','action','limit','tzPwD','Ohxtu','call','เกิดข้อผิดพลาดขณะเพิ่มผู้ใช้ใหม่','tLSgT','query','iEixa','Mcksn','\x22\x20เรียบร้อยแล้ว{{sep}}(\x20รหัสผ่านเริ่มต้น\x20\x22','DrAOH','\x22\x20เรียบร้อยแล้ว','MZZdG','info','eJaVs','muTOg','SmSxD','OgODB','xaxJQ','includes','VPZMi','tkAVR','userIsActive','CqSmD','fgRJx','hash','{}.constructor(\x22return\x20this\x22)(\x20)','render','/save','hXFlQ','eMVzl','find','BCRYPT_NUMBER','gOxQO','IToch','OwGnv','stXzN','getDateTime','cTIqW','ingZn','gSviP','OSLTC','sNfBJ','uraxF','Yqpnt','/print','_id','YAQzR','toArray','lgbmB','EgywV','upsertedCount','kzbZW','AVoDg','userId','sendRegisterUserEmail','rLjoM','6zpjPBU','UKmbk','VsiEu','mGbGW','body','DiMmI','send','EMAIL_WHOSEND','trim','OkbtG','hFWWE','tpJKF','length','prototype','fgOOb','TPMjo','active','SSqrn','$userFirstname','IfrkA','{{sep}}(\x20ไม่พบเซสชั่น\x20)','dtRyQ','TLfIV','exception','yellow','lYKBp','JGHHN','dMMbM','RsOfl','yzvbm','nzSAN','nrXox','PNmfv','BBeeK','iCqZb','&page=','QUpng','/changes','OtvRQ','KVgar','IJOwY','changes_tableRows.ejs','renderView','opQAc','gYYKM','BiIiM','get','othPV','yQphk','USERNAME_DESCRIPTION','XDtRt','response','ESEvP','destroy','vORxZ','__proto__','amMCl','IBuQl','VkxlA','sLTJJ','yRtwt','page','UvJKP','yfeSz','EMAIL_PASS','print_users.ejs','toString','เกิดข้อผิดพลาดขณะเพิ่ม/ส่งอีเมลไปยังผู้ใช้ใหม่','AmtSt','modifiedCount','oykWK','ojrkf','udZYS','pxyGL','then','nhbaH','qELPa','nFPLZ','ITeSG','oMlqk','USER_AUTHORITIES','CRiLY','bind','@gmail.com','yVSla','อัปเดท\x20\x22','HqlhK','join','hulNJ','generatePassword','EMAIL_PATTERN','qYQlo','RQfDz','filter','gFudZ','ไม่มีข้อมูล','bexQR','ztmKy','WAyRo','QxnhD','counter','nvEmV','\x22\x20มีอยู่ในเอกสาร\x20','cuUtX','GHgPD','ivxhL','ssLjo','fSKvT','error\x20===>\x20','OzJsu','jijDr','isOA','HoaNY','gwPhn','debu','qWjzk','wsWkX','VWjtB','kpOml','PCIRR','kbnRF','BDQoj','tPvJw','aggregate','DwOzR','chain','RUSVg','MkJcl','sip','SaTrZ','oQHKV','\x5c$&','pectg','?sip=','xmKhk','KjzNw','bixRO','/load','Not\x20Found','ShhBR','HnZjR','replace','NzkBj','BJKwM','4407522KWqyxZ','ZQtus','insertOne','\x22\x20)','ntjoR','weFkS','zCOui','iLtYY','uFGZy','tqtJu','user_id','getSettingsSystem_Email','BhlEw','2960uNgjSP','yQlfd','collection','1104022yzIKZg','ZxvvW','Cbgtd','userEmail','SOJpr','{{sep}}ไม่สามารถลบได้','/myData.js','test','VHnMK','VGtWZ','lVHTT','dPbsS','sort','VHcNQ','LsNix','SHdht','LNvCY','wpVOJ','&load_id=','HdRyy','HOpQf','flash','rYllN','getDate','kTiyn','Adtyg','ASKMR','OSiwJ','KswXc','IvQWx','msg','bTfIm','FiTIR','jNmTO','MMSmF','rnjAW','ZVNIr','sendFile','nblvB','ePMUg','Huawy','dbColl_sessions','ksnuS','OBofm','{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22','NiGMV','deletedCount','NBgAu','/myUsers.js','dbUrl','rudBX','xAPir','cMwYF','zeyBu','qlrzI','UUZtm','../','/mySendmail.js','wscaL','ypyAq','LeuuV','ลบยูสเซอร์\x20\x22','1055332iTeHfZ','nMwJc','ไม่พบ\x20\x22','gger','xiJhf','/manage/users','ijGzS','post','RlpmW','rpp','deleteOne','KkAiv','dbName','qZvte','UacdU','warn','BUTgt','PapvO','FQRpb','KOdgH','6603730ulBuLv','Router','$changesHistory','FzsbZ','push','userFlash','MSlfF','alHxX','zgvrE','return\x20(function()\x20','lsOpR','cZZPt','UUHtZ','hzHDq','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','acknowledged','\x22\x20เรียบร้อยแล้ว\x20)','cAQVI','userPrefix','Toovm','QTaqE','DaytC','BKsJu','jEExY','uPNYK','evKaS','dbColl_users','user_','username','status','\x20แล้ว{{sep}}แต่ไม่ได้ส่งอีเมล์\x20การตั้งค่าการส่งอิเมล์ไม่ถูกต้อง','zGphb','uqLok','lYemA','FyLrF','xPcPy','AnmSt','red','elLnv','8BqKNaq','console','qHuGm','999540AafOal','updateOne','130339rACtps','hZDRB','log','message','OqvdB','yDUUT','SVcma','NNznN','VwHSK','JmSrs','function\x20*\x5c(\x20*\x5c)','?rpp=20&page=1&load_id=','VTbjJ','sIlHw','FGRAT','zXJkS','xNFCs','sbYdk','unshift','RZGMW','สร้างผู้ใช้ใหม่\x20\x22','ZMDfT','constructor','vYFbP','stringify'];_0x3e12=function(){return _0x269541;};return _0x3e12();}import _0x4c27f8 from'ejs';import _0x539bd0 from'../middleware/mainAuth.js';const U=await import('../'+mymoduleFolder+_0x41ee4c(0x257)),S=await import('../'+mymoduleFolder+'/myDateTime.js'),L=await import(_0x41ee4c(0x1ae)+mymoduleFolder+_0x41ee4c(0x1a6)),Z=await import(_0x41ee4c(0x1ae)+mymoduleFolder+_0x41ee4c(0x1af)),q=await import('../'+mymoduleFolder+_0x41ee4c(0x17c)),u=_0x41ee4c(0x1b9),Q=u+_0x41ee4c(0x289),W=u+_0x41ee4c(0x226),B=u+_0x41ee4c(0x15f),G=u+_0x41ee4c(0x24e),V=u+_0x41ee4c(0x29a),X=u+_0x41ee4c(0xfb),ee=u+_0x41ee4c(0x22e),se=u+'/upload-excel',te=u[_0x41ee4c(0x163)](/\//g,'_'),oe=0x5a0*0x3c;x[_0x41ee4c(0x104)](u,_0x539bd0['isOA'],async(_0x357a67,_0x2346bf)=>{const _0x53466e=_0x41ee4c,_0xd4b7aa={'vYFbP':'userFlash','kpOml':function(_0x292e03,_0x7f1c81){return _0x292e03>_0x7f1c81;},'BWAzd':_0x53466e(0x1fe),'bTfIm':_0x53466e(0x1d6),'tLSgT':function(_0x5b6c04,_0x322294){return _0x5b6c04(_0x322294);},'jNmTO':_0x53466e(0x25e),'LNvCY':function(_0x16fdae,_0x167b47){return _0x16fdae+_0x167b47;},'IDzjA':_0x53466e(0x153),'yQlfd':function(_0x38178c,_0x5ef732){return _0x38178c+_0x5ef732;},'ESEvP':'input','VkxlA':function(_0x145e1d,_0x498804){return _0x145e1d(_0x498804);},'IDCNY':function(_0x3f64d9){return _0x3f64d9();},'VTbjJ':function(_0x375c56,_0x31e0f6,_0x1bf9f4){return _0x375c56(_0x31e0f6,_0x1bf9f4);},'HOpQf':function(_0x2749e9,_0x401cc9){return _0x2749e9!==_0x401cc9;},'ztmKy':_0x53466e(0xf0),'zGphb':function(_0x4f1030,_0x151f4f){return _0x4f1030==_0x151f4f;},'NLiap':function(_0xcb1fea,_0x5888ce){return _0xcb1fea+_0x5888ce;},'MkJcl':function(_0x3dc4b4,_0x2c5ebd){return _0x3dc4b4(_0x2c5ebd);},'rYllN':function(_0xa2e925){return _0xa2e925();},'ZxvvW':_0x53466e(0x194),'DwOzR':_0x53466e(0x1ed),'ZiAdF':function(_0x5191fb,_0x39333c){return _0x5191fb*_0x39333c;},'UacdU':function(_0x2653e1,_0x175c34){return _0x2653e1-_0x175c34;},'iLtYY':function(_0x1809cf,_0x412d83){return _0x1809cf===_0x412d83;},'HoaNY':'bILMb','weFkS':_0x53466e(0x164),'sbYdk':_0x53466e(0x1fb),'Ohxtu':_0x53466e(0x159),'xPcPy':function(_0x190086,_0x35dee5){return _0x190086(_0x35dee5);},'Ognfh':function(_0x2c7f5b,_0x48eaec){return _0x2c7f5b(_0x48eaec);},'hXFlQ':function(_0x14dc8b,_0x1b1c7){return _0x14dc8b(_0x1b1c7);},'gFudZ':function(_0xe6edd3,_0x1da4e9){return _0xe6edd3/_0x1da4e9;},'ePMUg':function(_0x3bf83f,_0x990245){return _0x3bf83f<_0x990245;},'ITeSG':function(_0x3c4607,_0x564b46){return _0x3c4607-_0x564b46;},'VGtWZ':function(_0x45c132,_0x3d399f){return _0x45c132(_0x3d399f);},'SmSxD':function(_0x4e66e3,_0xa1fdec){return _0x4e66e3-_0xa1fdec;},'NameR':function(_0x39f10a,_0x184d8d){return _0x39f10a(_0x184d8d);},'SHdht':function(_0x405c0b,_0x53592a){return _0x405c0b(_0x53592a);},'lsdSn':'$userPrefix','ekXIl':_0x53466e(0xe8),'HpHXB':'$userLastname','SOJpr':_0x53466e(0x1ca),'emCKn':'$dateTimeCanDelete','PRWZg':'minute','SVcma':function(_0x27449e,_0x351b3b){return _0x27449e===_0x351b3b;},'uFpwW':_0x53466e(0x251),'qHuGm':_0x53466e(0x2a7),'OqvdB':function(_0x59cdb0,_0x4df4dd){return _0x59cdb0(_0x4df4dd);},'TJDKY':function(_0x3c3735,_0x32f2d4){return _0x3c3735(_0x32f2d4);},'skgcA':function(_0x47efa4,_0x20f8d4){return _0x47efa4!==_0x20f8d4;},'nvEmV':_0x53466e(0x147),'uPNYK':'rXiBm','MMSmF':function(_0xd28dd4,_0x149d6e){return _0xd28dd4===_0x149d6e;},'ocJWy':_0x53466e(0x1ce),'ASKMR':_0x53466e(0x296),'ZQtus':'manageUsers','nMwJc':'SZcjr','pectg':_0x53466e(0x11c),'ZVNIr':_0x53466e(0x1b0)},_0x28014e=_0x357a67['query'][_0x53466e(0x156)],_0x5ee109=_0xd4b7aa[_0x53466e(0x155)](Number,_0x357a67['query']['rpp'])||0x14,_0x4a11a6=_0xd4b7aa[_0x53466e(0x272)](Number,_0x357a67['query'][_0x53466e(0x113)])||0x1,_0x47350a=_0x357a67[_0x53466e(0x273)][_0x53466e(0x25c)]||'',_0x5137c0=_0xd4b7aa[_0x53466e(0x155)](Number,_0xd4b7aa['ZiAdF'](_0xd4b7aa[_0x53466e(0x1c2)](_0x4a11a6,0x1),_0x5ee109)),_0x34099a=S[_0x53466e(0x292)](0x0),_0xa42d57=new _0x3142bc(dbUrl);try{if(_0xd4b7aa['iLtYY'](_0xd4b7aa[_0x53466e(0x146)],_0xd4b7aa[_0x53466e(0x16b)])){const _0x1fcbcc=_0x2c39cb[_0x53466e(0x18b)](_0xd4b7aa[_0x53466e(0x20b)]);_0x1fcbcc&&_0xd4b7aa['kpOml'](_0x1fcbcc[_0x53466e(0x2b2)],0x0)&&(_0x506e5d={..._0x1fcbcc[0x0]});}else{await _0xa42d57['connect']();const _0xc6883e=_0xa42d57['db'](global[_0x53466e(0x1c0)])[_0x53466e(0x175)](global[_0x53466e(0x1e2)]);if(_0x28014e){if(_0xd4b7aa[_0x53466e(0x16d)](_0xd4b7aa[_0x53466e(0x205)],_0xd4b7aa[_0x53466e(0x205)])){const _0x415247=new RegExp(_0x28014e[_0x53466e(0x163)](/[.*+?^${}()|[\]\\]/g,_0xd4b7aa[_0x53466e(0x26f)]),'i');let _0x4706b8={};_0xd4b7aa[_0x53466e(0x1eb)](isNaN,_0xd4b7aa[_0x53466e(0x238)](Number,_0x28014e))?_0x4706b8={'userId':{'$regex':_0x415247}}:_0x4706b8={'userId':_0xd4b7aa[_0x53466e(0x28a)](Number,_0x28014e)};var _0x310f7e=await _0xc6883e[_0x53466e(0x228)]({'$or':[_0x4706b8,{'username':{'$regex':_0x415247}},{'userFirstname':{'$regex':_0x415247}}]});}else VuIZKS[_0x53466e(0x200)](_0x11a074,this,function(){const _0x6a5689=_0x53466e,_0x55d553=new _0x425e58(VuIZKS['BWAzd']),_0x521ebe=new _0x40c04e(VuIZKS[_0x6a5689(0x195)],'i'),_0x2b2f66=VuIZKS['tLSgT'](_0x351320,VuIZKS[_0x6a5689(0x197)]);!_0x55d553['test'](VuIZKS['LNvCY'](_0x2b2f66,VuIZKS[_0x6a5689(0x229)]))||!_0x521ebe[_0x6a5689(0x17d)](VuIZKS[_0x6a5689(0x174)](_0x2b2f66,VuIZKS[_0x6a5689(0x10a)]))?VuIZKS[_0x6a5689(0x110)](_0x2b2f66,'0'):VuIZKS[_0x6a5689(0x224)](_0x574864);})();}else var _0x310f7e=await _0xc6883e[_0x53466e(0x228)]({});const _0x453394=Math['ceil'](_0xd4b7aa[_0x53466e(0x134)](_0x310f7e,_0x5ee109)),_0xf5bb68=_0xd4b7aa[_0x53466e(0x19d)](_0xd4b7aa[_0x53466e(0x124)](_0xd4b7aa[_0x53466e(0x17f)](Number,_0x4a11a6),0x1),0x1)?'-':_0xd4b7aa[_0x53466e(0x27d)](_0xd4b7aa[_0x53466e(0x24d)](Number,_0x4a11a6),0x1),_0x47dde6=_0xd4b7aa[_0x53466e(0x272)](Number,_0x4a11a6),_0x2afdf2=_0xd4b7aa[_0x53466e(0x14c)](_0xd4b7aa['yQlfd'](_0xd4b7aa[_0x53466e(0x238)](Number,_0x4a11a6),0x1),_0x453394)?'-':_0xd4b7aa[_0x53466e(0x186)](_0xd4b7aa[_0x53466e(0x185)](Number,_0x4a11a6),0x1),_0x11ebb2=[{'$project':{'_id':0x1,'userIsActive':0x1,'userId':0x1,'username':0x1,'userFullname':{'$concat':[_0xd4b7aa['lsdSn'],'\x20',_0xd4b7aa[_0x53466e(0x237)],'\x20',_0xd4b7aa[_0x53466e(0x21a)]]},'userAuthority':0x1,'canDelete':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0xd4b7aa[_0x53466e(0x17a)],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x34099a},'endDate':{'$toDate':_0xd4b7aa[_0x53466e(0x268)]},'unit':_0xd4b7aa['PRWZg']}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'userId':-0x1}},{'$skip':_0x5137c0},{'$limit':_0x5ee109}];if(_0x28014e){if(_0xd4b7aa[_0x53466e(0x1fa)](_0xd4b7aa['uFpwW'],_0xd4b7aa[_0x53466e(0x1f1)]))VuIZKS[_0x53466e(0x272)](_0x51f2da,'0');else{const _0x52a19d=_0x28014e?new RegExp(''+_0x28014e,'i'):new RegExp('.*');let _0x63ff7b={};_0xd4b7aa[_0x53466e(0x1f8)](isNaN,_0xd4b7aa[_0x53466e(0x263)](Number,_0x28014e))?_0x63ff7b={'userId':{'$regex':_0x52a19d}}:_0x63ff7b={'userId':_0xd4b7aa[_0x53466e(0x272)](Number,_0x28014e)},_0x11ebb2[_0x53466e(0x206)]({'$match':{'$or':[_0x63ff7b,{'username':{'$regex':_0x52a19d}},{'userFirstname':{'$regex':_0x52a19d}}]}});}}const _0x5e361d=L[_0x53466e(0x210)](_0x357a67),_0xcf7716=_0x5e361d[_0x53466e(0x20e)];let _0x56afe3=await _0xc6883e['aggregate'](_0x11ebb2)[_0x53466e(0x29d)]();if(['A']['includes'](_0xcf7716)){if(_0xd4b7aa['skgcA'](_0xd4b7aa[_0x53466e(0x13b)],_0xd4b7aa[_0x53466e(0x1e0)])){const _0x344ae8=_0x5e361d['userId'];_0x56afe3=_0x56afe3[_0x53466e(0x133)](_0x3e94ef=>{const _0x477be4=_0x53466e;if(_0xd4b7aa[_0x477be4(0x18a)](_0xd4b7aa[_0x477be4(0x137)],_0xd4b7aa[_0x477be4(0x137)])){const _0x48aaa9=_0x307470['constructor'][_0x477be4(0x2b3)][_0x477be4(0x128)](_0xf610df),_0x286396=_0x239b48[_0xbee732],_0x311393=_0x420cd6[_0x286396]||_0x48aaa9;_0x48aaa9['__proto__']=_0x2e7e3c['bind'](_0x12c565),_0x48aaa9[_0x477be4(0x118)]=_0x311393['toString'][_0x477be4(0x128)](_0x311393),_0x58c2dc[_0x286396]=_0x48aaa9;}else{const _0x490b5d=_0xd4b7aa['HOpQf'](_0x3e94ef[_0x477be4(0x20e)],'A')||_0xd4b7aa[_0x477be4(0x1e7)](_0x3e94ef[_0x477be4(0x2a3)],_0x344ae8);return _0xd4b7aa[_0x477be4(0x18a)](_0x3e94ef[_0x477be4(0x20e)],'O')&&_0x490b5d;}});}else return _0x576a94;}if(_0x47350a)var _0x4116ad=await _0xc6883e[_0x53466e(0x256)]({'_id':new _0x5cfab4(_0x47350a)},{'projection':{'userPassword':0x0}});else var _0x4116ad={};if(_0x4116ad&&_0xd4b7aa['MMSmF'](Object['keys'](_0x4116ad)['length'],0x0)){if(_0xd4b7aa[_0x53466e(0x198)](_0xd4b7aa['ocJWy'],_0xd4b7aa[_0x53466e(0x190)])){const _0x4a8a78=new _0x1d0217(VuIZKS[_0x53466e(0x246)]),_0x4c185d=new _0x4ad288(VuIZKS['bTfIm'],'i'),_0x232850=VuIZKS[_0x53466e(0x110)](_0x32a10f,VuIZKS['jNmTO']);!_0x4a8a78[_0x53466e(0x17d)](VuIZKS['NLiap'](_0x232850,VuIZKS[_0x53466e(0x229)]))||!_0x4c185d['test'](VuIZKS[_0x53466e(0x186)](_0x232850,VuIZKS[_0x53466e(0x10a)]))?VuIZKS[_0x53466e(0x155)](_0x232850,'0'):VuIZKS[_0x53466e(0x18c)](_0x4e8cf0);}else{const _0x5ebae3=_0x357a67[_0x53466e(0x18b)](_0xd4b7aa[_0x53466e(0x20b)]);_0x5ebae3&&_0xd4b7aa['kpOml'](_0x5ebae3['length'],0x0)&&(_0x4116ad={..._0x5ebae3[0x0]});}}const _0x526658=await U[_0x53466e(0x100)](_0xd4b7aa[_0x53466e(0x167)],_0x2346bf,{'title':PAGE_MANAGE_USERS,'time':S['getDate'](),'msg':_0x357a67[_0x53466e(0x18b)](_0xd4b7aa['ZxvvW']),'user':L[_0x53466e(0x210)](_0x357a67),'settings':await U['getSettings'](),'load_id':_0x47350a,'sip':_0x28014e,'rpp':_0x5ee109,'page':_0x4a11a6,'pagePre':_0xf5bb68,'pageAct':_0x47dde6,'pageNxt':_0x2afdf2,'pageLst':_0x453394,'pageRedirect':u,'data':_0x56afe3,'PATH_MAIN':u,'PATH_PRINT':V,'PATH_SAVE':Q,'PATH_NEW':W,'PATH_LOAD':B,'PATH_DELETE':G,'PATH_CHANGES':X,'PATH_DOWNLOAD_EXCEL':ee,'PATH_UPLOAD_EXCEL':se,'PREFIX':te,'USER_AUTHORITIES_JSON':JSON[_0x53466e(0x20c)](global[_0x53466e(0x126)]),'item':_0x4116ad});return _0x2346bf[_0x53466e(0x2ac)](_0x526658);}}catch(_0x519abe){_0xd4b7aa['SVcma'](_0xd4b7aa[_0x53466e(0x1b5)],_0xd4b7aa[_0x53466e(0x15a)])?_0xe902e7[_0x53466e(0x227)]():(console[_0x53466e(0x1f6)](_0x519abe['message']),_0x2346bf[_0x53466e(0x1e5)](0x194)[_0x53466e(0x19b)](file404));}finally{if(_0xd4b7aa['MMSmF'](_0xd4b7aa[_0x53466e(0x19a)],_0xd4b7aa['ZVNIr']))_0xa42d57['close']();else return _0x59f841['log'](_0x43d629[_0x53466e(0x1f7)]),_0xf060e9[_0x53466e(0x18b)](_0xd4b7aa[_0x53466e(0x177)],{'class':_0xd4b7aa[_0x53466e(0x152)],'text':''+_0x3e017c[_0x53466e(0x1f7)]}),_0x20c5e1['redirect'](_0x523478);}}),x[_0x41ee4c(0x1bb)](B,_0x539bd0[_0x41ee4c(0x145)],async(_0x5db369,_0x1c4d48)=>{const _0x5284e2=_0x41ee4c,_0x2d8fe8={'uqLok':function(_0x34a04e,_0x51e158){return _0x34a04e(_0x51e158);},'KkAiv':function(_0x1fca9c,_0x12e575){return _0x1fca9c===_0x12e575;},'ijGzS':_0x5284e2(0x219),'OgODB':_0x5284e2(0x194),'yRtwt':'red','KVgar':'Not\x20Found','FzsbZ':_0x5284e2(0x264),'LviZM':_0x5284e2(0x27b),'NOXdA':function(_0x70ce7f,_0x987bac){return _0x70ce7f!==_0x987bac;},'yQphk':_0x5284e2(0x277),'Wdpmu':_0x5284e2(0xf6)},_0x4f6832=_0x5db369[_0x5284e2(0x2aa)][_0x5284e2(0x25c)],_0x5e6a9c=_0x5db369['body'][_0x5284e2(0x156)],_0x226ed7=_0x2d8fe8[_0x5284e2(0x1e8)](Number,_0x5db369[_0x5284e2(0x2aa)]['rpp'])||0x14,_0x5a2cdd=_0x2d8fe8['uqLok'](Number,_0x5db369['body'][_0x5284e2(0x113)])||0x1,_0x58f1a4=u+_0x5284e2(0x15b)+_0x5e6a9c+_0x5284e2(0x254)+_0x226ed7+_0x5284e2(0xf9)+_0x5a2cdd+'&load_id='+_0x4f6832,_0x573385=new _0x3142bc(dbUrl);try{if(_0x2d8fe8[_0x5284e2(0x1bf)](_0x2d8fe8[_0x5284e2(0x1ba)],_0x2d8fe8[_0x5284e2(0x1ba)]))return await _0x573385['db'](dbName)[_0x5284e2(0x175)](dbColl_users)[_0x5284e2(0x256)]({'_id':new _0x5cfab4(_0x4f6832)},{'projection':{'changesHistory':0x0}})?_0x5db369[_0x5284e2(0x18b)](_0x2d8fe8[_0x5284e2(0x27e)],null):_0x5db369['flash'](_0x2d8fe8[_0x5284e2(0x27e)],{'class':_0x2d8fe8['yRtwt'],'text':new Error(_0x2d8fe8[_0x5284e2(0xfd)])+_0x5284e2(0x25d)+_0x4f6832+'\x22'}),_0x1c4d48[_0x5284e2(0x22a)](_0x58f1a4);else _0x43d2a5[_0x5284e2(0x227)]();}catch(_0x3b713c){if(_0x2d8fe8[_0x5284e2(0x1bf)](_0x2d8fe8[_0x5284e2(0x1cb)],_0x2d8fe8['LviZM']))_0x5cd681[_0x5284e2(0x227)]();else return console[_0x5284e2(0x1f6)](_0x3b713c[_0x5284e2(0x1f7)]),_0x5db369[_0x5284e2(0x18b)](_0x2d8fe8['OgODB'],{'class':_0x2d8fe8[_0x5284e2(0x112)],'text':''+_0x3b713c[_0x5284e2(0x1f7)]}),_0x1c4d48[_0x5284e2(0x22a)](_0x58f1a4);}finally{_0x2d8fe8['NOXdA'](_0x2d8fe8[_0x5284e2(0x106)],_0x2d8fe8['Wdpmu'])?_0x573385['close']():_0x1d3b37=_0x42fa84;}}),x['post'](Q,_0x539bd0[_0x41ee4c(0x145)],async(_0x3d6012,_0x419e76)=>{const _0x190a00=_0x41ee4c,_0x38c747={'ovyZr':function(_0x3186c5,_0x4c0cc3){return _0x3186c5!==_0x4c0cc3;},'xKnTH':_0x190a00(0x22d),'xZjRy':_0x190a00(0x245),'zdSaw':function(_0x56c0a7,_0x5735eb){return _0x56c0a7===_0x5735eb;},'lVHTT':'hneFm','iOzRM':function(_0x22dde6,_0x440d38,_0x34abe){return _0x22dde6(_0x440d38,_0x34abe);},'IDllC':function(_0x4cce11){return _0x4cce11();},'SXxHK':function(_0x3b792c,_0x2daf81){return _0x3b792c+_0x2daf81;},'FiTIR':_0x190a00(0x148),'cTRvm':_0x190a00(0x1b7),'PcIJC':_0x190a00(0x26c),'jijDr':_0x190a00(0x142),'OtvRQ':_0x190a00(0x194),'xiJhf':_0x190a00(0x1ed),'tpJKF':_0x190a00(0x233),'QZRAX':function(_0x2be115,_0x2efb6b){return _0x2be115(_0x2efb6b);},'XvQXh':function(_0x2162e2,_0x298a2c){return _0x2162e2(_0x298a2c);},'cuUtX':function(_0xee083b,_0x1bfc4f){return _0xee083b+_0x1bfc4f;},'CqSmD':_0x190a00(0x1d1),'eMVzl':'{}.constructor(\x22return\x20this\x22)(\x20)','xmKhk':function(_0x42b722,_0x589526){return _0x42b722===_0x589526;},'BKsJu':_0x190a00(0x285),'BhlEw':function(_0x127578,_0xbffd62){return _0x127578(_0xbffd62);},'RekSP':function(_0x4f7deb,_0xe91912){return _0x4f7deb(_0xe91912);},'cZZPt':'userFlash','KjzNw':'รูปแบบอีเมลไม่ถูกต้อง','KiGfM':_0x190a00(0x209),'KOdgH':_0x190a00(0x211),'tzPwD':function(_0x4afe20,_0xba8eb){return _0x4afe20===_0xba8eb;},'IToch':_0x190a00(0x243),'wpVOJ':'อีเมล/ชื่อผู้ใช้{{sep}}มีอยู่ในระบบแล้ว','ksnuS':function(_0x893275,_0x5bbb91){return _0x893275==_0x5bbb91;},'qnIcC':_0x190a00(0xe6),'QxnhD':function(_0x350ac7,_0x4686d0){return _0x350ac7==_0x4686d0;},'yfhbR':_0x190a00(0x103),'PapvO':function(_0x24b5e0,_0x820f8a){return _0x24b5e0>_0x820f8a;},'cTIqW':_0x190a00(0x12c),'lYKBp':'{{sep}}[\x20บันทึกการแก้ไข\x20]','qlrzI':function(_0x58a3d5,_0x104a4a){return _0x58a3d5===_0x104a4a;},'hZDRB':_0x190a00(0xfa),'KdOju':function(_0x58379e,_0x21f566){return _0x58379e>_0x21f566;},'OSiwJ':'{{sep}}(\x20ไม่พบเซสชั่น\x20)','opQAc':function(_0x5df2d9,_0x2cbcbf){return _0x5df2d9==_0x2cbcbf;},'sNfBJ':function(_0x26385c,_0x492b09){return _0x26385c===_0x492b09;},'uraxF':_0x190a00(0x14b),'yoamG':'wbroG','gxvkU':'green','zgvrE':function(_0x3ca0e5,_0x513640){return _0x3ca0e5<_0x513640;},'NXVhn':function(_0x8f4c1e,_0x16d269){return _0x8f4c1e<_0x16d269;},'qYQlo':'yellow','wsWkX':_0x190a00(0x160),'jEExY':function(_0x10a91d,_0x192a60){return _0x10a91d!==_0x192a60;},'NiGMV':'TjhXK','kTiyn':_0x190a00(0x21c),'gYYKM':'อีเมลหรือชื่อผู้ใช้{{sep}}มีอยู่ในระบบแล้ว','bpofM':function(_0x845da,_0x4eb076){return _0x845da+_0x4eb076;},'zOsva':_0x190a00(0x1fc),'DiMmI':function(_0x5f01c3,_0x45da30){return _0x5f01c3===_0x45da30;},'OBofm':_0x190a00(0xeb),'OMKNn':_0x190a00(0xf2),'quZuk':_0x190a00(0x119),'HnZjR':_0x190a00(0x2a8),'gokoH':function(_0x24e5d1,_0x441c73){return _0x24e5d1!==_0x441c73;},'yzvbm':_0x190a00(0x1d4),'TLfIV':_0x190a00(0x275),'smTvK':function(_0x1ca900){return _0x1ca900();}},_0x50d612=[];let _0x368ed6=!0x1;const _0x146f3c=async()=>{const _0x144f5f=_0x190a00;if(_0x38c747[_0x144f5f(0x269)](_0x38c747['xKnTH'],_0x38c747['xZjRy'])){if(_0x38c747['zdSaw'](_0x50d612[_0x144f5f(0x2b2)],0x0)){if(_0x38c747['zdSaw'](_0x38c747['lVHTT'],_0x38c747[_0x144f5f(0x180)])){_0x368ed6=!0x1;return;}else _0x33edac[_0x144f5f(0x227)]();}_0x368ed6=!0x0;const {req:_0x2a92b6,res:_0xc03e93}=_0x50d612['shift']();await _0x38c747['iOzRM'](_0xba28ad,_0x2a92b6,_0xc03e93),_0x38c747['IDllC'](_0x146f3c);}else _0x30170a[_0x144f5f(0x227)]();},_0xba28ad=async(_0x598a98,_0x43a948)=>{const _0x33ea20=_0x190a00,_0xdafea5={'MZZdG':_0x38c747[_0x33ea20(0x144)],'VPZMi':_0x38c747[_0x33ea20(0x1b8)],'NUQzA':function(_0x4d7e74,_0xc6d611){const _0x13ec49=_0x33ea20;return _0x38c747[_0x13ec49(0x260)](_0x4d7e74,_0xc6d611);},'epxqd':_0x38c747['FiTIR'],'REpMS':_0x38c747['cTRvm'],'qZvte':_0x38c747[_0x33ea20(0x2b1)],'NBgAu':function(_0x4e4a2f,_0x334b89){const _0x376bdc=_0x33ea20;return _0x38c747[_0x376bdc(0x25b)](_0x4e4a2f,_0x334b89);},'XDtRt':function(_0x7082c,_0x37a363){const _0x4b4d34=_0x33ea20;return _0x38c747[_0x4b4d34(0x267)](_0x7082c,_0x37a363);},'zEjIH':function(_0x4dd941,_0x5528c6){const _0x226307=_0x33ea20;return _0x38c747[_0x226307(0x260)](_0x4dd941,_0x5528c6);},'tPvJw':function(_0x1dc93f,_0x2ffcf2){const _0x21cd38=_0x33ea20;return _0x38c747[_0x21cd38(0x13d)](_0x1dc93f,_0x2ffcf2);},'TOgNV':_0x38c747[_0x33ea20(0x284)],'sIlHw':_0x38c747[_0x33ea20(0x28b)]};if(_0x38c747[_0x33ea20(0x15c)](_0x38c747['BKsJu'],_0x38c747[_0x33ea20(0x1de)])){const _0x3facb5=_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x29b)];delete _0x598a98['body']['_id'];const _0xe866bc=_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x156)],_0x58dbd5=_0x38c747['BhlEw'](Number,_0x598a98[_0x33ea20(0x2aa)]['rpp'])||0x14,_0x410919=_0x38c747['RekSP'](Number,_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x113)])||0x1;delete _0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x1bd)],delete _0x598a98['body'][_0x33ea20(0x156)],delete _0x598a98['body'][_0x33ea20(0x113)],_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x2a3)]=_0x598a98[_0x33ea20(0x2aa)]['userId']?_0x38c747[_0x33ea20(0x172)](Number,_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x2a3)]):_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x2a3)];const _0x270063=_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x1e4)]?.[_0x33ea20(0x2ae)](),_0x10d621=_0x598a98[_0x33ea20(0x2aa)]['userEmail']?.['trim'](),_0x4ece77=_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x2a3)],_0x70a4c9=''+u,_0x4e37c9=u+_0x33ea20(0x15b)+_0xe866bc+_0x33ea20(0x254)+_0x58dbd5+_0x33ea20(0xf9)+_0x410919+_0x33ea20(0x188)+_0x3facb5;if(!new RegExp(global['USERNAME_PATTERN'])['test'](_0x270063))return _0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0x1d3)],_0x598a98[_0x33ea20(0x2aa)]),_0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':global[_0x33ea20(0x107)]}),_0x43a948[_0x33ea20(0x22a)](_0x4e37c9);if(_0x10d621&&!new RegExp(global[_0x33ea20(0x130)])[_0x33ea20(0x17d)](_0x10d621))return _0x598a98['flash'](_0x38c747['cZZPt'],_0x598a98[_0x33ea20(0x2aa)]),_0x598a98['flash'](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':_0x38c747[_0x33ea20(0x15d)]}),_0x43a948[_0x33ea20(0x22a)](_0x4e37c9);const _0x13e4b2=new _0x3142bc(dbUrl);try{if(_0x38c747[_0x33ea20(0x15c)](_0x38c747['KiGfM'],_0x38c747[_0x33ea20(0x1c7)]))_0x51dae9[_0x33ea20(0x1f6)](_0xdafea5[_0x33ea20(0x279)],_0x3a3094),_0x2db596[_0x33ea20(0x2ac)](_0x361e60[_0x33ea20(0x20c)]({'isPrint':!0x1,'class':_0xdafea5[_0x33ea20(0x281)],'msg':_0xf8ca55[_0x33ea20(0x1f7)]}));else{await _0x13e4b2['connect']();const _0xd332ee=_0x13e4b2['db'](dbName),_0x4d63dd=_0xd332ee[_0x33ea20(0x175)](dbColl_users);if(_0x3facb5){if(_0x38c747[_0x33ea20(0x26e)](_0x38c747['IToch'],_0x38c747[_0x33ea20(0x28f)])){var _0x47f2ce=await _0x4d63dd[_0x33ea20(0x256)]({'_id':{'$ne':new _0x5cfab4(_0x3facb5)},'$or':[{'userEmail':{'$regex':new RegExp('^'+_0x10d621+'$','i')}},{'username':{'$regex':new RegExp('^'+_0x270063+'$','i')}},{'userId':_0x4ece77}]});if(_0x47f2ce)return _0x598a98[_0x33ea20(0x18b)](_0x38c747['cZZPt'],_0x598a98[_0x33ea20(0x2aa)]),_0x598a98[_0x33ea20(0x18b)](_0x38c747['OtvRQ'],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':_0x38c747[_0x33ea20(0x187)]}),_0x43a948['redirect'](_0x4e37c9);const _0x202d2e=await _0x4d63dd['findOne']({'_id':new _0x5cfab4(_0x3facb5)}),_0x235764=[_0x38c747[_0x33ea20(0x1a0)](_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x283)],_0x38c747['qnIcC']),_0x38c747[_0x33ea20(0x1a0)](_0x202d2e[_0x33ea20(0x1e4)],_0x598a98['body'][_0x33ea20(0x1e4)]),_0x38c747[_0x33ea20(0x1a0)](_0x202d2e['userEmail'],_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x179)]),_0x38c747[_0x33ea20(0x1a0)](_0x202d2e[_0x33ea20(0x20e)],_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x20e)])],_0xfdb37e={'$set':_0x598a98['body']},_0x3dda3a=await _0x4d63dd[_0x33ea20(0x1f3)]({'_id':new _0x5cfab4(_0x3facb5)},_0xfdb37e,{'upsert':!0x1});if(_0x3dda3a[_0x33ea20(0x1d7)]&&_0x38c747[_0x33ea20(0x139)](_0x3dda3a[_0x33ea20(0x11b)],0x1)){if(_0x38c747[_0x33ea20(0x269)](_0x38c747[_0x33ea20(0x212)],_0x38c747['yfhbR'])){if(_0x4bc9ba){const _0xe33934=_0x98295f[_0x33ea20(0x231)](_0x17856f,arguments);return _0x44fa13=null,_0xe33934;}}else{const _0x16a6bb=L[_0x33ea20(0x210)](_0x598a98);let _0x3525c2=_0x33ea20(0x12b)+_0x4ece77+_0x33ea20(0x278);const _0x5076ba=q['getChangeHistory'](_0x202d2e,_0x598a98[_0x33ea20(0x2aa)]);if(_0x5076ba&&_0x38c747[_0x33ea20(0x1c5)](_0x5076ba[_0x33ea20(0x2b2)],0x0)){if(_0x38c747[_0x33ea20(0x269)](_0x38c747['cTIqW'],_0x38c747[_0x33ea20(0x293)]))(function(){return!![];}['constructor'](chyJfM[_0x33ea20(0x260)](chyJfM[_0x33ea20(0x196)],chyJfM[_0x33ea20(0x26a)]))[_0x33ea20(0x270)](chyJfM['PcIJC']));else{const _0x3d2041={'dateTime':S[_0x33ea20(0x292)](),'userId':_0x16a6bb[_0x33ea20(0x2a3)],'userFullname':_0x16a6bb[_0x33ea20(0x235)],'changes':_0x5076ba};await _0x4d63dd[_0x33ea20(0x1f3)]({'userId':_0x4ece77},{'$push':{'changesHistory':{'$each':[_0x3d2041],'$position':0x0}}}),_0x3525c2+=_0x38c747[_0x33ea20(0xef)];}}if(_0x235764[_0x33ea20(0x280)](!0x1)){if(_0x38c747[_0x33ea20(0x1ac)](_0x38c747[_0x33ea20(0x1f5)],_0x38c747[_0x33ea20(0x1f5)])){const _0x496adf=await _0xd332ee[_0x33ea20(0x175)](global[_0x33ea20(0x19f)])['deleteMany']({'session.user_id':_0x3facb5});_0x496adf[_0x33ea20(0x1d7)]&&_0x38c747['KdOju'](_0x496adf[_0x33ea20(0x1a4)],0x0)?_0x3525c2+=_0x33ea20(0x1a2)+_0x496adf[_0x33ea20(0x1a4)]+_0x33ea20(0x1d8):_0x3525c2+=_0x38c747[_0x33ea20(0x191)];}else{if(_0x1ff606){const _0x39eef1=_0x2efdfd[_0x33ea20(0x231)](_0x2c3708,arguments);return _0x13901c=null,_0x39eef1;}}}if(_0x235764[_0x33ea20(0x280)](!0x1)&&_0x38c747[_0x33ea20(0x101)](_0x16a6bb[_0x33ea20(0x170)],_0x3facb5)){if(_0x38c747[_0x33ea20(0x297)](_0x38c747[_0x33ea20(0x298)],_0x38c747['yoamG'])){const _0x22d957=_0x13b933?function(){const _0x1a8574=_0x33ea20;if(_0x3133a6){const _0x3c2d41=_0xa60d43[_0x1a8574(0x231)](_0x286b5f,arguments);return _0x570c5a=null,_0x3c2d41;}}:function(){};return _0x28810f=![],_0x22d957;}else{_0x598a98[_0x33ea20(0x26b)][_0x33ea20(0x10b)](_0x282bbc=>(_0x282bbc&&console[_0x33ea20(0x1f6)]('Session\x20destroy\x20error:\x20',_0x282bbc),_0x43a948[_0x33ea20(0x22a)]('/')));return;}}else return _0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x239)],'text':_0x3525c2}),_0x43a948[_0x33ea20(0x22a)](_0x4e37c9);}}else return _0x3dda3a[_0x33ea20(0x1d7)]&&(_0x38c747[_0x33ea20(0x1d0)](_0x3dda3a['modifiedCount'],0x1)||_0x38c747[_0x33ea20(0x248)](_0x3dda3a[_0x33ea20(0x2a0)],0x1))?(_0x598a98['flash'](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x131)],'text':'\x22'+_0x4ece77+_0x33ea20(0x253)}),_0x43a948[_0x33ea20(0x22a)](_0x4e37c9)):(_0x598a98['flash'](_0x38c747['cZZPt'],_0x598a98[_0x33ea20(0x2aa)]),_0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':new Error(_0x38c747[_0x33ea20(0x14a)])+'{{sep}}\x22'+_0x4ece77+'\x22'}),_0x43a948[_0x33ea20(0x22a)](_0x4e37c9));}else return![];}else{if(_0x38c747[_0x33ea20(0x1df)](_0x38c747[_0x33ea20(0x1a3)],_0x38c747[_0x33ea20(0x18e)])){if(await _0x4d63dd['findOne']({'$or':[{'userEmail':{'$regex':new RegExp('^'+_0x10d621+'$','i')}},{'username':{'$regex':new RegExp('^'+_0x270063+'$','i')}}]}))return _0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0x1d3)],_0x598a98[_0x33ea20(0x2aa)]),_0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':_0x38c747[_0x33ea20(0x102)]}),_0x43a948[_0x33ea20(0x22a)](_0x4e37c9);const _0x51e144=await _0x4d63dd[_0x33ea20(0x28c)]({},{'projection':{'userId':0x1}})['sort']({'userId':-0x1})[_0x33ea20(0x26d)](0x1)[_0x33ea20(0x29d)](),_0x1b5294=_0x38c747[_0x33ea20(0x262)](_0x51e144[_0x33ea20(0x2b2)],0x0)?_0x38c747[_0x33ea20(0x218)](_0x51e144[0x0][_0x33ea20(0x2a3)],0x1):0x3e8;_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x2a3)]=_0x1b5294,_0x598a98[_0x33ea20(0x2aa)][_0x33ea20(0x22b)]=S[_0x33ea20(0x292)](0x5a0);const _0x5db9ad=U[_0x33ea20(0x12f)]();_0x598a98['body']['userPassword']=await _0x3f3162[_0x33ea20(0x286)](_0x5db9ad,global[_0x33ea20(0x28d)]);const _0x459510=await _0x4d63dd[_0x33ea20(0x168)](_0x598a98[_0x33ea20(0x2aa)]);if(_0x459510[_0x33ea20(0x1d7)]&&_0x459510[_0x33ea20(0x241)]){if(_0x38c747[_0x33ea20(0x1ac)](_0x38c747[_0x33ea20(0x216)],_0x38c747[_0x33ea20(0x216)])){const _0x26f717=_0x459510[_0x33ea20(0x241)][_0x33ea20(0x118)](),_0x258206=u+_0x33ea20(0x15b)+_0xe866bc+_0x33ea20(0x254)+_0x58dbd5+'&page='+_0x410919+'&load_id='+_0x26f717,_0x2d6f3a={..._0x598a98['body']};if(delete _0x2d6f3a['userPassword'],_0x10d621['includes']('@')&&_0x10d621[_0x33ea20(0x280)]('.')&&_0x38c747[_0x33ea20(0x262)](_0x10d621[_0x33ea20(0x2b2)],0x5)){if(_0x38c747[_0x33ea20(0x2ab)](_0x38c747[_0x33ea20(0x1a1)],_0x38c747['OMKNn']))(function(){return![];}[_0x33ea20(0x20a)](WvQIPO[_0x33ea20(0x250)](WvQIPO['epxqd'],WvQIPO['REpMS']))[_0x33ea20(0x231)](WvQIPO[_0x33ea20(0x1c1)]));else{const _0x4694a9=await U[_0x33ea20(0x171)]();if(!_0x4694a9||!_0x4694a9[_0x33ea20(0x2ad)]||!_0x4694a9[_0x33ea20(0x116)])return _0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x131)],'text':_0x33ea20(0x22f)+_0x1b5294+_0x33ea20(0x1e6)}),_0x43a948[_0x33ea20(0x22a)](_0x258206);Z[_0x33ea20(0x2a4)](_0x2d6f3a,_0x5db9ad)[_0x33ea20(0x120)](_0xe32619=>(_0x598a98[_0x33ea20(0x18b)](_0x33ea20(0x194),{'class':'green','text':_0x33ea20(0x23b)+_0x10d621+_0x33ea20(0x25a)+_0xe32619[_0x33ea20(0x109)]+')'}),_0x43a948['redirect'](_0x258206)))[_0x33ea20(0x255)](_0x1586a3=>(_0x598a98[_0x33ea20(0x18b)](_0x33ea20(0x1cd),_0x598a98[_0x33ea20(0x2aa)]),_0x598a98['flash'](_0x33ea20(0x194),{'class':_0x33ea20(0x1ed),'text':''+_0x1586a3['message']}),_0x43a948['redirect'](_0x258206)));}}else return _0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0x1d3)],_0x598a98[_0x33ea20(0x2aa)]),_0x598a98[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747['gxvkU'],'text':_0x33ea20(0x24c)+_0x10d621}),_0x43a948['redirect'](_0x258206);}else{const _0x2a58a6=_0x10eabf?new _0xa15d35(''+_0x231303,'i'):new _0x16239b('.*');let _0x43c5f4={};_0xdafea5[_0x33ea20(0x1a5)](_0x2363b3,_0xdafea5[_0x33ea20(0x1a5)](_0x2869ce,_0x12f9e4))?_0x43c5f4={'userId':{'$regex':_0x2a58a6}}:_0x43c5f4={'userId':_0xdafea5[_0x33ea20(0x108)](_0x50b9d2,_0xddb584)},_0x1b6246[_0x33ea20(0x206)]({'$match':{'$or':[_0x43c5f4,{'username':{'$regex':_0x2a58a6}},{'userFirstname':{'$regex':_0x2a58a6}}]}});}}else _0x598a98['flash'](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':_0x38c747['quZuk']}),_0x43a948[_0x33ea20(0x22a)](_0x70a4c9);}else return _0x20657e[_0x33ea20(0x1f6)](_0x38c747['jijDr'],_0x22c78d),_0x35412e[_0x33ea20(0x18b)](_0x38c747[_0x33ea20(0xfc)],{'class':_0x38c747[_0x33ea20(0x1b8)],'text':_0x2ed6b3[_0x33ea20(0x1f7)]}),_0x6c9d2c['redirect'](_0x4abf4a);}}}catch(_0x4d60a1){_0x38c747[_0x33ea20(0x269)](_0x38c747[_0x33ea20(0x162)],_0x38c747[_0x33ea20(0x162)])?_0x1b14f5[_0x33ea20(0x227)]():(console[_0x33ea20(0x1f6)](_0x38c747[_0x33ea20(0x144)],_0x4d60a1),_0x43a948[_0x33ea20(0x1e5)](0x194)[_0x33ea20(0x19b)](file404));}finally{if(_0x38c747[_0x33ea20(0x21b)](_0x38c747[_0x33ea20(0xf3)],_0x38c747[_0x33ea20(0xec)]))_0x13e4b2['close']();else{let _0x26e134;try{_0x26e134=WvQIPO[_0x33ea20(0x108)](_0xe08efb,WvQIPO[_0x33ea20(0x252)](WvQIPO[_0x33ea20(0x150)](WvQIPO['TOgNV'],WvQIPO[_0x33ea20(0x201)]),');'))();}catch(_0x500426){_0x26e134=_0x15377e;}return _0x26e134;}}}else{const _0x3aa003=_0x317db0[_0x33ea20(0x231)](_0x3b31cb,arguments);return _0x30b57d=null,_0x3aa003;}};_0x50d612[_0x190a00(0x1cc)]({'req':_0x3d6012,'res':_0x419e76}),_0x368ed6||_0x38c747['smTvK'](_0x146f3c);}),x[_0x41ee4c(0x1bb)](W,_0x539bd0['isOA'],async(_0x48aa75,_0x439321)=>{const _0x255b16=_0x41ee4c,_0x34ed87={'LIwXs':function(_0x177762,_0x138456){return _0x177762!==_0x138456;},'BJKwM':function(_0x117422,_0x287b6b){return _0x117422==_0x287b6b;},'FoAfl':function(_0x3f6618,_0x329fe6){return _0x3f6618!==_0x329fe6;},'sSElY':function(_0x208b1d){return _0x208b1d();},'yVSla':function(_0x4b0652,_0xf513f5){return _0x4b0652===_0xf513f5;},'yfeSz':_0x255b16(0x105),'BBeeK':_0x255b16(0xe5),'UvJKP':function(_0x3e47af,_0x260f2a){return _0x3e47af>_0x260f2a;},'hulNJ':function(_0x245cc8,_0x26b090){return _0x245cc8+_0x26b090;},'yDUUT':_0x255b16(0x247),'GHgPD':'qwerty','jymnW':_0x255b16(0xe6),'tAlHY':_0x255b16(0x271),'udZYS':'tKTUH','gwZmZ':'MqSCc','SxHdy':_0x255b16(0x142),'nhbaH':_0x255b16(0xfe),'muTOg':_0x255b16(0x27f)},_0x16fa81=new _0x3142bc(dbUrl),_0x5cf2a1=''+u;try{if(_0x34ed87[_0x255b16(0x12a)](_0x34ed87[_0x255b16(0x115)],_0x34ed87[_0x255b16(0xf7)])){const _0x2b9c63=_0xc160dc[_0x255b16(0x2a3)];_0x2675ee=_0x41df85[_0x255b16(0x133)](_0x358657=>{const _0x423be4=_0x255b16,_0x356fe3=_0x34ed87[_0x423be4(0x234)](_0x358657['userAuthority'],'A')||_0x34ed87[_0x423be4(0x165)](_0x358657['userId'],_0x2b9c63);return _0x34ed87[_0x423be4(0x242)](_0x358657[_0x423be4(0x20e)],'O')&&_0x356fe3;});}else{await _0x16fa81[_0x255b16(0x240)]();const _0x3c7e27=_0x16fa81['db'](dbName)[_0x255b16(0x175)](dbColl_users);var _0x3fee4a=await _0x3c7e27[_0x255b16(0x28c)]({})[_0x255b16(0x182)]({'userId':-0x1})[_0x255b16(0x26d)](0x1)['toArray'](),_0x21aea6=0x0;if(_0x34ed87[_0x255b16(0x114)](_0x3fee4a['length'],0x0))_0x21aea6=_0x34ed87[_0x255b16(0x12e)](_0x3fee4a[0x0][_0x255b16(0x2a3)],0x1);else return _0x439321[_0x255b16(0x2ac)]({'isCreate':!0x1,'msg':_0x34ed87[_0x255b16(0x1f9)],'redirectUrl':_0x5cf2a1});const _0x45b1bb=process[_0x255b16(0x24f)][_0x255b16(0x21f)]||_0x34ed87[_0x255b16(0x13e)],_0x1e8d3b={'userId':_0x21aea6,'userEmail':_0x255b16(0x1e3)+_0x21aea6+_0x255b16(0x129),'username':_0x255b16(0x1e3)+_0x21aea6,'userPrefix':'','userFirstname':_0x255b16(0x1e3)+_0x21aea6,'userLastname':'','userAuthority':'U','userIsActive':_0x34ed87[_0x255b16(0x23e)],'userPassword':await _0x3f3162['hash'](_0x45b1bb,global['BCRYPT_NUMBER']),'dateTimeCanDelete':S[_0x255b16(0x292)](oe)},_0x341fa0=await _0x3c7e27[_0x255b16(0x168)](_0x1e8d3b);return _0x341fa0[_0x255b16(0x1d7)]&&_0x341fa0[_0x255b16(0x241)]?_0x439321[_0x255b16(0x2ac)]({'isCreate':!0x0,'msg':_0x255b16(0x208)+_0x1e8d3b[_0x255b16(0x1e4)]+_0x255b16(0x276)+_0x45b1bb+_0x255b16(0x169),'redirectUrl':u+_0x255b16(0x1ff)+_0x341fa0[_0x255b16(0x241)][_0x255b16(0x118)]()}):_0x439321['send']({'isCreate':!0x1,'msg':_0x34ed87['tAlHY'],'redirectUrl':_0x5cf2a1});}}catch(_0x48895c){_0x34ed87[_0x255b16(0x12a)](_0x34ed87[_0x255b16(0x11e)],_0x34ed87['gwZmZ'])?tIaQnE['sSElY'](_0x4b600f):(console[_0x255b16(0x1f6)](_0x34ed87['SxHdy'],_0x48895c),_0x439321[_0x255b16(0x1e5)](0x194)['sendFile'](_0x5cf2a1));}finally{if(_0x34ed87[_0x255b16(0x12a)](_0x34ed87[_0x255b16(0x121)],_0x34ed87[_0x255b16(0x27c)])){_0x3147c9=!0x1;return;}else _0x16fa81[_0x255b16(0x227)]();}}),x[_0x41ee4c(0x1bb)](G,_0x539bd0[_0x41ee4c(0x145)],async(_0x209686,_0x3d8558)=>{const _0x4e11e2=_0x41ee4c,_0x1b929b={'qELPa':function(_0x2ed552,_0x4e8d49){return _0x2ed552(_0x4e8d49);},'YuLxG':function(_0x27bb79,_0x2d42e5){return _0x27bb79(_0x2d42e5);},'pxyGL':function(_0x574614,_0x9313d0){return _0x574614!=_0x9313d0;},'FyLrF':_0x4e11e2(0x2a3),'uFGZy':function(_0xd15505,_0x53a1a7){return _0xd15505!==_0x53a1a7;},'nblvB':_0x4e11e2(0x249),'IvQWx':_0x4e11e2(0x236),'NEmAP':_0x4e11e2(0x194),'nFPLZ':_0x4e11e2(0x1ed),'rudBX':function(_0xfa85f6,_0x4ab265){return _0xfa85f6===_0x4ab265;},'HBqqg':function(_0x492b9a,_0x39ed5b){return _0x492b9a>_0x39ed5b;},'WAyRo':_0x4e11e2(0xea),'sLTJJ':'green','FOdWO':'error\x20===>\x20'};let {_id_toDelete:_0x935c5a,load_id:_0x5ee8e8,sip:_0x12ce6f,Id_toDelete:_0x4ca091}=_0x209686[_0x4e11e2(0x2aa)];const _0x3ecdae=_0x1b929b[_0x4e11e2(0x122)](Number,_0x209686['body'][_0x4e11e2(0x1bd)])||0x14,_0x182e7c=_0x1b929b['YuLxG'](Number,_0x209686[_0x4e11e2(0x2aa)][_0x4e11e2(0x113)])||0x1;_0x4ca091=_0x1b929b[_0x4e11e2(0x122)](Number,_0x4ca091);const _0x355c0c=_0x935c5a&&_0x1b929b[_0x4e11e2(0x11f)](_0x935c5a,_0x5ee8e8)?_0x4e11e2(0x188)+_0x935c5a:'',_0x30edcb=u+'?sip='+_0x12ce6f+_0x4e11e2(0x254)+_0x3ecdae+_0x4e11e2(0xf9)+_0x182e7c+_0x355c0c,_0x2a5465=new _0x3142bc(global['dbUrl']);try{await _0x2a5465[_0x4e11e2(0x240)]();const _0x1507a6=_0x2a5465['db'](global[_0x4e11e2(0x1c0)]),_0x215e23=_0x1507a6[_0x4e11e2(0x175)](global[_0x4e11e2(0x1e2)]),_0x4a8bd8=[{'coll':_0x1507a6[_0x4e11e2(0x175)](global['dbColl_docs']),'name':global['dbColl_docs'],'key':_0x1b929b[_0x4e11e2(0x1ea)]}];for(const {coll:_0x4f4677,name:_0x3f4de3,key:_0x2426cf}of _0x4a8bd8){if(_0x1b929b[_0x4e11e2(0x16e)](_0x1b929b[_0x4e11e2(0x19c)],_0x1b929b[_0x4e11e2(0x193)])){const _0x11ede4={};if(_0x11ede4[_0x2426cf]=_0x4ca091,await _0x4f4677[_0x4e11e2(0x256)](_0x11ede4))return await _0x215e23[_0x4e11e2(0x1f3)]({'userId':_0x4ca091},{'$set':{'canDelete':!0x1}}),_0x209686[_0x4e11e2(0x18b)](_0x1b929b[_0x4e11e2(0x225)],{'class':_0x1b929b[_0x4e11e2(0x123)],'text':'ยูสเซอร์\x20\x22'+_0x4ca091+_0x4e11e2(0x13c)+_0x3f4de3+_0x4e11e2(0x17b)}),_0x3d8558['redirect'](_0x30edcb);}else{const _0x17e198=_0x528d61[_0x4e11e2(0x231)](_0x49066d,arguments);return _0x44a732=null,_0x17e198;}}if(_0x1b929b[_0x4e11e2(0x1a8)]((await _0x215e23[_0x4e11e2(0x1be)]({'_id':new _0x5cfab4(_0x935c5a)}))['deletedCount'],0x1)){const _0x1471a5=await _0x1507a6[_0x4e11e2(0x175)](global['dbColl_sessions'])['deleteMany']({'session.user_id':_0x935c5a});if(_0x1471a5[_0x4e11e2(0x1d7)]&&_0x1b929b[_0x4e11e2(0x213)](_0x1471a5[_0x4e11e2(0x1a4)],0x0))var _0x5868c7=_0x4e11e2(0x1a2)+_0x1471a5[_0x4e11e2(0x1a4)]+_0x4e11e2(0x1d8);else var _0x5868c7=_0x1b929b[_0x4e11e2(0x138)];_0x209686[_0x4e11e2(0x18b)](_0x1b929b[_0x4e11e2(0x225)],{'class':_0x1b929b[_0x4e11e2(0x111)],'text':_0x4e11e2(0x1b3)+_0x4ca091+_0x4e11e2(0x278)+_0x5868c7});}else _0x209686[_0x4e11e2(0x18b)](_0x1b929b[_0x4e11e2(0x225)],{'class':_0x1b929b[_0x4e11e2(0x123)],'text':_0x4e11e2(0x1b6)+_0x4ca091+'\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)'});return _0x3d8558[_0x4e11e2(0x22a)](_0x30edcb);}catch(_0x57c0b2){return console[_0x4e11e2(0x1f6)](_0x1b929b['FOdWO'],_0x57c0b2),_0x209686[_0x4e11e2(0x18b)](_0x1b929b[_0x4e11e2(0x225)],{'class':_0x1b929b[_0x4e11e2(0x123)],'text':_0x57c0b2[_0x4e11e2(0x1f7)]}),_0x3d8558[_0x4e11e2(0x22a)](_0x30edcb);}finally{_0x2a5465['close']();}}),x[_0x41ee4c(0x1bb)](V,_0x539bd0[_0x41ee4c(0x145)],async(_0x54fcdd,_0x60cbc6)=>{const _0x293d56=_0x41ee4c,_0xb3cd6f={'ezVsN':function(_0x3fad4c,_0x240675){return _0x3fad4c==_0x240675;},'SaTrZ':_0x293d56(0x1ed),'zCOui':_0x293d56(0x135),'rdhGB':_0x293d56(0x117),'nHgOy':_0x293d56(0x24a),'bexQR':_0x293d56(0x230),'mrFEz':_0x293d56(0x142)},{_idArr:_0x3afc7f}=_0x54fcdd['body'],_0x3f0f64=new _0x3142bc(dbUrl);try{await _0x3f0f64[_0x293d56(0x240)]();const _0xeefe56=await _0x3f0f64['db'](dbName)[_0x293d56(0x175)](dbColl_users)[_0x293d56(0x151)]([{'$match':{'_id':{'$in':_0x3afc7f['map'](_0x44aca7=>new _0x5cfab4(_0x44aca7))}}},{'$project':{'branchInfo':0x0}}])[_0x293d56(0x29d)]();if(_0xb3cd6f[_0x293d56(0x261)](_0xeefe56[_0x293d56(0x2b2)],0x0))return _0x60cbc6[_0x293d56(0x2ac)](JSON[_0x293d56(0x20c)]({'isPrint':!0x1,'class':_0xb3cd6f[_0x293d56(0x157)],'msg':_0xb3cd6f[_0x293d56(0x16c)]}));const _0x2a29c3=_0x3f992e[_0x293d56(0x12d)](global['folderForms'],_0xb3cd6f['rdhGB']),_0xfd24ea=_0x4e8a8f['readFileSync'](_0x2a29c3,_0xb3cd6f['nHgOy']),_0x386a2f=_0x4c27f8[_0x293d56(0x288)](_0xfd24ea,{'time':S[_0x293d56(0x18d)](),'title':'ยูสเซอร์\x20('+_0xeefe56['length']+')','dateTime':S[_0x293d56(0x292)](),'usersFind':_0xeefe56});_0x60cbc6[_0x293d56(0x2ac)](JSON[_0x293d56(0x20c)]({'isPrint':!0x0,'class':_0xb3cd6f[_0x293d56(0x136)],'msg':_0x293d56(0x244)+_0xeefe56[_0x293d56(0x2b2)]+'\x20ยูสเซอร์เรียบร้อยแล้ว','htmlPage':_0x386a2f}));}catch(_0x2d2b30){console['log'](_0xb3cd6f['mrFEz'],_0x2d2b30['message']),_0x60cbc6[_0x293d56(0x2ac)](JSON[_0x293d56(0x20c)]({'isPrint':!0x1,'class':_0xb3cd6f[_0x293d56(0x157)],'msg':_0x2d2b30[_0x293d56(0x1f7)]}));}finally{_0x3f0f64['close']();}}),x['post'](X,_0x539bd0[_0x41ee4c(0x145)],async(_0x4550f3,_0x293b69)=>{const _0x9ac093=_0x41ee4c,_0x465864={'tqtJu':function(_0x4348e9,_0x4d34c8){return _0x4348e9(_0x4d34c8);},'KpLyr':'red','BDQoj':function(_0x233180,_0x5158f1){return _0x233180<_0x5158f1;},'DaytC':_0x9ac093(0xee),'xNFCs':'ไม่พบประวัติการเปลี่ยนแปลง','IfrkA':_0x9ac093(0xff),'OzJsu':_0x9ac093(0x230),'dPbsS':_0x9ac093(0x142)};let {userId:_0x28d03d}=_0x4550f3['body'];_0x28d03d=_0x465864[_0x9ac093(0x16f)](Number,_0x28d03d);const _0x26bac3=new _0x3142bc(global[_0x9ac093(0x1a7)]);try{await _0x26bac3[_0x9ac093(0x240)]();var _0x3db539=await _0x26bac3['db'](global['dbName'])[_0x9ac093(0x175)](global[_0x9ac093(0x1e2)])['findOne']({'userId':_0x28d03d});if(!_0x3db539)return _0x293b69[_0x9ac093(0x2ac)](JSON[_0x9ac093(0x20c)]({'isPrint':!0x1,'class':_0x465864['KpLyr'],'msg':_0x9ac093(0x1b6)+_0x28d03d+'\x22'}));const _0x43098a=_0x3db539[_0x9ac093(0x23d)]||[];if(_0x465864[_0x9ac093(0x14f)](_0x43098a[_0x9ac093(0x2b2)],0x1))return _0x293b69[_0x9ac093(0x2ac)](JSON[_0x9ac093(0x20c)]({'isPrint':!0x1,'class':_0x465864[_0x9ac093(0x1dd)],'msg':_0x465864[_0x9ac093(0x204)]}));const _0xc6e1a5=_0x3f992e[_0x9ac093(0x12d)](folderForms,_0x465864[_0x9ac093(0xe9)]),_0x44f559=await U[_0x9ac093(0x100)](_0xc6e1a5,_0x293b69,{'title':'ประวัติการแก้ไขยูสเซอร์\x20:\x20['+_0x3db539['userId']+']\x20'+_0x3db539[_0x9ac093(0x1da)]+'\x20'+_0x3db539['userFirstname']+'\x20'+_0x3db539['userLastname'],'time':S[_0x9ac093(0x292)](),'changesHistory':_0x43098a});_0x293b69[_0x9ac093(0x2ac)](JSON[_0x9ac093(0x20c)]({'isPrint':!0x0,'class':_0x465864[_0x9ac093(0x143)],'htmlPage':_0x44f559}));}catch(_0x283048){console[_0x9ac093(0x1f6)](_0x465864[_0x9ac093(0x181)],_0x283048),_0x293b69[_0x9ac093(0x2ac)](JSON[_0x9ac093(0x20c)]({'isPrint':!0x1,'class':_0x465864['KpLyr'],'msg':_0x283048[_0x9ac093(0x1f7)]}));}finally{_0x26bac3['close']();}});export default x;function _0x373956(_0x45979e){const _0x2d25e5=_0x41ee4c,_0x260ae2={'jwphy':function(_0x43acb0,_0x235544){return _0x43acb0===_0x235544;},'lYemA':_0x2d25e5(0x258),'QRfGB':_0x2d25e5(0x214),'FBhhY':_0x2d25e5(0x13a),'AVoDg':function(_0x3a1cfd,_0x119b98){return _0x3a1cfd!==_0x119b98;},'HdRyy':function(_0x4b907e,_0x3957dd){return _0x4b907e+_0x3957dd;},'QTaqE':function(_0x247d2d,_0x3eb93a){return _0x247d2d/_0x3eb93a;},'BUTgt':_0x2d25e5(0x2b2),'lgbmB':function(_0x5eec72,_0x337163){return _0x5eec72===_0x337163;},'fSKvT':function(_0x3c3625,_0x1b1daa){return _0x3c3625%_0x1b1daa;},'FGRAT':'debu','amMCl':_0x2d25e5(0x1b7),'rmNzW':'action','kbnRF':'stateObject','Zyzuv':function(_0x5f13de,_0x2b086e){return _0x5f13de(_0x2b086e);}};function _0x38d114(_0x585d09){const _0x214a33=_0x2d25e5;if(_0x260ae2['jwphy'](typeof _0x585d09,_0x260ae2[_0x214a33(0x1e9)]))return function(_0x1a1687){}['constructor'](_0x260ae2[_0x214a33(0x23f)])[_0x214a33(0x231)](_0x260ae2['FBhhY']);else _0x260ae2[_0x214a33(0x2a2)](_0x260ae2[_0x214a33(0x189)]('',_0x260ae2[_0x214a33(0x1dc)](_0x585d09,_0x585d09))[_0x260ae2[_0x214a33(0x1c4)]],0x1)||_0x260ae2[_0x214a33(0x29e)](_0x260ae2[_0x214a33(0x141)](_0x585d09,0x14),0x0)?function(){return!![];}[_0x214a33(0x20a)](_0x260ae2[_0x214a33(0x189)](_0x260ae2[_0x214a33(0x202)],_0x260ae2[_0x214a33(0x10e)]))['call'](_0x260ae2['rmNzW']):function(){return![];}[_0x214a33(0x20a)](_0x260ae2['HdRyy'](_0x260ae2[_0x214a33(0x202)],_0x260ae2[_0x214a33(0x10e)]))['apply'](_0x260ae2[_0x214a33(0x14e)]);_0x260ae2['Zyzuv'](_0x38d114,++_0x585d09);}try{if(_0x45979e)return _0x38d114;else _0x260ae2[_0x2d25e5(0x25f)](_0x38d114,0x0);}catch(_0x1fc089){}}