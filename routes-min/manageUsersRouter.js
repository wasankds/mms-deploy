const _0x1351ec=_0x5b3b;(function(_0x20e5f4,_0x48dc96){const _0x3524d8=_0x5b3b,_0x15f761=_0x20e5f4();while(!![]){try{const _0x81bbd7=-parseInt(_0x3524d8(0x2c6))/0x1+-parseInt(_0x3524d8(0x34a))/0x2+-parseInt(_0x3524d8(0x2a5))/0x3+-parseInt(_0x3524d8(0x2fa))/0x4*(-parseInt(_0x3524d8(0x21a))/0x5)+-parseInt(_0x3524d8(0x247))/0x6+parseInt(_0x3524d8(0x34f))/0x7+-parseInt(_0x3524d8(0x278))/0x8*(-parseInt(_0x3524d8(0x2c1))/0x9);if(_0x81bbd7===_0x48dc96)break;else _0x15f761['push'](_0x15f761['shift']());}catch(_0x2abc26){_0x15f761['push'](_0x15f761['shift']());}}}(_0x4933,0x35c00));const _0x258ff7=(function(){const _0xd42cdf=_0x5b3b,_0x24d2a6={'FZUFY':function(_0x41b9a4,_0x201a4e){return _0x41b9a4(_0x201a4e);},'xNtYS':function(_0x14366d,_0x768cc4){return _0x14366d+_0x768cc4;},'dJrVt':_0xd42cdf(0x23d),'ydHmT':'gger','bNrIq':'action','FULSQ':function(_0x24893c,_0xbf9b51){return _0x24893c===_0xbf9b51;},'CExjx':'ULkep','NQAKF':function(_0x408916,_0x4fd1e1){return _0x408916===_0x4fd1e1;},'wKTpT':_0xd42cdf(0x38c),'gBUKF':function(_0x2a8791,_0x4b9aa1){return _0x2a8791!==_0x4b9aa1;},'GAXfO':_0xd42cdf(0x291)};let _0x2cd19f=!![];return function(_0x1320fe,_0x449c42){const _0x1a4349=_0xd42cdf,_0x3a5935={'KbBLa':function(_0x419f37,_0x593431){return _0x24d2a6['FZUFY'](_0x419f37,_0x593431);},'nEhtp':function(_0x5828eb,_0x45ffef){const _0x5ddd54=_0x5b3b;return _0x24d2a6[_0x5ddd54(0x372)](_0x5828eb,_0x45ffef);},'CzqeX':_0x24d2a6[_0x1a4349(0x2ca)],'IgMGc':_0x24d2a6['ydHmT'],'vdFya':_0x24d2a6['bNrIq'],'lHkEo':function(_0x3758a5,_0x309eb6){const _0x3c3c16=_0x1a4349;return _0x24d2a6[_0x3c3c16(0x2d1)](_0x3758a5,_0x309eb6);},'PhrjN':_0x24d2a6[_0x1a4349(0x3a1)],'mSmFF':function(_0xb8dfc6,_0x2c7507){return _0x24d2a6['NQAKF'](_0xb8dfc6,_0x2c7507);},'BtzsA':_0x24d2a6[_0x1a4349(0x379)]};if(_0x24d2a6[_0x1a4349(0x28b)](_0x24d2a6[_0x1a4349(0x317)],_0x24d2a6[_0x1a4349(0x317)])){const _0x322bd7=_0x416734?new _0x3ba2b1(''+_0x110b9b,'i'):new _0x2dd6c9('.*');let _0x2a678f={};_0x3a5935[_0x1a4349(0x3a3)](_0x546862,_0x3a5935[_0x1a4349(0x3a3)](_0x1c641c,_0x2b2e2f))?_0x2a678f={'userId':{'$regex':_0x322bd7}}:_0x2a678f={'userId':_0x3a5935[_0x1a4349(0x3a3)](_0x58142a,_0x2074a7)},_0x5478c6[_0x1a4349(0x229)]({'$match':{'$or':[_0x2a678f,{'username':{'$regex':_0x322bd7}},{'userFirstname':{'$regex':_0x322bd7}}]}});}else{const _0x4fe100=_0x2cd19f?function(){const _0x1bc69f=_0x1a4349;if(_0x3a5935['lHkEo'](_0x3a5935[_0x1bc69f(0x227)],_0x3a5935[_0x1bc69f(0x227)])){if(_0x449c42){if(_0x3a5935[_0x1bc69f(0x24d)](_0x3a5935[_0x1bc69f(0x24f)],_0x3a5935['BtzsA'])){const _0x27c241=_0x449c42[_0x1bc69f(0x228)](_0x1320fe,arguments);return _0x449c42=null,_0x27c241;}else return!![];}}else(function(){return!![];}[_0x1bc69f(0x255)](_0x3a5935[_0x1bc69f(0x2b2)](_0x3a5935[_0x1bc69f(0x2c3)],_0x3a5935[_0x1bc69f(0x381)]))[_0x1bc69f(0x3a8)](_0x3a5935['vdFya']));}:function(){};return _0x2cd19f=![],_0x4fe100;}};}());(function(){const _0x2d10eb=_0x5b3b,_0x59495f={'tMkMi':function(_0x3e3f68,_0x1f00a9){return _0x3e3f68===_0x1f00a9;},'fMXNI':_0x2d10eb(0x310),'HkKGL':_0x2d10eb(0x2bf),'yYawK':_0x2d10eb(0x214),'LaHWw':function(_0x270d17,_0x40f8a4){return _0x270d17(_0x40f8a4);},'BboYk':_0x2d10eb(0x318),'KuoEy':function(_0x58fc43,_0x50cf77){return _0x58fc43+_0x50cf77;},'pXZRz':_0x2d10eb(0x200),'gLPYH':_0x2d10eb(0x284),'ZfuST':function(_0x76151f,_0x27b2da){return _0x76151f!==_0x27b2da;},'HjNaQ':'oFNpf','MUGBH':function(_0x1187e3,_0x48d616){return _0x1187e3(_0x48d616);},'UFVyw':_0x2d10eb(0x1ec),'jvpLz':function(_0x3eab70){return _0x3eab70();},'OYGjf':function(_0x12dc8e,_0x59d812,_0x52e184){return _0x12dc8e(_0x59d812,_0x52e184);}};_0x59495f['OYGjf'](_0x258ff7,this,function(){const _0x912c3d=_0x2d10eb;if(_0x59495f[_0x912c3d(0x348)](_0x59495f[_0x912c3d(0x38a)],_0x59495f['fMXNI'])){const _0x569dcd=new RegExp(_0x59495f['HkKGL']),_0x480efb=new RegExp(_0x59495f[_0x912c3d(0x361)],'i'),_0x99fe65=_0x59495f[_0x912c3d(0x33f)](_0xe7d3ba,_0x59495f[_0x912c3d(0x246)]);if(!_0x569dcd[_0x912c3d(0x341)](_0x59495f[_0x912c3d(0x238)](_0x99fe65,_0x59495f['pXZRz']))||!_0x480efb[_0x912c3d(0x341)](_0x59495f['KuoEy'](_0x99fe65,_0x59495f[_0x912c3d(0x28d)]))){if(_0x59495f['ZfuST'](_0x59495f[_0x912c3d(0x2a0)],_0x59495f[_0x912c3d(0x2a0)])){const _0x4f19d4=_0x9aafd2[_0x912c3d(0x255)][_0x912c3d(0x275)][_0x912c3d(0x21b)](_0x31b3c9),_0x3b9239=_0x5962b1[_0x250b0b],_0x284c0e=_0x46b8e1[_0x3b9239]||_0x4f19d4;_0x4f19d4[_0x912c3d(0x27a)]=_0x5e31e5[_0x912c3d(0x21b)](_0x442f15),_0x4f19d4[_0x912c3d(0x253)]=_0x284c0e[_0x912c3d(0x253)]['bind'](_0x284c0e),_0x1c8e14[_0x3b9239]=_0x4f19d4;}else _0x59495f[_0x912c3d(0x337)](_0x99fe65,'0');}else _0x59495f[_0x912c3d(0x3b8)](_0x59495f['UFVyw'],_0x59495f[_0x912c3d(0x266)])?_0x3ba237['close']():_0x59495f[_0x912c3d(0x3aa)](_0xe7d3ba);}else _0x61baec[_0x912c3d(0x2a3)](_0x14a04c[_0x912c3d(0x268)]),_0x26bae8[_0x912c3d(0x38e)](0x194)[_0x912c3d(0x260)](_0x361d8e);})();}());const _0xb02c41=(function(){const _0x22b0cd=_0x5b3b,_0x160a59={'itxlc':function(_0x408737,_0xbc9a59){return _0x408737(_0xbc9a59);},'dvHyx':function(_0x57ad96,_0x3a28ab){return _0x57ad96+_0x3a28ab;},'vEyQy':_0x22b0cd(0x241),'kJfwU':_0x22b0cd(0x1eb),'fwLCG':function(_0x3ea851){return _0x3ea851();},'FgZiH':'log','UGNYV':_0x22b0cd(0x287),'aJifc':_0x22b0cd(0x20c),'EHGcY':_0x22b0cd(0x3b5),'cluBd':_0x22b0cd(0x273),'Xixeo':'table','qrizH':_0x22b0cd(0x23b),'qQJPW':function(_0x299b85,_0x16adb2){return _0x299b85<_0x16adb2;},'BnGCH':'msg','VFRqd':_0x22b0cd(0x345),'mqZNK':function(_0x2f2e6b,_0x4f9219){return _0x2f2e6b===_0x4f9219;},'gqKLX':'MXLDP','ScnWI':function(_0x350000,_0x5ae11f){return _0x350000!==_0x5ae11f;},'NfrrC':_0x22b0cd(0x32f),'UAMvf':_0x22b0cd(0x38d)};let _0x564567=!![];return function(_0x3d6d10,_0x3654f2){const _0x5b7685=_0x22b0cd,_0x26bc40={'UDicn':function(_0x3a1b72,_0x2d399c){return _0x160a59['itxlc'](_0x3a1b72,_0x2d399c);},'xtuHB':function(_0x27fd48,_0x5a8b74){const _0x46a030=_0x5b3b;return _0x160a59[_0x46a030(0x2b8)](_0x27fd48,_0x5a8b74);},'GKctj':_0x160a59['vEyQy'],'wAtxp':_0x160a59[_0x5b7685(0x1f8)],'JAJIN':function(_0x172bea){const _0x534add=_0x5b7685;return _0x160a59[_0x534add(0x3a6)](_0x172bea);},'tqvnU':_0x160a59['FgZiH'],'JSUTQ':_0x160a59['UGNYV'],'FWdRu':_0x160a59[_0x5b7685(0x283)],'bLmbo':_0x160a59[_0x5b7685(0x33a)],'oIksR':_0x160a59['cluBd'],'YZUOJ':_0x160a59[_0x5b7685(0x32e)],'iWwzy':_0x160a59[_0x5b7685(0x31c)],'dZSuU':function(_0x120e2f,_0x312f67){return _0x160a59['qQJPW'](_0x120e2f,_0x312f67);},'ilIjw':_0x160a59[_0x5b7685(0x34b)],'vtwLv':_0x160a59[_0x5b7685(0x378)],'OeTDd':function(_0x7bfd8d,_0x5274c2){return _0x160a59['mqZNK'](_0x7bfd8d,_0x5274c2);},'gEBar':_0x160a59[_0x5b7685(0x347)],'KiCHk':function(_0x537493,_0x580468){const _0x4a75f5=_0x5b7685;return _0x160a59[_0x4a75f5(0x34e)](_0x537493,_0x580468);},'NkEyt':_0x160a59[_0x5b7685(0x30e)]};if(_0x160a59[_0x5b7685(0x34e)](_0x160a59[_0x5b7685(0x2aa)],_0x160a59[_0x5b7685(0x2aa)])){let _0x556fa2;try{const _0x440e10=_0x26bc40[_0x5b7685(0x24c)](_0x21d33a,_0x26bc40[_0x5b7685(0x1fd)](_0x26bc40[_0x5b7685(0x1fd)](_0x26bc40['GKctj'],_0x26bc40[_0x5b7685(0x2dc)]),');'));_0x556fa2=_0x26bc40[_0x5b7685(0x32d)](_0x440e10);}catch(_0x2653ec){_0x556fa2=_0x4a6134;}const _0x4284c4=_0x556fa2[_0x5b7685(0x36e)]=_0x556fa2[_0x5b7685(0x36e)]||{},_0x7a49b3=[_0x26bc40['tqvnU'],_0x26bc40['JSUTQ'],_0x26bc40[_0x5b7685(0x35d)],_0x26bc40[_0x5b7685(0x2ec)],_0x26bc40[_0x5b7685(0x314)],_0x26bc40[_0x5b7685(0x34d)],_0x26bc40[_0x5b7685(0x346)]];for(let _0x372511=0x0;_0x26bc40[_0x5b7685(0x216)](_0x372511,_0x7a49b3[_0x5b7685(0x28c)]);_0x372511++){const _0x178472=_0x35f80a['constructor'][_0x5b7685(0x275)][_0x5b7685(0x21b)](_0x5dc30e),_0x156f89=_0x7a49b3[_0x372511],_0x233682=_0x4284c4[_0x156f89]||_0x178472;_0x178472['__proto__']=_0x433648['bind'](_0x3b8b0c),_0x178472[_0x5b7685(0x253)]=_0x233682['toString']['bind'](_0x233682),_0x4284c4[_0x156f89]=_0x178472;}}else{const _0x453631=_0x564567?function(){const _0x5984bf=_0x5b7685,_0x55870c={'vocAy':_0x26bc40[_0x5984bf(0x23f)],'rIGVq':_0x26bc40[_0x5984bf(0x207)]};if(_0x26bc40[_0x5984bf(0x28e)](_0x26bc40['gEBar'],_0x26bc40[_0x5984bf(0x1f0)])){if(_0x3654f2){if(_0x26bc40[_0x5984bf(0x2e7)](_0x26bc40[_0x5984bf(0x354)],_0x26bc40[_0x5984bf(0x354)]))_0x4f169e['close']();else{const _0x546ab1=_0x3654f2[_0x5984bf(0x228)](_0x3d6d10,arguments);return _0x3654f2=null,_0x546ab1;}}}else return _0x3d42fe[_0x5984bf(0x2a3)](_0xcdf455[_0x5984bf(0x268)]),_0x21c75d[_0x5984bf(0x37d)](_0x55870c[_0x5984bf(0x306)],{'class':_0x55870c[_0x5984bf(0x213)],'text':''+_0x7dcf94[_0x5984bf(0x268)]}),_0x1d6635[_0x5984bf(0x30c)](_0x597287);}:function(){};return _0x564567=![],_0x453631;}};}()),_0x306ee5=_0xb02c41(this,function(){const _0x23e92b=_0x5b3b,_0x485de0={'MTtTh':'userFlash','uZRGU':function(_0x226da5,_0x13ff8f){return _0x226da5>_0x13ff8f;},'gQnzx':function(_0x278ffd,_0x3d48ac){return _0x278ffd!==_0x3d48ac;},'iOrCy':function(_0x1eceee,_0x3ac63d){return _0x1eceee==_0x3ac63d;},'jGapj':_0x23e92b(0x20b),'qePZL':function(_0xad0882,_0x4341c1){return _0xad0882(_0x4341c1);},'DCGDV':function(_0x4c8687,_0x35c1b7){return _0x4c8687+_0x35c1b7;},'CFnLq':_0x23e92b(0x241),'zsilT':_0x23e92b(0x1eb),'vKnzj':function(_0x2711b5){return _0x2711b5();},'XdOKH':function(_0x3bd81e,_0x3ead30){return _0x3bd81e===_0x3ead30;},'dWzAA':'uBqbq','Ztcqg':_0x23e92b(0x367),'fNlkg':'log','cUqbV':_0x23e92b(0x287),'mMiIn':_0x23e92b(0x20c),'nwsbE':_0x23e92b(0x3b5),'iiFtJ':_0x23e92b(0x273),'SOSml':_0x23e92b(0x22e),'HpSUi':_0x23e92b(0x23b),'WRbfn':function(_0xa6425c,_0x438bb5){return _0xa6425c<_0x438bb5;},'ezWyh':_0x23e92b(0x2db)};let _0xa0c3f5;try{if(_0x485de0['gQnzx'](_0x485de0[_0x23e92b(0x2f8)],_0x485de0[_0x23e92b(0x2f8)])){const _0x3fea20=_0xee5a62[_0x23e92b(0x37d)](_0x485de0['MTtTh']);_0x3fea20&&_0x485de0[_0x23e92b(0x2c2)](_0x3fea20['length'],0x0)&&(_0x45d806={..._0x3fea20[0x0]});}else{const _0x46c4d0=_0x485de0[_0x23e92b(0x31b)](Function,_0x485de0[_0x23e92b(0x393)](_0x485de0['DCGDV'](_0x485de0[_0x23e92b(0x2d4)],_0x485de0['zsilT']),');'));_0xa0c3f5=_0x485de0[_0x23e92b(0x386)](_0x46c4d0);}}catch(_0x5534a3){if(_0x485de0[_0x23e92b(0x2a1)](_0x485de0[_0x23e92b(0x368)],_0x485de0['Ztcqg'])){if(_0x8f39cd){const _0xa8bf72=_0x1a8525[_0x23e92b(0x228)](_0x363077,arguments);return _0xb5ebc3=null,_0xa8bf72;}}else _0xa0c3f5=window;}const _0x3fa035=_0xa0c3f5[_0x23e92b(0x36e)]=_0xa0c3f5['console']||{},_0x2ca7c2=[_0x485de0[_0x23e92b(0x37e)],_0x485de0['cUqbV'],_0x485de0[_0x23e92b(0x365)],_0x485de0[_0x23e92b(0x328)],_0x485de0[_0x23e92b(0x3be)],_0x485de0['SOSml'],_0x485de0[_0x23e92b(0x2c0)]];for(let _0x55c4ba=0x0;_0x485de0['WRbfn'](_0x55c4ba,_0x2ca7c2['length']);_0x55c4ba++){if(_0x485de0[_0x23e92b(0x27f)](_0x485de0[_0x23e92b(0x295)],_0x485de0[_0x23e92b(0x295)])){const _0x5cedcd=_0x485de0[_0x23e92b(0x27f)](_0x59080c[_0x23e92b(0x30f)],'A')||_0x485de0['iOrCy'](_0x187495[_0x23e92b(0x1f2)],_0x4b441b);return _0x485de0['gQnzx'](_0x5bab74['userAuthority'],'O')&&_0x5cedcd;}else{const _0x525e76=_0xb02c41['constructor']['prototype'][_0x23e92b(0x21b)](_0xb02c41),_0x469f10=_0x2ca7c2[_0x55c4ba],_0x294a35=_0x3fa035[_0x469f10]||_0x525e76;_0x525e76[_0x23e92b(0x27a)]=_0xb02c41[_0x23e92b(0x21b)](_0xb02c41),_0x525e76['toString']=_0x294a35['toString'][_0x23e92b(0x21b)](_0x294a35),_0x3fa035[_0x469f10]=_0x525e76;}}});_0x306ee5();import _0x2f93f3 from'express';import{MongoClient as _0x20a503,ObjectId as _0x7cc940}from'mongodb';import _0x228188 from'bcrypt';const x=_0x2f93f3['Router']();import _0x36d5cd from'path';import _0x38e71f from'fs';function _0x5b3b(_0x5a9c06,_0x136060){const _0x411410=_0x4933();return _0x5b3b=function(_0x306ee5,_0xb02c41){_0x306ee5=_0x306ee5-0x1ea;let _0x1e590b=_0x411410[_0x306ee5];return _0x1e590b;},_0x5b3b(_0x5a9c06,_0x136060);}import _0x3ce805 from'ejs';import _0x4aec8c from'../middleware/mainAuth.js';function _0x4933(){const _0x2992ce=['debu','hDbMR','ilIjw','user_','return\x20(function()\x20','GYxfM','เพิ่มยูสเซอร์\x20','GjSjq','dIhjv','BboYk','1568892dkLXhc','xbqOn','tDvDk','tglnC','$userPrefix','UDicn','mSmFF','deleteOne','BtzsA','qwerty','FjoCq','OKMMJ','toString','hMmpZ','constructor','map','msg','UbzOc','query','$changesHistory','catch','&page=','send','LVtAe','rNwLF','sendFile','userFullname','PItFq','countDocuments','toArray','DIQFX','UFVyw','KRUNP','message','BUvGG','RbCtd','getSettingsSystem_Email','อัปเดท\x20\x22','EMAIL_PATTERN','UYJKt','MdFDl','pfDxN','LhHbI','BaJFI','exception','START_PASSWORD','prototype','oBfIO','luPIf','1280GnKYoo','oSrZZ','__proto__','รูปแบบอีเมลไม่ถูกต้อง','cQgxM','LYlQP','yRWGU','gQnzx','NFVaH','OrDVp','EMAIL_PASS','aJifc','input','$dateTimeCanDelete','aSWSb','warn','ATgHc','kXPmx','TYiAr','gBUKF','length','gLPYH','OeTDd','TiZYu','KWhPE','tnaIg','eJKSL','yUWRG','LxAOS','ezWyh','ประวัติการแก้ไขยูสเซอร์\x20:\x20[','LSFaA','limit','glfJR','/download-excel','PCXhK','FSVjz','Not\x20Found','UInlV','syFkn','HjNaQ','XdOKH','fRbBR','log','xstBk','839793msfUvP','\x20ยูสเซอร์เรียบร้อยแล้ว','wHufD','VZMnA','username','UAMvf','page','aggregate','then','sKTdp','sendRegisterUserEmail','AbDIP','/delete','nEhtp','AOWVD','counter','KpPSB','ยูสเซอร์\x20(','iNFYz','dvHyx','cUINK','userFlash','vBBYq','ekHus','getChangeHistory','fLCKN','function\x20*\x5c(\x20*\x5c)','HpSUi','29259cseQPA','uZRGU','CzqeX','&rpp=','VEVbB','41411XOCOYL','abJAY','/myData.js','qrvYj','dJrVt','EXJXL','MYtYD','tZNAs','UXXOF','ABepg','$userFirstname','FULSQ','MruWb','JvRpQ','CFnLq','PIynM','ยังไม่มีผู้ใช้ในระบบเลย\x20ต้องเพิ่มผู้ใช้หลักก่อน','XGCcn','\x22\x20เรียบร้อยแล้ว','{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22','iYSFe','ngxqH','wAtxp','IYOIH','replace','trim','generatePassword','TSAAB','OyOjv','sLRtk','zCcki','includes','KLhMU','KiCHk','KUivS','tSNlE','BukEw','close','bLmbo','render','JOwom','อีเมล/ชื่อผู้ใช้{{sep}}มีอยู่ในระบบแล้ว','changesHistory','ไม่พบ\x20\x22','XUPtf','modifiedCount','uAUgp','readFileSync','AdBXJ','active','jGapj','gger','1743008KcRotB','PumRA','foGHM','wFPgS','\x20แล้ว{{sep}}แต่ไม่ได้ส่งอีเมล์\x20การตั้งค่าการส่งอิเมล์ไม่ถูกต้อง','/manage/users','YPzIv','/mySendmail.js','STJQk','MbnLt','UmnrB','{{sep}}[\x20บันทึกการแก้ไข\x20]','vocAy','SoobQ','\x22\x20ไม่มีอะไรเปลี่ยนแปลง','BlqWI','XHdZZ','dbColl_sessions','redirect','../','NfrrC','userAuthority','ONurn','RJzSy','aEGwW','body','oIksR','deletedCount','IEaTu','GAXfO','init','dbName','liOEa','qePZL','qrizH','/changes','zUkTf','RQrZS','FnxAb','sip','stateObject','cmJVp','rpp','rrnLX','shift','hddtn','nwsbE','vSpFj','เพิ่มยูสเซอร์และส่งอิเมล์เรียบร้อยแล้ว\x20(','){{sep}}(CODE\x20:\x20','Yxghh','JAJIN','Xixeo','Zxgfb','dcgdk','userPrefix','YyuZM','?rpp=20&page=1&load_id=','XJRCP','bkRjP','userPassword','MUGBH','NvcaD','\x22\x20เรียบร้อยแล้ว{{sep}}(\x20รหัสผ่านเริ่มต้น\x20\x22','EHGcY','acknowledged','pGoVE','aAxgy','สร้างผู้ใช้ใหม่\x20\x22','LaHWw','HnLdJ','test','iQkXv','yJwEp','dbColl_users','red','iWwzy','gqKLX','tMkMi','minute','775874pKNMBv','BnGCH','UAagh','YZUOJ','ScnWI','1645063XcrMKP','kcSyS','CVJzI','green','gnxYc','NkEyt','BZXTX','CXkOK','RhEhW','pVZHE','JFcDS','pLHuS','findOne','Vtpdh','FWdRu','veZPB','wOBjQ','eoazD','yYawK','BqxiM','XIXnD','FQtBy','mMiIn','สร้างยูสเซอร์\x20','HkYAg','dWzAA','getSessionData','lCNKO','hash','string','userIsActive','console','ไม่พบประวัติการเปลี่ยนแปลง','aZtkm','load_id','xNtYS','post','updateOne','dbColl_docs','ลบยูสเซอร์\x20\x22','kLhzy','VFRqd','wKTpT','FxNpW','FERLA','SUYgc','flash','fNlkg','ukDIZ','tsfil','IgMGc','เกิดข้อผิดพลาดขณะเพิ่ม/ส่งอีเมลไปยังผู้ใช้ใหม่','uVsmY','AytsI','collection','vKnzj','YNgky','ZHgoQ','iROGv','fMXNI','GlRix','JGhef','WzIYc','status','BCRYPT_NUMBER','CtHQG','rPYZt','DUAeR','DCGDV','_id','ulPrg','NXhyT','nUorB','RaiDf','userEmail','Session\x20destroy\x20error:\x20','stringify','NvhcR','oSdaW','session','EDMlA','while\x20(true)\x20{}','CExjx','JpiEu','KbBLa','WeEEp','userLastname','fwLCG','cDVbr','call','env','jvpLz','UHpsy','pEQQg','RUrKx','ioLyE','ไม่มีข้อมูล','xiaIh','error\x20===>\x20','ZXAuX','HGmBM','GBmzs','error','CDXhy','LwYSo','ZfuST','\x22\x20)','\x5c$&','\x22\x20เรียบร้อยแล้ว\x20)','getDateTime','WEHgZ','iiFtJ','/save','dguhR','{}.constructor(\x22return\x20this\x22)(\x20)','CvZks','GHatV','hieAt','eQdYU','gEBar','ZoVPD','userId','sort','qgtoS','isOA','ixqSl','renderView','kJfwU','deleteMany','xhLAz','พิมพ์ข้อมูล\x20','IbQdt','xtuHB','SJkUD','connect','chain','join','zILFx','QlBvx','KVdef','bpAXU','utf8','vtwLv','yellow','AWUMb','jSetx','eqiMw','info','/myUsers.js','?sip=','AVkvd','ZHBzY','pPaVr','lZGjJ','rIGVq','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','FeSQF','dZSuU','kICrK','อีเมลหรือชื่อผู้ใช้{{sep}}มีอยู่ในระบบแล้ว','vQhGa','5DcICFh','bind','yrJgc','\x22\x20มีอยู่ในเอกสาร\x20','ypnUO','aXJsQ','getDate','LBYlD','EMAIL_WHOSEND','{{sep}}\x22','paUEB','DqxmR','NYhlm','PhrjN','apply','unshift','filter','MTtdf','jThmC','UGFNf','table','kcUgp','fyQEM','&load_id=','cwDsE','insertedId','/myDateTime.js','insertOne','NoLbu','dbUrl','KuoEy','pAPAJ','ZhgkV','trace','ddQcK'];_0x4933=function(){return _0x2992ce;};return _0x4933();}const U=await import(_0x1351ec(0x30d)+mymoduleFolder+'/myModule.js'),S=await import(_0x1351ec(0x30d)+mymoduleFolder+_0x1351ec(0x234)),L=await import(_0x1351ec(0x30d)+mymoduleFolder+_0x1351ec(0x20d)),Z=await import(_0x1351ec(0x30d)+mymoduleFolder+_0x1351ec(0x301)),q=await import('../'+mymoduleFolder+_0x1351ec(0x2c8)),u=_0x1351ec(0x2ff),Q=u+_0x1351ec(0x3bf),W=u+'/new',B=u+'/load',G=u+_0x1351ec(0x2b1),V=u+'/print',X=u+_0x1351ec(0x31d),ee=u+_0x1351ec(0x29a),se=u+'/upload-excel',te=u[_0x1351ec(0x2de)](/\//g,'_'),oe=0x5a0*0x3c;x['get'](u,_0x4aec8c[_0x1351ec(0x1f5)],async(_0x437197,_0x1929d1)=>{const _0x2f838a=_0x1351ec,_0x53dff3={'FnxAb':function(_0x534b18){return _0x534b18();},'IEaTu':_0x2f838a(0x2bf),'liOEa':_0x2f838a(0x214),'PItFq':function(_0xcb2db3,_0x401487){return _0xcb2db3(_0x401487);},'UmnrB':'init','kLhzy':function(_0x2b0404,_0x33804a){return _0x2b0404+_0x33804a;},'BaJFI':_0x2f838a(0x200),'xRMiL':_0x2f838a(0x284),'GYxfM':function(_0xf7877b,_0x5ca8a6,_0x58fb6c){return _0xf7877b(_0x5ca8a6,_0x58fb6c);},'AVkvd':function(_0x54b692,_0x1da827){return _0x54b692(_0x1da827);},'JvRpQ':function(_0x2fcac7,_0x4b34bd){return _0x2fcac7+_0x4b34bd;},'FeSQF':function(_0x26a4f0,_0x3baefe){return _0x26a4f0(_0x3baefe);},'MdFDl':function(_0x5b248a){return _0x5b248a();},'gnxYc':function(_0x116f22,_0x5bd2ec){return _0x116f22!==_0x5bd2ec;},'ypnUO':_0x2f838a(0x245),'JOwom':function(_0x2a93b7,_0x2efbd3){return _0x2a93b7!==_0x2efbd3;},'eoazD':function(_0x2c8d51,_0x9a9159){return _0x2c8d51==_0x9a9159;},'oBfIO':_0x2f838a(0x3a0),'KVdef':_0x2f838a(0x2b4),'VZMnA':function(_0x3e05f2,_0x554238){return _0x3e05f2(_0x554238);},'tSNlE':function(_0x37698f,_0x5dce1c){return _0x37698f*_0x5dce1c;},'kICrK':function(_0x213aa4,_0x1ed5ee){return _0x213aa4-_0x1ed5ee;},'JrjUT':function(_0x4eda28,_0x2d2e9d){return _0x4eda28!==_0x2d2e9d;},'RQrZS':_0x2f838a(0x205),'dguhR':'axcuh','KLhMU':function(_0x16b966,_0x3d2172){return _0x16b966===_0x3d2172;},'OyOjv':_0x2f838a(0x209),'Yxghh':_0x2f838a(0x3ba),'YyuZM':function(_0x4b54de,_0x454976){return _0x4b54de(_0x454976);},'ufOGy':function(_0x28d464,_0x32978f){return _0x28d464(_0x32978f);},'UAagh':function(_0x377a1d,_0x45ccef){return _0x377a1d/_0x45ccef;},'MYtYD':function(_0x4c9691,_0x3e118f){return _0x4c9691<_0x3e118f;},'eJKSL':function(_0x1232ed,_0x56caff){return _0x1232ed-_0x56caff;},'fLCKN':function(_0x5e66bf,_0x5635bb){return _0x5e66bf(_0x5635bb);},'zUkTf':function(_0x21be2a,_0x1da873){return _0x21be2a>_0x1da873;},'EDMlA':function(_0xb1d1a8,_0x524260){return _0xb1d1a8(_0x524260);},'DUAeR':function(_0x5a8149,_0x31fdff){return _0x5a8149+_0x31fdff;},'aZtkm':function(_0x13bef7,_0x3aca40){return _0x13bef7(_0x3aca40);},'GlRix':_0x2f838a(0x24b),'rrnLX':_0x2f838a(0x2d0),'SnlIb':'$userLastname','ymARW':_0x2f838a(0x25a),'mbLfw':_0x2f838a(0x285),'luPIf':_0x2f838a(0x349),'vBBYq':function(_0x5bc9de,_0x5ead52){return _0x5bc9de!==_0x5ead52;},'XHdZZ':_0x2f838a(0x302),'TYiAr':_0x2f838a(0x299),'WEHgZ':function(_0x196d53,_0x4b715e){return _0x196d53(_0x4b715e);},'UYJKt':function(_0x1c13a0,_0x398176){return _0x1c13a0(_0x398176);},'yUWRG':function(_0x1cd743,_0x3b3fd1){return _0x1cd743(_0x3b3fd1);},'KpPSB':'kjKDi','YNgky':function(_0x4fbb84,_0xe5d0ce){return _0x4fbb84===_0xe5d0ce;},'fyQEM':'MeNQc','ekHus':_0x2f838a(0x2ba),'zqnLc':function(_0x1786c1,_0x59c080){return _0x1786c1>_0x59c080;},'yRWGU':'manageUsers','pPaVr':_0x2f838a(0x257),'rPYZt':_0x2f838a(0x248),'BqxiM':function(_0x484285,_0x498065){return _0x484285===_0x498065;},'RaiDf':_0x2f838a(0x3b0)},_0x302a48=_0x437197[_0x2f838a(0x259)][_0x2f838a(0x321)],_0x3d88f7=_0x53dff3[_0x2f838a(0x20f)](Number,_0x437197[_0x2f838a(0x259)]['rpp'])||0x14,_0x484732=_0x53dff3[_0x2f838a(0x2a8)](Number,_0x437197['query'][_0x2f838a(0x2ab)])||0x1,_0x5577cb=_0x437197[_0x2f838a(0x259)][_0x2f838a(0x371)]||'',_0x10547f=_0x53dff3[_0x2f838a(0x262)](Number,_0x53dff3[_0x2f838a(0x2e9)](_0x53dff3[_0x2f838a(0x217)](_0x484732,0x1),_0x3d88f7)),_0x2a2fb8=S['getDateTime'](0x0),_0x58b55b=new _0x20a503(dbUrl);try{if(_0x53dff3['JrjUT'](_0x53dff3[_0x2f838a(0x31f)],_0x53dff3[_0x2f838a(0x1ea)])){await _0x58b55b[_0x2f838a(0x1ff)]();const _0x156349=_0x58b55b['db'](global[_0x2f838a(0x319)])[_0x2f838a(0x385)](global[_0x2f838a(0x344)]);if(_0x302a48){if(_0x53dff3[_0x2f838a(0x2e6)](_0x53dff3['OyOjv'],_0x53dff3[_0x2f838a(0x2e2)])){const _0x3f1a1d=new RegExp(_0x302a48[_0x2f838a(0x2de)](/[.*+?^${}()|[\]\\]/g,_0x53dff3[_0x2f838a(0x32c)]),'i');let _0x609bdc={};_0x53dff3['YyuZM'](isNaN,_0x53dff3['AVkvd'](Number,_0x302a48))?_0x609bdc={'userId':{'$regex':_0x3f1a1d}}:_0x609bdc={'userId':_0x53dff3['ufOGy'](Number,_0x302a48)};var _0x4dc1b3=await _0x156349[_0x2f838a(0x263)]({'$or':[_0x609bdc,{'username':{'$regex':_0x3f1a1d}},{'userFirstname':{'$regex':_0x3f1a1d}}]});}else uxPsQi[_0x2f838a(0x320)](_0x448717);}else var _0x4dc1b3=await _0x156349[_0x2f838a(0x263)]({});const _0xa03d20=Math['ceil'](_0x53dff3[_0x2f838a(0x34c)](_0x4dc1b3,_0x3d88f7)),_0x9fc79b=_0x53dff3[_0x2f838a(0x2cc)](_0x53dff3[_0x2f838a(0x292)](_0x53dff3[_0x2f838a(0x2be)](Number,_0x484732),0x1),0x1)?'-':_0x53dff3[_0x2f838a(0x217)](_0x53dff3[_0x2f838a(0x332)](Number,_0x484732),0x1),_0x17d827=_0x53dff3[_0x2f838a(0x20f)](Number,_0x484732),_0x489e98=_0x53dff3[_0x2f838a(0x31e)](_0x53dff3[_0x2f838a(0x2d3)](_0x53dff3[_0x2f838a(0x39f)](Number,_0x484732),0x1),_0xa03d20)?'-':_0x53dff3[_0x2f838a(0x392)](_0x53dff3[_0x2f838a(0x370)](Number,_0x484732),0x1),_0x4d3c03=[{'$project':{'_id':0x1,'userIsActive':0x1,'userId':0x1,'username':0x1,'userFullname':{'$concat':[_0x53dff3[_0x2f838a(0x38b)],'\x20',_0x53dff3[_0x2f838a(0x325)],'\x20',_0x53dff3['SnlIb']]},'userAuthority':0x1,'canDelete':0x1,'changesHistoryCount':{'$size':{'$ifNull':[_0x53dff3['ymARW'],[]]}},'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':_0x2a2fb8},'endDate':{'$toDate':_0x53dff3['mbLfw']},'unit':_0x53dff3[_0x2f838a(0x277)]}},0x0]},'then':!0x0,'else':!0x1}}}},{'$sort':{'userId':-0x1}},{'$skip':_0x10547f},{'$limit':_0x3d88f7}];if(_0x302a48){if(_0x53dff3[_0x2f838a(0x2bb)](_0x53dff3[_0x2f838a(0x30a)],_0x53dff3[_0x2f838a(0x28a)])){const _0x425cbd=_0x302a48?new RegExp(''+_0x302a48,'i'):new RegExp('.*');let _0xf2b427={};_0x53dff3[_0x2f838a(0x3bd)](isNaN,_0x53dff3[_0x2f838a(0x26e)](Number,_0x302a48))?_0xf2b427={'userId':{'$regex':_0x425cbd}}:_0xf2b427={'userId':_0x53dff3[_0x2f838a(0x293)](Number,_0x302a48)},_0x4d3c03[_0x2f838a(0x229)]({'$match':{'$or':[_0xf2b427,{'username':{'$regex':_0x425cbd}},{'userFirstname':{'$regex':_0x425cbd}}]}});}else _0x42c279[_0x2f838a(0x2eb)]();}const _0x5ee22b=L[_0x2f838a(0x369)](_0x437197),_0x25db54=_0x5ee22b[_0x2f838a(0x30f)];let _0x52454d=await _0x156349[_0x2f838a(0x2ac)](_0x4d3c03)['toArray']();if(['A'][_0x2f838a(0x2e5)](_0x25db54)){if(_0x53dff3[_0x2f838a(0x2bb)](_0x53dff3['KpPSB'],_0x53dff3[_0x2f838a(0x2b5)])){const _0x170686={'lZGjJ':uxPsQi[_0x2f838a(0x316)],'kkwXU':uxPsQi[_0x2f838a(0x31a)],'cwDsE':function(_0x47b328,_0x48abfd){const _0xac94a9=_0x2f838a;return uxPsQi[_0xac94a9(0x262)](_0x47b328,_0x48abfd);},'CDXhy':uxPsQi[_0x2f838a(0x304)],'eQdYU':function(_0x1c6e4a,_0x3b325c){const _0x3a073f=_0x2f838a;return uxPsQi[_0x3a073f(0x377)](_0x1c6e4a,_0x3b325c);},'yJOkX':uxPsQi[_0x2f838a(0x272)],'smNXx':function(_0xdf8fe0,_0x248d41){return uxPsQi['kLhzy'](_0xdf8fe0,_0x248d41);},'aEGwW':uxPsQi['xRMiL'],'RnKNu':function(_0x235c61,_0x377a57){const _0x457fa2=_0x2f838a;return uxPsQi[_0x457fa2(0x262)](_0x235c61,_0x377a57);},'iQkXv':function(_0x3ae351){const _0x598228=_0x2f838a;return uxPsQi[_0x598228(0x320)](_0x3ae351);}};uxPsQi[_0x2f838a(0x242)](_0x5bb92c,this,function(){const _0x2dfeed=_0x2f838a,_0xfb69eb=new _0x21f586(_0x170686[_0x2dfeed(0x212)]),_0x45eb05=new _0x50532e(_0x170686['kkwXU'],'i'),_0x5be247=_0x170686[_0x2dfeed(0x232)](_0x1ed0bc,_0x170686[_0x2dfeed(0x3b6)]);!_0xfb69eb[_0x2dfeed(0x341)](_0x170686[_0x2dfeed(0x1ef)](_0x5be247,_0x170686['yJOkX']))||!_0x45eb05[_0x2dfeed(0x341)](_0x170686['smNXx'](_0x5be247,_0x170686[_0x2dfeed(0x312)]))?_0x170686['RnKNu'](_0x5be247,'0'):_0x170686[_0x2dfeed(0x342)](_0x1f52fc);})();}else{const _0x51eb40=_0x5ee22b[_0x2f838a(0x1f2)];_0x52454d=_0x52454d[_0x2f838a(0x22a)](_0x2714e2=>{const _0x227611=_0x2f838a;if(_0x53dff3['gnxYc'](_0x53dff3[_0x227611(0x21e)],_0x53dff3[_0x227611(0x21e)])){const _0x5c216f=new _0x87b896(uxPsQi['IEaTu']),_0x5892b4=new _0x34d634(uxPsQi[_0x227611(0x31a)],'i'),_0x36f947=uxPsQi[_0x227611(0x20f)](_0x43ca45,uxPsQi[_0x227611(0x304)]);!_0x5c216f[_0x227611(0x341)](uxPsQi['JvRpQ'](_0x36f947,uxPsQi[_0x227611(0x272)]))||!_0x5892b4[_0x227611(0x341)](uxPsQi['JvRpQ'](_0x36f947,uxPsQi['xRMiL']))?uxPsQi[_0x227611(0x215)](_0x36f947,'0'):uxPsQi[_0x227611(0x26f)](_0x4f4988);}else{const _0x52f0e1=_0x53dff3[_0x227611(0x2ee)](_0x2714e2[_0x227611(0x30f)],'A')||_0x53dff3[_0x227611(0x360)](_0x2714e2[_0x227611(0x1f2)],_0x51eb40);return _0x53dff3[_0x227611(0x353)](_0x2714e2['userAuthority'],'O')&&_0x52f0e1;}});}}if(_0x5577cb)var _0x1c2656=await _0x156349[_0x2f838a(0x35b)]({'_id':new _0x7cc940(_0x5577cb)},{'projection':{'userPassword':0x0}});else var _0x1c2656={};if(_0x1c2656&&_0x53dff3[_0x2f838a(0x387)](Object['keys'](_0x1c2656)[_0x2f838a(0x28c)],0x0)){if(_0x53dff3[_0x2f838a(0x2e6)](_0x53dff3['fyQEM'],_0x53dff3[_0x2f838a(0x230)])){const _0x37dda8=_0x437197[_0x2f838a(0x37d)](_0x53dff3[_0x2f838a(0x2bc)]);_0x37dda8&&_0x53dff3['zqnLc'](_0x37dda8['length'],0x0)&&(_0x1c2656={..._0x37dda8[0x0]});}else _0x57a27c=_0x562722;}const _0x1f57e4=await U['renderView'](_0x53dff3[_0x2f838a(0x27e)],_0x1929d1,{'title':PAGE_MANAGE_USERS,'time':S[_0x2f838a(0x220)](),'msg':_0x437197[_0x2f838a(0x37d)](_0x53dff3[_0x2f838a(0x211)]),'user':L['getSessionData'](_0x437197),'settings':await U['getSettings'](),'load_id':_0x5577cb,'sip':_0x302a48,'rpp':_0x3d88f7,'page':_0x484732,'pagePre':_0x9fc79b,'pageAct':_0x17d827,'pageNxt':_0x489e98,'pageLst':_0xa03d20,'pageRedirect':u,'data':_0x52454d,'PATH_MAIN':u,'PATH_PRINT':V,'PATH_SAVE':Q,'PATH_NEW':W,'PATH_LOAD':B,'PATH_DELETE':G,'PATH_CHANGES':X,'PATH_DOWNLOAD_EXCEL':ee,'PATH_UPLOAD_EXCEL':se,'PREFIX':te,'USER_AUTHORITIES_JSON':JSON[_0x2f838a(0x39b)](global['USER_AUTHORITIES']),'item':_0x1c2656});return _0x1929d1[_0x2f838a(0x25d)](_0x1f57e4);}else{_0x29c2c9=!0x1;return;}}catch(_0x15e7d7){_0x53dff3[_0x2f838a(0x387)](_0x53dff3[_0x2f838a(0x391)],_0x53dff3[_0x2f838a(0x391)])?(console[_0x2f838a(0x2a3)](_0x15e7d7['message']),_0x1929d1['status'](0x194)[_0x2f838a(0x260)](file404)):_0x40e625[_0x2f838a(0x2eb)]();}finally{if(_0x53dff3[_0x2f838a(0x362)](_0x53dff3[_0x2f838a(0x398)],_0x53dff3['RaiDf']))_0x58b55b[_0x2f838a(0x2eb)]();else return function(_0x355eb0){}[_0x2f838a(0x255)](uxPsQi[_0x2f838a(0x276)])[_0x2f838a(0x228)](uxPsQi[_0x2f838a(0x204)]);}}),x['post'](B,_0x4aec8c[_0x1351ec(0x1f5)],async(_0x9bf19,_0x55f64c)=>{const _0xfd0e58=_0x1351ec,_0x3b20e6={'XIXnD':'error\x20===>\x20','UGFNf':function(_0x401e97,_0x511b68){return _0x401e97(_0x511b68);},'pEQQg':function(_0x1a4485,_0x59ee2d){return _0x1a4485(_0x59ee2d);},'veZPB':function(_0x1d2ecd,_0x5871ba){return _0x1d2ecd===_0x5871ba;},'ZHBzY':_0xfd0e58(0x39d),'pVZHE':_0xfd0e58(0x257),'CVJzI':_0xfd0e58(0x345),'SUYgc':_0xfd0e58(0x29d),'PCXhK':function(_0x3c1e9b,_0xb88776){return _0x3c1e9b!==_0xb88776;},'ATgHc':_0xfd0e58(0x37b),'BUvGG':_0xfd0e58(0x2e1),'XUPtf':function(_0x581571,_0x342ea2){return _0x581571===_0x342ea2;},'vSpFj':_0xfd0e58(0x23a)},_0x14c391=_0x9bf19['body'][_0xfd0e58(0x371)],_0x579e25=_0x9bf19[_0xfd0e58(0x313)]['sip'],_0x367584=_0x3b20e6[_0xfd0e58(0x22d)](Number,_0x9bf19[_0xfd0e58(0x313)][_0xfd0e58(0x324)])||0x14,_0x5afe15=_0x3b20e6[_0xfd0e58(0x3ac)](Number,_0x9bf19['body'][_0xfd0e58(0x2ab)])||0x1,_0x5b74ab=u+_0xfd0e58(0x20e)+_0x579e25+_0xfd0e58(0x2c4)+_0x367584+_0xfd0e58(0x25c)+_0x5afe15+_0xfd0e58(0x231)+_0x14c391,_0x2399cb=new _0x20a503(dbUrl);try{if(_0x3b20e6[_0xfd0e58(0x35e)](_0x3b20e6[_0xfd0e58(0x210)],_0x3b20e6[_0xfd0e58(0x210)]))return await _0x2399cb['db'](dbName)['collection'](dbColl_users)[_0xfd0e58(0x35b)]({'_id':new _0x7cc940(_0x14c391)},{'projection':{'changesHistory':0x0}})?_0x9bf19[_0xfd0e58(0x37d)](_0x3b20e6[_0xfd0e58(0x358)],null):_0x9bf19[_0xfd0e58(0x37d)](_0x3b20e6['pVZHE'],{'class':_0x3b20e6[_0xfd0e58(0x351)],'text':new Error(_0x3b20e6[_0xfd0e58(0x37c)])+_0xfd0e58(0x223)+_0x14c391+'\x22'}),_0x55f64c[_0xfd0e58(0x30c)](_0x5b74ab);else{if(_0x55f217){const _0x4e68a6=_0x9c4780[_0xfd0e58(0x228)](_0x36b9db,arguments);return _0x437067=null,_0x4e68a6;}}}catch(_0x31d764){if(_0x3b20e6[_0xfd0e58(0x29b)](_0x3b20e6[_0xfd0e58(0x288)],_0x3b20e6[_0xfd0e58(0x269)]))return console[_0xfd0e58(0x2a3)](_0x31d764[_0xfd0e58(0x268)]),_0x9bf19[_0xfd0e58(0x37d)](_0x3b20e6[_0xfd0e58(0x358)],{'class':_0x3b20e6[_0xfd0e58(0x351)],'text':''+_0x31d764[_0xfd0e58(0x268)]}),_0x55f64c['redirect'](_0x5b74ab);else _0x9dd11e['log'](_0x3b20e6[_0xfd0e58(0x363)],_0x262789),_0x29b9b2[_0xfd0e58(0x38e)](0x194)['sendFile'](_0x2c9cc9);}finally{_0x3b20e6[_0xfd0e58(0x2f2)](_0x3b20e6['vSpFj'],_0x3b20e6[_0xfd0e58(0x329)])?_0x2399cb[_0xfd0e58(0x2eb)]():DORpsR[_0xfd0e58(0x22d)](_0x5c1293,0x0);}}),x[_0x1351ec(0x373)](Q,_0x4aec8c[_0x1351ec(0x1f5)],async(_0xeb386f,_0x4a2c73)=>{const _0x5dc351=_0x1351ec,_0x322984={'NvcaD':function(_0x5574f1,_0x51b94e){return _0x5574f1(_0x51b94e);},'iROGv':function(_0x31253d,_0x639a){return _0x31253d!==_0x639a;},'wHufD':'aLecs','WYGUe':_0x5dc351(0x2cf),'lCNKO':function(_0x4ab84b,_0x44fa49){return _0x4ab84b===_0x44fa49;},'paUEB':function(_0x3961d4,_0x31c24b){return _0x3961d4===_0x31c24b;},'nUorB':_0x5dc351(0x383),'BukEw':function(_0x2b56cf,_0xb31a2d,_0x5517f8){return _0x2b56cf(_0xb31a2d,_0x5517f8);},'DIQFX':function(_0x50a746){return _0x50a746();},'MbnLt':_0x5dc351(0x3b1),'UbzOc':_0x5dc351(0x345),'AOWVD':function(_0x226a7e,_0x14cb20){return _0x226a7e==_0x14cb20;},'LSFaA':function(_0x857dba,_0x22f072){return _0x857dba(_0x22f072);},'FxNpW':function(_0x4559db,_0x41d780){return _0x4559db+_0x41d780;},'syFkn':'return\x20(function()\x20','PYLoi':_0x5dc351(0x1eb),'ukDIZ':_0x5dc351(0x249),'cUINK':_0x5dc351(0x221),'FSVjz':function(_0x27cbdb,_0x338066){return _0x27cbdb(_0x338066);},'KKiNM':function(_0x45850a,_0x3375b1){return _0x45850a(_0x3375b1);},'CtHQG':function(_0x2156d9,_0x5ed242){return _0x2156d9(_0x5ed242);},'tZNAs':_0x5dc351(0x2ba),'aAxgy':_0x5dc351(0x257),'FMNOE':_0x5dc351(0x27b),'wOBjQ':function(_0x29c0c6,_0x163f82){return _0x29c0c6!==_0x163f82;},'yrJgc':'xvdKn','IbQdt':'rmhpx','LVtAe':_0x5dc351(0x2ef),'TAbDb':'active','qrvYj':function(_0x21b459,_0x16e109){return _0x21b459==_0x16e109;},'Ecsbk':function(_0x565bf6,_0x119654){return _0x565bf6!==_0x119654;},'NYhlm':_0x5dc351(0x330),'oSrZZ':'XRYwU','EXJXL':function(_0x8e6aa7,_0x23a572){return _0x8e6aa7>_0x23a572;},'jBcKp':function(_0x48f879,_0x716e17){return _0x48f879===_0x716e17;},'kcUgp':_0x5dc351(0x340),'IYOIH':_0x5dc351(0x305),'xstBk':function(_0x5a9c33,_0x598f67){return _0x5a9c33!==_0x598f67;},'CuoyR':'TURNG','BZXTX':_0x5dc351(0x289),'AbDIP':function(_0x59a931,_0x176707){return _0x59a931>_0x176707;},'xhLAz':'{{sep}}(\x20ไม่พบเซสชั่น\x20)','qHqCZ':function(_0x58c5ad,_0x5ca98c){return _0x58c5ad==_0x5ca98c;},'hMmpZ':_0x5dc351(0x1f4),'JFcDS':_0x5dc351(0x352),'UHpsy':function(_0x3ec68f,_0x4fa96d){return _0x3ec68f<_0x4fa96d;},'Vtpdh':_0x5dc351(0x208),'RbCtd':_0x5dc351(0x29d),'LhHbI':_0x5dc351(0x384),'jSetx':_0x5dc351(0x252),'hddtn':_0x5dc351(0x218),'pfDxN':function(_0x1a0764,_0x5d6ffa){return _0x1a0764+_0x5d6ffa;},'TiZYu':function(_0x354cb1,_0x5415e6){return _0x354cb1!==_0x5415e6;},'hieAt':_0x5dc351(0x39c),'TBBSs':function(_0x31f8a6,_0x47e4a6){return _0x31f8a6!==_0x47e4a6;},'BARva':'YEIUl','GHatV':_0x5dc351(0x2f4),'tsfil':_0x5dc351(0x382),'njkSZ':function(_0x4d0ec4,_0x1248c3){return _0x4d0ec4===_0x1248c3;},'SJkUD':'ImhNk','KRUNP':function(_0x5c5301,_0xb947cd){return _0x5c5301!==_0xb947cd;},'GBmzs':_0x5dc351(0x2c7),'mxvpe':_0x5dc351(0x286)},_0x4fb687=[];let _0x35fbb0=!0x1;const _0x190efe=async()=>{const _0x26c23e=_0x5dc351;if(_0x322984['iROGv'](_0x322984[_0x26c23e(0x2a7)],_0x322984['WYGUe'])){if(_0x322984[_0x26c23e(0x36a)](_0x4fb687['length'],0x0)){if(_0x322984[_0x26c23e(0x224)](_0x322984[_0x26c23e(0x397)],_0x322984['nUorB'])){_0x35fbb0=!0x1;return;}else WlPPPs[_0x26c23e(0x338)](_0x543be1,'0');}_0x35fbb0=!0x0;const {req:_0x59242e,res:_0x403c2a}=_0x4fb687[_0x26c23e(0x326)]();await _0x322984[_0x26c23e(0x2ea)](_0x2e48b3,_0x59242e,_0x403c2a),_0x322984[_0x26c23e(0x265)](_0x190efe);}else{const _0x201876=_0x280900?function(){const _0x48b41a=_0x26c23e;if(_0x4f65fe){const _0x2fbc38=_0x29c5e6[_0x48b41a(0x228)](_0x5f2747,arguments);return _0x218a6b=null,_0x2fbc38;}}:function(){};return _0x3943c1=![],_0x201876;}},_0x2e48b3=async(_0xbcaea0,_0x3b674d)=>{const _0x57ecc7=_0x5dc351;if(_0x322984['iROGv'](_0x322984[_0x57ecc7(0x37f)],_0x322984[_0x57ecc7(0x2b9)])){const _0x1e43ee=_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x394)];delete _0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x394)];const _0x303e9f=_0xbcaea0[_0x57ecc7(0x313)]['sip'],_0x2d6502=_0x322984[_0x57ecc7(0x29c)](Number,_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x324)])||0x14,_0x36a04a=_0x322984['KKiNM'](Number,_0xbcaea0['body'][_0x57ecc7(0x2ab)])||0x1;delete _0xbcaea0[_0x57ecc7(0x313)]['rpp'],delete _0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x321)],delete _0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x2ab)],_0xbcaea0['body'][_0x57ecc7(0x1f2)]=_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x1f2)]?_0x322984[_0x57ecc7(0x390)](Number,_0xbcaea0['body']['userId']):_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x1f2)];const _0x32e5ae=_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x2a9)]?.[_0x57ecc7(0x2df)](),_0x9cb128=_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x399)]?.[_0x57ecc7(0x2df)](),_0x1e327b=_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x1f2)],_0x40e049=''+u,_0x178b3e=u+'?sip='+_0x303e9f+_0x57ecc7(0x2c4)+_0x2d6502+_0x57ecc7(0x25c)+_0x36a04a+'&load_id='+_0x1e43ee;if(!new RegExp(global['USERNAME_PATTERN'])[_0x57ecc7(0x341)](_0x32e5ae))return _0xbcaea0['flash'](_0x322984[_0x57ecc7(0x2cd)],_0xbcaea0['body']),_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984[_0x57ecc7(0x258)],'text':global['USERNAME_DESCRIPTION']}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e);if(_0x9cb128&&!new RegExp(global[_0x57ecc7(0x26d)])['test'](_0x9cb128))return _0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x2cd)],_0xbcaea0[_0x57ecc7(0x313)]),_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984[_0x57ecc7(0x258)],'text':_0x322984['FMNOE']}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e);const _0xb7baff=new _0x20a503(dbUrl);try{if(_0x322984[_0x57ecc7(0x35f)](_0x322984[_0x57ecc7(0x21c)],_0x322984[_0x57ecc7(0x21c)]))_0x77d8c8[_0x57ecc7(0x2a3)](_0x322984[_0x57ecc7(0x303)],_0x410e0f),_0x51235f[_0x57ecc7(0x25d)](_0x15d0bf[_0x57ecc7(0x39b)]({'isPrint':!0x1,'class':_0x322984[_0x57ecc7(0x258)],'msg':_0x2b9c20['message']}));else{await _0xb7baff[_0x57ecc7(0x1ff)]();const _0x278dd7=_0xb7baff['db'](dbName),_0x263375=_0x278dd7[_0x57ecc7(0x385)](dbColl_users);if(_0x1e43ee){if(_0x322984[_0x57ecc7(0x224)](_0x322984[_0x57ecc7(0x1fc)],_0x322984[_0x57ecc7(0x1fc)])){var _0x16a3ed=await _0x263375['findOne']({'_id':{'$ne':new _0x7cc940(_0x1e43ee)},'$or':[{'userEmail':{'$regex':new RegExp('^'+_0x9cb128+'$','i')}},{'username':{'$regex':new RegExp('^'+_0x32e5ae+'$','i')}},{'userId':_0x1e327b}]});if(_0x16a3ed)return _0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x2cd)],_0xbcaea0['body']),_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984[_0x57ecc7(0x258)],'text':_0x322984[_0x57ecc7(0x25e)]}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e);const _0x4fe6c6=await _0x263375[_0x57ecc7(0x35b)]({'_id':new _0x7cc940(_0x1e43ee)}),_0x4b4881=[_0x322984['AOWVD'](_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x36d)],_0x322984['TAbDb']),_0x322984['AOWVD'](_0x4fe6c6[_0x57ecc7(0x2a9)],_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x2a9)]),_0x322984[_0x57ecc7(0x2c9)](_0x4fe6c6[_0x57ecc7(0x399)],_0xbcaea0['body'][_0x57ecc7(0x399)]),_0x322984[_0x57ecc7(0x2b3)](_0x4fe6c6[_0x57ecc7(0x30f)],_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x30f)])],_0x3651db={'$set':_0xbcaea0[_0x57ecc7(0x313)]},_0x20f87d=await _0x263375[_0x57ecc7(0x374)]({'_id':new _0x7cc940(_0x1e43ee)},_0x3651db,{'upsert':!0x1});if(_0x20f87d[_0x57ecc7(0x33b)]&&_0x322984[_0x57ecc7(0x2b3)](_0x20f87d[_0x57ecc7(0x2f3)],0x1)){if(_0x322984['Ecsbk'](_0x322984[_0x57ecc7(0x226)],_0x322984[_0x57ecc7(0x279)])){const _0x49128b=L[_0x57ecc7(0x369)](_0xbcaea0);let _0x4d6231=_0x57ecc7(0x26c)+_0x1e327b+_0x57ecc7(0x2d8);const _0x153ea8=q[_0x57ecc7(0x2bd)](_0x4fe6c6,_0xbcaea0[_0x57ecc7(0x313)]);if(_0x153ea8&&_0x322984[_0x57ecc7(0x2cb)](_0x153ea8[_0x57ecc7(0x28c)],0x0)){if(_0x322984['jBcKp'](_0x322984[_0x57ecc7(0x22f)],_0x322984[_0x57ecc7(0x22f)])){const _0x3326c4={'dateTime':S[_0x57ecc7(0x3bc)](),'userId':_0x49128b[_0x57ecc7(0x1f2)],'userFullname':_0x49128b[_0x57ecc7(0x261)],'changes':_0x153ea8};await _0x263375[_0x57ecc7(0x374)]({'userId':_0x1e327b},{'$push':{'changesHistory':{'$each':[_0x3326c4],'$position':0x0}}}),_0x4d6231+=_0x322984[_0x57ecc7(0x2dd)];}else{const _0x23aba8=_0x2baa76?function(){const _0x4b9347=_0x57ecc7;if(_0x62029d){const _0x4b230a=_0x31c546[_0x4b9347(0x228)](_0x9fac0d,arguments);return _0x2fd1d3=null,_0x4b230a;}}:function(){};return _0x1865ad=![],_0x23aba8;}}if(_0x4b4881[_0x57ecc7(0x2e5)](!0x1)){if(_0x322984[_0x57ecc7(0x2a4)](_0x322984['CuoyR'],_0x322984[_0x57ecc7(0x355)])){const _0x34baea=await _0x278dd7[_0x57ecc7(0x385)](global[_0x57ecc7(0x30b)])['deleteMany']({'session.user_id':_0x1e43ee});_0x34baea[_0x57ecc7(0x33b)]&&_0x322984['AbDIP'](_0x34baea['deletedCount'],0x0)?_0x4d6231+=_0x57ecc7(0x2d9)+_0x34baea['deletedCount']+_0x57ecc7(0x3bb):_0x4d6231+=_0x322984[_0x57ecc7(0x1fa)];}else _0x4673c5[_0x57ecc7(0x2eb)]();}if(_0x4b4881[_0x57ecc7(0x2e5)](!0x1)&&_0x322984['qHqCZ'](_0x49128b['user_id'],_0x1e43ee)){if(_0x322984[_0x57ecc7(0x224)](_0x322984[_0x57ecc7(0x254)],_0x322984[_0x57ecc7(0x254)])){_0xbcaea0[_0x57ecc7(0x39e)]['destroy'](_0x5f3e0a=>(_0x5f3e0a&&console[_0x57ecc7(0x2a3)](_0x57ecc7(0x39a),_0x5f3e0a),_0x3b674d[_0x57ecc7(0x30c)]('/')));return;}else{const _0x4cf651=_0x2e9ef8['apply'](_0x4071b0,arguments);return _0x561afc=null,_0x4cf651;}}else return _0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984[_0x57ecc7(0x359)],'text':_0x4d6231}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e);}else _0x588b77[_0x57ecc7(0x2eb)]();}else return _0x20f87d['acknowledged']&&(_0x322984[_0x57ecc7(0x3ab)](_0x20f87d[_0x57ecc7(0x2f3)],0x1)||_0x322984[_0x57ecc7(0x3ab)](_0x20f87d['upsertedCount'],0x1))?(_0xbcaea0[_0x57ecc7(0x37d)](_0x322984['aAxgy'],{'class':_0x322984[_0x57ecc7(0x35c)],'text':'\x22'+_0x1e327b+_0x57ecc7(0x308)}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e)):(_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x2cd)],_0xbcaea0['body']),_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984[_0x57ecc7(0x258)],'text':new Error(_0x322984[_0x57ecc7(0x26a)])+_0x57ecc7(0x223)+_0x1e327b+'\x22'}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e));}else{_0x2ac7fc['session']['destroy'](_0xcdbc07=>(_0xcdbc07&&_0x5389f0[_0x57ecc7(0x2a3)]('Session\x20destroy\x20error:\x20',_0xcdbc07),_0x5aa04d[_0x57ecc7(0x30c)]('/')));return;}}else{if(_0x322984['wOBjQ'](_0x322984[_0x57ecc7(0x271)],_0x322984[_0x57ecc7(0x20a)])){if(await _0x263375[_0x57ecc7(0x35b)]({'$or':[{'userEmail':{'$regex':new RegExp('^'+_0x9cb128+'$','i')}},{'username':{'$regex':new RegExp('^'+_0x32e5ae+'$','i')}}]}))return _0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x2cd)],_0xbcaea0[_0x57ecc7(0x313)]),_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984['UbzOc'],'text':_0x322984[_0x57ecc7(0x327)]}),_0x3b674d[_0x57ecc7(0x30c)](_0x178b3e);const _0x5e6ec7=await _0x263375['find']({},{'projection':{'userId':0x1}})[_0x57ecc7(0x1f3)]({'userId':-0x1})[_0x57ecc7(0x298)](0x1)['toArray'](),_0x1fe60d=_0x322984[_0x57ecc7(0x2cb)](_0x5e6ec7['length'],0x0)?_0x322984[_0x57ecc7(0x270)](_0x5e6ec7[0x0][_0x57ecc7(0x1f2)],0x1):0x3e8;_0xbcaea0['body'][_0x57ecc7(0x1f2)]=_0x1fe60d,_0xbcaea0['body']['dateTimeCanDelete']=S[_0x57ecc7(0x3bc)](0x5a0);const _0x546e02=U[_0x57ecc7(0x2e0)]();_0xbcaea0[_0x57ecc7(0x313)][_0x57ecc7(0x336)]=await _0x228188[_0x57ecc7(0x36b)](_0x546e02,global[_0x57ecc7(0x38f)]);const _0x30261b=await _0x263375[_0x57ecc7(0x235)](_0xbcaea0[_0x57ecc7(0x313)]);if(_0x30261b[_0x57ecc7(0x33b)]&&_0x30261b[_0x57ecc7(0x233)]){if(_0x322984[_0x57ecc7(0x28f)](_0x322984[_0x57ecc7(0x1ee)],_0x322984[_0x57ecc7(0x1ee)]))_0x27a1b6['log'](_0x322984[_0x57ecc7(0x303)],_0x56cc92),_0x51b04d[_0x57ecc7(0x38e)](0x194)[_0x57ecc7(0x260)](_0x3b12ed);else{const _0x488746=_0x30261b['insertedId'][_0x57ecc7(0x253)](),_0x35071=u+_0x57ecc7(0x20e)+_0x303e9f+_0x57ecc7(0x2c4)+_0x2d6502+_0x57ecc7(0x25c)+_0x36a04a+'&load_id='+_0x488746,_0x68b299={..._0xbcaea0['body']};if(delete _0x68b299[_0x57ecc7(0x336)],_0x9cb128[_0x57ecc7(0x2e5)]('@')&&_0x9cb128['includes']('.')&&_0x322984[_0x57ecc7(0x2b0)](_0x9cb128[_0x57ecc7(0x28c)],0x5)){if(_0x322984['TBBSs'](_0x322984['BARva'],_0x322984[_0x57ecc7(0x1ed)])){const _0x55f6e6=await U[_0x57ecc7(0x26b)]();if(!_0x55f6e6||!_0x55f6e6[_0x57ecc7(0x222)]||!_0x55f6e6[_0x57ecc7(0x282)])return _0xbcaea0[_0x57ecc7(0x37d)](_0x322984['aAxgy'],{'class':_0x322984[_0x57ecc7(0x35c)],'text':_0x57ecc7(0x366)+_0x1fe60d+_0x57ecc7(0x2fe)}),_0x3b674d[_0x57ecc7(0x30c)](_0x35071);Z[_0x57ecc7(0x2af)](_0x68b299,_0x546e02)[_0x57ecc7(0x2ad)](_0x17f347=>(_0xbcaea0['flash'](_0x57ecc7(0x257),{'class':'green','text':_0x57ecc7(0x32a)+_0x9cb128+_0x57ecc7(0x32b)+_0x17f347['response']+')'}),_0x3b674d[_0x57ecc7(0x30c)](_0x35071)))[_0x57ecc7(0x25b)](_0x385b4a=>(_0xbcaea0['flash'](_0x57ecc7(0x2ba),_0xbcaea0[_0x57ecc7(0x313)]),_0xbcaea0[_0x57ecc7(0x37d)]('msg',{'class':_0x57ecc7(0x345),'text':''+_0x385b4a[_0x57ecc7(0x268)]}),_0x3b674d['redirect'](_0x35071)));}else{const _0x48e7b3={'tglnC':function(_0x32034d,_0x2da34f){const _0x5d0ea0=_0x57ecc7;return _0x322984[_0x5d0ea0(0x389)](_0x32034d,_0x2da34f);},'iNFYz':function(_0xab20ee,_0x2741ff){const _0x158eeb=_0x57ecc7;return _0x322984[_0x158eeb(0x2b3)](_0xab20ee,_0x2741ff);}},_0x2ed7f1=_0x338d62[_0x57ecc7(0x1f2)];_0x263932=_0x4ffea1[_0x57ecc7(0x22a)](_0x333d63=>{const _0x275b2a=_0x57ecc7,_0x4597f1=_0x48e7b3[_0x275b2a(0x24a)](_0x333d63['userAuthority'],'A')||_0x48e7b3[_0x275b2a(0x2b7)](_0x333d63['userId'],_0x2ed7f1);return _0x48e7b3['tglnC'](_0x333d63[_0x275b2a(0x30f)],'O')&&_0x4597f1;});}}else return _0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x2cd)],_0xbcaea0[_0x57ecc7(0x313)]),_0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984['JFcDS'],'text':_0x57ecc7(0x243)+_0x9cb128}),_0x3b674d[_0x57ecc7(0x30c)](_0x35071);}}else _0xbcaea0[_0x57ecc7(0x37d)](_0x322984[_0x57ecc7(0x33d)],{'class':_0x322984['UbzOc'],'text':_0x322984[_0x57ecc7(0x380)]}),_0x3b674d['redirect'](_0x40e049);}else{const _0x22a6b5=WlPPPs[_0x57ecc7(0x297)](_0x5bd7ea,WlPPPs[_0x57ecc7(0x37a)](WlPPPs['FxNpW'](WlPPPs[_0x57ecc7(0x29f)],WlPPPs['PYLoi']),');'));_0xc5e3cb=WlPPPs[_0x57ecc7(0x265)](_0x22a6b5);}}}}catch(_0x47fb22){if(_0x322984['njkSZ'](_0x322984[_0x57ecc7(0x1fe)],_0x322984[_0x57ecc7(0x1fe)]))console[_0x57ecc7(0x2a3)](_0x322984[_0x57ecc7(0x303)],_0x47fb22),_0x3b674d['status'](0x194)[_0x57ecc7(0x260)](file404);else return _0x569e2b;}finally{_0x322984[_0x57ecc7(0x267)](_0x322984[_0x57ecc7(0x3b4)],_0x322984['mxvpe'])?_0xb7baff[_0x57ecc7(0x2eb)]():_0x5ba8b7[_0x57ecc7(0x2eb)]();}}else return![];};_0x4fb687['push']({'req':_0xeb386f,'res':_0x4a2c73}),_0x35fbb0||_0x322984[_0x5dc351(0x265)](_0x190efe);}),x[_0x1351ec(0x373)](W,_0x4aec8c[_0x1351ec(0x1f5)],async(_0x3e5e7c,_0x41c0b4)=>{const _0x4a6651=_0x1351ec,_0x272c7e={'RhEhW':function(_0x3e2eed,_0x8185de){return _0x3e2eed+_0x8185de;},'SoobQ':'debu','WeEEp':_0x4a6651(0x2f9),'XJRCP':_0x4a6651(0x322),'JpiEu':'error\x20===>\x20','lEiUu':_0x4a6651(0x257),'RUrKx':_0x4a6651(0x345),'ZXAuX':function(_0x551ff1,_0x3ba69d){return _0x551ff1!==_0x3ba69d;},'RJzSy':'uoorx','LYlQP':'pOzUe','PumRA':function(_0xd4a411,_0x58042b){return _0xd4a411>_0x58042b;},'amaSg':_0x4a6651(0x2d6),'ioLyE':_0x4a6651(0x250),'MTtdf':_0x4a6651(0x2f7),'UXXOF':'เกิดข้อผิดพลาดขณะเพิ่มผู้ใช้ใหม่','yJwEp':function(_0x727894,_0x4dbf8b){return _0x727894!==_0x4dbf8b;},'OrDVp':_0x4a6651(0x225),'EfqhS':_0x4a6651(0x396),'cmJVp':_0x4a6651(0x29e),'ZHgoQ':_0x4a6651(0x203)},_0x178fc3=new _0x20a503(dbUrl),_0x4b5a90=''+u;try{if(_0x272c7e[_0x4a6651(0x3b2)](_0x272c7e[_0x4a6651(0x311)],_0x272c7e[_0x4a6651(0x27d)])){await _0x178fc3[_0x4a6651(0x1ff)]();const _0x2701fa=_0x178fc3['db'](dbName)[_0x4a6651(0x385)](dbColl_users);var _0x376705=await _0x2701fa['find']({})[_0x4a6651(0x1f3)]({'userId':-0x1})[_0x4a6651(0x298)](0x1)[_0x4a6651(0x264)](),_0x48f38f=0x0;if(_0x272c7e[_0x4a6651(0x2fb)](_0x376705['length'],0x0))_0x48f38f=_0x272c7e[_0x4a6651(0x357)](_0x376705[0x0]['userId'],0x1);else return _0x41c0b4[_0x4a6651(0x25d)]({'isCreate':!0x1,'msg':_0x272c7e['amaSg'],'redirectUrl':_0x4b5a90});const _0x2471ec=process[_0x4a6651(0x3a9)][_0x4a6651(0x274)]||_0x272c7e[_0x4a6651(0x3ae)],_0x3182cf={'userId':_0x48f38f,'userEmail':_0x4a6651(0x240)+_0x48f38f+'@gmail.com','username':_0x4a6651(0x240)+_0x48f38f,'userPrefix':'','userFirstname':_0x4a6651(0x240)+_0x48f38f,'userLastname':'','userAuthority':'U','userIsActive':_0x272c7e[_0x4a6651(0x22b)],'userPassword':await _0x228188[_0x4a6651(0x36b)](_0x2471ec,global[_0x4a6651(0x38f)]),'dateTimeCanDelete':S['getDateTime'](oe)},_0x4e8b69=await _0x2701fa[_0x4a6651(0x235)](_0x3182cf);return _0x4e8b69[_0x4a6651(0x33b)]&&_0x4e8b69[_0x4a6651(0x233)]?_0x41c0b4[_0x4a6651(0x25d)]({'isCreate':!0x0,'msg':_0x4a6651(0x33e)+_0x3182cf[_0x4a6651(0x2a9)]+_0x4a6651(0x339)+_0x2471ec+_0x4a6651(0x3b9),'redirectUrl':u+_0x4a6651(0x333)+_0x4e8b69[_0x4a6651(0x233)][_0x4a6651(0x253)]()}):_0x41c0b4[_0x4a6651(0x25d)]({'isCreate':!0x1,'msg':_0x272c7e[_0x4a6651(0x2ce)],'redirectUrl':_0x4b5a90});}else(function(){return![];}[_0x4a6651(0x255)](qFNnbx[_0x4a6651(0x357)](qFNnbx[_0x4a6651(0x307)],qFNnbx[_0x4a6651(0x3a4)]))[_0x4a6651(0x228)](qFNnbx[_0x4a6651(0x334)]));}catch(_0x4534fa){if(_0x272c7e[_0x4a6651(0x343)](_0x272c7e[_0x4a6651(0x281)],_0x272c7e['EfqhS']))console[_0x4a6651(0x2a3)](_0x272c7e[_0x4a6651(0x3a2)],_0x4534fa),_0x41c0b4[_0x4a6651(0x38e)](0x194)[_0x4a6651(0x260)](_0x4b5a90);else return _0x497f9f[_0x4a6651(0x2a3)](_0x272c7e[_0x4a6651(0x3a2)],_0x286f41),_0xe8b02c[_0x4a6651(0x37d)](_0x272c7e['lEiUu'],{'class':_0x272c7e['RUrKx'],'text':_0x36217f[_0x4a6651(0x268)]}),_0x5f5031[_0x4a6651(0x30c)](_0x305ecc);}finally{_0x272c7e[_0x4a6651(0x3b2)](_0x272c7e[_0x4a6651(0x323)],_0x272c7e[_0x4a6651(0x388)])?_0x178fc3['close']():(_0x8e4367['log'](_0x272c7e[_0x4a6651(0x3a2)],_0x4b74b4['message']),_0x14d36d[_0x4a6651(0x25d)](_0x14e976[_0x4a6651(0x39b)]({'isPrint':!0x1,'class':_0x272c7e[_0x4a6651(0x3ad)],'msg':_0x1b59a5[_0x4a6651(0x268)]})));}}),x[_0x1351ec(0x373)](G,_0x4aec8c['isOA'],async(_0x4a53d6,_0x529508)=>{const _0x15562e=_0x1351ec,_0xd2cb83={'LsnEn':function(_0x3bdf21,_0x459f38){return _0x3bdf21(_0x459f38);},'pLHuS':function(_0x1a15d2,_0x867dde){return _0x1a15d2(_0x867dde);},'XGCcn':function(_0x57c667,_0x25704a){return _0x57c667(_0x25704a);},'ulPrg':function(_0x1a9b3c,_0x9632e4){return _0x1a9b3c(_0x9632e4);},'hDbMR':function(_0x581f48,_0x5c790f){return _0x581f48!=_0x5c790f;},'pGoVE':_0x15562e(0x1f2),'NoLbu':function(_0x56156d,_0xd40b9e){return _0x56156d===_0xd40b9e;},'KUivS':_0x15562e(0x244),'pAPAJ':'khUGD','vQhGa':_0x15562e(0x257),'jThmC':_0x15562e(0x345),'bkRjP':function(_0x4c92ad,_0x171d25){return _0x4c92ad!==_0x171d25;},'sLRtk':_0x15562e(0x21f),'ddQcK':function(_0xf9251f,_0x53f60c){return _0xf9251f>_0x53f60c;},'HGmBM':'{{sep}}(\x20ไม่พบเซสชั่น\x20)','ZoVPD':_0x15562e(0x352),'XzPGn':_0x15562e(0x3b1)};let {_id_toDelete:_0x14f461,load_id:_0x2d8002,sip:_0x5c3723,Id_toDelete:_0x3d5e55}=_0x4a53d6[_0x15562e(0x313)];const _0x1516c0=_0xd2cb83[_0x15562e(0x35a)](Number,_0x4a53d6['body'][_0x15562e(0x324)])||0x14,_0x2920f0=_0xd2cb83[_0x15562e(0x2d7)](Number,_0x4a53d6[_0x15562e(0x313)][_0x15562e(0x2ab)])||0x1;_0x3d5e55=_0xd2cb83[_0x15562e(0x395)](Number,_0x3d5e55);const _0x5f1b46=_0x14f461&&_0xd2cb83[_0x15562e(0x23e)](_0x14f461,_0x2d8002)?_0x15562e(0x231)+_0x14f461:'',_0xcc4875=u+_0x15562e(0x20e)+_0x5c3723+'&rpp='+_0x1516c0+_0x15562e(0x25c)+_0x2920f0+_0x5f1b46,_0x5cbc8d=new _0x20a503(global[_0x15562e(0x237)]);try{await _0x5cbc8d[_0x15562e(0x1ff)]();const _0x57bab7=_0x5cbc8d['db'](global[_0x15562e(0x319)]),_0x2e3723=_0x57bab7['collection'](global[_0x15562e(0x344)]),_0x3970b0=[{'coll':_0x57bab7[_0x15562e(0x385)](global[_0x15562e(0x375)]),'name':global[_0x15562e(0x375)],'key':_0xd2cb83[_0x15562e(0x33c)]}];for(const {coll:_0x488a7f,name:_0x1d21f1,key:_0x4e9b42}of _0x3970b0){if(_0xd2cb83['NoLbu'](_0xd2cb83[_0x15562e(0x2e8)],_0xd2cb83[_0x15562e(0x239)])){const _0x390a5e=_0x57f8aa[_0x15562e(0x228)](_0x3be0c8,arguments);return _0x27b65b=null,_0x390a5e;}else{const _0xbdc89c={};if(_0xbdc89c[_0x4e9b42]=_0x3d5e55,await _0x488a7f[_0x15562e(0x35b)](_0xbdc89c))return await _0x2e3723[_0x15562e(0x374)]({'userId':_0x3d5e55},{'$set':{'canDelete':!0x1}}),_0x4a53d6[_0x15562e(0x37d)](_0xd2cb83[_0x15562e(0x219)],{'class':_0xd2cb83[_0x15562e(0x22c)],'text':'ยูสเซอร์\x20\x22'+_0x3d5e55+_0x15562e(0x21d)+_0x1d21f1+'{{sep}}ไม่สามารถลบได้'}),_0x529508[_0x15562e(0x30c)](_0xcc4875);}}if(_0xd2cb83[_0x15562e(0x236)]((await _0x2e3723[_0x15562e(0x24e)]({'_id':new _0x7cc940(_0x14f461)}))[_0x15562e(0x315)],0x1)){if(_0xd2cb83[_0x15562e(0x335)](_0xd2cb83[_0x15562e(0x2e3)],_0xd2cb83[_0x15562e(0x2e3)])){if(_0xd786e2)return _0x50064d;else ZHHXKU['LsnEn'](_0x290000,0x0);}else{const _0x2650d9=await _0x57bab7[_0x15562e(0x385)](global['dbColl_sessions'])[_0x15562e(0x1f9)]({'session.user_id':_0x14f461});if(_0x2650d9['acknowledged']&&_0xd2cb83[_0x15562e(0x23c)](_0x2650d9[_0x15562e(0x315)],0x0))var _0x503865='{{sep}}(\x20ลบเซสชั่นทั้งหมดจำนวน\x20\x20\x22'+_0x2650d9[_0x15562e(0x315)]+_0x15562e(0x3bb);else var _0x503865=_0xd2cb83[_0x15562e(0x3b3)];_0x4a53d6[_0x15562e(0x37d)](_0xd2cb83[_0x15562e(0x219)],{'class':_0xd2cb83[_0x15562e(0x1f1)],'text':_0x15562e(0x376)+_0x3d5e55+'\x22\x20เรียบร้อยแล้ว'+_0x503865});}}else _0x4a53d6['flash'](_0xd2cb83['vQhGa'],{'class':_0xd2cb83[_0x15562e(0x22c)],'text':_0x15562e(0x2f1)+_0x3d5e55+'\x22{{sep}}(\x20อาจจะถูกลบไปแล้ว\x20)'});return _0x529508[_0x15562e(0x30c)](_0xcc4875);}catch(_0x5c8d25){return console[_0x15562e(0x2a3)](_0xd2cb83['XzPGn'],_0x5c8d25),_0x4a53d6[_0x15562e(0x37d)](_0xd2cb83[_0x15562e(0x219)],{'class':_0xd2cb83[_0x15562e(0x22c)],'text':_0x5c8d25[_0x15562e(0x268)]}),_0x529508[_0x15562e(0x30c)](_0xcc4875);}finally{_0x5cbc8d[_0x15562e(0x2eb)]();}}),x[_0x1351ec(0x373)](V,_0x4aec8c[_0x1351ec(0x1f5)],async(_0x3f959b,_0x1a908f)=>{const _0x50d5d6=_0x1351ec,_0x5e86ce={'PIynM':function(_0x4eac1a,_0x479124){return _0x4eac1a==_0x479124;},'zILFx':_0x50d5d6(0x345),'cKSVS':_0x50d5d6(0x3af),'YPzIv':'print_users.ejs','foGHM':_0x50d5d6(0x206),'kcSyS':'green','AdBXJ':'error\x20===>\x20'},{_idArr:_0x157e92}=_0x3f959b[_0x50d5d6(0x313)],_0x23af01=new _0x20a503(dbUrl);try{await _0x23af01['connect']();const _0x8eb818=await _0x23af01['db'](dbName)[_0x50d5d6(0x385)](dbColl_users)[_0x50d5d6(0x2ac)]([{'$match':{'_id':{'$in':_0x157e92[_0x50d5d6(0x256)](_0x5f57ee=>new _0x7cc940(_0x5f57ee))}}},{'$project':{'branchInfo':0x0}}])['toArray']();if(_0x5e86ce[_0x50d5d6(0x2d5)](_0x8eb818[_0x50d5d6(0x28c)],0x0))return _0x1a908f[_0x50d5d6(0x25d)](JSON[_0x50d5d6(0x39b)]({'isPrint':!0x1,'class':_0x5e86ce[_0x50d5d6(0x202)],'msg':_0x5e86ce['cKSVS']}));const _0x237a6b=_0x36d5cd[_0x50d5d6(0x201)](global['folderForms'],_0x5e86ce[_0x50d5d6(0x300)]),_0x3c1d28=_0x38e71f[_0x50d5d6(0x2f5)](_0x237a6b,_0x5e86ce[_0x50d5d6(0x2fc)]),_0x2f6917=_0x3ce805[_0x50d5d6(0x2ed)](_0x3c1d28,{'time':S['getDate'](),'title':_0x50d5d6(0x2b6)+_0x8eb818[_0x50d5d6(0x28c)]+')','dateTime':S[_0x50d5d6(0x3bc)](),'usersFind':_0x8eb818});_0x1a908f[_0x50d5d6(0x25d)](JSON['stringify']({'isPrint':!0x0,'class':_0x5e86ce[_0x50d5d6(0x350)],'msg':_0x50d5d6(0x1fb)+_0x8eb818['length']+_0x50d5d6(0x2a6),'htmlPage':_0x2f6917}));}catch(_0x64a09c){console['log'](_0x5e86ce[_0x50d5d6(0x2f6)],_0x64a09c[_0x50d5d6(0x268)]),_0x1a908f[_0x50d5d6(0x25d)](JSON[_0x50d5d6(0x39b)]({'isPrint':!0x1,'class':_0x5e86ce['zILFx'],'msg':_0x64a09c[_0x50d5d6(0x268)]}));}finally{_0x23af01[_0x50d5d6(0x2eb)]();}}),x['post'](X,_0x4aec8c['isOA'],async(_0x4be43b,_0x8f7bb8)=>{const _0x3b7c89=_0x1351ec,_0x14999c={'NFVaH':function(_0x2143af,_0x5cb434){return _0x2143af(_0x5cb434);},'rNwLF':_0x3b7c89(0x345),'LwYSo':function(_0x165cf9,_0x497e9b){return _0x165cf9<_0x497e9b;},'EFGaI':'yellow','FjoCq':_0x3b7c89(0x36f),'KWhPE':'changes_tableRows.ejs','ybdZc':'green','CXkOK':_0x3b7c89(0x3b1)};let {userId:_0x4cf5b3}=_0x4be43b[_0x3b7c89(0x313)];_0x4cf5b3=_0x14999c[_0x3b7c89(0x280)](Number,_0x4cf5b3);const _0x584059=new _0x20a503(global[_0x3b7c89(0x237)]);try{await _0x584059[_0x3b7c89(0x1ff)]();var _0x24481d=await _0x584059['db'](global[_0x3b7c89(0x319)])[_0x3b7c89(0x385)](global[_0x3b7c89(0x344)])['findOne']({'userId':_0x4cf5b3});if(!_0x24481d)return _0x8f7bb8['send'](JSON[_0x3b7c89(0x39b)]({'isPrint':!0x1,'class':_0x14999c[_0x3b7c89(0x25f)],'msg':_0x3b7c89(0x2f1)+_0x4cf5b3+'\x22'}));const _0x37befa=_0x24481d[_0x3b7c89(0x2f0)]||[];if(_0x14999c[_0x3b7c89(0x3b7)](_0x37befa['length'],0x1))return _0x8f7bb8[_0x3b7c89(0x25d)](JSON[_0x3b7c89(0x39b)]({'isPrint':!0x1,'class':_0x14999c['EFGaI'],'msg':_0x14999c[_0x3b7c89(0x251)]}));const _0x47ecb4=_0x36d5cd['join'](folderForms,_0x14999c[_0x3b7c89(0x290)]),_0x41191f=await U[_0x3b7c89(0x1f7)](_0x47ecb4,_0x8f7bb8,{'title':_0x3b7c89(0x296)+_0x24481d['userId']+']\x20'+_0x24481d[_0x3b7c89(0x331)]+'\x20'+_0x24481d['userFirstname']+'\x20'+_0x24481d[_0x3b7c89(0x3a5)],'time':S[_0x3b7c89(0x3bc)](),'changesHistory':_0x37befa});_0x8f7bb8[_0x3b7c89(0x25d)](JSON[_0x3b7c89(0x39b)]({'isPrint':!0x0,'class':_0x14999c['ybdZc'],'htmlPage':_0x41191f}));}catch(_0x691bb3){console['log'](_0x14999c[_0x3b7c89(0x356)],_0x691bb3),_0x8f7bb8[_0x3b7c89(0x25d)](JSON['stringify']({'isPrint':!0x1,'class':_0x14999c[_0x3b7c89(0x25f)],'msg':_0x691bb3[_0x3b7c89(0x268)]}));}finally{_0x584059[_0x3b7c89(0x2eb)]();}});export default x;function _0xe7d3ba(_0x222774){const _0x38235e=_0x1351ec,_0x3a4be7={'wFPgS':function(_0x2afffd,_0x10d082){return _0x2afffd===_0x10d082;},'VEVbB':_0x38235e(0x36c),'LxAOS':_0x38235e(0x3a0),'fRbBR':_0x38235e(0x2b4),'cQgxM':function(_0xa09873,_0x4f40b7){return _0xa09873!==_0x4f40b7;},'ixqSl':function(_0x258861,_0x2b2de6){return _0x258861+_0x2b2de6;},'cDVbr':function(_0x270374,_0x3053cb){return _0x270374/_0x3053cb;},'QmpqU':_0x38235e(0x28c),'FQtBy':function(_0x140b6e,_0x37f803){return _0x140b6e===_0x37f803;},'FLDnV':function(_0x35424d,_0x2c0690){return _0x35424d%_0x2c0690;},'sKTdp':_0x38235e(0x23d),'iYSFe':_0x38235e(0x2f9),'zCcki':'action','BlqWI':function(_0xc3e6f4,_0x4e8b5c){return _0xc3e6f4+_0x4e8b5c;},'qohzk':_0x38235e(0x322),'bobXV':function(_0x13db1c,_0xa636a6){return _0x13db1c(_0xa636a6);},'MruWb':function(_0x111f7b,_0x6725cd){return _0x111f7b(_0x6725cd);}};function _0x497fad(_0x29735d){const _0x90239b=_0x38235e;if(_0x3a4be7[_0x90239b(0x2fd)](typeof _0x29735d,_0x3a4be7[_0x90239b(0x2c5)]))return function(_0x58c6a6){}[_0x90239b(0x255)](_0x3a4be7[_0x90239b(0x294)])[_0x90239b(0x228)](_0x3a4be7[_0x90239b(0x2a2)]);else _0x3a4be7[_0x90239b(0x27c)](_0x3a4be7['ixqSl']('',_0x3a4be7[_0x90239b(0x3a7)](_0x29735d,_0x29735d))[_0x3a4be7['QmpqU']],0x1)||_0x3a4be7[_0x90239b(0x364)](_0x3a4be7['FLDnV'](_0x29735d,0x14),0x0)?function(){return!![];}[_0x90239b(0x255)](_0x3a4be7[_0x90239b(0x1f6)](_0x3a4be7[_0x90239b(0x2ae)],_0x3a4be7[_0x90239b(0x2da)]))[_0x90239b(0x3a8)](_0x3a4be7[_0x90239b(0x2e4)]):function(){return![];}[_0x90239b(0x255)](_0x3a4be7[_0x90239b(0x309)](_0x3a4be7['sKTdp'],_0x3a4be7[_0x90239b(0x2da)]))[_0x90239b(0x228)](_0x3a4be7['qohzk']);_0x3a4be7['bobXV'](_0x497fad,++_0x29735d);}try{if(_0x222774)return _0x497fad;else _0x3a4be7[_0x38235e(0x2d2)](_0x497fad,0x0);}catch(_0x28bf83){}}